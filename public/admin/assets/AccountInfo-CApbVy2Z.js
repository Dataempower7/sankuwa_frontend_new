import{d as C,r as d,b as I,ab as x,f as c,g as A,h as v,i as s,k as B,l as N,m as u,z as o,P as p}from"./index-B52YIGC0.js";import{a as R,u as T}from"./accountManage-AaZJSGj-.js";const q={class:"container"},M={class:"content_wrapper"},L={class:"lyecs-form-table"},z=C({__name:"AccountInfo",props:{id:{type:Number,default:0},adminId:{type:String,default:""},act:{type:String,default:""},type:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(y,{expose:_,emit:b}){const n=b,r=y,f=d(!1),V=I().currentRoute.value.query,k=d(r.isDialog?r.id:Number(V.id)),g=x(),e=d({});(async()=>{try{const t=await R({id:k.value,adminId:r.adminId,type:r.type});e.value=t}catch(t){p.error(t.message),n("close")}finally{f.value=!1}})();const w=async()=>{await g.value.validate();try{n("update:confirmLoading",!0);const t=await T(e.value);n("submitCallback",t),p.success("操作成功")}catch(t){p.error(t.message)}finally{n("update:confirmLoading",!1)}};return _({onFormSubmit:()=>{w()}}),(t,a)=>{const i=c("TigInput"),m=c("el-form-item"),S=c("el-form");return v(),A("div",q,[s("div",M,[s("div",L,[f.value?N("",!0):(v(),B(S,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:u(()=>[o(m,{label:"账号名称",prop:"username",rules:[{required:!0,message:"请输入账号名称!"}]},{default:u(()=>[o(i,{classType:"tig-form-input",modelValue:e.value.username,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.username=l)},null,8,["modelValue"])]),_:1}),o(m,{label:"手机号",prop:"mobile",rules:[{required:!0,message:"请输入手机号!"}]},{default:u(()=>[o(i,{classType:"tig-form-input",modelValue:e.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.mobile=l),type:"integer"},null,8,["modelValue"])]),_:1}),o(m,{label:"邮箱"},{default:u(()=>[s("div",null,[s("div",null,[o(i,{classType:"tig-form-input",modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.email=l)},null,8,["modelValue"])]),a[3]||(a[3]=s("div",{class:"extra"},"注意：修改账号名称或手机会影响到此账号登录后台的所有角色账号（比如管理员、店铺、门店、供应商等）",-1))])]),_:1})]),_:1},8,["model"]))])])])}}});export{z as default};

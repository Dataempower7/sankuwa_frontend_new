/* empty css                                                                  */import{_ as S}from"./Checkbox.vue_vue_type_script_setup_true_lang-CA619vaZ.js";import{d as U,aq as w,ar as z,o as R,r as A,x as j,as as D,P as H,f as I,g as v,h as d,z as r,l as b,m as o,k as f,j as n,Q as p,i as u,t as B,F as C,p as L,_ as q,W as E}from"./index-B52YIGC0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{S as Q}from"./SelectProduct-C4WsEKWV.js";import{g as W}from"./article-rWlGXn3e.js";/* empty css                                                                    */import{P as G}from"./Pagination-C8J7-6Em.js";import{_ as J}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";/* empty css                                                                              *//* empty css                                                                     *//* empty css             */const K={class:"lyecs-article-select-group"},X={key:2,class:"ml10"},Y={key:0,class:"lyecs-article-selected-con"},Z={class:"article-selected-list"},_={class:"article-selected-list-tr"},h={class:"col col2 article-info"},ee={class:"col col3"},le=["onClick"],te={key:0,class:"pagination-con"},ae=U({__name:"SelectArticle",props:w({max:{type:Number,default:-1},disabled:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!0}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:V}){const s=t,i=z(t,"modelValue");R(async()=>{i.value&&i.value.length>0&&await N(i.value)});const e=A([]),m=A(0),M=j(),a=A(!0),g=D({page:1,size:M.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),k=A(""),N=async c=>{a.value=!0;try{k.value=Array.isArray(c)?c.join(","):"";const l=await W({articleIds:k.value,...g});e.value=l.records,m.value=l.total}catch(l){H.error(l.message)}finally{a.value=!1}},T=c=>{let l=i.value;s.isMultiple==!1&&(l=[]);for(let y in c)l.push(c[y]);i.value=l,N(l)},P=()=>{e.value=[],i.value=[]},$=c=>{let l=e.value[c].articleId;i.value=i.value.filter(y=>y!==l),e.value.splice(c,1)};return V({modelValue:i,articleList:e}),(c,l)=>{const y=I("el-button"),F=I("el-space");return d(),v("div",K,[r(F,null,{default:o(()=>[t.disabled?(d(),f(y,{key:1,disabled:t.max>0&&i.value.length>=t.max||t.disabled,type:"primary"},{default:o(()=>[...l[3]||(l[3]=[p("选择文章",-1)])]),_:1},8,["disabled"])):(d(),f(n(J),{key:0,params:{selectedIds:i.value,isMultiple:s.isMultiple},isDrawer:"",path:"content/article/src/SelectArticle",title:"选择文章",width:"600px",onOkCallback:T},{default:o(()=>[r(y,{disabled:t.max>0&&i.value.length>=t.max,type:"primary"},{default:o(()=>[...l[2]||(l[2]=[p("选择文章",-1)])]),_:1},8,["disabled"])]),_:1},8,["params"])),t.isMultiple&&i.value.length>0?(d(),v("span",X,[l[4]||(l[4]=p("已选择 ",-1)),u("b",null,B(i.value.length),1),l[5]||(l[5]=p(" 个文章",-1))])):b("",!0),t.isMultiple&&i.value.length>0?(d(),f(y,{key:3,disabled:t.disabled,onClick:P},{default:o(()=>[...l[6]||(l[6]=[p("清空",-1)])]),_:1},8,["disabled"])):b("",!0)]),_:1}),e.value.length>0&&!a.value?(d(),v("div",Y,[u("div",Z,[l[7]||(l[7]=u("div",{class:"article-selected-list-tr article-selected-list-th"},[u("div",{class:"col col2"},"文章名称"),u("div",{class:"col col3"},"操作")],-1)),(d(!0),v(C,null,L(e.value,(x,O)=>(d(),v("div",_,[u("div",h,B(x.articleTitle),1),u("div",ee,[u("a",{class:"del-btn",onClick:ie=>$(O)},"删除",8,le)])]))),256))]),m.value>0?(d(),v("div",te,[r(n(G),{page:g.page,"onUpdate:page":l[0]||(l[0]=x=>g.page=x),size:g.size,"onUpdate:size":l[1]||(l[1]=x=>g.size=x),total:m.value,onCallback:N,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):b("",!0)])):b("",!0)])}}}),se=q(ae,[["__scopeId","data-v-44a434fb"]]),xe=U({__name:"AdvancedInfo",props:w({id:{type:Number,default:0},shopId:{type:Number,default:0},examine:{type:Number,default:0},loading:{type:Boolean,default:!1}},{formState:{default:{}},formStateModifiers:{}}),emits:["update:formState"],setup(t){const V=E(),s=z(t,"formState");return(i,e)=>{const m=I("el-form-item"),M=I("TigInput");return d(),v(C,null,[n(V)==="admin"?(d(),f(m,{key:0,label:"加入推荐"},{default:o(()=>[r(n(S),{modelValue:s.value.isBest,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.isBest=a),disabled:t.examine==1},{default:o(()=>[...e[6]||(e[6]=[p(" 精品",-1)])]),_:1},8,["modelValue","disabled"]),r(n(S),{modelValue:s.value.isNew,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.isNew=a),disabled:t.examine==1},{default:o(()=>[...e[7]||(e[7]=[p(" 新品",-1)])]),_:1},8,["modelValue","disabled"]),r(n(S),{modelValue:s.value.isHot,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.isHot=a),disabled:t.examine==1},{default:o(()=>[...e[8]||(e[8]=[p(" 热销",-1)])]),_:1},8,["modelValue","disabled"])]),_:1})):b("",!0),r(m,{label:"服务说明",prop:"productServiceIds"},{default:o(()=>[(d(!0),v(C,null,L(s.value.serviceList,(a,g)=>(d(),f(n(S),{key:g,modelValue:a.check,"onUpdate:modelValue":k=>a.check=k,disabled:t.examine==1},{default:o(()=>[p(B(a.productServiceName),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]))),128))]),_:1}),r(m,{class:"inner-item",label:"显示销量",prop:"virtualSales"},{default:o(()=>[u("div",null,[r(M,{modelValue:s.value.virtualSales,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.virtualSales=a),disabled:t.examine==1,class:"InputBox",type:"integer",width:"190px"},null,8,["modelValue","disabled"]),e[9]||(e[9]=u("div",{class:"extra"},"显示销量会随下单而增加，但不是真实销售数据",-1))])]),_:1}),r(m,{label:"相关商品",prop:"productRelated"},{default:o(()=>[t.loading?b("",!0):(d(),f(n(Q),{key:0,ids:s.value.productRelated,"onUpdate:ids":e[4]||(e[4]=a=>s.value.productRelated=a),disabled:t.examine==1,max:10},null,8,["ids","disabled"])),e[10]||(e[10]=u("div",{class:"extra"},"最多添加10个商品，仅用于在商品详情页展示",-1))]),_:1}),n(V)==="admin"?(d(),f(m,{key:1,label:"关联文章",prop:"productArticleList"},{default:o(()=>[t.loading?b("",!0):(d(),f(n(se),{key:0,modelValue:s.value.productArticleList,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.productArticleList=a),disabled:t.examine==1,max:10},null,8,["modelValue","disabled"])),e[11]||(e[11]=u("div",{class:"extra"},"最多添加10篇文章",-1))]),_:1})):b("",!0)],64)}}});export{xe as _};

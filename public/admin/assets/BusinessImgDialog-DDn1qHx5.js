import{F as T}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{_ as E}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{i as D}from"./format-BxqOrW-w.js";import{d as F,r as i,b as R,ab as j,o as q,P as p,f,g as z,h as V,i as l,k as U,l as A,m as c,z as s,j as g,_ as G}from"./index-B52YIGC0.js";import{g as M}from"./languagesList-C1QUNmfU.js";import{g as O,f as P}from"./currencyManagement-DNysi_dA.js";import"./BusinessImg-B_fZOjqm.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */const $={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},K={class:"item-image-src"},Q={style:{padding:"10px 0"}},W=F({__name:"BusinessImgDialog",props:{id:{type:Number,default:0},dataType:{type:Number,default:0},act:{type:String,default:""},translationName:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(v,{expose:w,emit:L}){const r=L,t=v,m=i(!0),y=R().currentRoute.value.query,_=i(t.isDialog?t.act:String(y.act));i(t.isDialog?t.id:Number(y.id)),_.value;const b=j(),n=i({translationName:t.translationName,dataType:t.dataType,items:[]});q(()=>{_.value==="detail"?x():(m.value=!1,h())});const x=async()=>{try{const a=await O({dataType:t.dataType,dataId:0,translationName:t.translationName});n.value.items=a.items,h()}catch(a){p.error(a.message),r("close")}finally{m.value=!1}},u=i([]),h=async()=>{try{const a=await M({isEnabled:1,size:-1});a.records.forEach(e=>{e.translationValue=""}),Object.assign(u.value,a.records),_.value==="detail"&&n.value.items.length>0&&n.value.items.forEach(e=>{u.value.forEach(o=>{e.localeId===o.id&&(o.translationValue=e.translationValue)})})}catch(a){p.error(a.message),r("close")}finally{m.value=!1}},k=a=>{let e=[];return a.forEach(o=>{let d={localeId:o.id,translationValue:o.translationValue};e.push(d)}),e},C=async()=>{await b.value.validate();try{r("update:confirmLoading",!0);const a=await P({dataId:0,...n.value,items:k(u.value)});r("submitCallback",a),p.success("操作成功")}catch(a){p.error(a.message)}finally{r("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{C()}}),(a,e)=>{const o=f("el-form-item"),d=f("el-table-column"),B=f("el-table"),I=f("el-form");return V(),z("div",$,[l("div",H,[l("div",J,[m.value?A("",!0):(V(),U(I,{key:0,ref_key:"formRef",ref:b,model:n.value,"label-width":"auto"},{default:c(()=>[s(o,{prop:"translationName",label:"原图："},{default:c(()=>[l("div",null,[l("div",K,[s(g(E),{src:g(D)(v.translationName),fit:"contain",style:{height:"300px",width:"300px"}},null,8,["src"])]),e[0]||(e[0]=l("div",{class:"extra"},"如果未设置单独语言图片，则默认使用原图。",-1))])]),_:1}),s(o,{prop:"language",label:"翻译图片："},{default:c(()=>[s(B,{data:u.value,style:{width:"100%"}},{default:c(()=>[s(d,{prop:"language",label:"语言",width:"180"}),s(d,{prop:"translationValue",label:"翻译图片"},{default:c(({row:N})=>[l("div",Q,[s(g(T),{photo:N.translationValue,"onUpdate:photo":S=>N.translationValue=S},null,8,["photo","onUpdate:photo"])])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["model"]))])])])}}}),ma=G(W,[["__scopeId","data-v-db75c132"]]);export{ma as default};

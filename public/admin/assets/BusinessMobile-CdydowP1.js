import{d as I,r as M,Y as N,f as h,g as i,h as r,z as m,m as f,i as v,F as _,p as k,k as y,l as V,Q as x,_ as T}from"./index-B52YIGC0.js";const $={class:"time-cycle"},q={class:"item"},z={class:"mb10"},F={class:"flex"},P={key:0,class:"flex"},A={key:1},L=I({__name:"BusinessMobile",props:{formData:{type:Array,default:[]}},setup(w,{expose:g}){const c=M([{type:1,checked:!1,label:"普通座机号",mobiles:[{code:"",value:""}]},{type:2,checked:!1,label:"企业座机号",mobiles:[{code:"",value:""}]},{type:3,checked:!1,label:"手机号码",mobiles:[{code:"",value:""}]}]),C=w;N(()=>C.formData,t=>{t.length>0&&(c.value=c.value.map(e=>{const d=t.filter(o=>o.type===e.type);return e.checked=d.length>0,e.mobiles=d.flatMap(o=>{var s,u;return e.type!==3?[{code:((s=o.values)==null?void 0:s.split("-")[0])||"",value:((u=o.values)==null?void 0:u.split("-")[1])||""}]:[{code:"",value:o.values||""}]}),e}))},{deep:!0,immediate:!0});const D=t=>{t.mobiles.push({code:"",value:""})},U=(t,e)=>{c.value[t].mobiles.splice(e,1)},B=(t,e,d)=>{let o=!1;if(c.value.forEach(s=>{if(s.checked){o=!0;return}}),!o){d(new Error("请选择联系电话"));return}d()},E=(t,e,d)=>{const o=/mobileData\.(\d+)\.mobiles\.(\d+)/,s=t==null?void 0:t.field.match(o),u=s[1],l=s[2];let n=c.value[u],a=c.value[u].mobiles[l];if(n.checked&&n.type!==3&&(!a.code||!a.value)){d(new Error("请输入号码"));return}if(n.checked&&n.type===3&&!a.value){d(new Error("请输入手机号码"));return}if(n.checked&&n.type===3&&!a.value.match(/^1[3-9]\d{9}$/)){d(new Error("请输入正确的手机号码"));return}d()};return g({formData:c}),(t,e)=>{const d=h("el-checkbox"),o=h("TigInput"),s=h("el-button"),u=h("el-form-item");return r(),i("div",$,[m(u,{label:"联系电话",prop:"mobileData",rules:[{required:!0,validator:B}]},{default:f(()=>[v("div",null,[(r(!0),i(_,null,k(c.value,(l,n)=>(r(),i("div",q,[m(d,{modelValue:l.checked,"onUpdate:modelValue":a=>l.checked=a,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"]),v("div",null,[(r(!0),i(_,null,k(l.mobiles,(a,b)=>(r(),i("div",z,[m(u,{label:"",prop:"mobileData."+n+".mobiles."+b,rules:[{required:!!l.checked,validator:E}]},{default:f(()=>[v("div",F,[l.type!==3?(r(),i("div",P,[m(o,{width:"60px",placeholder:"区号",modelValue:a.code,"onUpdate:modelValue":p=>a.code=p,disabled:!l.checked},null,8,["modelValue","onUpdate:modelValue","disabled"]),e[0]||(e[0]=v("div",{class:"ml10 mr10",style:{"font-size":"20px","font-weight":"bold"}},"-",-1)),m(o,{width:"200px",placeholder:"座机号",modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,disabled:!l.checked},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(r(),i("div",A,[m(o,{width:"290px",placeholder:"请输入联系电话",modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,disabled:!l.checked},null,8,["modelValue","onUpdate:modelValue","disabled"])])),l.mobiles.length>1?(r(),y(s,{key:2,class:"ml10",type:"primary",link:"",onClick:p=>U(n,b)},{default:f(()=>[...e[1]||(e[1]=[x("删除",-1)])]),_:1},8,["onClick"])):V("",!0)])]),_:2},1032,["prop","rules"])]))),256)),l.mobiles.length<2?(r(),y(s,{key:0,link:"",type:"primary",onClick:a=>D(l),disabled:!l.checked},{default:f(()=>[...e[2]||(e[2]=[x(" 添加号码 ",-1)])]),_:1},8,["onClick","disabled"])):V("",!0)])]))),256)),e[3]||(e[3]=v("div",{class:"extra"},"请填写门店电话，该电话会显示在用户端店铺详情中 查看示例",-1))])]),_:1},8,["rules"])])}}}),Y=T(L,[["__scopeId","data-v-10be89a0"]]);export{Y as default};

import{_ as R}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{i as A}from"./format-BxqOrW-w.js";import{d as D}from"./adminMsg-BS0ZiVYJ.js";import{d as N,cd as S,f6 as T,r as u,b as F,f as L,g as o,h as l,l as _,i as e,z as m,j as f,t as r,n as p,F as O,p as V,Q as z,P as h,_ as B}from"./index-B52YIGC0.js";import{d as M}from"./order-BVunCi_y.js";import{_ as g}from"./DetailBtn.vue_vue_type_script_setup_true_lang-BJTr0sSw.js";import{c as $}from"./aftersales-Bt16NHXV.js";import"./index-KjhYqCTY.js";import"./index-C9ZdVeVx.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const j={key:0,class:"loading-box"},H={class:"loading-inner"},q={class:"left"},E={class:"text"},P={class:"right"},Q={class:"time"},U={style:{margin:"10px"}},G={key:0},J={key:0,class:"item"},K={class:"product_info"},W={class:"info"},X={class:"txt"},Y={key:1,class:"money_box"},Z={class:"more"},ee={key:1},te=["innerHTML"],se={class:"more"},ae=N({__name:"Collapse",props:{item:{type:Object,default:{}}},emits:["setReadedCallback","close"],setup(n,{emit:y}){const x=S(T,{spin:!0}),d=u(!1);F();const v=y,i=u(!1),k=u(!0),a=u(),b=async s=>{if(s.isReaded||(await D({msgId:s.msgId}),s.isReaded=1,v("setReadedCallback",!0)),!i.value&&s.relatedData.aftersaleId){await C(s.relatedData.aftersaleId);return}if(!i.value&&s.relatedData.orderId){await w(s.relatedData.orderId);return}i.value=!i.value,k.value=!1},w=async s=>{d.value=!0;try{const t=await M("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}},C=async s=>{d.value=!0;try{const t=await $("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}};return(s,t)=>{const I=L("a-spin");return l(),o("div",{class:p(["collapse",i.value?"show":"hide"])},[d.value?(l(),o("div",j,[e("div",H,[m(I,{size:"small",indicator:f(x)},null,8,["indicator"])])])):_("",!0),e("div",{class:p(["cell",n.item.isReaded==0?"unread":""]),onClick:t[0]||(t[0]=c=>b(n.item))},[e("div",q,[t[1]||(t[1]=e("div",{class:"badge"},null,-1)),e("div",E,r(n.item.title),1)]),e("div",P,[e("div",Q,r(n.item.sendTime),1),t[2]||(t[2]=e("div",{class:"icon"},[e("i",{class:"nav-icon iconfont icon-xiala"})],-1))])],2),e("div",{class:p(["content_box",i.value?"show":"hide"])},[e("div",U,[a.value?(l(),o("div",G,["items"in a.value?(l(),o("div",J,[(l(!0),o(O,null,V(a.value.items,c=>(l(),o("div",K,[e("div",W,[m(f(R),{width:"60",src:f(A)(c.picThumb),fit:"contain"},null,8,["src"]),e("p",null,r(c.productName),1)]),e("div",X,[e("p",null,"¥"+r(c.price),1),e("p",null,"x "+r(c.quantity),1)])]))),256))])):_("",!0),"totalAmount"in a.value?(l(),o("div",Y,[e("div",null,[z(" 订单金额：¥"+r(a.value.totalAmount)+" ",1),e("span",null,"(含运费："+r(a.value.shippingFee)+")",1)])])):_("",!0),e("div",Z,[m(g,{item:n.item,orderSn:a.value.orderSn},null,8,["item","orderSn"])])])):(l(),o("div",ee,[e("div",{class:"item",innerHTML:n.item.content},null,8,te),e("div",se,[m(g,{item:n.item},null,8,["item"])])]))])],2)],2)}}}),_e=B(ae,[["__scopeId","data-v-972a0a59"]]);export{_e as default};

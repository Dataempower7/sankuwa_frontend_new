import{_ as R}from"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import{i as A}from"./format-DdZABYp4.js";import{d as D}from"./adminMsg-DpQlgfUi.js";import{d as L,c3 as N,eH as S,r as u,a as T,e as F,f as o,g as l,k as _,h as e,z as m,i as f,t as r,n as p,F as O,m as V,L as z,K as h,_ as B}from"./index-BLXOA87U.js";import{c as H}from"./order-na2xscMr.js";import{_ as g}from"./DetailBtn.vue_vue_type_script_setup_true_lang-COtJoPdM.js";import{c as M}from"./aftersales-YhTMzmV_.js";import"./index-DpgvsnVO.js";import"./index-B16C4gX_.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";const $={key:0,class:"loading-box"},j={class:"loading-inner"},q={class:"left"},E={class:"text"},K={class:"right"},U={class:"time"},G={style:{margin:"10px"}},J={key:0},P={key:0,class:"item"},Q={class:"product_info"},W={class:"info"},X={class:"txt"},Y={key:1,class:"money_box"},Z={class:"more"},ee={key:1},te=["innerHTML"],se={class:"more"},ae=L({__name:"Collapse",props:{item:{type:Object,default:{}}},emits:["setReadedCallback","close"],setup(n,{emit:y}){const x=N(S,{spin:!0}),d=u(!1);T();const v=y,i=u(!1),k=u(!0),a=u(),w=async s=>{if(s.isReaded||(await D({msgId:s.msgId}),s.isReaded=1,v("setReadedCallback",!0)),!i.value&&s.relatedData.aftersaleId){await b(s.relatedData.aftersaleId);return}if(!i.value&&s.relatedData.orderId){await C(s.relatedData.orderId);return}i.value=!i.value,k.value=!1},C=async s=>{d.value=!0;try{const t=await H("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}},b=async s=>{d.value=!0;try{const t=await M("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}};return(s,t)=>{const I=F("a-spin");return l(),o("div",{class:p(["collapse",i.value?"show":"hide"])},[d.value?(l(),o("div",$,[e("div",j,[m(I,{size:"small",indicator:f(x)},null,8,["indicator"])])])):_("",!0),e("div",{class:p(["cell",n.item.isReaded==0?"unread":""]),onClick:t[0]||(t[0]=c=>w(n.item))},[e("div",q,[t[1]||(t[1]=e("div",{class:"badge"},null,-1)),e("div",E,r(n.item.title),1)]),e("div",K,[e("div",U,r(n.item.sendTime),1),t[2]||(t[2]=e("div",{class:"icon"},[e("i",{class:"nav-icon iconfont icon-xiala"})],-1))])],2),e("div",{class:p(["content_box",i.value?"show":"hide"])},[e("div",G,[a.value?(l(),o("div",J,["items"in a.value?(l(),o("div",P,[(l(!0),o(O,null,V(a.value.items,c=>(l(),o("div",Q,[e("div",W,[m(f(R),{width:"60",src:f(A)(c.picThumb),fit:"contain"},null,8,["src"]),e("p",null,r(c.productName),1)]),e("div",X,[e("p",null,"¥"+r(c.price),1),e("p",null,"x "+r(c.quantity),1)])]))),256))])):_("",!0),"totalAmount"in a.value?(l(),o("div",Y,[e("div",null,[z(" 订单金额：¥"+r(a.value.totalAmount)+" ",1),e("span",null,"(含运费："+r(a.value.shippingFee)+")",1)])])):_("",!0),e("div",Z,[m(g,{item:n.item,orderSn:a.value.orderSn},null,8,["item","orderSn"])])])):(l(),o("div",ee,[e("div",{class:"item",innerHTML:n.item.content},null,8,te),e("div",se,[m(g,{item:n.item},null,8,["item"])])]))])],2)],2)}}}),_e=B(ae,[["__scopeId","data-v-972a0a59"]]);export{_e as default};

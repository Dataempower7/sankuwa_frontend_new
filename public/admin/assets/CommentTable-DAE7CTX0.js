import{d as R,aq as w,ar as p,x as V,f as C,g as r,h as o,z as a,l as n,m,k as g,i as d,t as _,j as v,an as x,cu as T,f8 as I,P as h,_ as j}from"./index-B52YIGC0.js";/* empty css                                                                    */import{P as D}from"./Pagination-C8J7-6Em.js";import"./index-KjhYqCTY.js";import{a as E,b as U,d as q}from"./buyShow-GI1gwX70.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const F={class:"table-container"},L={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},G={class:"flex"},J={key:1},K=["onClick"],Q=["onClick"],W=["onClick"],X=["onClick"],Y={class:"empty-warp"},Z={key:0,class:"empty-bg"},ee={key:0,class:"pagination-con"},te=R({__name:"CommentTable",props:w({showSelection:{type:Boolean,default:!0},showRelatedComments:{type:Boolean,default:!0}},{filterParams:{},filterParamsModifiers:{},filterState:{},filterStateModifiers:{},loading:!1,loadingModifiers:{},total:0,totalModifiers:{}}),emits:w(["okCallback","onSelectChange"],["update:filterParams","update:filterState","update:loading","update:total"]),setup(l,{emit:B}){const u=p(l,"filterParams"),P=p(l,"filterState"),f=p(l,"loading",!1),b=p(l,"total",0);V();const M=async t=>{x.confirm(t.isShow==0?"隐藏后，该评论仅创建人自己可见":"公开后，该评论将变为公开状态，所有客户可见",{confirmButtonText:"确定",cancelButtonText:"取消",icon:T(I),customClass:"buyShowHide"}).then(async()=>{await E(t),h.success("操作成功"),i()}).catch(()=>{h.error("取消操作")})},k=async t=>{x.confirm(t.status==1?"通过后，该买家秀将变为公开状态，所有客户可见":"拒绝后，该买家秀将变为隐藏状态，所有客户不可见",{confirmButtonText:"确定",cancelButtonText:"取消",icon:T(I),customClass:"buyShowHide"}).then(async()=>{await U(t),h.success("操作成功"),i()}).catch(()=>{})},z=async t=>{q(t).then(()=>{h.success("操作成功"),i()})},S=B,i=()=>{S("okCallback")},O=t=>{S("onSelectChange",t)},$=(t,s)=>t.status===0;return(t,s)=>{const c=C("el-table-column"),H=C("el-table"),N=C("a-spin");return o(),r("div",F,[a(N,{spinning:f.value},{default:m(()=>[a(H,{data:P.value,"row-key":"buyerShowCommentId","tooltip-effect":"dark myTooltips",total:b.value,loading:f.value,onSelectionChange:O},{empty:m(()=>[d("div",Y,[f.value?n("",!0):(o(),r("div",Z,"暂无数据"))])]),default:m(()=>[l.showSelection?(o(),g(c,{key:0,type:"selection",width:"32",selectable:$})):n("",!0),a(c,{label:"评论内容",prop:"content","show-overflow-tooltip":""},{default:m(({row:e})=>[d("div",L,_(e.content),1)]),_:1}),a(c,{label:"发布时间",prop:"addTime"}),a(c,{label:"发布人",prop:"userName"}),a(c,{label:"状态",prop:"statusText"}),a(c,{label:"操作",fixed:"right",width:240},{default:m(({row:e})=>[d("div",G,[l.showRelatedComments?(o(),g(v(A),{key:0,params:{act:"add",buyerShowId:e.buyerShowId},isDrawer:"",delayed:2e4,path:"promotion/buyerShow/buyerShowComments/commentManagementList",title:"相关评论",width:"900px",onOkCallback:i,onCloseCallback:i,showClose:!1,showOnOk:!1},{default:m(()=>[...s[2]||(s[2]=[d("a",{class:"btn-link mr10"},"相关评论",-1)])]),_:1},8,["params"])):n("",!0),e.statusText==="待审核"?(o(),r("div",J,[d("a",{class:"btn-link mr10",onClick:y=>k({buyerShowCommentId:e.buyerShowCommentId,status:1})}," 通过 ",8,K),e.statusText==="待审核"?(o(),r("a",{key:0,class:"btn-link mr10",onClick:y=>k({buyerShowCommentId:e.buyerShowCommentId,status:2})}," 拒绝 ",8,Q)):n("",!0)])):n("",!0),["隐藏","公开"].includes(e.statusText)?(o(),r("a",{key:2,class:"btn-link mr10",onClick:y=>M({buyerShowCommentId:e.buyerShowCommentId,isShow:e.statusText==="隐藏"?1:0})},_(e.statusText==="隐藏"?"公开":"隐藏"),9,W)):n("",!0),d("a",{class:"btn-link",onClick:y=>z({buyerShowCommentId:e.buyerShowCommentId,isTop:e.isTop===1?0:1})},_(e.isTop===1?"取消置顶":"置顶"),9,X)])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),b.value>0?(o(),r("div",ee,[a(v(D),{page:u.value.page,"onUpdate:page":s[0]||(s[0]=e=>u.value.page=e),size:u.value.size,"onUpdate:size":s[1]||(s[1]=e=>u.value.size=e),total:b.value,onCallback:i},null,8,["page","size","total"])])):n("",!0)])}}}),re=j(te,[["__scopeId","data-v-f0b4eb95"]]);export{re as default};

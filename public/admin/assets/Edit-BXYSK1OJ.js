import"./index-KjhYqCTY.js";/* empty css                                                                    */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import"./vuedraggable.umd-BauR0rTv.js";import{s as W}from"./buyShowProductGroupSelect.vue_vue_type_style_index_0_scoped_8e785396_lang-D9c7S773.js";import{l as q}from"./lodash-DLXBIuYo.js";import{i as D}from"./format-BxqOrW-w.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import{M as G}from"./index-C9ZdVeVx.js";import{d as H,r as k,f as y,g as m,h as r,i as t,z as l,F as U,p as S,l as M,j as v,ah as J,t as E,m as s,k as L,Q as f,_ as K,ar as X}from"./index-B52YIGC0.js";import{_ as Y}from"./Edit.vue_vue_type_script_setup_true_lang-CLBy16Dj.js";import{_ as Z}from"./Edit.vue_vue_type_script_setup_true_lang-BF-PKi5r.js";import"./time-EzYK4E-P.js";import"./SelectLink-BttPowUZ.js";import"./SelectColor.vue_vue_type_script_setup_true_lang-C0gzgyIL.js";import"./PicSelect-BNVMd8tw.js";import"./index-DLTpLwVu.js";/* empty css                                                             *//* empty css                                                             */const ee={class:"dec-pic-group dec-pic-hotarea-group"},te={class:"dec-pic-group-list"},oe={class:"dec-pic-group-item","data-index":"{$smarty.foreach.picList.index}"},ae={class:"dec-pic-group-item-con"},se={class:"item-image"},le={class:"item-image-con"},ie=["onClick","src"],ne=["onClick"],de={class:"area_box_con_text"},re=["onClick"],ce={class:"hotarea-edit-dialog-warp"},pe={class:"hotarea-edit-dialog-con"},ue={class:"hotarea-edit-box-wrap"},me={class:"hotarea-edit-box"},ve=["src"],_e={class:"hotarea-edit-box-area"},he={class:"area-bg"},ge={class:"area_box_con_text"},fe={class:"input-with-clear"},ke={class:"dec-pic-add-con"},ye=328,xe=H({__name:"ImageHotarea",props:{photos:{type:Array,default:[]},defaultValue:{type:Object}},setup(w){const p=w,h=k(!1),o=k(p.photos),C=(a,e)=>{Object.assign(o.value[e.index],a[0])},_=a=>{o.value.push(...a)},P=a=>{o.value.splice(a,1)},g=k(0),O=a=>{h.value=!0,g.value=a,i.value=q.cloneDeep(o.value[g.value].hotarea)||[]},i=k([]),c=k(0),j=()=>{i.value.push({height:100,width:100,left:10,top:10})},z=a=>{c.value=a},B=(a,e)=>{i.value[c.value].left=parseInt(a),i.value[c.value].top=parseInt(e)},N=(a,e,b,I)=>{i.value[c.value].left=parseInt(a),i.value[c.value].top=parseInt(e),i.value[c.value].width=parseInt(b),i.value[c.value].height=parseInt(I)},T=a=>{i.value.splice(a,1)},F=()=>{h.value=!1,o.value[g.value].hotarea=i.value,console.log("editPicIndex.value",g.value),console.log("photos.value",o.value)},x=a=>a/500*ye,R=(a,e)=>{c.value=e.index,i.value[c.value].link=a,console.log(i.value)};return(a,e)=>{const b=y("a-menu-item"),I=y("a-menu"),Q=y("a-dropdown"),$=y("a-button");return r(),m("div",ee,[t("div",te,[(r(!0),m(U,null,S(o.value,(n,u)=>(r(),m("div",oe,[t("div",ae,[t("div",se,[t("div",le,[n.picUrl?(r(),m("img",{key:0,onClick:d=>O(u),class:"item-image-src",src:v(D)(n.picUrl)},null,8,ie)):M("",!0),n.hotarea?(r(!0),m(U,{key:1},S(n.hotarea,(d,Ie)=>{var A;return r(),m("div",{onClick:$e=>O(u),class:"image-hotarea-link",style:J({width:x(d.width)+"px",height:x(d.height)+"px",top:x(d.top)+"px",left:x(d.left)+"px"})},[t("span",de,E((A=d.link)==null?void 0:A.name),1)],12,ne)}),256)):M("",!0),l(v(V),{type:"gallery",class:"",onOkCallback:C,params:{isMultiple:!1},data:{index:u},style:{width:"100%"}},{default:s(()=>[...e[2]||(e[2]=[t("span",{class:"change-image"},"更换图片",-1)])]),_:1},8,["data"])])]),t("div",{class:"del-item",onClick:d=>P(u)},[...e[3]||(e[3]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)])],8,re)])]))),256))]),l(v(G),{open:h.value,"onUpdate:open":e[1]||(e[1]=n=>h.value=n),width:"500px",destroyOnClose:!0,title:"绘制热区",class:"noPadding"},{footer:s(()=>[l($,{style:{"margin-right":"8px"},onClick:j},{default:s(()=>[...e[6]||(e[6]=[f("添加区域",-1)])]),_:1}),l($,{style:{"margin-right":"8px"},type:"primary",onClick:F},{default:s(()=>[...e[7]||(e[7]=[f("保存",-1)])]),_:1}),l($,{onClick:e[0]||(e[0]=n=>h.value=!1)},{default:s(()=>[...e[8]||(e[8]=[f("取消",-1)])]),_:1})]),default:s(()=>[t("div",ce,[t("div",pe,[t("div",ue,[t("div",me,[o.value[g.value].picUrl?(r(),m("img",{key:0,class:"bgImg",src:v(D)(o.value[g.value].picUrl)},null,8,ve)):M("",!0),t("div",_e,[(r(!0),m(U,null,S(i.value,(n,u)=>(r(),L(v(W),{class:"",parent:!0,"min-width":30,"min-height":30,w:n.width,h:n.height,x:n.left,y:n.top,onResizing:N,onActivated:d=>z(u),onDragstop:B},{default:s(()=>[l(Q,{trigger:["contextmenu"],style:{width:"100%",height:"100%"}},{overlay:s(()=>[l(I,null,{default:s(()=>[l(v(V),{params:{act:"edit",id:1,type:"mobile"},data:{index:u},isDrawer:"",path:"link/LinkSelect",style:{width:"100%"},title:"选择链接",width:"700px",onOkCallback:R},{default:s(()=>[t("div",fe,[l(b,null,{default:s(()=>[...e[4]||(e[4]=[f("编辑链接",-1)])]),_:1})])]),_:1},8,["data"]),l(b,{onClick:d=>T(u)},{default:s(()=>[...e[5]||(e[5]=[f("删除区域",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:s(()=>{var d;return[t("div",he,[t("span",ge,E(((d=n.link)==null?void 0:d.name)||"右键编辑"),1)])]}),_:2},1024)]),_:2},1032,["w","h","x","y","onActivated"]))),256))])])])])])]),_:1},8,["open"]),t("div",ke,[l(v(V),{type:"gallery",class:"",onOkCallback:_,params:{isMultiple:!0},style:{width:"100%"}},{default:s(()=>[...e[9]||(e[9]=[t("div",{class:"dec-pic-add-btn"},[t("i",{class:"ico-decorate icon-dec-jia"}),f("添加新热图")],-1)])]),_:1})])])}}}),be=K(xe,[["__scopeId","data-v-e6fa268b"]]),we={class:"dec-edit-group dec-edit-group-block"},Ce={class:"dec-edit-group-con"},Xe=H({__name:"Edit",props:{module:{default:()=>({})},moduleModifiers:{}},emits:["update:module"],setup(w){k({picType:{1:"一行一个",2:"轮播",3:"横向滑动-大图",4:"横向滑动-小图",5:"一行两个",6:"一行三个",7:"一行四个"},picPageType:{1:"样式一",2:"样式二",3:"样式三 "}});const p=X(w,"module");return(h,o)=>{const C=y("perfect-scrollbar");return r(),L(C,{class:"decorate-edit-con"},{default:s(()=>[o[4]||(o[4]=t("div",{class:"dec-edit-title"},[t("h3",null,"绘制热区")],-1)),t("div",we,[o[3]||(o[3]=t("div",{class:"dec-edit-group-desc"},[t("div",{class:"pic-change-desc"},"提示：添加图片后，点击图片进入绘制")],-1)),t("div",Ce,[l(v(be),{photos:p.value.picList,"onUpdate:photos":o[0]||(o[0]=_=>p.value.picList=_)},null,8,["photos"])])]),l(Z,{modelValue:p.value.frame,"onUpdate:modelValue":o[1]||(o[1]=_=>p.value.frame=_)},null,8,["modelValue"]),l(Y,{modelValue:p.value.title,"onUpdate:modelValue":o[2]||(o[2]=_=>p.value.title=_),decorateType:"mobile"},null,8,["modelValue"])]),_:1})}}});export{Xe as default};

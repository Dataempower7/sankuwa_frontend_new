import{d as E,r as k,e as y,f as m,g as r,h as t,z as i,F as V,m as U,k as S,i as _,a6 as q,t as A,l as s,j as H,L as f,_ as G,ag as J}from"./index-BLXOA87U.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import"./index-DpgvsnVO.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import"./vuedraggable.umd-OAFqtEpj.js";import{s as K}from"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_06740008_lang-CUfk_1FF.js";import{l as Q}from"./lodash-Dvwsp7qC.js";import{i as D}from"./format-DdZABYp4.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import{M as X}from"./index-B16C4gX_.js";import{_ as Y}from"./Edit.vue_vue_type_script_setup_true_lang-Dprf-lZw.js";import{_ as Z}from"./Edit.vue_vue_type_script_setup_true_lang-BdcJ1eE2.js";import"./time-DX2Q3n6c.js";import"./SelectLink-CudHA28S.js";import"./SelectColor.vue_vue_type_script_setup_true_lang-BzXwVrRB.js";import"./PicSelect-Z3AHlv6S.js";import"./index-CnbR-r33.js";/* empty css                                                             *//* empty css                                                             */const ee={class:"dec-pic-group dec-pic-hotarea-group"},te={class:"dec-pic-group-list"},oe={class:"dec-pic-group-item","data-index":"{$smarty.foreach.picList.index}"},ae={class:"dec-pic-group-item-con"},se={class:"item-image"},le={class:"item-image-con"},ie=["onClick","src"],ne=["onClick"],de={class:"area_box_con_text"},re=["onClick"],ce={class:"hotarea-edit-dialog-warp"},pe={class:"hotarea-edit-dialog-con"},ue={class:"hotarea-edit-box-wrap"},me={class:"hotarea-edit-box"},_e=["src"],ve={class:"hotarea-edit-box-area"},ge={class:"area-bg"},he={class:"area_box_con_text"},fe={class:"input-with-clear"},ke={class:"dec-pic-add-con"},ye=328,xe=E({__name:"ImageHotarea",props:{photos:{type:Array,default:[]},defaultValue:{type:Object}},setup(w){const p=w,g=k(!1),o=k(p.photos),C=(a,e)=>{Object.assign(o.value[e.index],a[0])},v=a=>{o.value.push(...a)},P=a=>{o.value.splice(a,1)},h=k(0),M=a=>{g.value=!0,h.value=a,l.value=Q.cloneDeep(o.value[h.value].hotarea)||[],console.log(l.value)},l=k([]),c=k(0),j=()=>{l.value.push({height:100,width:100,left:10,top:10})},z=a=>{c.value=a},B=(a,e)=>{l.value[c.value].left=parseInt(a),l.value[c.value].top=parseInt(e)},N=(a,e,b,I)=>{l.value[c.value].left=parseInt(a),l.value[c.value].top=parseInt(e),l.value[c.value].width=parseInt(b),l.value[c.value].height=parseInt(I)},T=a=>{l.value.splice(a,1)},F=()=>{g.value=!1,o.value[h.value].hotarea=l.value,console.log("editPicIndex.value",h.value),console.log("photos.value",o.value)},x=a=>a/500*ye,R=(a,e)=>{c.value=e.index,l.value[c.value].link=a,console.log(l.value)};return(a,e)=>{const b=y("a-menu-item"),I=y("a-menu"),W=y("a-dropdown"),$=y("a-button");return r(),m("div",ee,[t("div",te,[(r(!0),m(V,null,U(o.value,(n,u)=>(r(),m("div",oe,[t("div",ae,[t("div",se,[t("div",le,[n.picUrl?(r(),m("img",{key:0,onClick:d=>M(u),class:"item-image-src",src:_(D)(n.picUrl)},null,8,ie)):S("",!0),n.hotarea?(r(!0),m(V,{key:1},U(n.hotarea,(d,Ie)=>{var O;return r(),m("div",{onClick:$e=>M(u),class:"image-hotarea-link",style:q({width:x(d.width)+"px",height:x(d.height)+"px",top:x(d.top)+"px",left:x(d.left)+"px"})},[t("span",de,A((O=d.link)==null?void 0:O.name),1)],12,ne)}),256)):S("",!0),i(_(L),{type:"gallery",class:"",onOkCallback:C,params:{isMultiple:!1},data:{index:u},style:{width:"100%"}},{default:s(()=>e[2]||(e[2]=[t("span",{class:"change-image"},"更换图片",-1)])),_:2,__:[2]},1032,["data"])])]),t("div",{class:"del-item",onClick:d=>P(u)},e[3]||(e[3]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,re)])]))),256))]),i(_(X),{open:g.value,"onUpdate:open":e[1]||(e[1]=n=>g.value=n),width:"500px",destroyOnClose:!0,title:"绘制热区",class:"noPadding"},{footer:s(()=>[i($,{style:{"margin-right":"8px"},onClick:j},{default:s(()=>e[6]||(e[6]=[f("添加区域",-1)])),_:1,__:[6]}),i($,{style:{"margin-right":"8px"},type:"primary",onClick:F},{default:s(()=>e[7]||(e[7]=[f("保存",-1)])),_:1,__:[7]}),i($,{onClick:e[0]||(e[0]=n=>g.value=!1)},{default:s(()=>e[8]||(e[8]=[f("取消",-1)])),_:1,__:[8]})]),default:s(()=>[t("div",ce,[t("div",pe,[t("div",ue,[t("div",me,[o.value[h.value].picUrl?(r(),m("img",{key:0,class:"bgImg",src:_(D)(o.value[h.value].picUrl)},null,8,_e)):S("",!0),t("div",ve,[(r(!0),m(V,null,U(l.value,(n,u)=>(r(),H(_(K),{class:"",parent:!0,"min-width":30,"min-height":30,w:n.width,h:n.height,x:n.left,y:n.top,onResizing:N,onActivated:d=>z(u),onDragstop:B},{default:s(()=>[i(W,{trigger:["contextmenu"],style:{width:"100%",height:"100%"}},{overlay:s(()=>[i(I,null,{default:s(()=>[i(_(L),{params:{act:"edit",id:1,type:"mobile"},data:{index:u},isDrawer:"",path:"link/LinkSelect",style:{width:"100%"},title:"选择链接",width:"700px",onOkCallback:R},{default:s(()=>[t("div",fe,[i(b,null,{default:s(()=>e[4]||(e[4]=[f("编辑链接",-1)])),_:1,__:[4]})])]),_:2},1032,["data"]),i(b,{onClick:d=>T(u)},{default:s(()=>e[5]||(e[5]=[f("删除区域",-1)])),_:2,__:[5]},1032,["onClick"])]),_:2},1024)]),default:s(()=>{var d;return[t("div",ge,[t("span",he,A(((d=n.link)==null?void 0:d.name)||"右键编辑"),1)])]}),_:2},1024)]),_:2},1032,["w","h","x","y","onActivated"]))),256))])])])])])]),_:1},8,["open"]),t("div",ke,[i(_(L),{type:"gallery",class:"",onOkCallback:v,params:{isMultiple:!0},style:{width:"100%"}},{default:s(()=>e[9]||(e[9]=[t("div",{class:"dec-pic-add-btn"},[t("i",{class:"ico-decorate icon-dec-jia"}),f("添加新热图")],-1)])),_:1,__:[9]})])])}}}),be=G(xe,[["__scopeId","data-v-b8aa4539"]]),we={class:"dec-edit-group dec-edit-group-block"},Ce={class:"dec-edit-group-con"},Ke=E({__name:"Edit",props:{module:{default:()=>({})},moduleModifiers:{}},emits:["update:module"],setup(w){k({picType:{1:"一行一个",2:"轮播",3:"横向滑动-大图",4:"横向滑动-小图",5:"一行两个",6:"一行三个",7:"一行四个"},picPageType:{1:"样式一",2:"样式二",3:"样式三 "}});const p=J(w,"module");return(g,o)=>{const C=y("perfect-scrollbar");return r(),H(C,{class:"decorate-edit-con"},{default:s(()=>[o[4]||(o[4]=t("div",{class:"dec-edit-title"},[t("h3",null,"绘制热区")],-1)),t("div",we,[o[3]||(o[3]=t("div",{class:"dec-edit-group-desc"},[t("div",{class:"pic-change-desc"},"提示：添加图片后，点击图片进入绘制")],-1)),t("div",Ce,[i(_(be),{photos:p.value.picList,"onUpdate:photos":o[0]||(o[0]=v=>p.value.picList=v)},null,8,["photos"])])]),i(Z,{modelValue:p.value.frame,"onUpdate:modelValue":o[1]||(o[1]=v=>p.value.frame=v)},null,8,["modelValue"]),i(Y,{modelValue:p.value.title,"onUpdate:modelValue":o[2]||(o[2]=v=>p.value.title=v),decorateType:"mobile"},null,8,["modelValue"])]),_:1,__:[4]})}}});export{Ke as default};

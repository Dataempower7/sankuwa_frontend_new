import{d as C,r as f,c as D,o as x,K as k,e as d,j as v,g as u,l as a,f as R,F as O,m as F,_ as B,a as j,a2 as E,h as b,k as N,z as l,G as q,L as I,i as M,J as z}from"./index-BLXOA87U.js";import{c as A,p as G}from"./order-na2xscMr.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import"./index-DpgvsnVO.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as J}from"./SelectLogisticsCompany-BLdDGTw2.js";import{a as K}from"./shippingType-Fr8k_ELa.js";/* empty css             */import"./time-DX2Q3n6c.js";import"./index-B16C4gX_.js";import"./logisticsCompany-CAvDxqfC.js";const $=C({__name:"SelectShippingType",props:{id:{type:Number,default:null}},emits:["update:id","change"],setup(T,{emit:S}){const _=T,p=S,m=f([]),c=D({get:()=>_.id,set:o=>{p("update:id",o),y(o)}});x(async()=>{try{const o=await K({paging:!1});m.value=o.records,y(_.id)}catch(o){k.error(o.message)}});const y=o=>{const s=m.value.find(e=>e.shippingTypeId===o);p("change",s?s.shippingDefaultId:0)};return(o,s)=>{const e=d("el-option"),V=d("el-select");return u(),v(V,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=r=>c.value=r),class:"full-width",filterable:"","empty-values":[0,void 0,null,""]},{default:a(()=>[(u(!0),R(O,null,F(m.value,r=>(u(),v(e,{key:r.shippingTypeId,label:r.shippingTypeName,value:r.shippingTypeId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),H=B($,[["__scopeId","data-v-030cd6e7"]]),P={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},X=C({__name:"EditShipping",props:{id:{type:Number,default:0},form:{type:Object,default:()=>({})},valueName:String,isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(T,{expose:S,emit:_}){const p=_,m=T,c=f(!0),y=j().currentRoute.value.query,o=f(m.isDialog?m.id:Number(y.id));f(1);const s=E(),e=f({items:[]});x(()=>{V()});const V=async()=>{try{const n=await A("detail",{id:o.value});Object.assign(e.value,n)}catch(n){k.error(n.message),p("close")}finally{c.value=!1}},r=async()=>{await s.value.validate();try{p("update:confirmLoading",!0);const n=await G({id:o.value,shippingMethod:e.value.shippingMethod,logisticsId:e.value.logisticsId,trackingNo:e.value.trackingNo});p("submitCallback",n),k.success("操作成功")}catch(n){k.error(n.message)}finally{p("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{r()}}),(n,t)=>{const h=d("el-radio"),L=d("el-radio-group"),g=d("el-form-item"),w=d("TigInput"),U=d("el-form");return u(),R("div",P,[b("div",Q,[b("div",W,[t[9]||(t[9]=b("div",{class:"button-card babyBlue pd15"}," 提示：在当前页面修改配送方式或物流公司不会更改订单运费，如需修改运费请编辑订单金额（仅对未支付的订单支持订单金额编辑） ",-1)),c.value?N("",!0):(u(),v(U,{key:0,ref_key:"formRef",ref:s,model:e.value,"label-width":"auto"},{default:a(()=>[l(g,{label:"配送方式",prop:"shippingMethod"},{default:a(()=>[l(L,{modelValue:e.value.shippingMethod,"onUpdate:modelValue":t[0]||(t[0]=i=>e.value.shippingMethod=i)},{default:a(()=>[l(h,{value:1},{default:a(()=>t[5]||(t[5]=[I("物流配送",-1)])),_:1,__:[5]}),l(h,{value:2},{default:a(()=>t[6]||(t[6]=[I("商家配送",-1)])),_:1,__:[6]}),l(h,{value:3},{default:a(()=>t[7]||(t[7]=[I("无需配送",-1)])),_:1,__:[7]}),l(h,{value:4},{default:a(()=>t[8]||(t[8]=[I("电子面单",-1)])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1}),q(b("div",null,[l(g,{label:"配送类型",prop:"shippingTypeId"},{default:a(()=>[l(M(H),{id:e.value.shippingTypeId,"onUpdate:id":t[1]||(t[1]=i=>e.value.shippingTypeId=i)},null,8,["id"])]),_:1}),l(g,{label:"物流公司",prop:"logisticsId"},{default:a(()=>[l(M(J),{logisticsId:e.value.logisticsId,"onUpdate:logisticsId":t[2]||(t[2]=i=>e.value.logisticsId=i)},null,8,["logisticsId"])]),_:1}),e.value.shippingMethod===1?(u(),v(g,{key:0,label:"快递单号",prop:"trackingNo"},{default:a(()=>[l(w,{classType:"tig-form-input",modelValue:e.value.trackingNo,"onUpdate:modelValue":t[3]||(t[3]=i=>e.value.trackingNo=i)},null,8,["modelValue"])]),_:1})):N("",!0),e.value.shippingMethod===4?(u(),v(g,{key:1,label:"发货备注",prop:"billRemark"},{default:a(()=>[l(w,{classType:"tig-form-input",modelValue:e.value.billRemark,"onUpdate:modelValue":t[4]||(t[4]=i=>e.value.billRemark=i),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})):N("",!0)],512),[[z,e.value.shippingMethod===1||e.value.shippingMethod===4]])]),_:1},8,["model"]))])])])}}}),me=B(X,[["__scopeId","data-v-c9757c73"]]);export{me as default};

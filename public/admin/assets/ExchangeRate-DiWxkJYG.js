import{d as U,r as f,b as z,ab as F,as as k,o as I,P as v,f as s,g as O,h as x,i as _,k as $,l as j,m as o,z as a,L as M,j as P,Q as i,O as Q}from"./index-B52YIGC0.js";import{a as A,c as G}from"./languagesList-C1QUNmfU.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import{_ as H}from"./SelectLocaleCode.vue_vue_type_script_setup_true_lang-CenUyGpo.js";import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./verbalAssociation-BsKEL4bQ.js";const J={class:"container"},K={class:"content_wrapper"},W={class:"lyecs-form-table"},de=U({__name:"ExchangeRate",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(D,{expose:N,emit:S}){const d=S,u=D,c=f(!0),b=z().currentRoute.value.query,g=f(u.isDialog?u.act:String(b.act)),y=f(u.isDialog?u.id:Number(b.id)),T=g.value==="add"?"create":"update",V=F(),t=f({language:"",localeCode:"",isEnabled:0,isDefault:0});k({page:1,size:9999,sortField:"",sortOrder:"",keyword:""}),I(()=>{g.value==="detail"?E():c.value=!1});const E=async()=>{try{const l=await A(g.value,{id:y.value});t.value=l}catch(l){v.error(l.message),d("close")}finally{c.value=!1}},w=async()=>{await V.value.validate();try{d("update:confirmLoading",!0);const l=await G(T,{id:y.value,...t.value});d("submitCallback",l),v.success("操作成功")}catch(l){v.error(l.message)}finally{d("update:confirmLoading",!1)}},L=()=>{w()},q=k({promotionName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],sendType:[{required:!0,validator:(l,e,m)=>{if(!t.value.language&&!t.value.language){m(new Error("请输入用券时间"));return}m()},trigger:"blur"}]});return N({onFormSubmit:L}),(l,e)=>{const m=s("TigInput"),n=s("el-form-item"),p=s("el-radio"),C=s("el-radio-group"),B=s("el-button"),R=s("el-form");return x(),O("div",J,[_("div",K,[_("div",W,[c.value?j("",!0):(x(),$(R,{key:0,ref_key:"formRef",ref:V,rules:q,model:t.value,"label-width":"auto"},{default:o(()=>[a(n,{prop:"language",label:"语言名称：",rules:[{required:!0,message:"语言名称不能为空!"}]},{default:o(()=>[a(m,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:t.value.language,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.language=r)},null,8,["modelValue"])]),_:1}),a(n,{prop:"localeCode",label:"语言识别码：",rules:[{required:!0,message:"请选择语言识别码!"}]},{default:o(()=>[a(P(H),{modelValue:t.value.localeCode,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.localeCode=r)},null,8,["modelValue"]),e[5]||(e[5]=_("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1}),a(n,{prop:"isEnabled",label:"是否启用："},{default:o(()=>[a(C,{modelValue:t.value.isEnabled,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.isEnabled=r)},{default:o(()=>[a(p,{value:1},{default:o(()=>[...e[6]||(e[6]=[i("是",-1)])]),_:1}),a(p,{value:0},{default:o(()=>[...e[7]||(e[7]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{prop:"isDefault",label:"是否默认："},{default:o(()=>[a(C,{modelValue:t.value.isDefault,"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.isDefault=r)},{default:o(()=>[a(p,{value:1},{default:o(()=>[...e[8]||(e[8]=[i("是",-1)])]),_:1}),a(p,{value:0},{default:o(()=>[...e[9]||(e[9]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),M(a(n,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=r=>w())},{default:o(()=>[...e[10]||(e[10]=[i("提交",-1)])]),_:1},512)]),_:1},512),[[Q,!u.isDialog]])]),_:1},8,["rules","model"]))])])])}}});export{de as default};

import{u as U}from"./aftersales-Bt16NHXV.js";import{p as w}from"./format-BxqOrW-w.js";import{d as B,r as N,ab as L,f as b,g as p,h as t,i as f,z as o,m as a,k as n,l as d,t as m,F as A,j as V,p as j,Q as i,D as E,P as R,_ as H}from"./index-B52YIGC0.js";const z={class:"container"},O={class:"content_wrapper"},P={class:"lyecs-form-table"},Q={class:"negotiation-box"},G={class:"extra"},J={class:"extra"},K={key:0,class:"btn-box"},M={key:1,class:"btn-box"},W=B({__name:"Handle",props:{formData:{type:Object,default:0},status:{type:Number,default:2}},emits:["submitCallback","update:confirmLoading","close"],setup(e,{expose:h,emit:I}){const k=I,D=e;N(!0);const T=L(),r=N({status:D.status,refundAmount:null,reply:"",returnAddress:""}),x=(c,l,u)=>{Number(l)>Number(D.formData.suggestRefundAmount)?u(new Error("退款金额不能大于最大退款金额")):u()},C=()=>{k("close")},S=c=>{r.value.reply=c.target.innerText},g=async()=>{await T.value.validate();try{k("update:confirmLoading",!0);const c=await U({id:D.formData.aftersaleId,...r.value});k("submitCallback",c),R.success("操作成功")}catch(c){R.error(c.message)}finally{k("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{g()}}),(c,l)=>{const u=b("el-form-item"),v=b("TigInput"),q=b("el-tag"),y=b("el-button"),F=b("el-form");return t(),p("div",z,[f("div",O,[f("div",P,[f("div",Q,[o(F,{ref_key:"formRef",ref:T,model:r.value,"label-width":"auto"},{default:a(()=>[o(u,{label:"售后方式："},{default:a(()=>[f("p",null,m(e.formData.aftersalesTypeName),1)]),_:1}),o(u,{label:"售后状态："},{default:a(()=>[f("p",null,m(e.formData.statusName),1)]),_:1}),e.formData.vendorId&&e.formData.vendorId>0?(t(),p(A,{key:0},[e.status==2&&e.formData.status==1?(t(),n(u,{key:0,label:"退款金额：",prop:"refundAmount",rules:[{required:!0,message:"退款金额不能为空"},{validator:x,trigger:"blur"}]},{default:a(()=>[o(v,{classType:"tig-form-input",modelValue:r.value.refundAmount,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value.refundAmount=s),type:"decimal",placeholder:"请输入退款金额"},null,8,["modelValue"]),f("div",G,"最大退款金额"+m(V(w)(e.formData.suggestRefundAmount)||"0"),1)]),_:1},8,["rules"])):d("",!0),e.formData.aftersaleType==1&&e.status==2&&e.formData.status==21?(t(),n(u,{key:1,label:"退货地址：",prop:"returnAddress",rules:[{required:e.status==2,message:"退货地址不能为空"}]},{default:a(()=>[o(v,{classType:"tig-form-input",modelValue:r.value.returnAddress,"onUpdate:modelValue":l[1]||(l[1]=s=>r.value.returnAddress=s),rows:6,type:"textarea",placeholder:"请输入退货地址"},null,8,["modelValue"])]),_:1},8,["rules"])):d("",!0)],64)):(t(),p(A,{key:1},[e.status==2?(t(),n(u,{key:0,label:"退款金额：",prop:"refundAmount",rules:[{required:!0,message:"退款金额不能为空"},{validator:x,trigger:"blur"}]},{default:a(()=>[o(v,{classType:"tig-form-input",modelValue:r.value.refundAmount,"onUpdate:modelValue":l[2]||(l[2]=s=>r.value.refundAmount=s),type:"decimal",placeholder:"请输入退款金额"},null,8,["modelValue"]),f("div",J,"最大退款金额"+m(V(w)(e.formData.suggestRefundAmount)||"0"),1)]),_:1},8,["rules"])):d("",!0),e.formData.aftersaleType==1&&e.status==2?(t(),n(u,{key:1,label:"退货地址：",prop:"returnAddress",rules:[{required:e.status==2,message:"退货地址不能为空"}]},{default:a(()=>[o(v,{classType:"tig-form-input",modelValue:r.value.returnAddress,"onUpdate:modelValue":l[3]||(l[3]=s=>r.value.returnAddress=s),rows:6,type:"textarea",placeholder:"请输入退货地址"},null,8,["modelValue"])]),_:1},8,["rules"])):d("",!0)],64)),e.status==3?(t(),n(u,{key:2,label:"拒绝说明：",prop:"reply",rules:[{required:e.status==3,message:"拒绝说明不能为空"}]},{default:a(()=>[o(v,{classType:"tig-form-input",modelValue:r.value.reply,"onUpdate:modelValue":l[4]||(l[4]=s=>r.value.reply=s),rows:6,type:"textarea",placeholder:"请输入拒绝说明"},null,8,["modelValue"]),f("div",null,[(t(!0),p(A,null,j(e.formData.refuseReason,s=>(t(),n(q,{key:s,type:"info",style:{"margin-right":"5px"},onClick:S},{default:a(()=>[i(m(s),1)]),_:2},1024))),128))])]),_:1},8,["rules"])):d("",!0),o(u,null,{default:a(()=>[V(E)()?(t(),p("div",K,[e.formData.aftersaleType==1&&e.formData.status==1?(t(),n(y,{key:0,type:"primary",onClick:g},{default:a(()=>[i(m(e.status==2?"同意退货退款":"拒绝退款"),1)]),_:1})):d("",!0),e.formData.aftersaleType==1&&e.formData.status==21?(t(),n(y,{key:1,type:"primary",onClick:g},{default:a(()=>[i(m(e.status==2?"同意并发送退货地址":"拒绝退款"),1)]),_:1})):d("",!0),e.formData.aftersaleType==2?(t(),n(y,{key:2,type:"primary",onClick:g},{default:a(()=>[i(m(e.status==2?"同意仅退款":"拒绝仅退款"),1)]),_:1})):d("",!0),o(y,{onClick:C},{default:a(()=>[...l[5]||(l[5]=[i("取消",-1)])]),_:1})])):(t(),p("div",M,[e.formData.aftersaleType==1?(t(),n(y,{key:0,type:"primary",onClick:g},{default:a(()=>[i(m(e.status==2?"同意并发送退货地址":"拒绝退款"),1)]),_:1})):d("",!0),e.formData.aftersaleType==2?(t(),n(y,{key:1,type:"primary",onClick:g},{default:a(()=>[i(m(e.status==2?"同意仅退款":"拒绝仅退款"),1)]),_:1})):d("",!0),o(y,{onClick:C},{default:a(()=>[...l[6]||(l[6]=[i("取消",-1)])]),_:1})]))]),_:1})]),_:1},8,["model"])])])])])}}}),_=H(W,[["__scopeId","data-v-60835332"]]);export{_ as default};

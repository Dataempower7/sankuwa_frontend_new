/* empty css             */import{g as O,s as Q}from"./pickupSetting-CaGqQdmm.js";import{d as X,u as Y,X as G,x as K,ab as Z,r as V,o as h,P as _,Y as ee,f as u,g as p,h as n,z as i,m as o,i as a,l as f,Q as m,F as E,p as C,k as te,ah as le,j as ie,_ as oe}from"./index-B52YIGC0.js";import{d as se}from"./format-BxqOrW-w.js";const ae={class:"container"},ne={class:"content_wrapper"},ue={class:"item flex flex-align-center"},pe={class:"value"},me={class:"content_wrapper"},de={key:0,class:"extra"},re={key:1,class:"extra"},ve={key:2,class:"wechat-config"},fe={style:{width:"90%"}},ce={class:"time-list-row"},ke={class:"flex flex-align-center mb10"},Te={class:"flex flex-align-center"},ye={key:0,class:"flex flex-align-center"},ge={key:0},Ve={key:1,class:"time-type-row"},_e={key:0,class:"wechat-config"},xe={class:"flex flex-align-center"},be={class:"selected-action"},Je=X({__name:"Index",props:{act:{type:String,default:""}},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:L,emit:N}){const H=N,I=x,{themeInfo:F}=Y();G();const B=K(),b=Z(),P=[{value:"d",label:"天"},{value:"h",label:"小时"},{value:"m",label:"分钟"}],T=V(!1),t=V({pickupTimeJson:{type:1,timeList:[{startTime:"",endTime:""}],appointmentTime:{timeNum:void 0,timeUnit:""}},pickupEndJson:{type:1,day:void 0,hour:void 0}});h(async()=>{await R()});const J=V(!0),R=async()=>{try{const s=await O();s.pickupTimeJson.type==null&&(s.pickupTimeJson.type=1),s.pickupTimeJson.timeList==null&&(s.pickupTimeJson.timeList=[{startTime:"",endTime:""}]),s.pickupTimeJson.appointmentTime==null||s.pickupTimeJson.appointmentTime=="null"||!s.pickupTimeJson.appointmentTime==null?s.pickupTimeJson.appointmentTime={timeUnit:"d",timeNum:1}:s.pickupTimeJson.appointmentTime=s.pickupTimeJson.appointmentTime,Object.assign(t.value,se(s))}catch(s){_.error(s.message)}finally{J.value=!1}},z=s=>{t.value.pickupTimeJson.timeList.splice(s,1)},j=()=>{t.value.pickupTimeJson.timeList.push({startTime:"",endTime:""})},q=(s,e,r)=>{e.type!==1?r(new Error("请选择停止提货时间")):e.day===null||e.hour===null||e.hour===""||e.day===""?(console.log(e.day,e.hour),r(new Error("请输入提货有效期"))):r()},w=async()=>{await b.value.validate(),T.value=!0;try{const s=await Q(t.value);_.success("修改成功"),B.updateConfig(),I.act==="deawer"&&H("submitCallback",s)}catch(s){_.error(s.message)}finally{T.value=!1}};return ee(t.value,s=>{s.closeAuth==0&&(t.value.isIdentity=0)}),L({onFormSubmit:()=>{w()}}),(s,e)=>{const r=u("el-switch"),S=u("el-checkbox"),d=u("el-form-item"),v=u("el-radio"),c=u("el-radio-group"),U=u("el-time-picker"),y=u("el-button"),D=u("el-option"),M=u("el-select"),g=u("TigInput"),W=u("el-form"),$=u("a-spin");return n(),p("div",ae,[i($,{spinning:J.value},{default:o(()=>[i(W,{ref_key:"formRef",ref:b,model:t.value,"label-width":"auto",style:{display:"flex",gap:"12px","flex-direction":"column"}},{default:o(()=>[a("div",ne,[a("div",ue,[e[13]||(e[13]=a("div",{class:"label mr10"},"到店自提",-1)),a("div",pe,[i(r,{modelValue:t.value.status,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"]),e[12]||(e[12]=a("div",null,null,-1))])]),e[14]||(e[14]=a("div",{class:"extra"},"启用后，买家下单可选择到店自提，可选择自提点进行提货。",-1))]),a("div",me,[e[30]||(e[30]=a("div",{class:"title"},"基础设置",-1)),i(d,{label:"完成备货",prop:"stockingStatus"},{default:o(()=>[a("div",null,[i(S,{modelValue:t.value.stockingStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.stockingStatus=l),label:"开启系统自动完成备货","true-label":1,"false-label":0},null,8,["modelValue"]),e[15]||(e[15]=a("div",{class:"extra"},"针对预售自提订单，实际完成自动备货的时间为预售开始发货时间和自动备货时间中较晚的时间。",-1))])]),_:1}),i(d,{label:"自提时间",prop:"pickupTimeStatus"},{default:o(()=>[a("div",null,[i(c,{modelValue:t.value.pickupTimeStatus,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.pickupTimeStatus=l),class:"itemWidth"},{default:o(()=>[i(v,{value:0},{default:o(()=>[...e[16]||(e[16]=[m("不开启",-1)])]),_:1}),i(v,{value:1},{default:o(()=>[...e[17]||(e[17]=[m("需要买家选择自提时间",-1)])]),_:1})]),_:1},8,["modelValue"]),t.value.pickupTimeStatus==1?(n(),p("div",de,"买家下单选择到店自提，必须要选择自提时间，卖家需要按约定时间备货")):(n(),p("div",re,"不开启，不展示提货时间")),t.value.pickupTimeStatus===1?(n(),p("div",ve,[i(d,{label:"自提时间段"},{default:o(()=>[a("div",fe,[i(c,{modelValue:t.value.pickupTimeJson.type,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.pickupTimeJson.type=l),class:"itemWidth"},{default:o(()=>[i(v,{value:1},{default:o(()=>[...e[18]||(e[18]=[m("每天",-1)])]),_:1})]),_:1},8,["modelValue"]),a("div",ce,[(n(!0),p(E,null,C(t.value.pickupTimeJson.timeList,(l,A)=>(n(),p("div",ke,[i(U,{format:"HH:mm","value-format":"HH:mm",style:{width:"110px"},modelValue:l.startTime,"onUpdate:modelValue":k=>l.startTime=k,placeholder:"开始时间"},null,8,["modelValue","onUpdate:modelValue"]),e[20]||(e[20]=a("div",{style:{margin:"0 10px"}},"至",-1)),i(U,{format:"HH:mm","value-format":"HH:mm",style:{width:"110px"},modelValue:l.endTime,"onUpdate:modelValue":k=>l.endTime=k,placeholder:"结束时间"},null,8,["modelValue","onUpdate:modelValue"]),t.value.pickupTimeJson.timeList.length>1?(n(),te(y,{key:0,class:"ml10",type:"primary",link:"",onClick:k=>z(A)},{default:o(()=>[...e[19]||(e[19]=[m("删除",-1)])]),_:1},8,["onClick"])):f("",!0)]))),256)),a("div",Te,[i(y,{type:"primary",link:"",onClick:e[4]||(e[4]=l=>j()),disabled:t.value.pickupTimeJson.timeList.length>=15},{default:o(()=>[...e[21]||(e[21]=[m("添加时间段",-1)])]),_:1},8,["disabled"]),e[22]||(e[22]=a("div",{class:"tips"},"最多添加15个时间段",-1))])])])]),_:1}),i(d,{label:"预约自提",rules:[{required:t.value.stockingStatus===0,message:"请输入预约自提时间段"}],prop:"pickupTimeJson"},{default:o(()=>[t.value.stockingStatus===0?(n(),p("div",ye,[i(c,{modelValue:t.value.pickupTimeJson.type,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.pickupTimeJson.type=l),class:"mr10"},{default:o(()=>[i(v,{value:1},{default:o(()=>[...e[23]||(e[23]=[m("需提前",-1)])]),_:1})]),_:1},8,["modelValue"]),t.value.pickupTimeJson.appointmentTime&&t.value.pickupTimeJson.appointmentTime.timeUnit?(n(),p("div",ge,[i(g,{modelValue:t.value.pickupTimeJson.appointmentTime.timeNum,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.pickupTimeJson.appointmentTime.timeNum=l),width:"160px"},{append:o(()=>[i(M,{modelValue:t.value.pickupTimeJson.appointmentTime.timeUnit,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.pickupTimeJson.appointmentTime.timeUnit=l),style:{width:"80px"}},{default:o(()=>[(n(),p(E,null,C(P,l=>i(D,{label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])):f("",!0),e[24]||(e[24]=a("div",{class:"ml10"},"预约自提",-1))])):(n(),p("div",Ve,"已开启自动完成备货，最早可预约自提时间与备货完成时间相同"))]),_:1},8,["rules"])])):f("",!0)])]),_:1}),i(d,{label:"提货有效期",prop:"pickupEndStatus"},{default:o(()=>[a("div",null,[i(S,{modelValue:t.value.pickupEndStatus,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.pickupEndStatus=l),label:"开启提货有效期","true-label":1,"false-label":0},null,8,["modelValue"]),t.value.pickupEndStatus===1?(n(),p("div",_e,[i(d,{label:"停止提货时间",rules:[{required:!0,validator:q}],prop:"pickupEndJson"},{default:o(()=>[a("div",xe,[i(c,{modelValue:t.value.pickupEndJson.type,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.pickupEndJson.type=l),class:"mr10"},{default:o(()=>[i(v,{value:1},{default:o(()=>[...e[25]||(e[25]=[m("备货完成",-1)])]),_:1})]),_:1},8,["modelValue"]),i(g,{modelValue:t.value.pickupEndJson.day,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.pickupEndJson.day=l),width:"130px",type:"integer"},{append:o(()=>[...e[26]||(e[26]=[m(" 天 ",-1)])]),_:1},8,["modelValue"]),i(g,{modelValue:t.value.pickupEndJson.hour,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.pickupEndJson.hour=l),width:"130px",class:"ml10",type:"integer"},{append:o(()=>[...e[27]||(e[27]=[m(" 小时 ",-1)])]),_:1},8,["modelValue"]),e[28]||(e[28]=a("div",{class:"ml10"},"后，停止提货",-1)),e[29]||(e[29]=a("div",{class:"tips"},"填写0天或0小时，则仅限当天可提货",-1))])]),_:1},8,["rules"])])):f("",!0)])]),_:1})])]),_:1},8,["model"]),e[32]||(e[32]=a("div",{style:{height:"20px"}},null,-1)),x.act!=="deawer"?(n(),p("div",{key:0,class:"selected-action-warp selected-warp-left",style:le({left:ie(F).layout!=="topMenu"?"369px":"270px"})},[a("div",be,[i(y,{loading:T.value,class:"form-submit-btn",size:"large",type:"primary",onClick:w},{default:o(()=>[...e[31]||(e[31]=[m("提 交",-1)])]),_:1},8,["loading"])])],4)):f("",!0)]),_:1},8,["spinning"])])}}}),Le=oe(Je,[["__scopeId","data-v-0ab41230"]]);export{Le as default};

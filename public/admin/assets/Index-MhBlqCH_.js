import{d as F,ab as R,r as p,c as O,v as x,ac as y,o as W,f as n,g as v,h as u,i as r,z as o,m as t,L as z,k as g,l as h,Q as i,j as A,F as D,p as E,O as K,P as c,er as M,_ as Q}from"./index-B52YIGC0.js";/* empty css             */import{s as q}from"./team-Dn9wJjqq.js";import{a as G}from"./category-BhaHXalE.js";const H={class:"container"},J={class:"content_wrapper"},X={class:"content"},Y={class:"extra"},Z={key:0,class:"red"},$={key:1},ee={key:0,class:"wechat-config"},oe=F({__name:"Index",setup(te){const I=R(),U=p("店铺设置"),_=p(!1),a=p({kefuInlet:[],shopShowCategory:{ids:"",type:null}}),d=p([]),N=async()=>{if(_.value=!0,y()==2){if(a.value.shopShowCategory.type==2&&d.value.length==0){c.error("请选择显示的分类"),_.value=!1;return}d.value.length>0&&(a.value.shopShowCategory.ids=d.value.join(","))}try{const l=await q({...a.value});c.success("操作成功"),x().updateUserInfo()}catch(l){c.error(l.message)}finally{_.value=!1}},b=O(()=>x().shopInfo),w=p(!0),B=async()=>{w.value=!0;try{const l=await M();y()==2&&l.shopShowCategory.type==2&&l.shopShowCategory.ids&&(d.value=l.shopShowCategory.ids.split(",").map(Number)),Object.assign(a.value,l)}catch(l){c.error(l.message)}finally{w.value=!1}},S=p([]),L=async()=>{try{const l=await G();S.value=l}catch(l){c.error(l.message)}};return y()==2&&L(),W(()=>{B()}),(l,e)=>{const f=n("el-radio"),V=n("el-radio-group"),m=n("el-form-item"),P=n("TigInput"),k=n("el-checkbox"),C=n("el-checkbox-group"),T=n("el-button"),j=n("el-form");return u(),v("div",H,[r("div",J,[o(j,{ref_key:"formRef",ref:I,model:a.value,"label-width":"160px"},{default:t(()=>[z(r("div",X,[e[11]||(e[11]=r("div",{class:"title"},[r("span",null," 经营设置 "),r("span",{class:"tips"}," 设置你的网点经营模式； ")],-1)),o(m,{label:"经营状态",prop:"status"},{default:t(()=>[r("div",null,[o(V,{modelValue:a.value.status,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.status=s),class:"itemWidth"},{default:t(()=>[b.value.status!=4?(u(),g(f,{key:0,value:1},{default:t(()=>[...e[5]||(e[5]=[i("开业",-1)])]),_:1})):h("",!0),o(f,{value:4},{default:t(()=>[...e[6]||(e[6]=[i("停业",-1)])]),_:1}),b.value.status!=4?(u(),g(f,{key:1,value:10},{default:t(()=>[...e[7]||(e[7]=[i("打烊",-1)])]),_:1})):h("",!0)]),_:1},8,["modelValue"]),r("div",Y,[b.value.status==4?(u(),v("text",Z,"暂停营业中，请联系平台处理。")):(u(),v("text",$,"设置休息后，买家将无法在店内消费，请谨慎操作。"))])])]),_:1}),o(m,{label:"客服电话",prop:"kefuPhone"},{default:t(()=>[o(P,{modelValue:a.value.kefuPhone,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.kefuPhone=s),width:"300px;"},null,8,["modelValue"])]),_:1}),o(m,{label:"客服入口页面",prop:"kefuInlet"},{default:t(()=>[o(C,{modelValue:a.value.kefuInlet,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.kefuInlet=s)},{default:t(()=>[o(k,{value:1,label:"商品详情页"}),o(k,{value:2,label:"订单详情页"})]),_:1},8,["modelValue"])]),_:1}),A(y)()==2?(u(),g(m,{key:0,label:"显示分类",prop:"shopShowCategory"},{default:t(()=>[r("div",null,[o(V,{modelValue:a.value.shopShowCategory.type,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.shopShowCategory.type=s),class:"itemWidth"},{default:t(()=>[o(f,{value:1},{default:t(()=>[...e[8]||(e[8]=[i("全部平台分类",-1)])]),_:1}),o(f,{value:2},{default:t(()=>[...e[9]||(e[9]=[i("自定义平台分类",-1)])]),_:1})]),_:1},8,["modelValue"]),a.value.shopShowCategory.type==2?(u(),v("div",ee,[o(C,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s)},{default:t(()=>[(u(!0),v(D,null,E(S.value,s=>(u(),g(k,{label:s.categoryName,value:s.categoryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])):h("",!0)])]),_:1})):h("",!0),o(m,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[o(T,{loading:_.value,ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:N},{default:t(()=>[...e[10]||(e[10]=[i("提交",-1)])]),_:1},8,["loading"])]),_:1})],512),[[K,U.value==="店铺设置"]])]),_:1},8,["model"])])])}}}),ne=Q(oe,[["__scopeId","data-v-837bba90"]]);export{ne as default};

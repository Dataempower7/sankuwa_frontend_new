import{d as h,r as p,b as F,ab as L,o as q,f as i,g as A,h as C,i as c,k as T,l as j,z as t,m as l,L as P,j as d,Q as v,O as $,P as g}from"./index-B52YIGC0.js";import{F as z}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{S as E}from"./SelectBrand-tHlymKqU.js";import{_ as S}from"./SelectCategory.vue_vue_type_script_setup_true_lang-Bb2xH4oQ.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as G}from"./SelectColor.vue_vue_type_script_setup_true_lang-C0gzgyIL.js";/* empty css                                                                     *//* empty css             */import{a as Q,c as H}from"./mobileCatNav-CPb4GgBQ.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */import"./brand-CyfpB5Ly.js";import"./category-BhaHXalE.js";import"./category-D6KF81Ae.js";import"./time-EzYK4E-P.js";const J={class:"container"},K={class:"content_wrapper"},W={class:"lyecs-form-table"},Se=h({__name:"Info",props:{id:{type:Number,default:0},type:{type:Number,default:0},typeName:{type:String,default:""},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:N,emit:U}){const u=U,n=V,m=p(!0),b=F().currentRoute.value.query,f=p(n.isDialog?n.act:String(b.act)),y=p(n.isDialog?n.id:Number(b.id)),k=f.value==="add"?"create":"update",_=L(),o=p({brandIds:[],isShow:1,sortOrder:50}),x=async()=>{try{const r=await Q(f.value,{id:y.value});r.brandIds==null&&(r.brandIds=[]),Object.assign(o.value,r),Array.isArray(o.value.imgUrl)||(o.value.imgUrl=[])}catch(r){g.error(r.message),u("close")}finally{m.value=!1}};q(()=>{f.value==="detail"?x():m.value=!1});const I=async()=>{await _.value.validate();try{u("update:confirmLoading",!0);const r=await H(k,{id:y.value,...o.value});u("submitCallback",r),g.success("操作成功")}catch(r){g.error(r.message)}finally{u("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{I()}}),(r,e)=>{const s=i("el-form-item"),B=i("TigInput"),w=i("el-radio"),O=i("el-radio-group"),D=i("el-button"),M=i("el-form"),R=i("a-spin");return C(),A("div",J,[c("div",K,[c("div",W,[m.value?j("",!0):(C(),T(M,{key:0,ref_key:"formRef",ref:_,model:o.value,"label-width":"auto"},{default:l(()=>[t(s,{label:"选择分类",rules:[{required:!0,message:"名称不能为空!"}],prop:"categoryId"},{default:l(()=>[t(d(S),{categoryId:o.value.categoryId,"onUpdate:categoryId":e[0]||(e[0]=a=>o.value.categoryId=a)},null,8,["categoryId"])]),_:1}),t(s,{label:"分类颜色",prop:"catColor"},{default:l(()=>[t(d(G),{color:o.value.catColor,"onUpdate:color":e[1]||(e[1]=a=>o.value.catColor=a)},null,8,["color"])]),_:1}),t(s,{label:"分类banner",prop:"catColor"},{default:l(()=>[t(d(z),{photos:o.value.imgUrl,"onUpdate:photos":e[2]||(e[2]=a=>o.value.imgUrl=a),isMultiple:!0},null,8,["photos"]),e[7]||(e[7]=c("div",{class:"extra"},"提示：您可以通过拖拽来调整相册图片顺序，请统一上传比例为2:1的图片",-1))]),_:1}),t(s,{label:"推荐子分类",prop:"childCatIds"},{default:l(()=>[t(d(S),{categoryId:o.value.childCatIds,"onUpdate:categoryId":e[3]||(e[3]=a=>o.value.childCatIds=a),multiple:!0},null,8,["categoryId"])]),_:1}),t(s,{label:"推荐品牌",prop:"brandIds"},{default:l(()=>[t(d(E),{modelValue:o.value.brandIds,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.brandIds=a),modelModifiers:{brandIds:!0},style:{width:"192px"},multiple:""},null,8,["modelValue"])]),_:1}),t(s,{label:"排序",prop:"sortOrder"},{default:l(()=>[t(B,{type:"integer",width:"192px",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.sortOrder=a)},null,8,["modelValue"])]),_:1}),t(s,{label:"是否显示",prop:"isShow"},{default:l(()=>[t(O,{modelValue:o.value.isShow,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.isShow=a)},{default:l(()=>[t(w,{value:1},{default:l(()=>[...e[8]||(e[8]=[v("是",-1)])]),_:1}),t(w,{value:0},{default:l(()=>[...e[9]||(e[9]=[v("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),P(t(s,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:I},{default:l(()=>[...e[10]||(e[10]=[v("提交",-1)])]),_:1},512)]),_:1},512),[[$,!n.isDialog]])]),_:1},8,["model"])),t(R,{spinning:m.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Se as default};

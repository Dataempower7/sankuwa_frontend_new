import{d as I,r as d,a as L,a2 as R,o as U,K as f,e as u,f as F,g as w,h as v,j as q,k as P,l as a,z as t,G as j,i as G,L as _,J as z}from"./index-BLXOA87U.js";import{F as A}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-DfcXXcrS.js";import"./index-DpgvsnVO.js";import"./vuedraggable.umd-OAFqtEpj.js";import{a as E,c as J}from"./productServices-BdmrmZIK.js";import"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import"./format-DdZABYp4.js";import"./BusinessImg-C3Ug8bC9.js";import"./currencyManagement-ZKRxsK3T.js";import"./version-hjn5tnxG.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const K={class:"container"},M={class:"content_wrapper"},$={class:"lyecs-form-table"},se=I({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:x,emit:N}){const n=N,i=k,m=d(!0),g=L().currentRoute.value.query,p=d(i.isDialog?i.act:String(g.act)),b=d(i.isDialog?i.id:Number(g.id)),C=p.value==="add"?"create":"update",y=R(),o=d({sortOrder:50,defaultOn:1});U(()=>{p.value==="detail"?D():m.value=!1});const D=async()=>{try{const r=await E(p.value,{id:b.value});Object.assign(o.value,r)}catch(r){f.error(r.message),n("close")}finally{m.value=!1}},V=async()=>{await y.value.validate();try{n("update:confirmLoading",!0);const r=await J(C,{id:b.value,...o.value});n("submitCallback",r),f.success("操作成功")}catch(r){f.error(r.message)}finally{n("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{V()}}),(r,e)=>{const c=u("TigInput"),s=u("el-form-item"),S=u("el-radio"),O=u("el-radio-group"),B=u("el-button"),T=u("el-form");return w(),F("div",K,[v("div",M,[v("div",$,[m.value?P("",!0):(w(),q(T,{key:0,ref_key:"formRef",ref:y,model:o.value,"label-width":"auto"},{default:a(()=>[t(s,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"productServiceName"},{default:a(()=>[t(c,{classType:"tig-form-input",modelValue:o.value.productServiceName,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.productServiceName=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"简介"},{default:a(()=>[t(c,{classType:"tig-form-input",modelValue:o.value.productServiceDesc,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.productServiceDesc=l),rows:2,placeholder:"请输入简介",type:"textarea"},null,8,["modelValue"])]),_:1}),t(s,{label:"图标"},{default:a(()=>[t(G(A),{photo:o.value.icoImg,"onUpdate:photo":e[2]||(e[2]=l=>o.value.icoImg=l)},null,8,["photo"]),e[6]||(e[6]=v("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1,__:[6]}),t(s,{label:"排序"},{default:a(()=>[t(c,{classType:"tig-form-input",type:"integer",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"是否默认"},{default:a(()=>[t(O,{modelValue:o.value.defaultOn,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.defaultOn=l)},{default:a(()=>[t(S,{value:1},{default:a(()=>e[7]||(e[7]=[_("是",-1)])),_:1,__:[7]}),t(S,{value:0},{default:a(()=>e[8]||(e[8]=[_("否",-1)])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1}),j(t(s,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[5]||(e[5]=l=>V())},{default:a(()=>e[9]||(e[9]=[_("提交",-1)])),_:1,__:[9]},512)]),_:1},512),[[z,!i.isDialog]])]),_:1},8,["model"]))])])])}}});export{se as default};

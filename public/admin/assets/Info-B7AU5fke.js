import{d as x,r as m,b as D,ab as q,o as L,P as f,f as n,g as U,h as S,i as N,k as E,l as I,m as a,z as o,L as F,Q as g,O as j}from"./index-B52YIGC0.js";import{a as z,c as P}from"./rechargeSetting-CyzsVgNl.js";const Q={class:"container"},A={class:"content_wrapper"},G={class:"lyecs-form-table"},W=x({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(R,{expose:k,emit:C}){const d=C,u=R,c=m(!0),v=D().currentRoute.value.query,p=m(u.isDialog?u.act:String(v.act)),y=m(u.isDialog?u.id:Number(v.id)),h=p.value==="add"?"create":"update",_=q(),t=m({discountMoney:"",money:"",sortOrder:1,isShow:1});L(()=>{p.value==="detail"?B():c.value=!1});const B=async()=>{try{const l=await z(p.value,{id:y.value});Object.assign(t.value,l)}catch(l){f.error(l.message),d("close")}finally{c.value=!1}},b=(l,e,r)=>{if(console.log(e),Number(e)===0||e===""){r(new Error("金额不能为0或者为空！"));return}else if(Number(e)<0){r(new Error("金额必须大于0！"));return}else r()},w=async()=>{await _.value.validate();try{d("update:confirmLoading",!0);const l=await P(h,{id:y.value,...t.value});d("submitCallback",l),f.success("操作成功")}catch(l){f.error(l.message)}finally{d("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{w()}}),(l,e)=>{const r=n("TigInput"),i=n("el-form-item"),V=n("el-radio"),M=n("el-radio-group"),O=n("el-button"),T=n("el-form");return S(),U("div",Q,[N("div",A,[N("div",G,[c.value?I("",!0):(S(),E(T,{key:0,ref_key:"formRef",ref:_,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{prop:"money",label:"充值金额",rules:[{required:!0,validator:b,trigger:"blur"}]},{default:a(()=>[o(r,{classType:"tig-form-input",type:"decimal",modelValue:t.value.money,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.money=s),min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(i,{prop:"discountMoney",label:"赠送金额",rules:[{required:!0,validator:b,trigger:"blur"}]},{default:a(()=>[o(r,{classType:"tig-form-input",type:"decimal",modelValue:t.value.discountMoney,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.discountMoney=s),min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(i,{prop:"sortOrder",label:"排序"},{default:a(()=>[o(r,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.sortOrder=s)},null,8,["modelValue"])]),_:1}),o(i,{prop:"isShow",label:"是否显示"},{default:a(()=>[o(M,{modelValue:t.value.isShow,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.isShow=s)},{default:a(()=>[o(V,{value:1},{default:a(()=>[...e[4]||(e[4]=[g("是",-1)])]),_:1}),o(V,{value:0},{default:a(()=>[...e[5]||(e[5]=[g("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),F(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:a(()=>[...e[6]||(e[6]=[g("提交",-1)])]),_:1},512)]),_:1},512),[[j,!u.isDialog]])]),_:1},8,["model"]))])])])}}});export{W as default};

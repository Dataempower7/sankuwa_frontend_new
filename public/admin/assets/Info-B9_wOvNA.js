import{d as z,r as i,a as U,a2 as j,ah as O,o as h,K as p,e as r,f as w,g as f,h as d,j as k,k as E,l as s,z as l,G,F as J,m as K,L as M,J as P,_ as $}from"./index-BLXOA87U.js";import{c as A,u as H}from"./verbalAssociation-BGcJrgq0.js";import{g as Q}from"./languagesList-g8H0RafD.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},Z=z({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(L,{expose:I,emit:S}){const c=S,n=L,_=i(),u=i(!0),g=U().currentRoute.value.query,v=i(n.isDialog?n.act:String(g.act)),y=i(n.isDialog?n.id:Number(g.id)),C=v.value==="add"?"create":"update",b=j(),o=i({code:"",name:"",localesId:0}),N=O({page:1,size:99999,sortField:"",sortOrder:"",keyword:""}),R=async()=>{u.value=!0;try{const t=await Q({...N});_.value=t.records}catch(t){p.error(t.message)}finally{u.value=!1}};h(()=>{v.value==="detail"?B():u.value=!1,R()});const B=async()=>{try{const t=await A(v.value,{id:y.value});Object.assign(o.value,t)}catch(t){p.error(t.message),c("close")}finally{u.value=!1}},x=async()=>{await b.value.validate();try{c("update:confirmLoading",!0);const t=await H(C,{id:y.value,...o.value});c("submitCallback",t),p.success("操作成功")}catch(t){p.error(t.message)}finally{c("update:confirmLoading",!1)}};return I({onFormSubmit:()=>{x()}}),(t,e)=>{const V=r("TigInput"),m=r("el-form-item"),F=r("el-option"),T=r("el-select"),q=r("el-button"),D=r("el-form");return f(),w("div",W,[d("div",X,[d("div",Y,[u.value?E("",!0):(f(),k(D,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:s(()=>[l(m,{prop:"name",label:"所属地区：",rules:[{required:!0,message:"所属地区不能为空!"}]},{default:s(()=>[l(V,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a)},null,8,["modelValue"]),e[4]||(e[4]=d("div",{class:"extra"},"例如：中国、中国香港、中国台湾、英国、法国",-1))]),_:1,__:[4]}),l(m,{prop:"code",label:"语言识别码：",rules:[{required:!0,message:"语言识别码不能为空!"}]},{default:s(()=>[l(V,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.code=a)},null,8,["modelValue"]),e[5]||(e[5]=d("div",{class:"extra"},"浏览器语言识别码",-1))]),_:1,__:[5]}),l(m,{prop:"localesId",label:"关联语言：",rules:[{required:!0,message:"请选择关联语言!"}]},{default:s(()=>[l(T,{modelValue:o.value.localesId,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.localesId=a),placeholder:"请选择关联语言",size:"default"},{default:s(()=>[(f(!0),w(J,null,K(_.value,a=>(f(),k(F,{key:a.id,label:a.language,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[6]||(e[6]=d("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1,__:[6]}),G(l(m,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[l(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[3]||(e[3]=a=>x())},{default:s(()=>e[7]||(e[7]=[M("提交",-1)])),_:1,__:[7]},512)]),_:1},512),[[P,!n.isDialog]])]),_:1},8,["model"]))])])])}}}),le=$(Z,[["__scopeId","data-v-13a688e2"]]);export{le as default};

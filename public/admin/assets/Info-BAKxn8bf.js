import{d as B,r as n,b as D,ab as L,o as R,P as p,f as u,g as T,h as y,i as k,k as q,l as E,m as l,z as o,L as I,Q as F,O as G}from"./index-B52YIGC0.js";import{a as O,b as U}from"./eCard-Dvo5O7Lr.js";const j={class:"container"},z={class:"content_wrapper"},M={class:"lyecs-form-table"},H=B({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:V,emit:C}){const r=C,s=w,i=n(!0),f=D().currentRoute.value.query,m=n(s.isDialog?s.act:String(f.act)),v=n(s.isDialog?s.id:Number(f.id)),N=m.value==="add"?"create":"update",_=L(),a=n({});R(()=>{m.value==="detail"?h():i.value=!1});const h=async()=>{try{const e=await O(m.value,{id:v.value});Object.assign(a.value,e)}catch(e){p.error(e.message),r("close")}finally{i.value=!1}},g=async()=>{await _.value.validate();try{r("update:confirmLoading",!0);const e=await U(N,{id:v.value,...a.value});r("submitCallback",e),p.success("操作成功")}catch(e){p.error(e.message)}finally{r("update:confirmLoading",!1)}};return V({onFormSubmit:()=>{g()}}),(e,t)=>{const b=u("TigInput"),c=u("el-form-item"),S=u("el-button"),x=u("el-form");return y(),T("div",j,[k("div",z,[k("div",M,[i.value?E("",!0):(y(),q(x,{key:0,ref_key:"formRef",ref:_,model:a.value,"label-width":"auto"},{default:l(()=>[o(c,{prop:"groupName",label:"卡券组名称",rules:[{required:!0,message:"电子卡券组名称不能为空!"}]},{default:l(()=>[o(b,{classType:"tig-form-input",modelValue:a.value.groupName,"onUpdate:modelValue":t[0]||(t[0]=d=>a.value.groupName=d)},null,8,["modelValue"])]),_:1}),o(c,{prop:"remark",label:"备注"},{default:l(()=>[o(b,{classType:"tig-form-input",type:"textarea",modelValue:a.value.remark,"onUpdate:modelValue":t[1]||(t[1]=d=>a.value.remark=d)},null,8,["modelValue"])]),_:1}),I(o(c,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(S,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:l(()=>[...t[2]||(t[2]=[F("提交",-1)])]),_:1},512)]),_:1},512),[[G,!s.isDialog]])]),_:1},8,["model"]))])])])}}});export{H as default};

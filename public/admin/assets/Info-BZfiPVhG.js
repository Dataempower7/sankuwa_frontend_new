import{d as L,r as u,b as I,ab as j,o as O,f as s,g as z,h as d,i as c,z as t,m as l,k as _,l as A,L as E,j as Y,Q as b,O as G,P as f}from"./index-B52YIGC0.js";import{F as P}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{_ as Q}from"./Editor.vue_vue_type_style_index_0_lang-ChPMQjFJ.js";import{b as $,c as J}from"./notice-Dfj5MN39.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */import"./index.esm-CBYqueH9.js";const W={class:"container"},X={class:"content_wrapper"},Z={class:"lyecs-form-table"},h={class:"lyecs-form-table"},ve=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(B,{expose:C,emit:S}){const m=S,i=B,g=u(1),p=u(!0),y=I().currentRoute.value.query,v=u(i.isDialog?i.act:String(y.act)),V=u(i.isDialog?i.id:Number(y.id)),q=v.value==="add"?"create":"update",T=j(),o=u({isTop:0,content:""}),N=async()=>{try{const r=await $(v.value,{id:V.value});Object.assign(o.value,r)}catch(r){f.error(r.message),m("close")}finally{p.value=!1}};O(()=>{v.value==="detail"?N():p.value=!1});const k=async()=>{if(await T.value.validate(),o.value.content===""){f.error("正文内容不能为空!");return}try{m("update:confirmLoading",!0);const r=await J(q,{id:V.value,...o.value});m("submitCallback",r),f.success("操作成功")}catch(r){f.error(r.message)}finally{m("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{k()}}),(r,e)=>{const w=s("TigInput"),n=s("el-form-item"),x=s("el-date-picker"),D=s("el-radio"),M=s("el-radio-group"),R=s("el-button"),F=s("el-form"),U=s("el-tab-pane"),H=s("el-tabs"),K=s("a-spin");return d(),z("div",W,[c("div",X,[c("div",Z,[t(H,{activeKey:g.value,"onUpdate:activeKey":e[7]||(e[7]=a=>g.value=a),class:"lyecs-tabs","tab-position":"top"},{default:l(()=>[(d(),_(U,{key:1,label:"基础设置"},{default:l(()=>[c("div",h,[p.value?A("",!0):(d(),_(F,{key:0,ref_key:"formRef",ref:T,model:o.value,"label-width":"auto"},{default:l(()=>[t(n,{rules:[{required:!0,message:"页面名称不能为空!"}],label:"页面名称",prop:"title"},{default:l(()=>[t(w,{classType:"tig-form-input",modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.title=a)},null,8,["modelValue"])]),_:1}),t(n,{label:"封面图片",prop:"img",rules:[{required:!0,message:"封面图片不能为空!"}]},{default:l(()=>[t(Y(P),{photo:o.value.img,"onUpdate:photo":e[1]||(e[1]=a=>o.value.img=a)},null,8,["photo"]),e[8]||(e[8]=c("div",{class:"extra"},"请统一上传比例为2:1的图片，宽600px，高450px（高清）",-1))]),_:1}),t(n,{label:"推送时间",prop:"startTime",rules:[{required:!0,message:"推送时间不能为空!"}]},{default:l(()=>[t(x,{modelValue:o.value.startTime,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.startTime=a),type:"datetime",placeholder:"请选择推送时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(n,{label:"失效时间",prop:"endTime"},{default:l(()=>[t(x,{modelValue:o.value.endTime,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.endTime=a),type:"datetime",placeholder:"请选择失效时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(n,{label:"页面描述",prop:"describe",rules:[{required:!0,message:"页面描述不能为空!"}]},{default:l(()=>[t(w,{classType:"tig-form-input",modelValue:o.value.describe,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.describe=a),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(n,{label:"是否置顶",prop:"isTop"},{default:l(()=>[t(M,{modelValue:o.value.isTop,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.isTop=a)},{default:l(()=>[t(D,{value:1},{default:l(()=>[...e[9]||(e[9]=[b("置顶",-1)])]),_:1}),t(D,{value:0},{default:l(()=>[...e[10]||(e[10]=[b("不置顶",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),E(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:l(()=>[...e[11]||(e[11]=[b("提交",-1)])]),_:1},512)]),_:1},512),[[G,!i.isDialog]])]),_:1},8,["model"]))])]),_:1})),(d(),_(U,{key:2,label:"正文内容"},{default:l(()=>[t(Y(Q),{html:o.value.content,"onUpdate:html":e[6]||(e[6]=a=>o.value.content=a)},null,8,["html"])]),_:1}))]),_:1},8,["activeKey"]),t(K,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ve as default};

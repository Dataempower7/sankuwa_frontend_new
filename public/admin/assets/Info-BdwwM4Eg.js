import{d as O,r as f,b as P,ab as z,o as E,P as S,f as s,g as C,h as y,i as v,z as l,m as o,L as G,k as A,l as k,j as g,Q as r,O as K}from"./index-B52YIGC0.js";import{F as M}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{a as Q,c as $}from"./article-rWlGXn3e.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import{S as J}from"./SelectProduct-C4WsEKWV.js";/* empty css                                                                    */import{S as W}from"./SelectArticleCategory-pFW3LdpQ.js";/* empty css                                                                     *//* empty css             */import{_ as X}from"./Editor.vue_vue_type_style_index_0_lang-ChPMQjFJ.js";import{B}from"./BusinessData-Dbgv1FCM.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */import"./time-EzYK4E-P.js";import"./product-hE35r0Q_.js";import"./Pagination-C8J7-6Em.js";import"./SelectSku-ZXdrD9qH.js";/* empty css                                                                  */import"./articleCategory-CNnOMiMc.js";/* empty css                                                                              */import"./index.esm-CBYqueH9.js";const Y={class:"container"},Z={class:"content_wrapper"},h={class:"lyecs-form-table"},ee={key:0,class:"relative"},Be=O({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(D,{expose:N,emit:R}){const V=R,p=D,T=f(1),m=f(!0),U=P().currentRoute.value.query,c=f(p.isDialog?p.act:String(U.act)),_=f(p.isDialog?p.id:Number(U.id)),q=c.value==="add"?"create":"update",x=z(),t=f({isShow:1,isHot:0,isTop:0,articleType:1,articleCategoryId:[],productIds:[]});E(()=>{c.value==="detail"?F():m.value=!1});const F=async()=>{try{m.value=!0;const i=await Q(c.value,{id:_.value});Object.assign(t.value,i)}catch(i){S.error(i.message),V("close")}finally{m.value=!1}},I=async()=>{await x.value.validate();try{V("update:confirmLoading",!0);const i=await $(q,{id:_.value,...t.value});V("submitCallback",i),S.success("操作成功")}catch(i){S.error(i.message)}finally{V("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{I()}}),(i,e)=>{const u=s("el-form-item"),n=s("TigInput"),d=s("el-radio"),b=s("el-radio-group"),H=s("el-button"),w=s("el-tab-pane"),L=s("el-tabs"),j=s("el-form");return y(),C("div",Y,[v("div",Z,[v("div",h,[l(j,{ref_key:"formRef",ref:x,model:t.value,"label-width":"auto"},{default:o(()=>[l(L,{modelValue:T.value,"onUpdate:modelValue":e[16]||(e[16]=a=>T.value=a),class:"lyecs-tabs","tab-position":"top"},{default:o(()=>[l(w,{name:1,label:"基本信息"},{default:o(()=>[l(u,{rules:[{required:!0,message:"文章标题不能为空!"}],extra:"sfs",label:"文章标题",prop:"articleTitle"},{default:o(()=>[l(B,{modelValue:t.value.articleTitle,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.articleTitle=a),placeholder:"请输入文章标题",dataType:6,dataId:_.value},null,8,["modelValue","dataId"])]),_:1}),l(u,{label:"文章编号",prop:"articleSn"},{default:o(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleSn,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.articleSn=a)},null,8,["modelValue"]),e[17]||(e[17]=v("div",{class:"extra"},"编号用于前台调用某些指定的文章",-1))]),_:1}),l(u,{label:"文章分类",prop:"articleCategoryId",rules:[{required:!0,message:"请选择文章分类!"}]},{default:o(()=>[m.value?k("",!0):(y(),A(g(W),{key:0,modelValue:t.value.articleCategoryId,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.articleCategoryId=a),"min-width":"100%"},null,8,["modelValue"]))]),_:1}),l(u,{label:"缩略图",prop:"articleThumb"},{default:o(()=>[l(g(M),{photo:t.value.articleThumb,"onUpdate:photo":e[3]||(e[3]=a=>t.value.articleThumb=a)},null,8,["photo"]),e[18]||(e[18]=v("div",{class:"extra"},"请统一上传比例为1:2的图片，宽100px，高200px（高清）",-1))]),_:1}),l(u,{label:"文章作者",prop:"articleAuthor"},{default:o(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleAuthor,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.articleAuthor=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"关键字",prop:"keywords"},{default:o(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.keywords,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.keywords=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"标签",prop:"articleTag"},{default:o(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleTag,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.articleTag=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"描述",prop:"description"},{default:o(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.description=a),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"相关链接",prop:"link"},{default:o(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.link,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.link=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"文章类型",prop:"articleType"},{default:o(()=>[l(b,{modelValue:t.value.articleType,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.articleType=a)},{default:o(()=>[l(d,{value:1},{default:o(()=>[...e[19]||(e[19]=[r("普通文章",-1)])]),_:1}),l(d,{value:2},{default:o(()=>[...e[20]||(e[20]=[r("帮助文章",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否置顶",prop:"isTop"},{default:o(()=>[l(b,{modelValue:t.value.isTop,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.isTop=a)},{default:o(()=>[l(d,{value:1},{default:o(()=>[...e[21]||(e[21]=[r("是",-1)])]),_:1}),l(d,{value:0},{default:o(()=>[...e[22]||(e[22]=[r("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否热门",prop:"isHot"},{default:o(()=>[l(b,{modelValue:t.value.isHot,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.isHot=a)},{default:o(()=>[l(d,{value:1},{default:o(()=>[...e[23]||(e[23]=[r("是",-1)])]),_:1}),l(d,{value:0},{default:o(()=>[...e[24]||(e[24]=[r("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否显示",prop:"isShow"},{default:o(()=>[l(b,{modelValue:t.value.isShow,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.isShow=a)},{default:o(()=>[l(d,{value:1},{default:o(()=>[...e[25]||(e[25]=[r("是",-1)])]),_:1}),l(d,{value:0},{default:o(()=>[...e[26]||(e[26]=[r("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),G(l(u,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[l(H,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:I},{default:o(()=>[...e[27]||(e[27]=[r("提交 ",-1)])]),_:1},512)]),_:1},512),[[K,!p.isDialog]])]),_:1}),l(w,{name:2,label:"文章内容"},{default:o(()=>[T.value==2?(y(),C("div",ee,[l(g(X),{html:t.value.content,"onUpdate:html":e[13]||(e[13]=a=>t.value.content=a)},null,8,["html"]),l(B,{modelValue:t.value.content,"onUpdate:modelValue":e[14]||(e[14]=a=>t.value.content=a),dataType:12,type:"editor"},null,8,["modelValue"])])):k("",!0)]),_:1}),l(w,{name:3,label:"关联商品"},{default:o(()=>[l(u,{label:"",prop:"productIds"},{default:o(()=>[m.value?k("",!0):(y(),A(g(J),{key:0,ids:t.value.productIds,"onUpdate:ids":e[15]||(e[15]=a=>t.value.productIds=a),max:10},null,8,["ids"])),e[28]||(e[28]=v("div",{class:"extra"},"最多添加10个商品，添加的商品会在结算后自动加入订单（不会计价格）",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])])])])}}});export{Be as default};

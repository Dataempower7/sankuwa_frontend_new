import{d as U,R as F,r as m,b as L,ab as q,o as j,f as s,g as A,h as c,i as V,k as C,l as h,z as t,m as a,L as z,j as k,Q as f,O as E,P as g}from"./index-B52YIGC0.js";import{F as G}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{_ as M}from"./SelectShopProductCategory.vue_vue_type_script_setup_true_lang-DmdbWE5K.js";/* empty css             */import{e as Q,f as $,u as H}from"./shopProductCategory-DyQBhq8U.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */import"./time-EzYK4E-P.js";const J={class:"container"},K={class:"content_wrapper"},W={class:"lyecs-form-table"},_e=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:P,emit:x}){F();const p=x,n=N,u=m(!0),y=L().currentRoute.value.query,d=m(n.isDialog?n.act:String(y.act)),v=m(n.isDialog?n.id:Number(y.id)),_=d.value==="add"?"create":"update",b=q(),o=m({isShow:1,sortOrder:50}),B=async()=>{try{const l=await Q(d.value,{id:v.value});Object.assign(o.value,l)}catch(l){g.error(l.message),p("close")}finally{u.value=!1}};j(()=>{d.value==="detail"?B():u.value=!1,_==="create"&&(o.value.parentId=n.parentId,console.log(o.value.parentId))});const S=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const l=await $(_,{id:v.value,...o.value});p("submitCallback",l),g.success("操作成功"),H().clearShopProductCategory()}catch(l){g.error(l.message)}finally{p("update:confirmLoading",!1)}};return P({onFormSubmit:()=>{S()}}),(l,e)=>{const w=s("TigInput"),i=s("el-form-item"),I=s("el-radio"),O=s("el-radio-group"),R=s("el-button"),D=s("el-form"),T=s("a-spin");return c(),A("div",J,[V("div",K,[V("div",W,[u.value?h("",!0):(c(),C(D,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:a(()=>[t(i,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"categoryName"},{default:a(()=>[t(w,{classType:"tig-form-input",modelValue:o.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.categoryName=r)},null,8,["modelValue"])]),_:1}),t(i,{label:"上级分类",prop:"parentId"},{default:a(()=>[u.value?h("",!0):(c(),C(k(M),{key:0,categoryId:o.value.parentId,"onUpdate:categoryId":e[1]||(e[1]=r=>o.value.parentId=r),multiple:!1,style:{width:"100%"}},null,8,["categoryId"]))]),_:1}),t(i,{label:"分类图片",prop:"categoryPic"},{default:a(()=>[t(k(G),{photo:o.value.categoryPic,"onUpdate:photo":e[2]||(e[2]=r=>o.value.categoryPic=r)},null,8,["photo"])]),_:1}),t(i,{label:"排序",prop:"sortOrder"},{default:a(()=>[t(w,{classType:"tig-form-input",type:"integer",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.sortOrder=r)},null,8,["modelValue"])]),_:1}),t(i,{label:"是否显示",prop:"isShow"},{default:a(()=>[t(O,{modelValue:o.value.isShow,"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.isShow=r)},{default:a(()=>[t(I,{value:1},{default:a(()=>[...e[5]||(e[5]=[f("是",-1)])]),_:1}),t(I,{value:0},{default:a(()=>[...e[6]||(e[6]=[f("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),z(t(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:S},{default:a(()=>[...e[7]||(e[7]=[f("提交 ",-1)])]),_:1},512)]),_:1},512),[[E,!n.isDialog]])]),_:1},8,["model"])),t(T,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{_e as default};

import{d as D,r as n,b as L,ab as P,o as T,f as m,g as l,h as o,i as a,z as c,l as f,t as s,F as j,p as q,j as U,k as z,m as x,P as _,_ as E}from"./index-B52YIGC0.js";import{a as M,u as O}from"./feedback-DekIC3ab.js";import{_ as $}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";const A={class:"container"},G={class:"lyecs-form-table"},H={key:0},J={class:"lyecs-form-table"},K={key:0,class:"pic-list flex"},Q={class:"item mr10"},W={style:{"text-align":"end"}},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},Z=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:I,emit:N}){const r=N,i=w,v=n(!0),y=L().currentRoute.value.query,b=n(i.isDialog?i.act:String(y.act)),g=n(i.isDialog?i.id:Number(y.id)),S=b.value==="add"?"create":"update",h=P(),e=n({product:{productId:0,productName:""}}),u=n({product:{productId:0,productName:""}}),C=async()=>{try{const t=await M(b.value,{id:g.value});Object.assign(e.value,t)}catch(t){_.error(t.message),r("close")}finally{v.value=!1}};T(()=>{C()});const F=async()=>{await h.value.validate();try{r("update:confirmLoading",!0);let t=0;e.value.status==1&&(t=e.value.id);const d=await O(S,{id:g.value,parentId:t,...u.value});r("submitCallback",d),_.success("操作成功")}catch(t){_.error(t.message)}finally{r("update:confirmLoading",!1)}};return I({onFormSubmit:()=>{F()}}),(t,d)=>{const k=m("el-divider"),R=m("TigInput"),V=m("el-form-item"),B=m("el-form");return o(),l("div",A,[a("div",G,[a("h2",null,[a("span",null,"类型:"+s(e.value.typeName),1),e.value.productId?(o(),l("span",H,"【 "+s(e.value.product.productName)+" 】",1)):f("",!0)])]),c(k),a("div",J,[a("p",null,"主题:"+s(e.value.title),1),a("p",null,"内容: "+s(e.value.content),1),e.value.feedbackPics&&e.value.feedbackPics.length>0?(o(),l("div",K,[(o(!0),l(j,null,q(e.value.feedbackPics,p=>(o(),l("div",Q,[c(U($),{src:p,fit:"contain",style:{height:"120px",width:"120px"}},null,8,["src"])]))),256))])):f("",!0),a("p",W,"【 留言板 】"+s(e.value.username)+" @ "+s(e.value.addTime),1)]),c(k),a("div",X,[a("div",Y,[v.value?f("",!0):(o(),z(B,{key:0,ref_key:"formRef",ref:h,model:u.value,"label-width":"auto"},{default:x(()=>[c(V,{label:"回复内容",prop:"content"},{default:x(()=>[c(R,{classType:"tig-form-input",type:"textarea",rows:5,modelValue:u.value.content,"onUpdate:modelValue":d[0]||(d[0]=p=>u.value.content=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))])])])}}}),ne=E(Z,[["__scopeId","data-v-f0c8aae6"]]);export{ne as default};

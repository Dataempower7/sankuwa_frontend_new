import{d as R,r as d,a as q,a2 as I,o as U,K as c,e as u,f as j,g as D,h as _,j as F,k as z,l,z as a,G as E,L as v,J as G}from"./index-BLXOA87U.js";import{c as J,e as K}from"./currencyManagement-ZKRxsK3T.js";const M={class:"container"},O={class:"content_wrapper"},P={class:"lyecs-form-table"},Q=R({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:C,emit:x}){const i=x,r=k,m=d(!0),y=q().currentRoute.value.query,p=d(r.isDialog?r.act:String(y.act)),b=d(r.isDialog?r.id:Number(y.id)),N=p.value==="add"?"create":"update",g=I(),t=d({name:"",symbol:"",isDefault:0,localesId:""});U(()=>{p.value==="detail"?S():m.value=!1});const S=async()=>{try{const o=await J(p.value,{id:b.value});Object.assign(t.value,o)}catch(o){c.error(o.message),i("close")}finally{m.value=!1}},V=async()=>{await g.value.validate();try{i("update:confirmLoading",!0);const o=await K(N,{id:b.value,...t.value});i("submitCallback",o),c.success("操作成功")}catch(o){c.error(o.message)}finally{i("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{V()}}),(o,e)=>{const f=u("TigInput"),n=u("el-form-item"),w=u("el-radio"),T=u("el-radio-group"),B=u("el-button"),L=u("el-form");return D(),j("div",M,[_("div",O,[_("div",P,[m.value?z("",!0):(D(),F(L,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:l(()=>[a(n,{prop:"name",label:"货币名称：",rules:[{required:!0,message:"货币名称不能为空!"}]},{default:l(()=>[a(f,{classType:"tig-form-input",type:"text",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s)},null,8,["modelValue"])]),_:1}),a(n,{prop:"symbol",label:"币种符号：",rules:[{required:!0,message:"币种符号不能为空!"}]},{default:l(()=>[a(f,{classType:"tig-form-input",type:"text",modelValue:t.value.symbol,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.symbol=s)},null,8,["modelValue"])]),_:1}),a(n,{prop:"isDefault",label:"是否默认："},{default:l(()=>[a(T,{modelValue:t.value.isDefault,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.isDefault=s)},{default:l(()=>[a(w,{value:1},{default:l(()=>e[5]||(e[5]=[v("是",-1)])),_:1,__:[5]}),a(w,{value:0},{default:l(()=>e[6]||(e[6]=[v("否",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),a(n,{prop:"rate",label:"汇率："},{default:l(()=>[a(f,{classType:"tig-form-input",type:"decimal",decimalPlaces:-1,modelValue:t.value.rate,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.rate=s),disabled:t.value.isDefault===1},null,8,["modelValue","disabled"]),e[7]||(e[7]=_("div",{class:"extra"}," 此处填写的汇率将作为平台默认货币的基准汇率。当用户在商城切换不同币种时： 界面显示金额 = 切换后币种 × 您填写的汇率 但用户在支付时，支付金额按国际实时汇率进行计算 ",-1))]),_:1,__:[7]}),E(a(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[a(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=s=>V())},{default:l(()=>e[8]||(e[8]=[v("提交",-1)])),_:1,__:[8]},512)]),_:1},512),[[G,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{Q as default};

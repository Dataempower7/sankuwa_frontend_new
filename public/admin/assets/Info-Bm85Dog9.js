import{d as X,x as Y,r as I,b as Z,ab as tt,o as et,P as y,f as C,g as p,h as o,l as n,z as l,i as a,k as v,Q as s,t as d,F as A,m as i,j as c,p as at,_ as st}from"./index-B52YIGC0.js";import{d as lt,e as it,c as L,g as ot,a as rt,u as dt}from"./order-BVunCi_y.js";import"./index-KjhYqCTY.js";import{O as nt}from"./OrderMoney-CvYIPWKR.js";import{p as D}from"./format-BxqOrW-w.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as ut}from"./Tooltip-D3FQwVoj.js";/* empty css                                                                    */import{P as pt}from"./ProductCard-8OYszTHR.js";import ct from"./OperationLog-Bl7ae2jZ.js";import mt from"./LogisticsTracking-Cy6lzMHH.js";import{M as vt}from"./MobileCard-qEvTFKQw.js";import{_ as ft}from"./EditSign.vue_vue_type_style_index_0_lang-BCWMSEv7.js";import yt from"./SignTag-DUbb66q5.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import{M as P}from"./index-C9ZdVeVx.js";import{S as _t}from"./index-CRJW_EnN.js";import"./Pagination-C8J7-6Em.js";import"./useResetState-sGRO8oUE.js";const bt={key:0},kt={key:0,class:"container-card"},gt={class:"border-bottom"},xt={key:0,style:{"margin-left":"10px"}},Ct={class:"mt10"},Ot={key:1,class:"button-card babyBlue pd20"},St={class:"container-card"},It={class:"info-card"},ht={class:"card-title"},wt={class:"min-title"},Nt={class:"card-li"},Tt={class:"li-info"},At={class:"card-li"},Dt={class:"li-info"},Pt={class:"card-li"},zt={class:"li-info"},Bt={key:0,class:"card-li"},Mt={class:"li-info"},Vt={key:1,class:"card-li"},Lt={class:"li-info"},Rt={key:2,class:"card-li"},$t={class:"li-info"},Et={class:"card-li"},Ft={class:"li-info"},qt={class:"card-li"},Wt={class:"li-info"},jt={class:"card-title"},Ut={class:"min-title"},Gt={class:"card-li"},Qt={class:"li-info"},Ht={class:"card-li"},Jt={class:"li-info"},Kt={class:"card-li"},Xt={class:"li-info"},Yt={class:"card-li"},Zt={class:"li-info"},te={class:"card-title"},ee={class:"card-li"},ae={class:"li-info"},se={class:"card-li"},le={class:"li-info"},ie={class:"container-card"},oe={class:"title"},re={class:"product-card-tp"},de={key:0,class:"gift"},ne={key:1},ue={class:"total"},pe={class:"gray",style:{"margin-right":"16px"}},ce={class:"title"},me={key:1,class:"container-card"},ve=X({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isParent:{type:Boolean,default:!1},isDialog:Boolean},emits:["submitCallback","callback","update:confirmLoading","close"],setup(R,{expose:$,emit:E}){Y();const O=E,g=R,b=I(!0),N=Z().currentRoute.value.query,z=I(g.isDialog?g.act:String(N.act)),S=I(g.isDialog?g.id:Number(N.id)),x=I(g.isDialog?g.isParent:!!N.isParent),F=z.value==="add"?"create":"update",q=tt(),e=I({balance:0,couponAmount:0,pointsAmount:0,productAmount:0,totalProductWeight:0,orderId:0,items:[],payType:0,availableActions:{},totalAmount:0,paidAmount:0,updateOrderSn:0,unpaidAmount:0});et(()=>{b.value=!0,T()});const T=async()=>{try{const u=await lt(z.value,{id:S.value});Object.assign(e.value,u)}catch(u){y.error(u.message),O("close")}finally{b.value=!1}},W=()=>{P.confirm({title:"确认拆分订单吗？",onOk:async()=>{try{const u=await it({id:S.value});y.success("操作成功"),f()}catch(u){y.error(u.message)}finally{b.value=!1}}})},j=()=>{P.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const u=await L("delOrder",{id:S.value});y.success("操作成功"),f()}catch(u){y.error(u.message)}finally{b.value=!1}}})},U=()=>{P.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const u=await L("confirmReceipt",{id:S.value});y.success("操作成功"),f()}catch(u){y.error(u.message)}finally{b.value=!1}}})},f=(u={})=>{T(),O("callback",u)},G=async()=>{await q.value.validate();try{O("update:confirmLoading",!0);const u=await dt(F,{id:S.value,...e.value});O("submitCallback",u),y.success("操作成功")}catch(u){y.error(u.message)}finally{O("update:confirmLoading",!1)}},Q=()=>{G()},B=async(u,t)=>{try{t==="order"&&await ot({ids:e.value.orderId}),t==="waybill"&&await rt({id:e.value.orderId}),window.open(u,"_blank")}catch(h){y.error(h.message)}};return $({onFormSubmit:Q}),(u,t)=>{var M,V;const h=C("el-divider"),m=C("el-button"),H=C("el-space"),_=C("el-table-column"),J=C("el-table"),K=C("a-spin");return o(),p(A,null,[b.value?n("",!0):(o(),p("div",bt,[x.value?n("",!0):(o(),p("div",kt,[a("div",gt,[s(" 订单编号："+d(e.value.orderSn)+" ",1),l(h,{direction:"vertical"}),s(" 下单时间："+d(e.value.addTime)+" ",1),e.value.storeTitle?(o(),p(A,{key:0},[l(h,{direction:"vertical"}),a("span",null,"下单店铺："+d(e.value.storeTitle),1)],64)):n("",!0)]),l(H,{size:10,class:"button-card"},{default:i(()=>[e.value.availableActions.setPaid?(o(),v(c(k),{key:0,params:{act:"setPaid",id:e.value.orderId},isDrawer:"",path:"order/order/src/Operation",title:"设置为已支付",width:"600px",onOkCallback:f},{default:i(()=>[l(m,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:i(()=>[...t[4]||(t[4]=[s(" 设置为已支付 ",-1)])]),_:1})]),_:1},8,["params"])):n("",!0),e.value.availableActions.cancelOrder?(o(),v(c(k),{key:1,params:{act:"cancelOrder",id:e.value.orderId},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:f},{default:i(()=>[l(m,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:i(()=>[...t[5]||(t[5]=[s(" 取消订单 ",-1)])]),_:1})]),_:1},8,["params"])):n("",!0),e.value.availableActions.delOrder?(o(),v(m,{key:2,bg:"",size:"small",text:"",type:"primary",onClick:j},{default:i(()=>[...t[6]||(t[6]=[s(" 删除订单 ",-1)])]),_:1})):n("",!0),e.value.availableActions.deliver?(o(),v(c(k),{key:3,params:{act:"detail",id:e.value.orderId},title:"订单发货 "+e.value.orderSn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:f},{default:i(()=>[l(m,{bg:"",size:"small",text:"",type:"danger"},{default:i(()=>[...t[7]||(t[7]=[s(" 去发货 ",-1)])]),_:1})]),_:1},8,["params","title"])):n("",!0),e.value.availableActions.confirmReceipt?(o(),v(m,{key:4,bg:"",size:"small",text:"",type:"primary",onClick:U},{default:i(()=>[...t[8]||(t[8]=[s(" 确认已收货 ",-1)])]),_:1})):n("",!0),e.value.availableActions.splitOrder?(o(),v(m,{key:5,bg:"",size:"small",text:"",type:"danger",onClick:W},{default:i(()=>[t[9]||(t[9]=s(" 拆分店铺订单",-1)),l(c(ut),{ico:"",content:"该订单来自多个店铺且还未拆分，在做任何操作前，您需要先拆分该订单"})]),_:1})):n("",!0),l(m,{bg:"",size:"small",text:"",type:"primary",onClick:t[0]||(t[0]=r=>B(`/admin/print/orderPrint?ids=${e.value.orderId}`,"order"))},{default:i(()=>[...t[10]||(t[10]=[s(" 打印订单 ",-1)])]),_:1}),e.value.wayBill?(o(),v(m,{key:6,bg:"",size:"small",text:"",type:"primary",onClick:t[1]||(t[1]=r=>B(`/admin/print/waybill?id=${e.value.orderId}`,"waybill"))},{default:i(()=>[...t[11]||(t[11]=[s(" 打印面单 ",-1)])]),_:1})):n("",!0)]),_:1}),e.value.mark?(o(),p("div",xt,[l(ft,{title:"编辑标记",item:e.value,onCallBack:T},{default:i(()=>[l(m,{link:"",type:"primary",style:{"font-size":"12px"}},{default:i(()=>[...t[12]||(t[12]=[s("标记订单",-1)])]),_:1}),a("div",Ct,[l(yt,{class:"check-box tag",value:e.value.mark},null,8,["value"]),s(" "+d(e.value.adminNote),1)])]),_:1},8,["item"])])):n("",!0),e.value.stepStatus?(o(),p("div",Ot,[l(c(_t),{current:e.value.stepStatus.current,size:"small",status:e.value.stepStatus.status,items:e.value.stepStatus.steps},null,8,["current","status","items"])])):n("",!0)])),a("div",St,[t[32]||(t[32]=a("div",{class:"title"},"订单明细",-1)),a("div",It,[a("div",ht,[a("div",wt,[t[14]||(t[14]=s(" 收货人信息 ",-1)),x.value?n("",!0):(o(),v(c(k),{key:0,params:{act:"detail",id:e.value.orderId,form:e.value},isDrawer:"",path:"order/order/src/EditConsignee",title:"编辑收货人信息",width:"550px",onOkCallback:f},{default:i(()=>[l(m,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:i(()=>[...t[13]||(t[13]=[s(" 编辑 ",-1)])]),_:1})]),_:1},8,["params"]))]),a("ul",null,[a("li",Nt,[t[15]||(t[15]=s(" 会员名称：",-1)),a("span",Tt,d(((M=e.value.user)==null?void 0:M.nickname)||((V=e.value.user)==null?void 0:V.username)||"--"),1)]),a("li",At,[t[16]||(t[16]=s("     收货人：",-1)),a("span",Dt,d(e.value.consignee?e.value.consignee:"--"),1)]),a("li",Pt,[t[17]||(t[17]=s(" 联系电话：",-1)),a("span",zt,[l(vt,{mobile:e.value.mobile},null,8,["mobile"])])]),e.value.telephone?(o(),p("li",Bt,[t[18]||(t[18]=s(" 手机：",-1)),a("span",Mt,d(e.value.telephone?e.value.telephone:"--"),1)])):n("",!0),e.value.email?(o(),p("li",Vt,[t[19]||(t[19]=s(" 电子邮件：",-1)),a("span",Lt,d(e.value.email),1)])):n("",!0),e.value.postcode?(o(),p("li",Rt,[t[20]||(t[20]=s(" 邮政编码：",-1)),a("span",$t,d(e.value.postcode),1)])):n("",!0),a("li",Et,[t[21]||(t[21]=s(" 收货地址： ",-1)),a("span",Ft,d(e.value.userAddress?e.value.userAddress:"--"),1)]),a("li",qt,[t[22]||(t[22]=s(" 订单备注： ",-1)),a("span",Wt,d(e.value.buyerNote?e.value.buyerNote:"--"),1)])])]),a("div",jt,[a("div",Ut,[t[24]||(t[24]=s(" 配送信息 ",-1)),x.value?n("",!0):(o(),v(c(k),{key:0,params:{act:"detail",id:e.value.orderId},isDrawer:"",path:"order/order/src/EditShipping",title:"编辑配送方式",width:"600px",onOkCallback:f},{default:i(()=>[l(m,{disabled:!e.value.availableActions.modifyShippingInfo,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:i(()=>[...t[23]||(t[23]=[s(" 编辑 ",-1)])]),_:1},8,["disabled"])]),_:1},8,["params"]))]),a("ul",null,[a("li",Gt,[t[25]||(t[25]=s(" 配送方式：",-1)),a("span",Qt,d(e.value.shippingTypeName),1)]),a("li",Ht,[t[26]||(t[26]=s(" 发货时间：",-1)),a("span",Jt,d(e.value.shippingTime?e.value.shippingTime:"--"),1)]),a("li",Kt,[t[27]||(t[27]=s(" 物流名称：",-1)),a("span",Xt,d(e.value.logisticsName?e.value.logisticsName:"--"),1)]),a("li",Yt,[t[28]||(t[28]=s(" 发货单号：",-1)),a("span",Zt,d(e.value.trackingNo?e.value.trackingNo:"--"),1)])])]),a("div",te,[t[31]||(t[31]=a("div",{class:"min-title"},"付款信息",-1)),a("ul",null,[a("li",ee,[t[29]||(t[29]=s(" 支付方式：",-1)),a("span",ae,d(e.value.payTypeId===1?"在线支付":e.value.payTypeId===2?"货到付款":"线下支付"),1)]),a("li",se,[t[30]||(t[30]=s(" 付款时间：",-1)),a("span",le,d(e.value.payTime?e.value.payTime:"--"),1)])])])])]),a("div",ie,[a("div",oe,[t[34]||(t[34]=s(" 商品信息 ",-1)),x.value?n("",!0):(o(),v(c(k),{key:0,params:{act:"detail",id:e.value.orderId},isDrawer:"",path:"order/order/src/EditProduct",title:"编辑商品信息",width:"1050px",onOkCallback:f},{default:i(()=>[l(m,{disabled:!e.value.availableActions.modifyOrder,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:i(()=>[...t[33]||(t[33]=[s(" 编辑 ",-1)])]),_:1},8,["disabled"])]),_:1},8,["params"]))]),l(J,{data:e.value.items},{default:i(()=>[l(_,{label:"商品名称",prop:"productId",width:"220"},{default:i(({row:r})=>[a("div",re,[r.isGift?(o(),p("div",de,"赠")):n("",!0),l(c(pt),{picThumb:r.picThumb,productId:r.productId,productName:r.productName,productType:r.productType,url:r.url},null,8,["picThumb","productId","productName","productType","url"])])]),_:1}),l(_,{label:"属性",prop:"productAttr"},{default:i(({row:r})=>[s(d(r.skuValue||"-"),1)]),_:1}),l(_,{label:"附加规格",prop:"extraSkuData"},{default:i(({row:r})=>[r.extraSkuData&&r.extraSkuData.length>0?(o(!0),p(A,{key:0},at(r.extraSkuData,w=>(o(),p("div",{class:"extraskudata",key:w},d(w.attrName+w.attrValue+c(D)(w.totalAttrPrice)),1))),128)):(o(),p("div",ne,"-"))]),_:1}),l(_,{label:"商品编号",width:"150"},{default:i(({row:r})=>[s(d(r.productSn),1)]),_:1}),l(_,{label:"价格",prop:"price"},{default:i(({row:r})=>[s(d(c(D)(r.price)),1)]),_:1}),l(_,{label:"数量",prop:"quantity"}),l(_,{label:"库存",prop:"stock"},{default:i(({row:r})=>[s(d(r.stock||"-"),1)]),_:1}),l(_,{label:"小计",prop:"subtotal"})]),_:1},8,["data"]),a("div",ue,[a("span",pe,"商品总重量："+d(e.value.totalProductWeight)+"kg",1),a("span",null,"合计："+d(c(D)(e.value.productAmount)),1)]),a("div",ce,[t[36]||(t[36]=s(" 订单金额 ",-1)),x.value?n("",!0):(o(),v(c(k),{key:0,params:{act:"detail",id:e.value.orderId},isDrawer:"",path:"order/order/src/EditMoney",title:"编辑金额",width:"600px",onOkCallback:f},{default:i(()=>[l(m,{disabled:!e.value.availableActions.modifyOrderMoney,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:i(()=>[...t[35]||(t[35]=[s(" 编辑 ",-1)])]),_:1},8,["disabled"])]),_:1},8,["params"]))]),l(c(nt),{modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=r=>e.value=r)},null,8,["modelValue"])]),e.value.orderId&&(e.value.orderStatus===2||e.value.orderStatus===5)?(o(),p("div",me,[t[37]||(t[37]=a("div",{class:"title"},"物流追踪",-1)),l(mt,{trackingNo:e.value.trackingNo,logisticsName:e.value.logisticsName,shippingMethod:e.value.shippingMethod,id:e.value.orderId,"onUpdate:id":t[3]||(t[3]=r=>e.value.orderId=r)},null,8,["trackingNo","logisticsName","shippingMethod","id"])])):n("",!0),x.value?n("",!0):(o(),v(ct,{key:2,orderId:e.value.orderId},null,8,["orderId"]))])),l(K,{spinning:b.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])],64)}}}),Me=st(ve,[["__scopeId","data-v-7577a325"]]);export{Me as default};

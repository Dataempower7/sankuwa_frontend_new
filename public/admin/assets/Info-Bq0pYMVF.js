import{d as T,r as m,b as P,ab as R,o as h,f as i,g as L,h as f,i as V,k as w,l as G,z as t,m as l,L as U,j as q,Q as j,O as F,P as v}from"./index-B52YIGC0.js";import{a as O,u as z}from"./productGroup-DmZc4IJt.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{S as E}from"./SelectProduct-C4WsEKWV.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./format-BxqOrW-w.js";import"./product-hE35r0Q_.js";import"./Pagination-C8J7-6Em.js";import"./SelectSku-ZXdrD9qH.js";/* empty css                                                                  */import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const M={class:"container"},Q={class:"content_wrapper"},A={class:"lyecs-form-table"},pe=T({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:N}){const p=N,s=S,u=m(!0),_=P().currentRoute.value.query,d=m(s.isDialog?s.act:String(_.act)),g=m(s.isDialog?s.id:Number(_.id)),D=d.value==="add"?"create":"update",b=R(),e=m({productIds:[]}),x=async()=>{try{const a=await O(d.value,{id:g.value});Object.assign(e.value,a)}catch(a){v.error(a.message),p("close")}finally{u.value=!1}};h(()=>{console.log(d.value),d.value==="detail"?x():u.value=!1});const y=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const a=await z(D,{id:g.value,...e.value});p("submitCallback",a),v.success("操作成功")}catch(a){v.error(a.message)}finally{p("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{y()}}),(a,o)=>{const c=i("TigInput"),n=i("el-form-item"),C=i("el-button"),I=i("el-form"),B=i("a-spin");return f(),L("div",M,[V("div",Q,[V("div",A,[u.value?G("",!0):(f(),w(I,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:l(()=>[t(n,{rules:[{required:!0,message:"分组名称不能为空!"}],label:"分组名称",prop:"productGroupName"},{default:l(()=>[t(c,{classType:"tig-form-input",modelValue:e.value.productGroupName,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value.productGroupName=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组别名",prop:"productGroupSn"},{default:l(()=>[t(c,{classType:"tig-form-input",modelValue:e.value.productGroupSn,"onUpdate:modelValue":o[1]||(o[1]=r=>e.value.productGroupSn=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组描述",prop:"productGroupDescription"},{default:l(()=>[t(c,{classType:"tig-form-input",modelValue:e.value.productGroupDescription,"onUpdate:modelValue":o[2]||(o[2]=r=>e.value.productGroupDescription=r),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(n,{label:"分组商品",prop:"productIds"},{default:l(()=>[u.value?G("",!0):(f(),w(q(E),{key:0,ids:e.value.productIds,"onUpdate:ids":o[3]||(o[3]=r=>e.value.productIds=r)},null,8,["ids"]))]),_:1}),U(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(C,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>[...o[4]||(o[4]=[j("提交",-1)])]),_:1},512)]),_:1},512),[[F,!s.isDialog]])]),_:1},8,["model"])),t(B,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{pe as default};

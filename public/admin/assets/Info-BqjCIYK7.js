import{d as D,b as N,r as f,ab as q,f as s,g as c,h as u,i as v,z as o,m as l,L as F,j as g,k as V,F as k,Q as $,O as j,P as T}from"./index-B52YIGC0.js";import{u as z}from"./messageLog-Dz4OUNXC.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as E}from"./SelectRankList.vue_vue_type_script_setup_true_lang-Bg1llONp.js";/* empty css                                                                              */import{S as M}from"./SelectLink-BttPowUZ.js";/* empty css                                                                     */import{_ as O}from"./SelectUser.vue_vue_type_script_setup_true_lang-D24rBAlu.js";/* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./userRank-DrZjelLT.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./user-CUi1-22X.js";const P={class:"container"},Q={class:"content_wrapper"},A={class:"lyecs-form-table"},me=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(U,{expose:w,emit:I}){const p=I,r=U,_=N().currentRoute.value.query,x=f(r.isDialog?r.act:String(_.act)),C=f(r.isDialog?r.id:Number(_.id)),L=x.value==="add"?"create":"update",b=q(),e=f({}),y=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const m=await z(L,{id:C.value,...e.value});p("submitCallback",m),T.success("操作成功")}catch(m){T.error(m.message)}finally{p("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{y()}}),(m,t)=>{const d=s("TigInput"),n=s("el-form-item"),i=s("el-option"),S=s("el-select"),R=s("el-button"),B=s("el-form");return u(),c("div",P,[v("div",Q,[v("div",A,[o(B,{ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:l(()=>[o(n,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"messageTitle"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:e.value.messageTitle,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.messageTitle=a)},null,8,["modelValue"])]),_:1}),o(n,{rules:[{required:!0,message:"内容不能为空!"}],label:"内容",prop:"messageContent"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:e.value.messageContent,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.messageContent=a),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"链接",prop:"messageLink"},{default:l(()=>[o(g(M),{modelValue:e.value.messageLink,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.messageLink=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"发送类型",prop:"sendUserType"},{default:l(()=>[o(S,{modelValue:e.value.sendUserType,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.sendUserType=a),style:{width:"100%","margin-bottom":"20px"}},{default:l(()=>[o(i,{value:0,label:"全部会员"}),o(i,{value:1,label:"单个会员"}),o(i,{value:2,label:"会员等级"}),o(i,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.sendUserType===1?(u(),V(g(O),{key:0,multiple:!1,userId:e.value.userIds,"onUpdate:userId":t[4]||(t[4]=a=>e.value.userIds=a)},null,8,["userId"])):e.value.sendUserType===2?(u(),V(g(E),{key:1,modelValue:e.value.userRank,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.userRank=a)},null,8,["modelValue"])):e.value.sendUserType===3?(u(),c(k,{key:2},[o(d,{classType:"tig-form-input",modelValue:e.value.userIds,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.userIds=a),row:2,type:"textarea"},null,8,["modelValue"]),t[7]||(t[7]=v("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1))],64)):(u(),c(k,{key:3},[],64))]),_:1}),F(o(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>[...t[8]||(t[8]=[$("提交",-1)])]),_:1},512)]),_:1},512),[[j,!r.isDialog]])]),_:1},8,["model"])])])])}}});export{me as default};

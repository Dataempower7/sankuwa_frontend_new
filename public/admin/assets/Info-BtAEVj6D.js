import{d as q,r as p,b as F,ab as H,o as P,f as s,g as c,h as r,i as v,k as x,l as h,z as t,m as n,L as j,F as _,j as O,Q as z,O as E,P as g}from"./index-B52YIGC0.js";import{g as M,u as Q}from"./pushLog-B1DCt0c-.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as $}from"./SelectRankList.vue_vue_type_script_setup_true_lang-Bg1llONp.js";/* empty css                                                                              *//* empty css                                                                     *//* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./userRank-DrZjelLT.js";const A={class:"container"},G={class:"content_wrapper"},J={class:"lyecs-form-table"},ie=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:T,emit:C}){const i=C,u=N,f=p(!0),y=F().currentRoute.value.query,V=p(u.isDialog?u.act:String(y.act)),k=p(u.isDialog?u.id:Number(y.id)),I=V.value==="add"?"insert":"update",w=H(),e=p({}),L=async()=>{try{const l=await M(V.value,{id:k.value});Object.assign(e.value,l)}catch(l){g.error(l.message),i("close")}finally{f.value=!1}};P(()=>{L()});const D=async()=>{await w.value.validate();try{i("update:confirmLoading",!0);const l=await Q(I,{id:k.value,...e.value});i("submitCallback",l),g.success("操作成功")}catch(l){g.error(l.message)}finally{i("update:confirmLoading",!1)}};return T({onFormSubmit:()=>{D()}}),(l,a)=>{const b=s("TigInput"),m=s("el-form-item"),d=s("el-option"),S=s("el-select"),U=s("el-button"),B=s("el-form"),R=s("a-spin");return r(),c("div",A,[v("div",G,[v("div",J,[f.value?h("",!0):(r(),x(B,{key:0,ref_key:"formRef",ref:w,model:e.value,"label-width":"auto"},{default:n(()=>[t(m,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"brandName"},{default:n(()=>[t(b,{classType:"tig-form-input",modelValue:e.value.brandName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.brandName=o)},null,8,["modelValue"])]),_:1}),t(m,{label:"内容",rules:[{required:!0,message:"内容不能为空!"}],prop:"brandDesc"},{default:n(()=>[t(b,{classType:"tig-form-input",modelValue:e.value.brandDesc,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.brandDesc=o),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(m,{label:"发送类型",prop:"brandIsHot"},{default:n(()=>[t(S,{modelValue:e.value.sendUserType,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.sendUserType=o)},{default:n(()=>[t(d,{value:0,label:"全部会员"}),t(d,{value:1,label:"单个会员"}),t(d,{value:2,label:"会员等级"}),t(d,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.brandIsHot===1?(r(),c(_,{key:0},[],64)):e.value.brandIsHot===2?(r(),x(O($),{key:1,modelValue:e.value.brandDesc,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.brandDesc=o)},null,8,["modelValue"])):e.value.brandIsHot===3?(r(),c(_,{key:2},[t(b,{classType:"tig-form-input",modelValue:e.value.brandDesc,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.brandDesc=o),row:2,type:"textarea"},null,8,["modelValue"]),a[5]||(a[5]=v("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1))],64)):(r(),c(_,{key:3},[],64))]),_:1}),j(t(m,{"wrapper-col":{offset:4,span:16}},{default:n(()=>[t(U,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:D},{default:n(()=>[...a[6]||(a[6]=[z("提交",-1)])]),_:1},512)]),_:1},512),[[E,!u.isDialog]])]),_:1},8,["model"])),t(R,{spinning:f.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ie as default};

import{d as W,W as $,r as f,b as z,ab as E,o as G,f as i,g as u,h as o,i as w,k as _,l as r,z as t,m as s,L as Q,j as C,Q as v,t as y,O as H,P as k}from"./index-B52YIGC0.js";import{_ as J}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./index-KjhYqCTY.js";import{g as K,u as X}from"./areaManage-rIHpuU4l.js";import{a as Y}from"./shop-CBisV8Of.js";import{S}from"./StatusDot-DuKP0Xmc.js";import{_ as Z}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./format-BxqOrW-w.js";import"./index-C9ZdVeVx.js";const ee={class:"container"},te={class:"content_wrapper"},ae={class:"lyecs-form-table"},se={key:0},oe={key:0},le={key:1},re={key:3,style:{color:"red"}},ne={key:4,style:{color:"green"}},be=W({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},examine:{type:Number,default:0},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:B,emit:M}){$();const c=M,m=x,d=f(!0),N=z().currentRoute.value.query,b=f(m.isDialog?m.act:String(N.act)),I=f(m.isDialog?m.id:Number(N.id)),R=b.value==="add"?"create":"update",T=E(),l=f({sortOrder:50,areaStoreName:"",shopIds:[]}),P=async()=>{try{const a=await K(b.value,{id:I.value});Object.assign(l.value,a)}catch(a){k.error(a.message),c("close")}finally{d.value=!1}};G(()=>{b.value==="detail"?P():d.value=!1});const L=async()=>{await T.value.validate();try{c("update:confirmLoading",!0);const a=await X(R,{id:I.value,...l.value});c("submitCallback",a)}catch(a){k.error(a.message)}finally{c("update:confirmLoading",!1)}},j=async()=>{try{const a=await Y({shopIds:l.value.shopIds.join(","),shopType:2});g.value=a.records}catch(a){k.error(a.message),c("close")}finally{d.value=!1}},g=f([]),q=async a=>{l.value.shopIds=a,j()};return B({onFormSubmit:()=>{L()}}),(a,n)=>{const V=i("TigInput"),h=i("el-form-item"),D=i("el-button"),p=i("el-table-column"),A=i("el-table"),F=i("el-form"),U=i("a-spin");return o(),u("div",ee,[w("div",te,[w("div",ae,[d.value?r("",!0):(o(),_(F,{key:0,ref_key:"formRef",ref:T,model:l.value,"label-width":"auto"},{default:s(()=>[t(h,{rules:[{required:!0,message:"区域名称不能为空!"}],label:"区域名称",prop:"areaStoreName"},{default:s(()=>[t(V,{classType:"tig-form-input",modelValue:l.value.areaStoreName,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value.areaStoreName=e),maxlength:30,showWordLimit:""},null,8,["modelValue"])]),_:1}),t(h,{label:"排序",prop:"sortOrder"},{default:s(()=>[t(V,{width:"100px",type:"integer",modelValue:l.value.sortOrder,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value.sortOrder=e),disabled:x.examine==1},null,8,["modelValue","disabled"])]),_:1}),t(h,{label:"区域门店",prop:"shopIds"},{default:s(()=>[t(C(Z),{params:{isMultiple:!0,selectedIds:[l.value.shopIds]},isDrawer:"",path:"store/adminPages/selfPackManage/src/SelectStoreList",title:"选择门店",width:"700px",onOkCallback:q},{default:s(()=>[t(D,{type:"primary"},{default:s(()=>[...n[2]||(n[2]=[v("选择门店",-1)])]),_:1})]),_:1},8,["params"]),g.value.length>0?(o(),_(A,{key:0,data:g.value,"row-key":"storeParentId",class:"mt10"},{default:s(()=>[t(p,{label:"门店名称"},{default:s(({row:e})=>[v(y(e.shopTitle||"--"),1)]),_:1}),t(p,{label:"门店LOGO"},{default:s(({row:e})=>[t(C(J),{src:e.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),t(p,{label:"商户名称",width:200},{default:s(({row:e})=>{var O;return[e.merchant?(o(),u("div",se,[e.merchant.type==2?(o(),u("span",oe,y(((O=e.merchant.merchantData)==null?void 0:O.merchantName)||"--"),1)):r("",!0),e.merchant.type==1?(o(),u("span",le,y(e.merchant.corporateName||"--"),1)):r("",!0)])):r("",!0)]}),_:1}),t(p,{label:"门店状态",sortable:"custom"},{default:s(({row:e})=>[e.status==10?(o(),_(S,{key:0,color:"red",flicker:!0})):r("",!0),e.status==4?(o(),_(S,{key:1,color:"red",flicker:!0})):r("",!0),e.status==1?(o(),_(S,{key:2,color:"green",flicker:!0})):r("",!0),e.status===10||e.status===4?(o(),u("span",re,y(e.statusText),1)):e.status===1?(o(),u("span",ne,y(e.statusText),1)):r("",!0)]),_:1}),t(p,{label:"认证日期",prop:"addTime",sortable:"custom"})]),_:1},8,["data"])):r("",!0)]),_:1}),Q(t(h,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[t(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:L},{default:s(()=>[...n[3]||(n[3]=[v("提交",-1)])]),_:1},512)]),_:1},512),[[H,!m.isDialog]])]),_:1},8,["model"])),t(U,{spinning:d.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{be as default};

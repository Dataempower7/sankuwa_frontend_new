import{d as O,r as m,b as U,ab as L,o as R,f as p,g as q,h as S,i as c,k as j,l as F,z as t,m as a,L as z,j as E,Q as g,O as M,P as v}from"./index-B52YIGC0.js";import{c as P,e as Q}from"./shippingType-CxHHeBGp.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as A}from"./SelectLogisticsCompany-DF1CZxaC.js";/* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./logisticsCompany-DCAp04os.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},re=O({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:D,emit:C}){const n=C,r=w,u=m(!0),y=U().currentRoute.value.query,f=m(r.isDialog?r.act:String(y.act)),_=m(r.isDialog?r.id:Number(y.id)),h=f.value==="add"?"create":"update",b=L(),o=m({sortOrder:50,isSupportCod:0}),k=async()=>{try{const s=await P(f.value,{id:_.value});Object.assign(o.value,s)}catch(s){v.error(s.message),n("close")}finally{u.value=!1}};R(()=>{f.value==="detail"?k():u.value=!1});const T=async()=>{await b.value.validate();try{n("update:confirmLoading",!0);const s=await Q(h,{id:_.value,...o.value});n("submitCallback",s),v.success("操作成功")}catch(s){v.error(s.message)}finally{n("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{T()}}),(s,e)=>{const d=p("TigInput"),i=p("el-form-item"),V=p("el-radio"),x=p("el-radio-group"),I=p("el-button"),N=p("el-form"),B=p("a-spin");return S(),q("div",G,[c("div",H,[c("div",J,[u.value?F("",!0):(S(),j(N,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:a(()=>[t(i,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"shippingTypeName"},{default:a(()=>[t(d,{classType:"tig-form-input",modelValue:o.value.shippingTypeName,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.shippingTypeName=l)},null,8,["modelValue"])]),_:1}),t(i,{label:"分类描述",prop:"shippingTypeDesc"},{default:a(()=>[t(d,{classType:"tig-form-input",modelValue:o.value.shippingTypeDesc,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.shippingTypeDesc=l),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(i,{label:"默认物流",prop:"shippingDefaultId"},{default:a(()=>[t(E(A),{logisticsId:o.value.shippingDefaultId,"onUpdate:logisticsId":e[2]||(e[2]=l=>o.value.shippingDefaultId=l)},null,8,["logisticsId"])]),_:1}),t(i,{label:"配送时间描述",prop:"shippingTimeDesc"},{default:a(()=>[t(d,{classType:"tig-form-input",modelValue:o.value.shippingTimeDesc,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.shippingTimeDesc=l),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(i,{label:"排序",prop:"sortOrder"},{default:a(()=>[t(d,{type:"integer",classType:"tig-form-input",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),t(i,{label:"货到付款",prop:"isSupportCod"},{default:a(()=>[t(x,{modelValue:o.value.isSupportCod,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.isSupportCod=l),style:{width:"100%"}},{default:a(()=>[t(V,{value:1},{default:a(()=>[...e[6]||(e[6]=[g("是",-1)])]),_:1}),t(V,{value:0},{default:a(()=>[...e[7]||(e[7]=[g("否",-1)])]),_:1})]),_:1},8,["modelValue"]),e[8]||(e[8]=c("div",{class:"extra"},"该设置会影响所有所属的配送方式",-1))]),_:1}),z(t(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:T},{default:a(()=>[...e[9]||(e[9]=[g("提交",-1)])]),_:1},512)]),_:1},512),[[M,!r.isDialog]])]),_:1},8,["model"])),t(B,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{re as default};

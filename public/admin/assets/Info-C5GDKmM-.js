import{d as G,x as q,b as K,r,as as L,f as d,g as p,h as i,i as o,l as P,z as a,m as n,a8 as j,j as v,Q as h,t as S,k as A,P as E,_ as Q}from"./index-B52YIGC0.js";import{e as $}from"./groupon-BtcEMuW-.js";import{i as H}from"./format-BxqOrW-w.js";/* empty css                                                                    */import{P as J}from"./Pagination-C8J7-6Em.js";import"./index-KjhYqCTY.js";import{S as M}from"./SelectBrand-tHlymKqU.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import{_ as W}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./brand-CyfpB5Ly.js";import"./time-EzYK4E-P.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},oo={class:"list-table-tool lyecs-search-warp"},to={class:"advanced-search-warp list-table-tool-row"},eo={class:"simple-form-warp"},so={class:"simple-form-field"},ao={class:"form-group"},no={class:"control-container"},lo={class:"simple-form-field"},io={class:"form-group"},ro={class:"control-container"},po={class:"simple-form-warp"},co={class:"simple-form-field"},uo={class:"control-container"},mo={class:"table-container"},_o={class:"product-info"},go=["src"],fo={key:0},vo={key:1},bo={key:2},yo={class:"empty-warp"},ho={key:0,class:"empty-bg"},ko={key:0,class:"pagination-con"},Io=G({__name:"Info",props:{grouponPromotionId:{type:Number,default:0},groupType:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:x,emit:z}){const N=q(),c=k,I=K().currentRoute.value.query;r(c.isDialog?c.act:String(I.act));const T=r(c.isDialog?c.groupType:Number(I.groupType)),s=L({sortField:"",sortOrder:"",keyword:"",page:1,size:N.get("pageSize"),grouponPromotionId:c.grouponPromotionId}),u=r(!0),B=z,g=r(0),w=r([]),f=r([]),m=async()=>{u.value=!0;try{const l=await $({...s});w.value=l.records,g.value=l.total}catch(l){E.error(l.message)}finally{u.value=!1}},O=l=>{if(l.checkBox)f.value.indexOf(l.grouponPromotionId)===-1&&f.value.push(l.grouponPromotionId);else{let t=f.value.indexOf(l.grouponPromotionId);t!==-1&&f.value.splice(t,1)}},V=()=>{console.log("handleReset"),s.keyword="",s.page=1,s.sortField="",s.sortOrder="",s.brandId=void 0,s.productGroupId=void 0,m()},_=()=>{m()};return m(),x({onFormSubmit:()=>{B("submitCallback",!0)}}),(l,t)=>{const b=d("el-button"),F=d("TigInput"),y=d("el-table-column"),D=d("el-space"),R=d("el-table"),U=d("a-spin");return i(),p("div",X,[o("div",Y,[o("div",Z,[o("div",oo,[o("div",to,[o("div",eo,[o("div",so,[o("div",ao,[t[5]||(t[5]=o("label",{class:"control-label"},[o("span",null,"商品名称：")],-1)),o("div",no,[a(F,{modelValue:s.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>s.keyword=e),name:"keyword",placeholder:"请输入商品名称",onKeyup:j(_,["enter"]),clearable:"",onClear:_},{append:n(()=>[a(b,{onClick:_},{default:n(()=>[...t[4]||(t[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),o("div",lo,[o("div",io,[t[6]||(t[6]=o("label",{class:"control-label"},[o("span",null,"商品品牌：")],-1)),o("div",ro,[a(v(M),{brandId:s.brandId,"onUpdate:brandId":t[1]||(t[1]=e=>s.brandId=e),onOnChange:_},null,8,["brandId"])])])]),o("div",po,[o("div",co,[t[9]||(t[9]=o("label",{class:"control-label"},null,-1)),o("div",uo,[a(b,{type:"primary",plain:"",onClick:_},{default:n(()=>[...t[7]||(t[7]=[h("搜索",-1)])]),_:1}),a(b,{plain:"",onClick:V},{default:n(()=>[...t[8]||(t[8]=[h("重置",-1)])]),_:1})])])])])])]),o("div",mo,[a(U,{spinning:u.value},{default:n(()=>[a(R,{data:w.value,"row-key":"product.productId",onSelectionChange:O,total:g.value,loading:u.value},{empty:n(()=>[o("div",yo,[u.value?P("",!0):(i(),p("div",ho,"暂无数据"))])]),default:n(()=>[a(y,{label:"商品信息",prop:"productName",width:"330"},{default:n(({row:e})=>[o("div",_o,[o("img",{src:v(H)(e.product.picThumb),height:"50",width:"50"},null,8,go),o("p",null,S(e.product.productName),1)])]),_:1}),a(y,{label:"销售价",align:"center"},{default:n(({row:e})=>{var C;return[h(S((C=e.product)==null?void 0:C.productPrice),1)]}),_:1}),a(y,{width:210,label:"操作",fixed:"right"},{default:n(({row:e})=>[a(D,{size:0},{default:n(()=>[e.isReservationProduct?(i(),p("span",fo,"【预约到店商品】不支持参加此活动")):e.isOtherGrouponProduct?(i(),p("span",vo,"已参加其他拼团活动")):e.isAdded===1?(i(),p("span",bo,"已添加")):(i(),A(v(W),{key:3,isDrawer:"",title:"拼团价设置",width:"900px",path:"promotion/groupon/item/setup/Info",onOkCallback:m,params:{act:"add",grouponPromotionId:k.grouponPromotionId,product:{...e.product,productSkus:e.productSkus},groupType:T.value}},{default:n(()=>[...t[10]||(t[10]=[o("a",{class:"btn-link"},"添加",-1)])]),_:1},8,["params"]))]),_:2},1024)]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"])]),g.value>0?(i(),p("div",ko,[a(v(J),{page:s.page,"onUpdate:page":t[2]||(t[2]=e=>s.page=e),size:s.size,"onUpdate:size":t[3]||(t[3]=e=>s.size=e),total:g.value,onCallback:m},null,8,["page","size","total"])])):P("",!0)])])])}}}),Ko=Q(Io,[["__scopeId","data-v-8d01084a"]]);export{Ko as default};

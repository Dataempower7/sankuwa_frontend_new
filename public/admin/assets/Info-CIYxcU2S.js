import{d as R,r as u,b as q,ab as I,o as F,f as l,g as O,h as y,i as w,k as U,l as j,z as t,m as o,L as z,Q as c,O as E,P as N}from"./index-B52YIGC0.js";import{g as M,b as P}from"./storeTipManage-CIFieGB0.js";const Q={class:"container"},W={class:"content_wrapper"},A={class:"lyecs-form-table"},K=R({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},examine:{type:Number,default:0},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:k,emit:x}){const r=x,n=V,i=u(!0),f=q().currentRoute.value.query,m=u(n.isDialog?n.act:String(f.act)),_=u(n.isDialog?n.id:Number(f.id)),B=m.value==="add"?"create":"update",v=I(),s=u({tipName:"",status:1}),C=async()=>{try{const a=await M(m.value,{id:_.value});Object.assign(s.value,a)}catch(a){N.error(a.message),r("close")}finally{i.value=!1}};F(()=>{m.value==="detail"?C():i.value=!1});const g=async()=>{await v.value.validate();try{r("update:confirmLoading",!0);const a=await P(B,{id:_.value,...s.value});r("submitCallback",a)}catch(a){N.error(a.message)}finally{r("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{g()}}),(a,e)=>{const S=l("TigInput"),d=l("el-form-item"),b=l("el-radio"),h=l("el-radio-group"),T=l("el-button"),D=l("el-form"),L=l("a-spin");return y(),O("div",Q,[w("div",W,[w("div",A,[i.value?j("",!0):(y(),U(D,{key:0,ref_key:"formRef",ref:v,model:s.value,"label-width":"auto"},{default:o(()=>[t(d,{rules:[{required:!0,message:"标签名称不能为空!"}],label:"标签名称",prop:"tipName"},{default:o(()=>[t(S,{classType:"tig-form-input",modelValue:s.value.tipName,"onUpdate:modelValue":e[0]||(e[0]=p=>s.value.tipName=p),maxlength:8,showWordLimit:""},null,8,["modelValue"])]),_:1}),t(d,{label:"状态",prop:"status",required:""},{default:o(()=>[t(h,{modelValue:s.value.status,"onUpdate:modelValue":e[1]||(e[1]=p=>s.value.status=p)},{default:o(()=>[t(b,{value:1},{default:o(()=>[...e[2]||(e[2]=[c("启用",-1)])]),_:1}),t(b,{value:0},{default:o(()=>[...e[3]||(e[3]=[c("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),z(t(d,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[t(T,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:o(()=>[...e[4]||(e[4]=[c("提交",-1)])]),_:1},512)]),_:1},512),[[E,!n.isDialog]])]),_:1},8,["model"])),t(L,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{K as default};

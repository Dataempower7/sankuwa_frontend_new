import{d as H,r as p,b as J,ab as W,o as X,f as m,g as v,h as i,i as o,z as t,k as c,l as d,m as l,L as Y,j as f,Q as _,t as n,F as h,O as Z,P as T,_ as ee}from"./index-B52YIGC0.js";import{a as ae,A as te}from"./userCertification-Dv-4WSA1.js";import{S as R}from"./StatusDot-DuKP0Xmc.js";import{M as le}from"./MobileCard-qEvTFKQw.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as $}from"./Tag-DafgHPRr.js";import{i as y}from"./format-BxqOrW-w.js";const oe={class:"container"},se={class:"content_wrapper"},ie={class:"lyecs-form-table"},ne={key:0},ue={class:"width100"},re={class:"width100"},ce={class:"width100"},de={class:"width100"},me={class:"width100"},pe={class:"width100"},ve={class:"width100"},fe={class:"width100"},_e={class:"width100"},ye={class:"width100"},be={class:"width100"},ge={key:1},ke={class:"width100"},he={class:"width100"},De={class:"width100"},we={class:"width100"},Te={class:"width100"},Ve={class:"width100"},Ce={class:"image"},Pe=H({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(A,{emit:F}){const D=F,b=A,M=p([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]),g=p("sm"),z=r=>{g.value=r},k=p(!0),x=J().currentRoute.value.query,V=p(b.isDialog?b.act:String(x.act)),L=p(b.isDialog?b.id:Number(x.id));V.value;const N=W(),e=p({companyData:{certificateValidityPeriodDate:[],frontOfPhoto:[],backOfPhoto:[],businessLicenseImg:[],operatingTermTypeDate:[]}}),E=async()=>{var r;try{k.value=!0;const a=await ae(V.value,{id:L.value});console.log(a),Object.assign(e.value,a),e.value.contactMobile=(r=e.value.contactMobile)==null?void 0:r.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}catch(a){T.error(a.message),D("close")}finally{k.value=!1}};X(()=>{V.value==="detail"?E():k.value=!1});const C=async r=>{await N.value.validate();try{if(r==3&&!e.value.auditRemark){T.error("请输入审核备注");return}D("update:confirmLoading",!0);const a=await te({id:L.value,status:r,auditRemark:e.value.auditRemark});D("submitCallback",a),T.success("操作成功")}catch(a){T.error(a.message)}finally{D("update:confirmLoading",!1)}},O=p(""),P=p(!1),U=r=>{O.value=r,P.value=!0};return(r,a)=>{const S=m("el-tab-pane"),j=m("el-tabs"),s=m("el-form-item"),w=m("el-image"),I=m("el-button"),q=m("TigInput"),K=m("el-form"),Q=m("a-spin"),G=m("el-dialog");return i(),v("div",oe,[o("div",se,[o("div",ie,[t(j,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=u=>g.value=u),class:"lyecs-tabs","tab-position":"top",onTabChange:z},{default:l(()=>[(i(),c(S,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),c(S,{key:2,label:"企业信息",name:"company"})):d("",!0)]),_:1},8,["modelValue"]),k.value?d("",!0):(i(),c(K,{key:0,ref_key:"formRef",ref:N,model:e.value,"label-width":"auto"},{default:l(()=>[g.value=="sm"?(i(),v("div",ne,[t(s,{label:"认证资质"},{default:l(()=>[e.value.type==1?(i(),c(f($),{key:0,transparent:!0,text:"个人"})):(i(),c(f($),{key:1,color:"#409EFF",transparent:!1,text:"企业"}))]),_:1}),t(s,{label:"审核结果"},{default:l(()=>[o("div",ue,[o("div",null,[e.value.status==1?(i(),c(R,{key:0,flicker:!0})):d("",!0),e.value.status==2?(i(),c(R,{key:1,color:"#52c41a",flicker:!0})):d("",!0),e.value.status==3?(i(),c(R,{key:2,color:"#f5222d",flicker:!1})):d("",!0),_(" "+n(e.value.statusText),1)])])]),_:1}),e.value.auditRemark&&e.value.status!=1?(i(),c(s,{key:0,label:"审核备注"},{default:l(()=>[o("div",re,[o("div",null,n(e.value.auditRemark),1)])]),_:1})):d("",!0),t(s,{label:"姓名"},{default:l(()=>[o("div",ce,n(e.value.companyData.corporateName),1)]),_:1}),t(s,{label:"联系人手机"},{default:l(()=>[o("div",de,[t(le,{mobile:e.value.companyData.contactPhone},null,8,["mobile"])])]),_:1}),t(s,{class:"form-item",label:"证件类型"},{default:l(()=>{var u;return[o("div",me,n(((u=M.value.find(B=>B.value===e.value.companyData.documentType))==null?void 0:u.label)||""),1)]}),_:1}),t(s,{label:"证件号码"},{default:l(()=>[o("div",pe,n(e.value.companyData.documentNumber),1)]),_:1}),t(s,{label:"居住地址"},{default:l(()=>[o("div",ve,n(e.value.companyData.residentialAddress),1)]),_:1}),t(s,{label:"出生日期"},{default:l(()=>[o("div",fe,n(e.value.companyData.birthday),1)]),_:1}),t(s,{label:"证件有效期"},{default:l(()=>[o("div",_e,[e.value.companyData.certificateValidityPeriod==1?(i(),v(h,{key:0},[_(n(e.value.companyData.certificateValidityPeriodDate[0]+" ～ "+e.value.companyData.certificateValidityPeriodDate[1]),1)],64)):(i(),v(h,{key:1},[_(n(e.value.companyData.certificateValidityPeriodEnd)+" ～ 长期 ",1)],64))])]),_:1}),t(s,{label:"证件照正面"},{default:l(()=>[o("div",ye,[t(w,{src:f(y)(e.value.companyData.frontOfPhoto[0].picUrl),class:"image-size",fit:"cover",onClick:a[1]||(a[1]=u=>U(f(y)(e.value.companyData.frontOfPhoto[0].picUrl)))},null,8,["src"])])]),_:1}),t(s,{label:"证件照反面"},{default:l(()=>[o("div",be,[t(w,{src:f(y)(e.value.companyData.backOfPhoto[0].picUrl),class:"image-size",fit:"cover",onClick:a[2]||(a[2]=u=>U(f(y)(e.value.companyData.backOfPhoto[0].picUrl)))},null,8,["src"])])]),_:1}),e.value.status==1?(i(),v(h,{key:1},[t(s,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:a[3]||(a[3]=u=>C(2))},{default:l(()=>[...a[8]||(a[8]=[_("审核通过",-1)])]),_:1},512),t(I,{ref:"submitBtn",class:"form-submit-btn",onClick:a[4]||(a[4]=u=>C(3))},{default:l(()=>[...a[9]||(a[9]=[_("审核不通过",-1)])]),_:1},512)]),_:1}),t(q,{classType:"tig-form-input",rows:4,modelValue:e.value.auditRemark,"onUpdate:modelValue":a[5]||(a[5]=u=>e.value.auditRemark=u),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):d("",!0),Y(t(s,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:C},{default:l(()=>[...a[10]||(a[10]=[_("提交",-1)])]),_:1},512)]),_:1},512),[[Z,!b.isDialog]])])):d("",!0),g.value=="company"?(i(),v("div",ge,[t(s,{label:"企业名称"},{default:l(()=>[o("div",ke,n(e.value.companyData.companyName),1)]),_:1}),t(s,{label:"注册地址"},{default:l(()=>[o("div",he,n(e.value.companyData.licenseAddrProvinceName)+" "+n(e.value.companyData.businessLicenseAddress),1)]),_:1}),t(s,{label:"经营范围"},{default:l(()=>[o("div",De,n(e.value.companyData.businessScope),1)]),_:1}),t(s,{label:"统一社会信用代码"},{default:l(()=>[o("div",we,n(e.value.companyData.businessLicenseId),1)]),_:1}),t(s,{label:"营业期限"},{default:l(()=>[o("div",Te,[e.value.companyData.operatingTermType==1?(i(),v(h,{key:0},[_(n(e.value.companyData.operatingTermTypeDate[0]+" ～  "+e.value.companyData.operatingTermTypeDate[1]),1)],64)):(i(),v(h,{key:1},[_(n(e.value.companyData.operatingTermTypeEnd)+" ～长期 ",1)],64))])]),_:1}),t(s,{label:"营业执照"},{default:l(()=>{var u;return[o("div",Ve,[((u=e.value.companyData.businessLicenseImg)==null?void 0:u.length)>0?(i(),c(w,{key:0,src:f(y)(e.value.companyData.businessLicenseImg[0].picUrl),class:"image-size",fit:"cover",onClick:a[6]||(a[6]=B=>U(f(y)(e.value.companyData.businessLicenseImg[0].picUrl)))},null,8,["src"])):d("",!0)])]}),_:1})])):d("",!0)]),_:1},8,["model"])),t(Q,{spinning:k.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])]),t(G,{modelValue:P.value,"onUpdate:modelValue":a[7]||(a[7]=u=>P.value=u)},{default:l(()=>[o("div",Ce,[t(w,{src:O.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])])}}}),Be=ee(Pe,[["__scopeId","data-v-30392a45"]]);export{Be as default};

import{d as Y,r as f,b as S,ab as Z,o as ee,f as p,g as m,h as i,i as l,z as a,k as d,l as c,m as t,j as r,F as _,t as o,Q as k,p as ae,P as U,an as te,_ as le}from"./index-B52YIGC0.js";import{c as se,e as oe}from"./apply-Da5ghsa7.js";import{i as b}from"./format-BxqOrW-w.js";import{S as $}from"./StatusDot-DuKP0Xmc.js";import{M as z}from"./MobileCard-qEvTFKQw.js";const ie={class:"container"},ne={class:"content_wrapper"},ue={class:"lyecs-form-table"},ce={class:"width100"},de={class:"width100"},re={class:"width100"},ve={class:"width100"},me={class:"width100"},_e={class:"width100"},be={class:"width100"},pe={class:"width100"},he={class:"width100"},fe={class:"width100"},ye={class:"width100"},ke={class:"width100"},De={class:"width100"},ge={class:"width100"},we={class:"width100"},Ce={class:"width100"},Te={class:"width100"},Ve={class:"width100"},Ne={class:"width100"},Ue={class:"width100"},Pe={class:"width100"},Ie={class:"width100"},$e={class:"width100"},xe={class:"width100"},Be={class:"width100"},Le={class:"width100"},Re={class:"width100"},Ae={class:"width100"},Oe={class:"width100"},Se={class:"width100"},ze={class:"width100"},Ee={class:"width100"},Me={class:"width100"},Fe={class:"width100"},je={class:"width100"},qe={class:"width100"},Ke={class:"width100"},Qe={class:"width100"},Ge={class:"width100"},He={class:"image"},Je=Y({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(E,{emit:M}){const w="店铺",D=M,h=f("sm"),F=v=>{h.value=v},V=E,N=f(!0),j=S(),x=S().currentRoute.value.query,P=f(V.isDialog?V.act:String(x.act)),B=f(V.isDialog?V.id:Number(x.id));P.value;const L=Z(),e=f({}),q=async()=>{try{const v=await se(P.value,{id:B.value});Object.assign(e.value,v)}catch(v){U.error(v.message),D("close")}finally{N.value=!1}},K=f([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]);ee(()=>{P.value==="detail"?q():N.value=!1});const R=async v=>{await L.value.validate();try{if(v==20&&!e.value.auditRemark){U.error("请输入审核备注");return}D("update:confirmLoading",!0);const n=await oe({merchantApplyId:B.value,status:v,auditRemark:e.value.auditRemark});if(v==10){Q(n);return}D("submitCallback",n),U.success("提交成功")}catch(n){U.error(n.message)}finally{D("update:confirmLoading",!1)}},Q=v=>{te.confirm("入驻申请已通过，系统已为用户自动创建商户","提示",{confirmButtonText:"前往商户列表",cancelButtonText:"取消",type:"success"}).then(()=>{j.push({path:"/organize/merchant-list"}),D("submitCallback",v)}).catch(()=>{D("submitCallback",v)})},A=f(""),I=f(!1),g=v=>{A.value=v,I.value=!0};return(v,n)=>{const C=p("el-tab-pane"),G=p("el-tabs"),s=p("el-form-item"),y=p("el-image"),O=p("el-button"),H=p("TigInput"),J=p("el-form"),W=p("a-spin"),X=p("el-dialog");return i(),m(_,null,[l("div",ie,[l("div",ne,[l("div",ue,[a(G,{modelValue:h.value,"onUpdate:modelValue":n[0]||(n[0]=u=>h.value=u),class:"lyecs-tabs","tab-position":"top",onTabChange:F},{default:t(()=>[(i(),d(C,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),d(C,{key:2,label:"企业信息",name:"company"})):c("",!0),(i(),d(C,{key:3,label:e.value.type==1?"个人信息":"法人代表信息",name:"base"},null,8,["label"])),(i(),d(C,{key:4,label:"商户信息",name:"merchant"})),(i(),d(C,{key:5,label:`${r(w)}信息`,name:"shop"},null,8,["label"]))]),_:1},8,["modelValue"]),N.value?c("",!0):(i(),d(J,{key:0,ref_key:"formRef",ref:L,model:e.value,"label-width":"auto"},{default:t(()=>[h.value=="sm"?(i(),m(_,{key:0},[a(s,{label:`预期${r(w)}名称`},{default:t(()=>[l("div",ce,o(e.value.shopData.shopTitle),1)]),_:1},8,["label"]),a(s,{label:"入驻资质",prop:"status"},{default:t(()=>[l("div",de,o(e.value.type==1?"个人入驻":"企业入驻"),1)]),_:1}),e.value.type==1?(i(),m(_,{key:0},[],64)):c("",!0),e.value.type==2?(i(),d(s,{key:1,label:"企业名称"},{default:t(()=>[l("div",re,o(e.value.baseData.companyName),1)]),_:1})):c("",!0),a(s,{label:"联系人姓名"},{default:t(()=>[l("div",ve,o(e.value.merchantData.contactName),1)]),_:1}),a(s,{label:"联系人手机"},{default:t(()=>[l("div",me,[a(z,{mobile:e.value.merchantData.contactPhone},null,8,["mobile"])])]),_:1}),a(s,{label:"联系人邮箱"},{default:t(()=>[l("div",_e,o(e.value.merchantData.contactEmail),1)]),_:1}),a(s,{label:"审核结果"},{default:t(()=>[l("div",be,[l("div",null,[e.value.status==1?(i(),d($,{key:0,flicker:!0})):c("",!0),e.value.status==10?(i(),d($,{key:1,color:"#52c41a",flicker:!0})):c("",!0),e.value.status==20?(i(),d($,{key:2,color:"#f5222d",flicker:!1})):c("",!0),k(" "+o(e.value.statusText),1)])])]),_:1}),e.value.status==20?(i(),d(s,{key:2,label:"拒绝原因"},{default:t(()=>[l("div",pe,o(e.value.auditRemark),1)]),_:1})):c("",!0)],64)):c("",!0),h.value=="company"?(i(),m(_,{key:1},[a(s,{label:"企业名称"},{default:t(()=>[l("div",he,o(e.value.baseData.companyName),1)]),_:1}),a(s,{label:"注册地址"},{default:t(()=>[l("div",fe,o(e.value.baseData.licenseAddrProvinceName)+" "+o(e.value.baseData.businessLicenseAddress),1)]),_:1}),a(s,{label:"经营范围"},{default:t(()=>[l("div",ye,o(e.value.baseData.businessScope),1)]),_:1}),a(s,{label:"统一社会信用代码"},{default:t(()=>[l("div",ke,o(e.value.baseData.businessLicenseId),1)]),_:1}),a(s,{label:"营业期限"},{default:t(()=>[l("div",De,[e.value.baseData.operatingTermType==1?(i(),m(_,{key:0},[k(o(e.value.baseData.operatingTermTypeDate[0]+" ～  "+e.value.baseData.operatingTermTypeDate[1]),1)],64)):(i(),m(_,{key:1},[k(o(e.value.baseData.operatingTermTypeEnd)+" ～长期 ",1)],64))])]),_:1}),e.value.baseData.supplementaryInformation.length>0?(i(),d(s,{key:0,label:"补充信息"},{default:t(()=>[l("div",ge,[(i(!0),m(_,null,ae(e.value.baseData.supplementaryInformation,u=>(i(),d(y,{src:r(b)(u.picUrl),class:"image-size",fit:"cover",onClick:T=>g(r(b)(u.picUrl))},null,8,["src","onClick"]))),256))])]),_:1})):c("",!0)],64)):c("",!0),h.value=="base"?(i(),m(_,{key:2},[a(s,{label:e.value.type==1?"个人姓名":"法定代表人姓名"},{default:t(()=>[l("div",we,o(e.value.baseData.corporateName),1)]),_:1},8,["label"]),a(s,{label:"证件类型"},{default:t(()=>{var u;return[l("div",Ce,o(((u=K.value.find(T=>T.value===e.value.baseData.documentType))==null?void 0:u.label)||""),1)]}),_:1}),a(s,{label:"证件号码"},{default:t(()=>[l("div",Te,o(e.value.baseData.documentNumber),1)]),_:1}),a(s,{label:"性别"},{default:t(()=>[l("div",Ve,o(e.value.baseData.sex==1?"男":"女"),1)]),_:1}),a(s,{label:"居住地址"},{default:t(()=>[l("div",Ne,o(e.value.baseData.residentialAddress),1)]),_:1}),a(s,{label:"证件有效期"},{default:t(()=>[l("div",Ue,[e.value.baseData.certificateValidityPeriod==1?(i(),m(_,{key:0},[k(o(e.value.baseData.certificateValidityPeriodDate[0]+" ～ "+e.value.baseData.certificateValidityPeriodDate[1]),1)],64)):(i(),m(_,{key:1},[k(o(e.value.baseData.certificateValidityPeriodEnd)+" ～ 长期 ",1)],64))])]),_:1}),a(s,{label:"证件照正面"},{default:t(()=>[l("div",Pe,[a(y,{src:r(b)(e.value.baseData.frontOfPhoto[0].picUrl),class:"image-size",fit:"cover",onClick:n[1]||(n[1]=u=>g(r(b)(e.value.baseData.frontOfPhoto[0].picUrl)))},null,8,["src"])])]),_:1}),a(s,{label:"证件照反面"},{default:t(()=>[l("div",Ie,[a(y,{src:r(b)(e.value.baseData.backOfPhoto[0].picUrl),class:"image-size",fit:"cover",onClick:n[2]||(n[2]=u=>g(r(b)(e.value.baseData.backOfPhoto[0].picUrl)))},null,8,["src"])])]),_:1})],64)):c("",!0),h.value=="merchant"?(i(),m(_,{key:3},[a(s,{label:"商户名称"},{default:t(()=>[l("div",$e,o(e.value.merchantData.merchantName),1)]),_:1}),e.value.type==1?(i(),m(_,{key:0},[a(s,{label:"持卡人"},{default:t(()=>[l("div",xe,o(e.value.baseData.corporateName),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Be,o(e.value.merchantData.bankDeposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Le,o(e.value.merchantData.bankBranch),1)]),_:1}),a(s,{label:"银行卡号"},{default:t(()=>[l("div",Re,o(e.value.merchantData.bankCard),1)]),_:1})],64)):c("",!0),e.value.type==2?(i(),m(_,{key:1},[a(s,{label:"对公账户"},{default:t(()=>[l("div",Ae,o(e.value.baseData.companyName),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Oe,o(e.value.merchantData.bankDeposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Se,o(e.value.merchantData.bankBranch),1)]),_:1}),a(s,{label:"对公银行账号"},{default:t(()=>[l("div",ze,o(e.value.merchantData.bankCard),1)]),_:1}),a(s,{label:"开户许可证"},{default:t(()=>{var u;return[l("div",Ee,[((u=e.value.merchantData.accountOpeningPermit)==null?void 0:u.length)>0?(i(),d(y,{key:0,src:r(b)(e.value.merchantData.accountOpeningPermit[0].picUrl),class:"image-size",fit:"cover",onClick:n[3]||(n[3]=T=>g(r(b)(e.value.merchantData.accountOpeningPermit[0].picUrl)))},null,8,["src"])):c("",!0)])]}),_:1})],64)):c("",!0),a(s,{label:"经营地区"},{default:t(()=>[l("div",Me,o(e.value.merchantData.businessAddressName)+o(e.value.merchantData.detailedAddress),1)]),_:1}),e.value.type==2?(i(),d(s,{key:2,label:"营业执照"},{default:t(()=>{var u;return[l("div",Fe,[((u=e.value.merchantData.businessLicenseImg)==null?void 0:u.length)>0?(i(),d(y,{key:0,src:r(b)(e.value.merchantData.businessLicenseImg[0].picUrl),class:"image-size",fit:"cover",onClick:n[4]||(n[4]=T=>g(r(b)(e.value.merchantData.businessLicenseImg[0].picUrl)))},null,8,["src"])):c("",!0)])]}),_:1})):c("",!0),a(s,{label:"客服电话"},{default:t(()=>[l("div",je,o(e.value.merchantData.customerServicePhone),1)]),_:1})],64)):c("",!0),h.value=="shop"?(i(),m(_,{key:4},[a(s,{label:`${r(w)}名称`},{default:t(()=>[l("div",qe,o(e.value.shopData.shopTitle),1)]),_:1},8,["label"]),a(s,{label:"联系电话"},{default:t(()=>[l("div",Ke,[a(z,{mobile:e.value.shopData.contactMobile},null,8,["mobile"])])]),_:1}),a(s,{label:`${r(w)}logo`},{default:t(()=>{var u;return[l("div",Qe,[((u=e.value.shopData.shopLogo)==null?void 0:u.length)>0?(i(),d(y,{key:0,src:r(b)(e.value.shopData.shopLogo[0].picUrl),class:"image-size",fit:"cover",onClick:n[5]||(n[5]=T=>g(r(b)(e.value.shopData.shopLogo[0].picUrl)))},null,8,["src"])):c("",!0)])]}),_:1},8,["label"]),e.value.shopData.description?(i(),d(s,{key:0,label:`${r(w)}简介`},{default:t(()=>[l("div",Ge,o(e.value.shopData.description),1)]),_:1},8,["label"])):c("",!0)],64)):c("",!0),e.value.status==1?(i(),m(_,{key:5},[a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:n[6]||(n[6]=u=>R(10))},{default:t(()=>[...n[10]||(n[10]=[k("审核通过",-1)])]),_:1},512),a(O,{ref:"submitBtn",class:"form-submit-btn",onClick:n[7]||(n[7]=u=>R(20))},{default:t(()=>[...n[11]||(n[11]=[k("审核不通过",-1)])]),_:1},512)]),_:1}),a(H,{classType:"tig-from-input",rows:4,modelValue:e.value.auditRemark,"onUpdate:modelValue":n[8]||(n[8]=u=>e.value.auditRemark=u),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):c("",!0)]),_:1},8,["model"])),a(W,{spinning:N.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])]),a(X,{modelValue:I.value,"onUpdate:modelValue":n[9]||(n[9]=u=>I.value=u)},{default:t(()=>[l("div",He,[a(y,{src:A.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}}),aa=le(Je,[["__scopeId","data-v-986108b5"]]);export{aa as default};

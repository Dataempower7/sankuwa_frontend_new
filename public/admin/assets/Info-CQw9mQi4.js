import{d as j,r as m,b as q,ab as M,o as z,f as p,g as _,h as d,i as c,k as I,l as x,z as a,m as o,L as E,Q as n,t as s,F as T,j as h,O as G,P as b}from"./index-B52YIGC0.js";import{F as Q}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{a as $,u as H}from"./orderInvoice-BfQco4MI.js";import{_ as J}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";/* empty css                                                                    */import"./index-C9ZdVeVx.js";const K={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-form-table"},me=j({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(B,{expose:R,emit:S}){const f=S,i=B,v=m(!0),g=q().currentRoute.value.query,k=m(i.isDialog?i.act:String(g.act)),w=m(i.isDialog?i.id:Number(g.id)),D=k.value==="add"?"create":"update",N=M(),e=m({}),A=m(!1),O=async()=>{try{const u=await $(k.value,{id:w.value});u.invoiceAttachment&&u.invoiceAttachment.length>0&&(A.value=!0),Object.assign(e.value,u)}catch(u){b.error(u.message),f("close")}finally{v.value=!1}};z(()=>{O()});const C=async()=>{await N.value.validate();try{f("update:confirmLoading",!0);const u=await H(D,{id:w.value,...e.value});f("submitCallback",u),b.success("操作成功")}catch(u){b.error(u.message)}finally{f("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{C()}}),(u,l)=>{const t=p("el-form-item"),y=p("el-radio"),F=p("el-radio-group"),V=p("TigInput"),L=p("el-button"),U=p("el-form"),P=p("a-spin");return d(),_("div",K,[c("div",W,[c("div",X,[v.value?x("",!0):(d(),I(U,{key:0,ref_key:"formRef",ref:N,model:e.value,"label-width":"auto"},{default:o(()=>[a(t,{label:"申请会员",prop:"username"},{default:o(()=>[n(s(e.value.username||"--"),1)]),_:1}),a(t,{label:"发票类型",prop:"invoiceTypeName"},{default:o(()=>[n(s(e.value.invoiceTypeName||"--"),1)]),_:1}),e.value.invoiceType===2&&e.value.userInvoice?(d(),_(T,{key:0},[a(t,{label:"增票资质状态",prop:"companyName"},{default:o(()=>[a(h(J),{showOnOk:!1,params:{act:"detail",id:e.value.userInvoice.invoiceId},isDrawer:"",path:"finance/userInvoice/Info",title:"编辑增票资质申请",width:"600px"},{default:o(()=>[n(s(e.value.userInvoice.statusName)+" ",1),l[4]||(l[4]=c("a",{class:"btn-link"},"[查看]",-1))]),_:1},8,["params"])]),_:1}),a(t,{label:"公司名称",prop:"companyName"},{default:o(()=>[n(s(e.value.companyName||"--"),1)]),_:1}),a(t,{label:"纳税人识别码",prop:"companyCode"},{default:o(()=>[n(s(e.value.companyCode||"--"),1)]),_:1}),a(t,{label:"注册地址",prop:"companyAddress"},{default:o(()=>[n(s(e.value.companyAddress||"--"),1)]),_:1}),a(t,{label:"注册电话",prop:"companyPhone"},{default:o(()=>[n(s(e.value.companyPhone||"--"),1)]),_:1}),a(t,{label:"开户银行",prop:"companyBank"},{default:o(()=>[n(s(e.value.companyBank||"--"),1)]),_:1}),a(t,{label:"银行账户",prop:"companyAccount"},{default:o(()=>[n(s(e.value.companyAccount||"--"),1)]),_:1})],64)):(d(),_(T,{key:1},[a(t,{label:"发票抬头",prop:"titleType"},{default:o(()=>[n(s(e.value.titleType==1?"个人":"企业"),1)]),_:1}),a(t,{label:"企业税号",prop:"companyCode"},{default:o(()=>[n(s(e.value.companyCode||"--"),1)]),_:1}),a(t,{label:"发票内容",prop:"invoiceContent"},{default:o(()=>[n(s(e.value.invoiceContent||"--"),1)]),_:1})],64)),a(t,{label:"收票人姓名",prop:"companyName"},{default:o(()=>[n(s(e.value.companyName||"--"),1)]),_:1}),a(t,{label:"收票人电话",prop:"mobile"},{default:o(()=>[n(s(e.value.mobile||"--"),1)]),_:1}),a(t,{label:"收票人邮箱",prop:"email"},{default:o(()=>[n(s(e.value.email||"--"),1)]),_:1}),a(t,{label:"收票人地址",prop:"companyAddress"},{default:o(()=>[n(s(e.value.companyAddress||e.value.userAddress),1)]),_:1}),a(t,{label:"申请状态",prop:"status"},{default:o(()=>[a(F,{modelValue:e.value.status,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.status=r)},{default:o(()=>[a(y,{value:0},{default:o(()=>[...l[5]||(l[5]=[n("待处理",-1)])]),_:1}),a(y,{value:1},{default:o(()=>[...l[6]||(l[6]=[n("已开",-1)])]),_:1}),a(y,{value:2},{default:o(()=>[...l[7]||(l[7]=[n("失败/作废",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(t,{label:"发票金额",prop:"amount"},{default:o(()=>[a(V,{classType:"tig-form-input",type:"decimal",modelValue:e.value.amount,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.amount=r)},null,8,["modelValue"])]),_:1}),a(t,{label:"上传发票附件",prop:"invoiceAttachment"},{default:o(()=>[v.value?x("",!0):(d(),I(h(Q),{key:0,photos:e.value.invoiceAttachment,"onUpdate:photos":l[2]||(l[2]=r=>e.value.invoiceAttachment=r),isMultiple:!0,disabled:A.value},null,8,["photos","disabled"]))]),_:1}),a(t,{label:"申请未通过原因",prop:"applyReply"},{default:o(()=>[c("div",null,[a(V,{classType:"tig-form-input",modelValue:e.value.applyReply,"onUpdate:modelValue":l[3]||(l[3]=r=>e.value.applyReply=r),row:2,type:"textarea"},null,8,["modelValue"]),l[8]||(l[8]=c("div",{class:"extra"},"若通过可不写",-1))])]),_:1}),E(a(t,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(L,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:C},{default:o(()=>[...l[9]||(l[9]=[n("提交",-1)])]),_:1},512)]),_:1},512),[[G,!i.isDialog]])]),_:1},8,["model"])),a(P,{spinning:v.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{me as default};

import{d as j,x as P,r as s,b as $,ab as z,c as V,o as M,f as c,k as g,l as T,h as i,m as l,L as Q,z as u,i as C,g as X,F as G,p as H,Q as J,t as S,j as K,O as W,P as v}from"./index-B52YIGC0.js";import{a as Y,b as Z,u as ee}from"./account-C3rAVATr.js";const ae={class:"extra"},ue=j({__name:"Info",props:{act:{type:String,default:""},id:{type:Number,default:0},type:{type:Number,default:1},page:{type:Number,default:1},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:B,emit:E}){const q=P().get("withdrawSettingVO"),y=E,d=N,p=s(!0),h=$().currentRoute.value.query,b=s(d.isDialog?d.act:String(h.act)),k=s(d.isDialog?d.id:Number(h.id)),D=b.value==="add"?"create":"update",m=z(),e=s({accountType:1}),_=V(()=>{switch(e.value.accountType){case 1:return"银行卡";case 2:return"支付宝";case 3:return"微信";default:return""}}),L=async()=>{await m.value.resetFields()};V(()=>[{required:!0,message:"请输入身份证号",trigger:"blur"},{validator:(a,t,r)=>{/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t)?r():r(new Error("请输入正确的身份证号码"))},trigger:"blur"}]);const R=V(()=>[{required:!0,message:"请输入"+_.value+"号!",trigger:"blur"},{validator:(a,t,r)=>{!/^\d{6,}$/.test(t)&&e.value.accountType===1?r(new Error("请输入正确的银行卡号")):r()},trigger:"blur"}]),F=async()=>{await m.value.validate();try{y("update:confirmLoading",!0);const a=await ee(D,{id:k.value,...e.value});await m.value.resetFields(),v.success("操作成功"),e.value.accountType=1,y("submitCallback",a)}catch(a){v.error(a.message)}finally{y("update:confirmLoading",!1)}},U=()=>{F()},A=async()=>{try{p.value=!0;const a=await Y(b.value,{id:k.value});Object.assign(e.value,a)}catch(a){v.error(a.message)}finally{p.value=!1}},x=s([]),I=async()=>{try{const a=await Z();x.value=a}catch(a){v.error(a.message)}};return M(()=>{b.value==="detail"?A():p.value=!1,I()}),B({onFormSubmit:U}),(a,t)=>{const r=c("el-radio-button"),w=c("el-radio-group"),n=c("el-form-item"),f=c("TigInput"),O=c("el-form");return p.value?T("",!0):(i(),g(O,{key:0,ref_key:"formRef",ref:m,model:e.value,class:"form-body","label-suffix":"：","label-width":"auto"},{default:l(()=>[Q(u(n,{rules:[{required:!0,message:"请选择收款方式!"}],label:"收款方式"},{default:l(()=>[C("div",null,[u(w,{modelValue:e.value.accountType,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.accountType=o),onChange:L},{default:l(()=>[(i(!0),X(G,null,H(x.value,o=>(i(),g(r,{value:o.accountType},{default:l(()=>[J(S(o.accountTypeText),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),C("div",ae,S(K(q).withdrawalDescription),1)])]),_:1},512),[[W,N.page]]),u(n,{rules:[{required:!0,message:"请输入真实姓名!"}],label:"真实姓名",prop:"accountName"},{default:l(()=>[u(f,{classType:"tig-form-input",modelValue:e.value.accountName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.accountName=o),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),u(n,{label:_.value+"号",rules:R.value,prop:"accountNo"},{default:l(()=>[u(f,{classType:"tig-form-input",modelValue:e.value.accountNo,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.accountNo=o),placeholder:"请输入"+_.value},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e.value.accountType===1?(i(),g(n,{key:0,label:"分行名称",prop:"bankBranch"},{default:l(()=>[u(f,{classType:"tig-form-input",modelValue:e.value.bankBranch,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.bankBranch=o),placeholder:"请输入分行名称"},null,8,["modelValue"])]),_:1})):T("",!0),e.value.accountType===1?(i(),g(n,{key:1,label:"银行卡详情",prop:"bankName"},{default:l(()=>[u(f,{classType:"tig-form-input",modelValue:e.value.bankName,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.bankName=o),rows:4,placeholder:"请选择银行卡账号",type:"textarea"},null,8,["modelValue"])]),_:1})):T("",!0)]),_:1},8,["model"]))}}});export{ue as default};

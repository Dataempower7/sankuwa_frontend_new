import{d as K,r as M,b as Q,ab as G,o as H,f as V,g as p,h as n,i as s,z as l,k as z,l as m,m as o,F as b,p as J,j as X,L as Y,Q as d,O as Z,P as T,_}from"./index-B52YIGC0.js";import{a as $,b as c}from"./messageType-N7L8DQYX.js";const h={class:"container"},ee={class:"content_wrapper"},le={class:"lyecs-form-table"},ae={key:0},te={class:"tznr"},oe={key:0,class:"fl1 right-div"},se={key:1},ue={key:1},ne={key:2},pe={key:3},me={key:4},de={key:5},ie={class:"tznr"},re={class:"fl1 right-div"},ve={key:3},fe={key:6},ge={class:"tznr"},Ve={key:7},be={class:"tznr"},ye=K({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:C,emit:B}){const k=B,D=S,w=M(!0),U=Q().currentRoute.value.query,x=M(D.isDialog?D.act:String(U.act)),R=M(D.isDialog?D.id:Number(U.id)),L=x.value==="add"?"create":"update",I=G(),g=M(D.id),a=M({templateMessage:{wechatData:{},appData:{},messageData:{},miniProgramData:{},msgData:{},emailData:{},dingData:{},wxWorkData:{}}}),v=M("站内信"),A=f=>{console.log(f)};let W=M([{prop:"isMessage",label:"站内信"},{prop:"isMsg",label:"短信通知"},{prop:"isWechat",label:"微信模板消息"},{prop:"isMiniProgram",label:"小程序订阅消息"},{prop:"isMail",label:"邮件"},{prop:"isDing",label:"钉钉"},{prop:"isWxWork",label:"企业微信"}]);const F=async()=>{try{const f=await $(x.value,{id:R.value});Object.assign(a.value,f);for(const e of W.value){const N=a.value[e.prop];if(typeof N=="number"&&N>-1){v.value=e.label;break}}}catch(f){T.error(f.message),k("close")}finally{w.value=!1}};H(()=>{x.value==="detail"?F():w.value=!1});const P=async()=>{await I.value.validate();try{k("update:confirmLoading",!0);const f=await c(L,{id:R.value,...a.value});k("submitCallback",f),T.success("操作成功")}catch(f){T.error(f.message)}finally{k("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{P()}}),(f,e)=>{const N=V("el-tab-pane"),j=V("el-tabs"),i=V("TigInput"),u=V("el-form-item"),r=V("el-radio"),y=V("el-radio-group"),q=V("el-button"),O=V("el-form"),E=V("a-spin");return n(),p("div",h,[s("div",ee,[s("div",le,[l(j,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:A},{default:o(()=>[(n(!0),p(b,null,J(X(W),t=>(n(),p(b,null,[a.value[t.prop]>-1?(n(),z(N,{key:0,label:t.label,name:t.label},null,8,["label","name"])):m("",!0)],64))),256))]),_:1},8,["modelValue"]),w.value?m("",!0):(n(),z(O,{key:0,ref_key:"formRef",ref:I,model:a.value,"label-width":"auto"},{default:o(()=>[v.value==="站内信"?(n(),p("div",ae,[l(u,{label:"通知标题",prop:"templateName"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.messageData.templateName,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.templateMessage.messageData.templateName=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"通知内容",prop:"content"},{default:o(()=>[s("div",te,[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.messageData.content,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.templateMessage.messageData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"]),g.value!==2?(n(),p("div",oe,[e[28]||(e[28]=s("p",null,"请输入模板消息详细内容对应的变量，关键字个数需与添加的模板一致。可以使用如下变量：",-1)),g.value==3?(n(),p(b,{key:0},[e[25]||(e[25]=s("p",null,"{orderSn}订单编号",-1)),e[26]||(e[26]=s("p",null,"{logisticsName}物流公司",-1)),e[27]||(e[27]=s("p",null,"{trackingNo}物流单号",-1))],64)):(n(),p("p",se,"{orderSn}订单编号"))])):m("",!0)])]),_:1}),l(u,{label:"是否开启",prop:"isMessage"},{default:o(()=>[l(y,{modelValue:a.value.isMessage,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.isMessage=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[29]||(e[29]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[30]||(e[30]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="短信通知"?(n(),p("div",ue,[l(u,{label:"短信模板ID",prop:"templateId"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.msgData.templateId,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.templateMessage.msgData.templateId=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"通知内容",prop:"content"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.msgData.content,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.templateMessage.msgData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"是否开启",prop:"isMsg"},{default:o(()=>[l(y,{modelValue:a.value.isMsg,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.isMsg=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[31]||(e[31]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[32]||(e[32]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="微信模板消息"?(n(),p("div",ne,[l(u,{label:"通知标题",prop:"templateName"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.wechatData.templateName,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.templateMessage.wechatData.templateName=t),disabled:""},null,8,["modelValue"])]),_:1}),l(u,{label:"模板ID",prop:"templateId"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.wechatData.templateId,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.templateMessage.wechatData.templateId=t),disabled:""},null,8,["modelValue"])]),_:1}),l(u,{label:"模板",prop:"content"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.wechatData.content,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.templateMessage.wechatData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"是否开启",prop:"isWechat"},{default:o(()=>[l(y,{modelValue:a.value.isWechat,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.isWechat=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[33]||(e[33]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[34]||(e[34]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="小程序订阅消息"?(n(),p("div",pe,[l(u,{label:"通知标题",prop:"templateName"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.miniProgramData.templateName,"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.templateMessage.miniProgramData.templateName=t),disabled:""},null,8,["modelValue"])]),_:1}),l(u,{label:"模板ID",prop:"templateId"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.miniProgramData.templateId,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.templateMessage.miniProgramData.templateId=t),disabled:""},null,8,["modelValue"])]),_:1}),l(u,{label:"模板",prop:"content"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.miniProgramData.content,"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.templateMessage.miniProgramData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"是否开启",prop:"isMiniProgram"},{default:o(()=>[l(y,{modelValue:a.value.isMiniProgram,"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.isMiniProgram=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[35]||(e[35]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[36]||(e[36]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="APP"?(n(),p("div",me,[l(u,{label:"通知标题",prop:"templateName"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.appData.templateName,"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.templateMessage.appData.templateName=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"通知内容",prop:"content"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.appData.content,"onUpdate:modelValue":e[16]||(e[16]=t=>a.value.templateMessage.appData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"是否开启",prop:"isApp"},{default:o(()=>[l(y,{modelValue:a.value.isApp,"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.isApp=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[37]||(e[37]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[38]||(e[38]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="邮件"?(n(),p("div",de,[l(u,{label:"通知标题",prop:"templateName"},{default:o(()=>[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.emailData.templateName,"onUpdate:modelValue":e[18]||(e[18]=t=>a.value.templateMessage.emailData.templateName=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"模板",prop:"content"},{default:o(()=>[s("div",ie,[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.emailData.content,"onUpdate:modelValue":e[19]||(e[19]=t=>a.value.templateMessage.emailData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"]),s("div",re,[e[56]||(e[56]=s("p",null,"请输入模板消息详细内容对应的变量，关键字个数需与添加的模板一致。可以使用如下变量：",-1)),g.value==11?(n(),p(b,{key:0},[e[39]||(e[39]=s("p",null,"{merchantName}商家名称",-1)),e[40]||(e[40]=s("p",null,"{shopName}店铺名称",-1))],64)):m("",!0),g.value==10?(n(),p(b,{key:1},[e[41]||(e[41]=s("p",null,"{merchantName}平台名称",-1)),e[42]||(e[42]=s("p",null,"{username}账号",-1)),e[43]||(e[43]=s("p",null,"{password}初始密码",-1))],64)):m("",!0),g.value==9?(n(),p(b,{key:2},[e[44]||(e[44]=s("p",null,"{userNickName}用户名",-1)),e[45]||(e[45]=s("p",null,"{submitTime}提交时间",-1))],64)):m("",!0),g.value==8?(n(),p("p",ve,"{code}验证码")):m("",!0),g.value==4?(n(),p(b,{key:4},[e[46]||(e[46]=s("p",null,"{shopTitle}店铺名称",-1)),e[47]||(e[47]=s("p",null,"{userName}用户名称",-1)),e[48]||(e[48]=s("p",null,"{afterSaleSn}订单售后编码",-1)),e[49]||(e[49]=s("p",null,"{totalRefund}退款金额",-1)),e[50]||(e[50]=s("p",null,"{refundTime}退款时间",-1))],64)):m("",!0),g.value==3?(n(),p(b,{key:5},[e[51]||(e[51]=s("p",null,"{shippingName}物流名称",-1)),e[52]||(e[52]=s("p",null,"{code}物流编号",-1))],64)):m("",!0),g.value==2?(n(),p(b,{key:6},[e[53]||(e[53]=s("p",null,"{shopTitle}店铺名称",-1)),e[54]||(e[54]=s("p",null,"{userName}用户名",-1)),e[55]||(e[55]=s("p",null,"{productName}商品信息",-1))],64)):m("",!0)])])]),_:1}),l(u,{label:"是否开启",prop:"isMail"},{default:o(()=>[l(y,{modelValue:a.value.isMail,"onUpdate:modelValue":e[20]||(e[20]=t=>a.value.isMail=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[57]||(e[57]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[58]||(e[58]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="钉钉"?(n(),p("div",fe,[l(u,{label:"通知内容",prop:"content"},{default:o(()=>[s("div",ge,[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.dingData.content,"onUpdate:modelValue":e[21]||(e[21]=t=>a.value.templateMessage.dingData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"]),e[59]||(e[59]=s("div",{class:"fl1 right-div"},[s("p",null,"请输入模板消息详细内容对应的变量，关键字个数需与添加的模板一致。可以使用如下变量："),s("p",null,"{order} 订单号"),s("p",null,"{fee} 支付金额")],-1))])]),_:1}),l(u,{label:"是否开启",prop:"isDing"},{default:o(()=>[l(y,{modelValue:a.value.isDing,"onUpdate:modelValue":e[22]||(e[22]=t=>a.value.isDing=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[60]||(e[60]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[61]||(e[61]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),v.value==="企业微信"?(n(),p("div",Ve,[l(u,{label:"通知内容",prop:"content"},{default:o(()=>[s("div",be,[l(i,{classType:"tig-form-input",modelValue:a.value.templateMessage.wxWorkData.content,"onUpdate:modelValue":e[23]||(e[23]=t=>a.value.templateMessage.wxWorkData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"]),e[62]||(e[62]=s("div",{class:"fl1 right-div"},[s("p",null,"请输入模板消息详细内容对应的变量，关键字个数需与添加的模板一致。可以使用如下变量："),s("p",null,"{order} 订单号"),s("p",null,"{fee} 支付金额")],-1))])]),_:1}),l(u,{label:"是否开启",prop:"isWxWork"},{default:o(()=>[l(y,{modelValue:a.value.isWxWork,"onUpdate:modelValue":e[24]||(e[24]=t=>a.value.isWxWork=t)},{default:o(()=>[l(r,{value:1},{default:o(()=>[...e[63]||(e[63]=[d("是",-1)])]),_:1}),l(r,{value:0},{default:o(()=>[...e[64]||(e[64]=[d("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):m("",!0),Y(l(u,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[l(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:P},{default:o(()=>[...e[65]||(e[65]=[d("提交",-1)])]),_:1},512)]),_:1},512),[[Z,!D.isDialog]])]),_:1},8,["model"])),l(E,{spinning:w.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}}),we=_(ye,[["__scopeId","data-v-74dde23b"]]);export{we as default};

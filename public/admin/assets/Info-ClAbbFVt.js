import{d as C,r as n,a as I,a2 as V,o as B,K as d,e as m,f as N,g as b,h as y,j as D,k as q,l as i,z as o,G as E,i as U,L as j,J as F}from"./index-BLXOA87U.js";import{b as G,u as z}from"./live-aNZhBtta.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import"./index-DpgvsnVO.js";/* empty css                                                                    *//* empty css                                                                  */import{S as J}from"./SelectGoodsRange-C2Xv0ysm.js";/* empty css                                                                              *//* empty css             */import"./time-DX2Q3n6c.js";import"./index-B16C4gX_.js";import"./SelectBrand-SbthwkIY.js";import"./brand-CrKtj3RC.js";import"./SelectCategory.vue_vue_type_script_setup_true_lang-CYLUeo0H.js";import"./category-C1lvuGmx.js";import"./category-Bd8w-lZR.js";import"./SelectProduct-D-sQ619X.js";import"./format-DdZABYp4.js";import"./product-CsYu5zzV.js";import"./Pagination-w0YHSLYy.js";import"./SelectSku-DmHOajuh.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";const K={class:"container"},M={class:"content_wrapper"},O={class:"lyecs-form-table"},fe=C({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:L,emit:R}){const l=R,r=w,u=n(!0),f=I().currentRoute.value.query,p=n(r.isDialog?r.act:String(f.act)),v=n(r.isDialog?r.id:Number(f.id)),S=p.value==="add"?"create":"update",g=V(),e=n({});B(()=>{p.value==="detail"?T():u.value=!1});const T=async()=>{try{const t=await G(p.value,{id:v.value});Object.assign(e.value,t)}catch(t){d.error(t.message),l("close")}finally{u.value=!1}},_=async()=>{await g.value.validate();try{l("update:confirmLoading",!0);const t=await z(S,{id:v.value,...e.value});l("submitCallback",t),d.success("操作成功")}catch(t){d.error(t.message)}finally{l("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{_()}}),(t,a)=>{const k=m("TigInput"),c=m("el-form-item"),h=m("el-button"),x=m("el-form");return b(),N("div",K,[y("div",M,[y("div",O,[u.value?q("",!0):(b(),D(x,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:i(()=>[o(c,{prop:"wechatLiveTitle",label:"直播名称",rules:[{required:!0,message:"直播名称不能为空!"}]},{default:i(()=>[o(k,{classType:"tig-form-input",modelValue:e.value.wechatLiveTitle,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.wechatLiveTitle=s)},null,8,["modelValue"])]),_:1}),o(c,{prop:"productId",label:"选择商品"},{default:i(()=>[o(U(J),{rangeIds:e.value.actRangeExt,"onUpdate:rangeIds":a[1]||(a[1]=s=>e.value.actRangeExt=s),rangeType:e.value.actRange,"onUpdate:rangeType":a[2]||(a[2]=s=>e.value.actRange=s),isSelf:1},null,8,["rangeIds","rangeType"])]),_:1}),E(o(c,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[o(h,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:_},{default:i(()=>a[3]||(a[3]=[j("提交",-1)])),_:1,__:[3]},512)]),_:1},512),[[F,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{fe as default};

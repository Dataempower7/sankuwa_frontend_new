import{d as C,r as c,b as L,ab as B,o as A,f as r,g as q,h as y,i as w,k as I,l as T,z as t,m as l,L as U,Q as F,O,P as p}from"./index-B52YIGC0.js";import{a as j,c as z}from"./adminRole-BjO_2Qoh.js";import E from"./AuthoritySelect-DfiWAvdD.js";const M={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},W=C({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:h,emit:k}){const i=k,s=V,u=c(!0),f=L().currentRoute.value.query,d=c(s.isDialog?s.act:String(f.act)),v=c(s.isDialog?s.id:Number(f.id)),N=d.value==="add"?"create":"update",_=B(),e=c({}),D=async()=>{try{const o=await j(d.value,{id:v.value});Object.assign(e.value,o)}catch(o){p.error(o.message),i("close")}finally{u.value=!1}};A(()=>{d.value==="detail"?D():u.value=!1});const b=async()=>{await _.value.validate();try{i("update:confirmLoading",!0);const o=await z(N,{id:v.value,...e.value});i("submitCallback",o),p.success("操作成功")}catch(o){p.error(o.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{b()}}),(o,a)=>{const g=r("TigInput"),m=r("el-form-item"),R=r("el-button"),S=r("el-form"),x=r("a-spin");return y(),q("div",M,[w("div",P,[w("div",Q,[u.value?T("",!0):(y(),I(S,{key:0,ref_key:"formRef",ref:_,model:e.value,"label-width":"auto"},{default:l(()=>[t(m,{rules:[{required:!0,message:"权限组名称不能为空!"}],label:"权限组名称",prop:"roleName"},{default:l(()=>[t(g,{width:"100%",modelValue:e.value.roleName,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.roleName=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"权限组描述",prop:"roleDesc"},{default:l(()=>[t(g,{width:"100%",modelValue:e.value.roleDesc,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.roleDesc=n),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(m,{label:"",prop:"authorityList"},{default:l(()=>[t(E,{modelValue:e.value.authorityList,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.authorityList=n)},null,8,["modelValue"])]),_:1}),U(t(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:l(()=>[...a[3]||(a[3]=[F("提交",-1)])]),_:1},512)]),_:1},512),[[O,!s.isDialog]])]),_:1},8,["model"])),t(x,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{W as default};

import{d as R,r as m,b as U,ab as F,o as M,f as n,g as O,h as c,i as f,k as w,l as k,z as o,m as l,L as q,j,Q as G,O as z,P as v}from"./index-B52YIGC0.js";import{F as A}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{e as E,u as P}from"./shop-CBisV8Of.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */const Q={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},re=R({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:S,emit:T}){const u=T,i=x,p=m(!1),_=U().currentRoute.value.query,b=m(i.isDialog?i.act:String(_.act)),g=m(i.isDialog?i.id:Number(_.id)),L=b.value==="add"?"create":"update",y=F(),t=m({shopType:1}),C=async()=>{try{const s=await E(b.value,{shopId:g.value});Object.assign(t.value,s)}catch(s){v.error(s.message),u("close")}finally{p.value=!1}};M(()=>{C()});const V=async()=>{await y.value.validate();try{u("update:confirmLoading",!0);const s=await P(L,{id:g.value,...t.value});u("submitCallback",s),v.success("操作成功")}catch(s){v.error(s.message)}finally{u("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{V()}}),(s,e)=>{const h=n("el-radio-button"),B=n("el-radio-group"),r=n("el-form-item"),d=n("TigInput"),N=n("el-button"),D=n("el-form"),I=n("a-spin");return c(),O("div",Q,[f("div",H,[f("div",J,[p.value?k("",!0):(c(),w(D,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:l(()=>[o(r,{label:"店铺状态",prop:"status"},{default:l(()=>[o(B,{modelValue:t.value.status,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.status=a)},{default:l(()=>[o(h,{label:"停业",value:4}),o(h,{label:"开业",value:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"店铺名称",prop:"shopTitle",rules:[{required:!0,message:"店铺名称不能为空!"}]},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.shopTitle,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.shopTitle=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"店铺LOGO",prop:"shopLogo"},{default:l(()=>[p.value?k("",!0):(c(),w(j(A),{key:0,photo:t.value.shopLogo,"onUpdate:photo":e[2]||(e[2]=a=>t.value.shopLogo=a)},null,8,["photo"])),e[5]||(e[5]=f("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(r,{label:"商家电话",prop:"contactMobile"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.contactMobile,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.contactMobile=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"店铺描述",prop:"description"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.description,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.description=a),row:5,type:"textarea"},null,8,["modelValue"])]),_:1}),q(o(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:V},{default:l(()=>[...e[6]||(e[6]=[G("提交",-1)])]),_:1},512)]),_:1},512),[[z,!i.isDialog]])]),_:1},8,["model"])),o(I,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{re as default};

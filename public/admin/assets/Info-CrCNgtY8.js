import{d as U,r as d,a as F,a2 as L,o as M,e as s,f as h,g as w,h as c,z as o,j,k as G,l as a,G as z,i as V,L as f,J as A,K as _}from"./index-BLXOA87U.js";import{F as E}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-DfcXXcrS.js";import"./index-DpgvsnVO.js";import"./vuedraggable.umd-OAFqtEpj.js";import{a as J,b as K}from"./material-f6WeZNrz.js";import{_ as P}from"./selectCategory.vue_vue_type_script_setup_true_lang-CulX0yQ5.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import{S as $}from"./SelectProduct-D-sQ619X.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css             */import"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import"./format-DdZABYp4.js";import"./BusinessImg-C3Ug8bC9.js";import"./currencyManagement-ZKRxsK3T.js";import"./version-hjn5tnxG.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./category-jSin5Wbi.js";import"./time-DX2Q3n6c.js";import"./product-CsYu5zzV.js";import"./Pagination-w0YHSLYy.js";import"./SelectSku-DmHOajuh.js";/* empty css                                                                  */const H={class:"container"},O={class:"content_wrapper"},Q={class:"lyecs-form-table"},W={class:"lyecs-form-table"},Ve=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:S,emit:T}){const u=T,n=k,p=d(!0),v=F().currentRoute.value.query,m=d(n.isDialog?n.act:String(v.act)),g=d(n.isDialog?n.id:Number(v.id)),x=m.value==="add"?"create":"update",y=L(),t=d({isTop:0,content:"",productId:[]}),B=async()=>{try{const l=await J(m.value,{id:g.value});t.value=l,t.value.productId=[l.productId]}catch(l){_.error(l.message),u("close")}finally{p.value=!1}};M(()=>{m.value==="detail"?B():p.value=!1});const b=async()=>{await y.value.validate();let l="";t.value.productId&&(l=t.value.productId.join(","));try{u("update:confirmLoading",!0);const e=await K(x,{id:g.value,...t.value,productId:l});u("submitCallback",e),_.success("操作成功")}catch(e){_.error(e.message)}finally{u("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{b()}}),(l,e)=>{const i=s("el-form-item"),C=s("TigInput"),I=s("el-radio"),q=s("el-radio-group"),N=s("el-button"),D=s("el-form"),R=s("a-spin");return w(),h("div",H,[c("div",O,[c("div",Q,[c("div",W,[p.value?G("",!0):(w(),j(D,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{label:"素材图片",prop:"pics",rules:[{required:!0,message:"素材图片不能为空!"}]},{default:a(()=>[o(V(E),{photos:t.value.pics,"onUpdate:photos":e[0]||(e[0]=r=>t.value.pics=r),isMultiple:""},null,8,["photos"])]),_:1}),o(i,{label:"素材分类",prop:"categoryId",rules:[{required:!0,message:"请选择素材分类!"}]},{default:a(()=>[o(P,{categoryId:t.value.categoryId,"onUpdate:categoryId":e[1]||(e[1]=r=>t.value.categoryId=r)},null,8,["categoryId"])]),_:1}),o(i,{rules:[{required:!0,message:"素材内容不能为空!"}],label:"素材内容",prop:"content"},{default:a(()=>[o(C,{classType:"tig-form-input",modelValue:t.value.content,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.content=r),rows:5,type:"textarea"},null,8,["modelValue"])]),_:1}),o(i,{label:"选择商品",prop:"productId",rules:[{required:!0,message:"请选择商品!"}]},{default:a(()=>[o(V($),{isMultiple:!1,ids:t.value.productId,"onUpdate:ids":e[3]||(e[3]=r=>t.value.productId=r)},null,8,["ids"])]),_:1}),o(i,{label:"是否置顶",prop:"isTop"},{default:a(()=>[o(q,{modelValue:t.value.isTop,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.isTop=r)},{default:a(()=>[o(I,{value:1},{default:a(()=>e[5]||(e[5]=[f("置顶",-1)])),_:1,__:[5]}),o(I,{value:0},{default:a(()=>e[6]||(e[6]=[f("不置顶",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),z(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:a(()=>e[7]||(e[7]=[f("提交",-1)])),_:1,__:[7]},512)]),_:1},512),[[A,!n.isDialog]])]),_:1},8,["model"]))]),o(R,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Ve as default};

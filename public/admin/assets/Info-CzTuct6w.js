import{d as K,R as j,r as f,b as z,ab as A,o as G,Y as M,f as n,g as Q,h as g,i,k as x,l as y,z as o,m as a,L as Y,j as _,ae as J,Q as p,t as W,av as X,O as Z,P as V,_ as h}from"./index-B52YIGC0.js";import{F as ee}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import{_ as te}from"./SelectCategory.vue_vue_type_script_setup_true_lang-Bb2xH4oQ.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import{c as oe,e as ae}from"./category-BhaHXalE.js";import{u as le}from"./category-D6KF81Ae.js";import{B as re}from"./BusinessData-Dbgv1FCM.js";import{g as se}from"./seo-C1Ho1LwZ.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */import"./time-EzYK4E-P.js";const ie={class:"container"},ne={class:"content_wrapper"},ue={class:"lyecs-form-table"},de={class:"table-question"},pe={class:"flex flex-align-center"},me={class:"keywords"},fe={class:"extra"},ce=K({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(B,{expose:O,emit:D}){j();const c=D,d=B,m=f(!0),b=f(!1),N=z().currentRoute.value.query,w=f(d.isDialog?d.act:String(N.act)),I=f(d.isDialog?d.id:Number(N.id)),k=w.value==="add"?"create":"update",S=A(),t=f({isShow:1,sortOrder:50}),L=async()=>{try{const s=await oe(w.value,{id:I.value});Object.assign(t.value,s)}catch(s){V.error(s.message),c("close")}finally{m.value=!1}};G(()=>{w.value==="detail"?L():m.value=!1,k==="create"&&(t.value.parentId=d.parentId,console.log(t.value.parentId))});const R=async()=>{try{b.value=!0;const s=await se(t.value.categoryName||"");t.value.seoIdentification=s}catch(s){V.error(s.message)}finally{b.value=!1}},q=(s,e,r)=>{if(!t.value.categoryName&&!e){r(new Error("请先输入分类名称"));return}r()},T=async()=>{await S.value.validate();try{c("update:confirmLoading",!0);const s=await ae(k,{id:I.value,...t.value});c("submitCallback",s),V.success("操作成功"),le().clearCategory()}catch(s){V.error(s.message)}finally{c("update:confirmLoading",!1)}},E=()=>{T()};return M(()=>t.value.categoryName,s=>{s&&S.value.validateField("seoIdentification")},{immediate:!0}),O({onFormSubmit:E}),(s,e)=>{const r=n("el-form-item"),F=n("el-icon"),P=n("el-tooltip"),u=n("TigInput"),U=n("el-button"),v=n("el-radio"),C=n("el-radio-group"),$=n("el-form"),H=n("a-spin");return g(),Q("div",ie,[i("div",ne,[i("div",ue,[m.value?y("",!0):(g(),x($,{key:0,ref_key:"formRef",ref:S,model:t.value,"label-width":"auto"},{default:a(()=>[o(r,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"categoryName"},{default:a(()=>[o(re,{modelValue:t.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.categoryName=l),placeholder:"请输入分类名称",dataType:3,dataId:I.value},null,8,["modelValue","dataId"])]),_:1}),_(J)()?(g(),x(r,{key:0,class:"inner-item",prop:"seoIdentification",rules:[{required:!1,validator:q}]},{label:a(()=>[i("div",de,[o(P,{class:"box-item",effect:"light",placement:"bottom","show-after":"300"},{content:a(()=>[...e[13]||(e[13]=[i("div",{style:{width:"300px",padding:"5px 10px"}}," SEO链接是分类页面的URL，用于搜索引擎优化，格式为：域名/category/[seo链接] ",-1)])]),default:a(()=>[i("div",pe,[e[14]||(e[14]=i("div",null,"SEO链接",-1)),o(F,{style:{"margin-left":"5px"},size:"14",color:"#999"},{default:a(()=>[o(_(X))]),_:1})])]),_:1})])]),default:a(()=>[i("div",me,[o(u,{classType:"tig-form-input",class:"InputBox",modelValue:t.value.seoIdentification,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.seoIdentification=l)},null,8,["modelValue"]),o(U,{onClick:R,style:{"margin-top":"2px"},loading:b.value,disabled:!t.value.categoryName},{default:a(()=>[...e[15]||(e[15]=[p("自动生成",-1)])]),_:1},8,["loading","disabled"])]),i("div",fe,W(`SEO链接预览：域名/category/${t.value.seoIdentification?t.value.seoIdentification:t.value.categoryName?t.value.categoryName:"[seo链接]"}`),1)]),_:1},8,["rules"])):y("",!0),o(r,{label:"分类短名",prop:"shortName"},{default:a(()=>[o(u,{classType:"tig-form-input",modelValue:t.value.shortName,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.shortName=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"上级分类",prop:"parentId"},{default:a(()=>[m.value?y("",!0):(g(),x(_(te),{key:0,categoryId:t.value.parentId,"onUpdate:categoryId":e[3]||(e[3]=l=>t.value.parentId=l),multiple:!1},null,8,["categoryId"]))]),_:1}),o(r,{label:"分类图片",prop:"categoryPic"},{default:a(()=>[o(_(ee),{photo:t.value.categoryPic,"onUpdate:photo":e[4]||(e[4]=l=>t.value.categoryPic=l)},null,8,["photo"]),e[16]||(e[16]=i("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(r,{label:"数量单位",prop:"measureUnit"},{default:a(()=>[o(u,{classType:"tig-form-input",modelValue:t.value.measureUnit,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.measureUnit=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"SEO标题",prop:"seoTitle"},{default:a(()=>[o(u,{classType:"tig-form-input",modelValue:t.value.seoTitle,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.seoTitle=l)},null,8,["modelValue"]),e[17]||(e[17]=i("div",{class:"extra"},"如果不填，则该分类页的标题则为默认标题；如果该项不为空，则该分类页的标题显示此项的内容。",-1))]),_:1}),y("",!0),o(r,{label:"关键字",prop:"keywords"},{default:a(()=>[o(u,{classType:"tig-form-input",modelValue:t.value.keywords,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.keywords=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"分类描述",prop:"categoryDesc"},{default:a(()=>[o(u,{classType:"tig-form-input",modelValue:t.value.categoryDesc,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.categoryDesc=l),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),o(r,{label:"排序",prop:"sortOrder"},{default:a(()=>[o(u,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"是否热门",prop:"isHot"},{default:a(()=>[o(C,{modelValue:t.value.isHot,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.isHot=l)},{default:a(()=>[o(v,{value:1},{default:a(()=>[...e[18]||(e[18]=[p("是",-1)])]),_:1}),o(v,{value:0},{default:a(()=>[...e[19]||(e[19]=[p("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"是否显示",prop:"isShow"},{default:a(()=>[o(C,{modelValue:t.value.isShow,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.isShow=l)},{default:a(()=>[o(v,{value:1},{default:a(()=>[...e[20]||(e[20]=[p("是",-1)])]),_:1}),o(v,{value:0},{default:a(()=>[...e[21]||(e[21]=[p("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),Y(o(r,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(U,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:T},{default:a(()=>[...e[22]||(e[22]=[p("提交 ",-1)])]),_:1},512)]),_:1},512),[[Z,!d.isDialog]])]),_:1},8,["model"])),o(H,{spinning:m.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}}),Pe=h(ce,[["__scopeId","data-v-99cea65b"]]);export{Pe as default};

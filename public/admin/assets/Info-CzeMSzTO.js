import{d as S,r as m,a as U,a2 as B,o as N,e as i,f as D,g as k,h as d,j as R,k as G,z as o,l as r,G as h,i as q,L as I,J as j,K as v}from"./index-BLXOA87U.js";import{F as z}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-DfcXXcrS.js";import"./index-DpgvsnVO.js";import"./vuedraggable.umd-OAFqtEpj.js";import{a as A,c as E}from"./friendLinks-DHDhuyIO.js";import"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import"./format-DdZABYp4.js";import"./BusinessImg-C3Ug8bC9.js";import"./currencyManagement-ZKRxsK3T.js";import"./version-hjn5tnxG.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const J={class:"container"},K={class:"content_wrapper"},M={class:"lyecs-form-table"},re=S({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:L,emit:w}){const u=w,s=V,p=m(!0),g=U().currentRoute.value.query,c=m(s.isDialog?s.act:String(g.act)),_=m(s.isDialog?s.id:Number(g.id)),x=c.value==="add"?"create":"update",y=B(),t=m({sortOrder:50}),O=async()=>{try{const a=await A(c.value,{id:_.value});Object.assign(t.value,a)}catch(a){v.error(a.message),u("close")}finally{p.value=!1}};N(()=>{c.value==="detail"?O():p.value=!1});const b=async()=>{await y.value.validate();try{u("update:confirmLoading",!0);const a=await E(x,{id:_.value,...t.value});u("submitCallback",a),v.success("操作成功")}catch(a){v.error(a.message)}finally{u("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{b()}}),(a,e)=>{const f=i("TigInput"),n=i("el-form-item"),T=i("el-button"),C=i("el-form"),F=i("a-spin");return k(),D("div",J,[d("div",K,[d("div",M,[p.value?G("",!0):(k(),R(C,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:r(()=>[o(n,{rules:[{required:!0,message:"链接名称不能为空!"}],label:"链接名称",prop:"linkTitle"},{default:r(()=>[o(f,{classType:"tig-form-input",modelValue:t.value.linkTitle,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.linkTitle=l)},null,8,["modelValue"]),e[4]||(e[4]=d("div",{class:"extra"},"当你添加文字链接时, 链接LOGO为你的链接名称",-1))]),_:1,__:[4]}),o(n,{label:"链接地址",prop:"linkUrl"},{default:r(()=>[o(f,{classType:"tig-form-input",modelValue:t.value.linkUrl,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.linkUrl=l),type:"text"},null,8,["modelValue"])]),_:1}),o(n,{label:"链接LOGO",prop:"linkLogo"},{default:r(()=>[o(q(z),{photo:t.value.linkLogo,"onUpdate:photo":e[2]||(e[2]=l=>t.value.linkLogo=l)},null,8,["photo"]),e[5]||(e[5]=d("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1,__:[5]}),o(n,{label:"排序",prop:"sortOrder"},{default:r(()=>[o(f,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),h(o(n,{"wrapper-col":{offset:4,span:16}},{default:r(()=>[o(T,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:r(()=>e[6]||(e[6]=[I("提交",-1)])),_:1,__:[6]},512)]),_:1},512),[[j,!s.isDialog]])]),_:1},8,["model"])),o(F,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{re as default};

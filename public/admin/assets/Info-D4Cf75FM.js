import{d as D,r as V,b as R,ab as Y,o as B,f as i,g as P,h as U,i as r,k as I,l as j,z as t,m as l,Q as n,P as c}from"./index-B52YIGC0.js";import{c as A,d as L}from"./receiptPrint-22wOE8vb.js";const O={class:"container"},X={class:"content_wrapper"},F={class:"lyecs-form-table"},G={class:"extra"},H={class:"extra"},z={class:"extra"},W=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(K,{expose:k,emit:E}){const m=E,f=K,g=V(!0),_=R().currentRoute.value.query,S=V(f.isDialog?f.act:String(_.act)),w=V(f.isDialog?f.id:Number(_.id)),x=S.value==="add"?"create":"update",N=Y(),o=V({printNumber:1}),C=async()=>{try{const u=await A({id:w.value});let{addTime:e,platformText:d,shopId:v,statusText:s,updateTime:p,printNumber:y,platform:T,...b}=u;Object.assign(o.value,b)}catch(u){c.error(u.message),m("close")}finally{g.value=!1}};B(()=>{S.value==="detail"?C():g.value=!1});const q=async()=>{await N.value.validate();try{m("update:confirmLoading",!0);const u=await L(x,{printId:x=="create"?void 0:w.value,...o.value});m("submitCallback",u),c.success("操作成功")}catch(u){c.error(u.message)}finally{m("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{q()}}),(u,e)=>{const d=i("el-radio"),v=i("el-radio-group"),s=i("el-form-item"),p=i("TigInput"),y=i("el-popover"),T=i("el-form"),b=i("a-spin");return U(),P("div",O,[r("div",X,[r("div",F,[g.value?j("",!0):(U(),I(T,{key:0,ref_key:"formRef",ref:N,model:o.value,"label-width":"auto"},{default:l(()=>[t(s,{label:"服务商",prop:""},{default:l(()=>[t(v,{modelValue:1},{default:l(()=>[t(d,{value:1},{default:l(()=>[...e[7]||(e[7]=[n("飞鹅云打印",-1)])]),_:1})]),_:1})]),_:1}),t(s,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"printName"},{default:l(()=>[t(p,{classType:"tig-form-input",modelValue:o.value.printName,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.printName=a)},null,8,["modelValue"])]),_:1}),t(s,{label:"USER",prop:"thirdAccount",rules:[{required:!0,message:"USER不能为空!"}]},{default:l(()=>[t(p,{classType:"tig-form-input",modelValue:o.value.thirdAccount,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.thirdAccount=a)},null,8,["modelValue"]),e[8]||(e[8]=r("div",{class:"extra"},"飞鹅云后台账号",-1))]),_:1}),t(s,{label:"UYEK",prop:"thirdKey",rules:[{required:!0,message:"UYEK不能为空!"}]},{default:l(()=>[t(p,{classType:"tig-form-input",modelValue:o.value.thirdKey,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.thirdKey=a)},null,8,["modelValue"]),r("div",G,[e[11]||(e[11]=n(" 飞鹅云后台生成的UYEK， ",-1)),t(y,{width:400,placement:"right-end",trigger:"hover"},{reference:l(()=>[...e[9]||(e[9]=[r("a",null,"查看示例",-1)])]),default:l(()=>[...e[10]||(e[10]=[r("img",{src:"https://oss.tigshop.com/img/gallery/202507/1753684560T8OSH0XHLs8kXZKODe.jpeg",style:{width:"380px"}},null,-1)])]),_:1})])]),_:1}),t(s,{label:"打印机SN",prop:"printSn",rules:[{required:!0,message:"打印机SN不能为空!"}]},{default:l(()=>[t(p,{classType:"tig-form-input",modelValue:o.value.printSn,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.printSn=a)},null,8,["modelValue"]),r("div",H,[e[14]||(e[14]=n(" 飞鹅云打印机标签上SN， ",-1)),t(y,{width:400,placement:"right-end",trigger:"hover"},{reference:l(()=>[...e[12]||(e[12]=[r("a",null,"查看示例",-1)])]),default:l(()=>[...e[13]||(e[13]=[r("img",{src:"https://oss.tigshop.com/img/gallery/202507/1753768520lp0CnlW3J9YOgwBS1P.jpg",style:{width:"380px"}},null,-1)])]),_:1})])]),_:1}),t(s,{label:"打印机KEY",prop:"printKey",rules:[{required:!0,message:"打印机KEY不能为空!"}]},{default:l(()=>[t(p,{classType:"tig-form-input",modelValue:o.value.printKey,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.printKey=a)},null,8,["modelValue"]),r("div",z,[e[17]||(e[17]=n(" 飞鹅云打印机标签上KEY， ",-1)),t(y,{width:400,placement:"right-end",trigger:"hover"},{reference:l(()=>[...e[15]||(e[15]=[r("a",null,"查看示例",-1)])]),default:l(()=>[...e[16]||(e[16]=[r("img",{src:"https://oss.tigshop.com/img/gallery/202507/1753768520XcpUlaVT9k5Gdp5SD5.jpg",style:{width:"380px"}},null,-1)])]),_:1})])]),_:1}),t(s,{label:"订单支付自动打印",prop:""},{default:l(()=>[t(v,{modelValue:o.value.autoPrint,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.autoPrint=a)},{default:l(()=>[t(d,{value:1},{default:l(()=>[...e[18]||(e[18]=[n("开启",-1)])]),_:1}),t(d,{value:2},{default:l(()=>[...e[19]||(e[19]=[n("关闭",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"打印机状态",prop:""},{default:l(()=>[t(v,{modelValue:o.value.status,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.status=a)},{default:l(()=>[t(d,{value:1},{default:l(()=>[...e[20]||(e[20]=[n("启用",-1)])]),_:1}),t(d,{value:2},{default:l(()=>[...e[21]||(e[21]=[n("关闭",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),t(b,{spinning:g.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{W as default};

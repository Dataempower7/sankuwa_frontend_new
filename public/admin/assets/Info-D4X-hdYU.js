import{d as I,r as d,b as L,ab as R,o as U,P as f,f as u,g as F,h as w,i as v,k as P,l as q,m as a,z as t,L as j,j as z,Q as g,O as A}from"./index-B52YIGC0.js";import{F as E}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{a as G,c as M}from"./productServices-CYxWbb8w.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */const Q={class:"container"},$={class:"content_wrapper"},H={class:"lyecs-form-table"},se=I({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:x,emit:N}){const n=N,i=k,m=d(!0),b=L().currentRoute.value.query,p=d(i.isDialog?i.act:String(b.act)),_=d(i.isDialog?i.id:Number(b.id)),O=p.value==="add"?"create":"update",y=R(),o=d({sortOrder:50,defaultOn:1});U(()=>{p.value==="detail"?C():m.value=!1});const C=async()=>{try{const r=await G(p.value,{id:_.value});Object.assign(o.value,r)}catch(r){f.error(r.message),n("close")}finally{m.value=!1}},V=async()=>{await y.value.validate();try{n("update:confirmLoading",!0);const r=await M(O,{id:_.value,...o.value});n("submitCallback",r),f.success("操作成功")}catch(r){f.error(r.message)}finally{n("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{V()}}),(r,e)=>{const c=u("TigInput"),s=u("el-form-item"),S=u("el-radio"),D=u("el-radio-group"),B=u("el-button"),T=u("el-form");return w(),F("div",Q,[v("div",$,[v("div",H,[m.value?q("",!0):(w(),P(T,{key:0,ref_key:"formRef",ref:y,model:o.value,"label-width":"auto"},{default:a(()=>[t(s,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"productServiceName"},{default:a(()=>[t(c,{classType:"tig-form-input",modelValue:o.value.productServiceName,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.productServiceName=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"简介"},{default:a(()=>[t(c,{classType:"tig-form-input",modelValue:o.value.productServiceDesc,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.productServiceDesc=l),rows:2,placeholder:"请输入简介",type:"textarea"},null,8,["modelValue"])]),_:1}),t(s,{label:"图标"},{default:a(()=>[t(z(E),{photo:o.value.icoImg,"onUpdate:photo":e[2]||(e[2]=l=>o.value.icoImg=l)},null,8,["photo"]),e[6]||(e[6]=v("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),t(s,{label:"排序"},{default:a(()=>[t(c,{classType:"tig-form-input",type:"integer",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"是否默认"},{default:a(()=>[t(D,{modelValue:o.value.defaultOn,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.defaultOn=l)},{default:a(()=>[t(S,{value:1},{default:a(()=>[...e[7]||(e[7]=[g("是",-1)])]),_:1}),t(S,{value:0},{default:a(()=>[...e[8]||(e[8]=[g("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),j(t(s,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[5]||(e[5]=l=>V())},{default:a(()=>[...e[9]||(e[9]=[g("提交",-1)])]),_:1},512)]),_:1},512),[[A,!i.isDialog]])]),_:1},8,["model"]))])])])}}});export{se as default};

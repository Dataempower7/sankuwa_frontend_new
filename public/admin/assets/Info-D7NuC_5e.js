import{d as U,r as m,b as P,ab as R,o as T,P as f,f as u,g as q,h as V,i as S,k as H,l as L,m as l,z as t,L as O,Q as i,j as A,O as j}from"./index-B52YIGC0.js";import{a as F,c as J}from"./pointsExchange-CgVYzn6B.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{S as M}from"./SelectProduct-C4WsEKWV.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./format-BxqOrW-w.js";import"./product-hE35r0Q_.js";import"./Pagination-C8J7-6Em.js";import"./SelectSku-ZXdrD9qH.js";/* empty css                                                                  */import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const z={class:"container"},Q={class:"content_wrapper"},G={class:"lyecs-form-table"},pe=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:w,emit:D}){const d=D,n=x,c=m(!0),g=P().currentRoute.value.query,v=m(n.isDialog?n.act:String(g.act)),b=m(n.isDialog?n.id:Number(g.id)),E=v.value==="add"?"create":"update",_=R(),o=m({productId:"",skuId:"",isEnabled:1,isHot:0});T(()=>{v.value==="detail"?N():c.value=!1});const N=async()=>{try{const a=await F(v.value,{id:b.value});a.productId&&(a.productId=[a.productId]),Object.assign(o.value,a)}catch(a){f.error(a.message),d("close")}finally{c.value=!1}},I=async()=>{await _.value.validate();try{d("update:confirmLoading",!0);let a=JSON.parse(JSON.stringify(o.value));if(a.productId)a.productId=a.productId[0];else{f.error("请选择商品!");return}const e=await J(E,{id:b.value,...a});d("submitCallback",e),f.success("操作成功")}catch(a){f.error(a.message)}finally{d("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{I()}}),(a,e)=>{const y=u("TigInput"),r=u("el-form-item"),p=u("el-radio"),k=u("el-radio-group"),C=u("el-button"),B=u("el-form");return V(),q("div",z,[S("div",Q,[S("div",G,[c.value?L("",!0):(V(),H(B,{key:0,ref_key:"formRef",ref:_,model:o.value,"label-width":"auto"},{default:l(()=>[t(r,{prop:"exchangeIntegral",label:"兑换积分",rules:[{required:!0,message:"兑换积分不能为空!"}]},{default:l(()=>[t(y,{classType:"tig-form-input",type:"integer",modelValue:o.value.exchangeIntegral,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.exchangeIntegral=s)},null,8,["modelValue"])]),_:1}),t(r,{prop:"pointsDeductedAmount",label:"减免金额",rules:[{required:!0,message:"减免金额不能为空!"}]},{default:l(()=>[t(y,{classType:"tig-form-input",type:"decimal",modelValue:o.value.pointsDeductedAmount,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.pointsDeductedAmount=s)},null,8,["modelValue"])]),_:1}),t(r,{prop:"isEnabled",label:"兑换"},{default:l(()=>[t(k,{modelValue:o.value.isEnabled,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.isEnabled=s)},{default:l(()=>[t(p,{value:1},{default:l(()=>[...e[6]||(e[6]=[i("是",-1)])]),_:1}),t(p,{value:0},{default:l(()=>[...e[7]||(e[7]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{prop:"isHot",label:"是否热销"},{default:l(()=>[t(k,{modelValue:o.value.isHot,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.isHot=s)},{default:l(()=>[t(p,{value:1},{default:l(()=>[...e[8]||(e[8]=[i("是",-1)])]),_:1}),t(p,{value:0},{default:l(()=>[...e[9]||(e[9]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{prop:"productId",label:"选择商品"},{default:l(()=>[t(A(M),{isSku:!0,isMultiple:!1,ids:o.value.productId,"onUpdate:ids":e[4]||(e[4]=s=>o.value.productId=s),skuId:o.value.skuId,"onUpdate:skuId":e[5]||(e[5]=s=>o.value.skuId=s),isSelf:1},null,8,["ids","skuId"])]),_:1}),O(t(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(C,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:I},{default:l(()=>[...e[10]||(e[10]=[i("提交",-1)])]),_:1},512)]),_:1},512),[[j,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{pe as default};

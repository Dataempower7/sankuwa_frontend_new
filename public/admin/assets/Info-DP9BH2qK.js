import{d as U,r as d,b as F,ab as L,o as M,f as s,g as h,h as w,i as c,z as o,k as j,l as P,m as a,L as z,j as V,Q as f,O as A,P as v}from"./index-B52YIGC0.js";import{F as E}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{a as G,b as O}from"./material-5oLPtTc4.js";import{_ as Q}from"./selectCategory.vue_vue_type_script_setup_true_lang-BAK7jiRQ.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import{S as $}from"./SelectProduct-C4WsEKWV.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */import"./category-C7a6pPpp.js";import"./time-EzYK4E-P.js";import"./product-hE35r0Q_.js";import"./Pagination-C8J7-6Em.js";import"./SelectSku-ZXdrD9qH.js";/* empty css                                                                  */const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},W={class:"lyecs-form-table"},ke=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:S,emit:T}){const u=T,n=k,p=d(!0),_=F().currentRoute.value.query,m=d(n.isDialog?n.act:String(_.act)),g=d(n.isDialog?n.id:Number(_.id)),x=m.value==="add"?"create":"update",y=L(),t=d({isTop:0,content:"",productId:[]}),B=async()=>{try{const l=await G(m.value,{id:g.value});t.value=l,t.value.productId=[l.productId]}catch(l){v.error(l.message),u("close")}finally{p.value=!1}};M(()=>{m.value==="detail"?B():p.value=!1});const b=async()=>{await y.value.validate();let l="";t.value.productId&&(l=t.value.productId.join(","));try{u("update:confirmLoading",!0);const e=await O(x,{id:g.value,...t.value,productId:l});u("submitCallback",e),v.success("操作成功")}catch(e){v.error(e.message)}finally{u("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{b()}}),(l,e)=>{const i=s("el-form-item"),C=s("TigInput"),I=s("el-radio"),q=s("el-radio-group"),N=s("el-button"),D=s("el-form"),R=s("a-spin");return w(),h("div",H,[c("div",J,[c("div",K,[c("div",W,[p.value?P("",!0):(w(),j(D,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{label:"素材图片",prop:"pics",rules:[{required:!0,message:"素材图片不能为空!"}]},{default:a(()=>[o(V(E),{photos:t.value.pics,"onUpdate:photos":e[0]||(e[0]=r=>t.value.pics=r),isMultiple:""},null,8,["photos"])]),_:1}),o(i,{label:"素材分类",prop:"categoryId",rules:[{required:!0,message:"请选择素材分类!"}]},{default:a(()=>[o(Q,{categoryId:t.value.categoryId,"onUpdate:categoryId":e[1]||(e[1]=r=>t.value.categoryId=r)},null,8,["categoryId"])]),_:1}),o(i,{rules:[{required:!0,message:"素材内容不能为空!"}],label:"素材内容",prop:"content"},{default:a(()=>[o(C,{classType:"tig-form-input",modelValue:t.value.content,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.content=r),rows:5,type:"textarea"},null,8,["modelValue"])]),_:1}),o(i,{label:"选择商品",prop:"productId",rules:[{required:!0,message:"请选择商品!"}]},{default:a(()=>[o(V($),{isMultiple:!1,ids:t.value.productId,"onUpdate:ids":e[3]||(e[3]=r=>t.value.productId=r)},null,8,["ids"])]),_:1}),o(i,{label:"是否置顶",prop:"isTop"},{default:a(()=>[o(q,{modelValue:t.value.isTop,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.isTop=r)},{default:a(()=>[o(I,{value:1},{default:a(()=>[...e[5]||(e[5]=[f("置顶",-1)])]),_:1}),o(I,{value:0},{default:a(()=>[...e[6]||(e[6]=[f("不置顶",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),z(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:a(()=>[...e[7]||(e[7]=[f("提交",-1)])]),_:1},512)]),_:1},512),[[A,!n.isDialog]])]),_:1},8,["model"]))]),o(R,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ke as default};

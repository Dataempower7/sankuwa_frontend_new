import{d as h,r as m,a as F,a2 as L,o as q,e as i,f as A,g as C,h as c,j as T,k as j,z as t,l,G,i as d,L as v,J as $,K as _}from"./index-BLXOA87U.js";import{F as z}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-DfcXXcrS.js";import"./index-DpgvsnVO.js";import"./vuedraggable.umd-OAFqtEpj.js";import{S as E}from"./SelectBrand-SbthwkIY.js";import{_ as S}from"./SelectCategory.vue_vue_type_script_setup_true_lang-CYLUeo0H.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as J}from"./SelectColor.vue_vue_type_script_setup_true_lang-BzXwVrRB.js";/* empty css             */import{a as K,c as P}from"./mobileCatNav-vF_ZprXi.js";import"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import"./format-DdZABYp4.js";import"./BusinessImg-C3Ug8bC9.js";import"./currencyManagement-ZKRxsK3T.js";import"./version-hjn5tnxG.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./brand-CrKtj3RC.js";import"./category-C1lvuGmx.js";import"./category-Bd8w-lZR.js";import"./time-DX2Q3n6c.js";const H={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},Ce=h({__name:"Info",props:{id:{type:Number,default:0},type:{type:Number,default:0},typeName:{type:String,default:""},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:N,emit:U}){const u=U,n=V,p=m(!0),g=F().currentRoute.value.query,f=m(n.isDialog?n.act:String(g.act)),b=m(n.isDialog?n.id:Number(g.id)),k=f.value==="add"?"create":"update",y=L(),o=m({brandIds:[],isShow:1,sortOrder:50}),x=async()=>{try{const r=await K(f.value,{id:b.value});r.brandIds==null&&(r.brandIds=[]),Object.assign(o.value,r),Array.isArray(o.value.imgUrl)||(o.value.imgUrl=[])}catch(r){_.error(r.message),u("close")}finally{p.value=!1}};q(()=>{f.value==="detail"?x():p.value=!1});const I=async()=>{await y.value.validate();try{u("update:confirmLoading",!0);const r=await P(k,{id:b.value,...o.value});u("submitCallback",r),_.success("操作成功")}catch(r){_.error(r.message)}finally{u("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{I()}}),(r,e)=>{const s=i("el-form-item"),B=i("TigInput"),w=i("el-radio"),D=i("el-radio-group"),M=i("el-button"),O=i("el-form"),R=i("a-spin");return C(),A("div",H,[c("div",Q,[c("div",W,[p.value?j("",!0):(C(),T(O,{key:0,ref_key:"formRef",ref:y,model:o.value,"label-width":"auto"},{default:l(()=>[t(s,{label:"选择分类",rules:[{required:!0,message:"名称不能为空!"}],prop:"categoryId"},{default:l(()=>[t(d(S),{categoryId:o.value.categoryId,"onUpdate:categoryId":e[0]||(e[0]=a=>o.value.categoryId=a)},null,8,["categoryId"])]),_:1}),t(s,{label:"分类颜色",prop:"catColor"},{default:l(()=>[t(d(J),{color:o.value.catColor,"onUpdate:color":e[1]||(e[1]=a=>o.value.catColor=a)},null,8,["color"])]),_:1}),t(s,{label:"分类banner",prop:"catColor"},{default:l(()=>[t(d(z),{photos:o.value.imgUrl,"onUpdate:photos":e[2]||(e[2]=a=>o.value.imgUrl=a),isMultiple:!0},null,8,["photos"]),e[7]||(e[7]=c("div",{class:"extra"},"提示：您可以通过拖拽来调整相册图片顺序，请统一上传比例为2:1的图片",-1))]),_:1,__:[7]}),t(s,{label:"推荐子分类",prop:"childCatIds"},{default:l(()=>[t(d(S),{categoryId:o.value.childCatIds,"onUpdate:categoryId":e[3]||(e[3]=a=>o.value.childCatIds=a),multiple:!0},null,8,["categoryId"])]),_:1}),t(s,{label:"推荐品牌",prop:"brandIds"},{default:l(()=>[t(d(E),{modelValue:o.value.brandIds,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.brandIds=a),modelModifiers:{brandIds:!0},style:{width:"192px"},multiple:""},null,8,["modelValue"])]),_:1}),t(s,{label:"排序",prop:"sortOrder"},{default:l(()=>[t(B,{type:"integer",width:"192px",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.sortOrder=a)},null,8,["modelValue"])]),_:1}),t(s,{label:"是否显示",prop:"isShow"},{default:l(()=>[t(D,{modelValue:o.value.isShow,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.isShow=a)},{default:l(()=>[t(w,{value:1},{default:l(()=>e[8]||(e[8]=[v("是",-1)])),_:1,__:[8]}),t(w,{value:0},{default:l(()=>e[9]||(e[9]=[v("否",-1)])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),G(t(s,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(M,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:I},{default:l(()=>e[10]||(e[10]=[v("提交",-1)])),_:1,__:[10]},512)]),_:1},512),[[$,!n.isDialog]])]),_:1},8,["model"])),t(R,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Ce as default};

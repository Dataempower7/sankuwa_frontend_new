import{d as U,r as f,b as W,ab as j,o as O,P as y,f as p,g as P,h as n,i as c,k as i,l as m,m as t,z as o,L as z,t as v,j as g,Q as k,O as A}from"./index-B52YIGC0.js";import{F as E}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./index-KjhYqCTY.js";import"./vuedraggable.umd-BauR0rTv.js";import{_ as G}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{p as M}from"./format-BxqOrW-w.js";import{S as h}from"./StatusDot-DuKP0Xmc.js";import{b as Q,d as $,u as H}from"./withdraw-Dbe_sKVk.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";/* empty css                                                                    */const J={class:"container"},K={class:"content_wrapper"},X={class:"lyecs-form-table"},pe=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:R,emit:C}){const _=C,d=x,V=f(!1),w=W().currentRoute.value.query,T=f(d.isDialog?d.act:String(w.act)),b=f(d.isDialog?d.id:Number(w.id));T.value;const D=j(),u=f({remark:""}),e=f({});O(()=>{B()});const B=async()=>{try{const s=await Q({id:b.value});Object.assign(e.value,s)}catch(s){y.error(s.message),_("close")}finally{V.value=!1}},N=async()=>{await D.value.validate();try{if(_("update:confirmLoading",!0),e.value.status==0){const s=await $({id:b.value,...u.value});y.success("操作成功")}if(e.value.status==4){let{paymentVoucher:s}=u.value;const a=await H({id:b.value,paymentVoucher:s});y.success(a.message)}_("submitCallback",!0)}catch(s){y.error(s.message)}finally{_("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{N()}}),(s,a)=>{const r=p("el-form-item"),S=p("el-radio"),q=p("el-radio-group"),F=p("TigInput"),L=p("el-button"),I=p("el-form");return n(),P("div",J,[c("div",K,[c("div",X,[V.value?m("",!0):(n(),i(I,{key:0,ref_key:"formRef",ref:D,model:u.value,"label-width":"auto"},{default:t(()=>[o(r,{prop:"addTime",label:"申请时间"},{default:t(()=>[c("p",null,v(e.value.addTime),1)]),_:1}),o(r,{prop:"amount",label:"申请金额"},{default:t(()=>[c("p",null,v(g(M)(e.value.amount)),1)]),_:1}),o(r,{prop:"accountData.accountName",label:"状态"},{default:t(()=>[e.value.status==0||e.value.status==4?(n(),i(h,{key:0,color:"blue",flicker:!0})):m("",!0),e.value.status==2?(n(),i(h,{key:1,color:"red",flicker:!0})):m("",!0),e.value.status==3?(n(),i(h,{key:2,color:"green",flicker:!0})):m("",!0),c("span",null,v(e.value.statusText),1)]),_:1}),o(r,{prop:"accountData.accountName",label:"收款人"},{default:t(()=>{var l;return[c("p",null,v((l=e.value.accountData)==null?void 0:l.accountName),1)]}),_:1}),o(r,{prop:"accountData.accountNo",label:"收款账号"},{default:t(()=>{var l;return[c("p",null,v((l=e.value.accountData)==null?void 0:l.accountNo),1)]}),_:1}),e.value.paymentVoucher&&e.value.paymentVoucher!==null?(n(),i(r,{key:0,prop:"paymentVoucher",label:"打款凭证"},{default:t(()=>[o(g(G),{src:e.value.paymentVoucher,fit:"contain",style:{height:"80px",width:"80px"}},null,8,["src"])]),_:1})):m("",!0),e.value.status==0?(n(),i(r,{key:1,prop:"status",label:"审核结果",rules:[{required:!0,message:"请选择审核结果!"}]},{default:t(()=>[o(q,{modelValue:u.value.status,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value.status=l)},{default:t(()=>[o(S,{value:4},{default:t(()=>[...a[3]||(a[3]=[k("审核通过",-1)])]),_:1}),o(S,{value:2},{default:t(()=>[...a[4]||(a[4]=[k("审核不通过",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):m("",!0),e.value.status==0&&u.value.status==2?(n(),i(r,{key:2,prop:"auditRemark",label:"拒绝原因",rules:[{required:!0,message:"拒绝原因不能为空!"}]},{default:t(()=>[o(F,{classType:"tig-form-input",type:"textarea",row:2,modelValue:u.value.auditRemark,"onUpdate:modelValue":a[1]||(a[1]=l=>u.value.auditRemark=l)},null,8,["modelValue"])]),_:1})):m("",!0),e.value.status==4?(n(),i(r,{key:3,prop:"paymentVoucher",label:"打款凭证",rules:[{required:!0,message:"打款凭证不能为空!"}]},{default:t(()=>[o(g(E),{photo:u.value.paymentVoucher,"onUpdate:photo":a[2]||(a[2]=l=>u.value.paymentVoucher=l)},null,8,["photo"])]),_:1})):m("",!0),z(o(r,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[o(L,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:N},{default:t(()=>[...a[5]||(a[5]=[k("提交",-1)])]),_:1},512)]),_:1},512),[[A,!d.isDialog]])]),_:1},8,["model"]))])])])}}});export{pe as default};

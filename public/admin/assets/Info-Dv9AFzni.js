import{d as Q,r as f,b as W,ab as J,o as X,P as U,f as m,g as b,h as i,i as v,l as x,k as c,z as l,m as a,L as Z,j as w,Q as s,F,p as h,t as I,a8 as ee,O as te,s as le,_ as ae}from"./index-B52YIGC0.js";import"./index-KjhYqCTY.js";import{F as L}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import"./vuedraggable.umd-BauR0rTv.js";import{a as oe,c as se}from"./comment-CXSD6xQv.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import{S as ne}from"./SelectProduct-C4WsEKWV.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css                                                                     *//* empty css             */import{_ as ue}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./format-BxqOrW-w.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";/* empty css                                                                    */import"./time-EzYK4E-P.js";import"./product-hE35r0Q_.js";import"./Pagination-C8J7-6Em.js";import"./SelectSku-ZXdrD9qH.js";/* empty css                                                                  */const de={class:"container"},ie={class:"content_wrapper"},re={class:"lyecs-form-table"},me={class:"flex flex-wrap"},pe={key:0,class:"container-card"},fe={class:"title"},ve={key:0},be={key:1},ce={style:{"text-align":"end","margin-top":"10px"}},ye=Q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},examine:{type:Number,default:0},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(n,{expose:P,emit:q}){const k=q,y=n,p=f(!0),S=W().currentRoute.value.query,V=f(y.isDialog?y.act:String(S.act)),_=f(y.isDialog?y.id:Number(S.id)),z=V.value==="add"?"create":"update",O=J(),t=f({commentRank:5,isRecommend:1,isTop:0,sortOrder:50,productIds:[],commentTag:[]}),g=f(""),C=f(!1),Y=f(),H=u=>{t.value.commentTag.splice(t.value.commentTag.indexOf(u),1)},$=()=>{C.value=!0,le(()=>{Y.value.input.focus()})},B=()=>{g.value&&t.value.commentTag.push(g.value),C.value=!1,g.value=""};X(()=>{V.value==="detail"?M():p.value=!1});const M=async()=>{try{const u=await oe(V.value,{id:_.value});let e=[];u.productId&&(e=[u.productId]),Object.assign(t.value,u,{productIds:e})}catch(u){U.error(u.message),k("close")}finally{p.value=!1}},j=()=>{M()},N=async()=>{await O.value.validate();try{k("update:confirmLoading",!0);let u=0;t.value.productIds.length>0&&(u=t.value.productIds[0]);const e=await se(z,{id:_.value,...t.value,productId:u});k("submitCallback",e),U.success("操作成功")}catch(u){U.error(u.message)}finally{k("update:confirmLoading",!1)}};return P({onFormSubmit:()=>{N()}}),(u,e)=>{const d=m("el-form-item"),T=m("TigInput"),r=m("el-radio"),R=m("el-radio-group"),E=m("el-tag"),D=m("el-button"),K=m("el-date-picker"),A=m("el-form"),G=m("a-spin");return i(),b("div",de,[v("div",ie,[v("div",re,[p.value?x("",!0):(i(),c(A,{key:0,ref_key:"formRef",ref:O,model:t.value,"label-width":"auto"},{default:a(()=>[l(d,{label:"评论商品",prop:"productIds"},{default:a(()=>[p.value?x("",!0):(i(),c(w(ne),{key:0,isMultiple:!1,ids:t.value.productIds,"onUpdate:ids":e[0]||(e[0]=o=>t.value.productIds=o),disabled:n.examine==1},null,8,["ids","disabled"]))]),_:1}),l(d,{rules:[{required:!0,message:"会员名称不能为空!"}],label:"会员名称",prop:"username"},{default:a(()=>[l(T,{classType:"tig-form-input",modelValue:t.value.username,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.username=o),disabled:n.examine==1},null,8,["modelValue","disabled"])]),_:1}),l(d,{label:"会员头像",prop:"avatar"},{default:a(()=>[l(w(L),{photo:t.value.avatar,"onUpdate:photo":e[2]||(e[2]=o=>t.value.avatar=o),disabled:n.examine==1},null,8,["photo","disabled"]),e[12]||(e[12]=v("div",{class:"extra"},"请统一上传比例为1:1的图片，宽100px，高100px（高清））",-1))]),_:1}),l(d,{label:"评论星级",prop:"commentRank"},{default:a(()=>[l(R,{modelValue:t.value.commentRank,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.commentRank=o),disabled:n.examine==1},{default:a(()=>[l(r,{value:1},{default:a(()=>[...e[13]||(e[13]=[s("一星",-1)])]),_:1}),l(r,{value:2},{default:a(()=>[...e[14]||(e[14]=[s("二星",-1)])]),_:1}),l(r,{value:3},{default:a(()=>[...e[15]||(e[15]=[s("三星",-1)])]),_:1}),l(r,{value:4},{default:a(()=>[...e[16]||(e[16]=[s("四星",-1)])]),_:1}),l(r,{value:5},{default:a(()=>[...e[17]||(e[17]=[s("五星",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),l(d,{label:"标签",prop:"commentTag"},{default:a(()=>[v("div",me,[(i(!0),b(F,null,h(t.value.commentTag,o=>(i(),c(E,{style:{margin:"5px"},key:o,closable:n.examine!=1,"disable-transitions":!1,onClose:xe=>H(o)},{default:a(()=>[s(I(o),1)]),_:2},1032,["closable","onClose"]))),128)),n.examine!=1?(i(),b(F,{key:0},[C.value?(i(),c(T,{key:0,classType:"tig-form-input",ref_key:"InputRef",ref:Y,modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o),class:"w-20",size:"small",onKeyup:ee(B,["enter"]),onBlur:B},null,8,["modelValue"])):(i(),c(D,{key:1,style:{margin:"5px"},class:"button-new-tag",size:"small",onClick:$},{default:a(()=>[...e[18]||(e[18]=[s(" + 新增标签 ",-1)])]),_:1}))],64)):x("",!0)])]),_:1}),l(d,{rules:[{required:!0,message:"评论内容不能为空!"}],label:"评论内容",prop:"content"},{default:a(()=>[l(T,{classType:"tig-form-input",modelValue:t.value.content,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.content=o),type:"textarea",disabled:n.examine==1},null,8,["modelValue","disabled"])]),_:1}),l(d,{label:"评论日期",prop:"addTime"},{default:a(()=>[l(K,{modelValue:t.value.addTime,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.addTime=o),format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择日期",disabled:n.examine==1,type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","disabled"])]),_:1}),l(d,{label:"晒单",prop:"showPics"},{default:a(()=>[p.value?x("",!0):(i(),c(w(L),{key:0,photos:t.value.showPics,"onUpdate:photos":e[7]||(e[7]=o=>t.value.showPics=o),isMultiple:!0,disabled:n.examine==1},null,8,["photos","disabled"]))]),_:1}),l(d,{label:"排序",prop:"sortOrder"},{default:a(()=>[l(T,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.sortOrder=o),disabled:n.examine==1},null,8,["modelValue","disabled"])]),_:1}),l(d,{label:"是否推荐",prop:"isRecommend"},{default:a(()=>[l(R,{modelValue:t.value.isRecommend,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.isRecommend=o),disabled:n.examine==1},{default:a(()=>[l(r,{value:1},{default:a(()=>[...e[19]||(e[19]=[s("是",-1)])]),_:1}),l(r,{value:0},{default:a(()=>[...e[20]||(e[20]=[s("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),l(d,{label:"是否置顶",prop:"isTop"},{default:a(()=>[l(R,{modelValue:t.value.isTop,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.isTop=o),disabled:n.examine==1},{default:a(()=>[l(r,{value:1},{default:a(()=>[...e[21]||(e[21]=[s("是",-1)])]),_:1}),l(r,{value:0},{default:a(()=>[...e[22]||(e[22]=[s("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),Z(l(d,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[l(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[11]||(e[11]=o=>N())},{default:a(()=>[...e[23]||(e[23]=[s("提交 ",-1)])]),_:1},512)]),_:1},512),[[te,!y.isDialog]])]),_:1},8,["model"])),l(G,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])]),!p.value&&V.value!=="add"?(i(),b("div",pe,[v("div",fe,[e[25]||(e[25]=s(" 管理员回复 ",-1)),l(w(ue),{params:{id:_.value},isDrawer:"",path:"product/comment/src/EditRemark",title:"回复评论",width:"600px",onOkCallback:j},{default:a(()=>[l(D,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:a(()=>[...e[24]||(e[24]=[s(" 回复评论 ",-1)])]),_:1})]),_:1},8,["params"])]),t.value.reply?(i(),b("div",be,[v("p",null,"内容："+I(t.value.reply.content),1),v("p",ce,I(t.value.reply.username)+"@"+I(t.value.reply.addTime),1)])):(i(),b("div",ve,"暂无回复！"))])):x("",!0)])])}}}),je=ae(ye,[["__scopeId","data-v-1c46947a"]]);export{je as default};

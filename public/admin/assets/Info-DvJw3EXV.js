import{d as T,M as L,r as p,a as U,a2 as q,o as j,e as s,f as F,g as c,h as V,j as C,k as h,z as o,l as a,G as M,i as z,L as f,J as A,K as _}from"./index-BLXOA87U.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import"./index-DpgvsnVO.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as E}from"./SelectShopProductCategory.vue_vue_type_script_setup_true_lang-DR-Kx43O.js";/* empty css             */import{e as G,f as J,u as K}from"./shopProductCategory-DXFRoBhC.js";import"./time-DX2Q3n6c.js";import"./index-B16C4gX_.js";const $={class:"container"},H={class:"content_wrapper"},Q={class:"lyecs-form-table"},ue=T({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:N,emit:x}){L();const d=x,n=k,u=p(!0),g=U().currentRoute.value.query,m=p(n.isDialog?n.act:String(g.act)),v=p(n.isDialog?n.id:Number(g.id)),y=m.value==="add"?"create":"update",b=q(),t=p({isShow:1,sortOrder:50}),B=async()=>{try{const r=await G(m.value,{id:v.value});Object.assign(t.value,r)}catch(r){_.error(r.message),d("close")}finally{u.value=!1}};j(()=>{m.value==="detail"?B():u.value=!1,y==="create"&&(t.value.parentId=n.parentId,console.log(t.value.parentId))});const S=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);const r=await J(y,{id:v.value,...t.value});d("submitCallback",r),_.success("操作成功"),K().clearShopProductCategory()}catch(r){_.error(r.message)}finally{d("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{S()}}),(r,e)=>{const w=s("TigInput"),i=s("el-form-item"),I=s("el-radio"),D=s("el-radio-group"),O=s("el-button"),P=s("el-form"),R=s("a-spin");return c(),F("div",$,[V("div",H,[V("div",Q,[u.value?h("",!0):(c(),C(P,{key:0,ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"categoryName"},{default:a(()=>[o(w,{classType:"tig-form-input",modelValue:t.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.categoryName=l)},null,8,["modelValue"])]),_:1}),o(i,{label:"上级分类",prop:"parentId"},{default:a(()=>[u.value?h("",!0):(c(),C(z(E),{key:0,categoryId:t.value.parentId,"onUpdate:categoryId":e[1]||(e[1]=l=>t.value.parentId=l),multiple:!1,style:{width:"100%"}},null,8,["categoryId"]))]),_:1}),o(i,{label:"排序",prop:"sortOrder"},{default:a(()=>[o(w,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),o(i,{label:"是否显示",prop:"isShow"},{default:a(()=>[o(D,{modelValue:t.value.isShow,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.isShow=l)},{default:a(()=>[o(I,{value:1},{default:a(()=>e[4]||(e[4]=[f("是",-1)])),_:1,__:[4]}),o(I,{value:0},{default:a(()=>e[5]||(e[5]=[f("否",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"])]),_:1}),M(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:S},{default:a(()=>e[6]||(e[6]=[f("提交 ",-1)])),_:1,__:[6]},512)]),_:1},512),[[A,!n.isDialog]])]),_:1},8,["model"])),o(R,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ue as default};

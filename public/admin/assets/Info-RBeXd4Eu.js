import{d as C,r as c,a as L,a2 as B,o as A,e as r,f as q,g as b,h as w,j as I,k as T,z as t,l,G as U,L as j,J as F,K as p}from"./index-BLXOA87U.js";import{a as z,c as E}from"./adminRole-Bge3DWzC.js";import G from"./AuthoritySelect-SX4Jcwru.js";const J={class:"container"},K={class:"content_wrapper"},M={class:"lyecs-form-table"},W=C({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:h,emit:k}){const i=k,s=V,u=c(!0),f=L().currentRoute.value.query,d=c(s.isDialog?s.act:String(f.act)),_=c(s.isDialog?s.id:Number(f.id)),N=d.value==="add"?"create":"update",v=B(),e=c({}),D=async()=>{try{const o=await z(d.value,{id:_.value});Object.assign(e.value,o)}catch(o){p.error(o.message),i("close")}finally{u.value=!1}};A(()=>{d.value==="detail"?D():u.value=!1});const g=async()=>{await v.value.validate();try{i("update:confirmLoading",!0);const o=await E(N,{id:_.value,...e.value});i("submitCallback",o),p.success("操作成功")}catch(o){p.error(o.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{g()}}),(o,a)=>{const y=r("TigInput"),m=r("el-form-item"),R=r("el-button"),S=r("el-form"),x=r("a-spin");return b(),q("div",J,[w("div",K,[w("div",M,[u.value?T("",!0):(b(),I(S,{key:0,ref_key:"formRef",ref:v,model:e.value,"label-width":"auto"},{default:l(()=>[t(m,{rules:[{required:!0,message:"权限组名称不能为空!"}],label:"权限组名称",prop:"roleName"},{default:l(()=>[t(y,{width:"100%",modelValue:e.value.roleName,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.roleName=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"权限组描述",prop:"roleDesc"},{default:l(()=>[t(y,{width:"100%",modelValue:e.value.roleDesc,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.roleDesc=n),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(m,{label:"",prop:"authorityList"},{default:l(()=>[t(G,{modelValue:e.value.authorityList,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.authorityList=n)},null,8,["modelValue"])]),_:1}),U(t(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:l(()=>a[3]||(a[3]=[j("提交",-1)])),_:1,__:[3]},512)]),_:1},512),[[F,!s.isDialog]])]),_:1},8,["model"])),t(x,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{W as default};

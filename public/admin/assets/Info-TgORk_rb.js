import{d as q,r as c,a as I,a2 as D,o as F,e as s,f as L,g as T,h as _,j,k as z,z as o,l as a,G as A,i as U,L as i,J as E,K as g}from"./index-BLXOA87U.js";import{F as J}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-DfcXXcrS.js";import"./index-DpgvsnVO.js";import"./vuedraggable.umd-OAFqtEpj.js";import{a as K,u as M}from"./userRank-A3-b0WNy.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as O}from"./SelectColor.vue_vue_type_script_setup_true_lang-BzXwVrRB.js";/* empty css             */import"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import"./format-DdZABYp4.js";import"./BusinessImg-C3Ug8bC9.js";import"./currencyManagement-ZKRxsK3T.js";import"./version-hjn5tnxG.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./time-DX2Q3n6c.js";const $={class:"container"},h={class:"content_wrapper"},H={class:"lyecs-form-table"},ve=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:P,emit:B}){const m=B,u=x,p=c(!0),y=I().currentRoute.value.query,v=c(u.isDialog?u.act:String(y.act)),b=c(u.isDialog?u.id:Number(y.id)),N=v.value==="add"?"create":"update",k=D(),t=c({showPrice:0,rankType:2}),G=async()=>{try{const n=await K(v.value,{id:b.value});Object.assign(t.value,n)}catch(n){g.error(n.message),m("close")}finally{p.value=!1}};F(()=>{v.value==="detail"?G():p.value=!1});const w=async()=>{await k.value.validate();try{m("update:confirmLoading",!0);const n=await M(N,{id:b.value,...t.value});m("submitCallback",n),g.success("操作成功")}catch(n){g.error(n.message)}finally{m("update:confirmLoading",!1)}};return P({onFormSubmit:()=>{w()}}),(n,e)=>{const d=s("TigInput"),r=s("el-form-item"),f=s("el-radio"),V=s("el-radio-group"),R=s("el-button"),C=s("el-form"),S=s("a-spin");return T(),L("div",$,[_("div",h,[_("div",H,[p.value?z("",!0):(T(),j(C,{key:0,ref_key:"formRef",ref:k,model:t.value,"label-width":"auto"},{default:a(()=>[o(r,{rules:[{required:!0,message:"等级名称不能为空!"}],label:"等级名称",prop:"rankName"},{default:a(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.rankName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.rankName=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"等级标志",prop:"rankIco"},{default:a(()=>[o(U(J),{photo:t.value.rankIco,"onUpdate:photo":e[1]||(e[1]=l=>t.value.rankIco=l)},null,8,["photo"]),e[8]||(e[8]=_("div",{class:"extra"},"请统一上传比例为1:1的图片（高清）",-1))]),_:1,__:[8]}),o(r,{rules:[{required:!0,message:"积分下限不能为空!"}],label:"积分下限",prop:"minGrowthPoints"},{default:a(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.minGrowthPoints,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.minGrowthPoints=l),type:"integer"},null,8,["modelValue"])]),_:1}),o(r,{rules:[{required:!0,message:"积分上限不能为空!"}],label:"积分上限",prop:"maxGrowthPoints"},{default:a(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.maxGrowthPoints,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.maxGrowthPoints=l),type:"integer"},null,8,["modelValue"])]),_:1}),o(r,{label:"是否显示价格",prop:"showPrice"},{default:a(()=>[o(V,{modelValue:t.value.showPrice,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.showPrice=l)},{default:a(()=>[o(f,{value:1},{default:a(()=>e[9]||(e[9]=[i("是",-1)])),_:1,__:[9]}),o(f,{value:0},{default:a(()=>e[10]||(e[10]=[i("否",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"等级类型",prop:"rankType"},{default:a(()=>[o(V,{modelValue:t.value.rankType,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.rankType=l),style:{width:"100%"}},{default:a(()=>[o(f,{value:1},{default:a(()=>e[11]||(e[11]=[i("根据成长值变化",-1)])),_:1,__:[11]}),o(f,{value:2},{default:a(()=>e[12]||(e[12]=[i("固定等级",-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])]),_:1}),o(r,{rules:[{required:!0,message:"初始折扣率不能为空!"}],label:"初始折扣率",prop:"discount"},{default:a(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.discount,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.discount=l),type:"decimal"},null,8,["modelValue"])]),_:1}),o(r,{label:"背景颜色",prop:"rankBg"},{default:a(()=>[o(U(O),{color:t.value.rankBg,"onUpdate:color":e[7]||(e[7]=l=>t.value.rankBg=l)},null,8,["color"])]),_:1}),A(o(r,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:a(()=>e[13]||(e[13]=[i("提交",-1)])),_:1,__:[13]},512)]),_:1},512),[[E,!u.isDialog]])]),_:1},8,["model"])),o(S,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ve as default};

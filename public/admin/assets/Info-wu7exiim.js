import{d as B,r as n,b as D,ab as R,o as T,P as p,f as u,g as L,h as y,i as w,k as q,l as I,m as l,z as o,L as F,Q as O,O as U}from"./index-B52YIGC0.js";import{a as j,u as z}from"./subgroup-BHqHMm_X.js";const E={class:"container"},G={class:"content_wrapper"},M={class:"lyecs-form-table"},H=B({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:"add"},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:k,emit:N}){const r=N,s=V,i=n(!0),f=D().currentRoute.value.query,c=n(s.isDialog?s.act:String(f.act)),b=n(s.isDialog?s.id:Number(f.id)),h=c.value==="add"?"create":"update",g=R(),t=n({});T(()=>{c.value==="detail"?C():i.value=!1});const C=async()=>{try{const e=await j(c.value,{id:b.value});Object.assign(t.value,e)}catch(e){p.error(e.message),r("close")}finally{i.value=!1}},_=async()=>{await g.value.validate();try{r("update:confirmLoading",!0);const e=await z(h,{id:b.value,...t.value});r("submitCallback",e),p.success("操作成功")}catch(e){p.error(e.message)}finally{r("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{_()}}),(e,a)=>{const v=u("TigInput"),m=u("el-form-item"),S=u("el-button"),x=u("el-form");return y(),L("div",E,[w("div",G,[w("div",M,[i.value?I("",!0):(y(),q(x,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:l(()=>[o(m,{prop:"groupName",label:"分组名称：",rules:[{required:!0,message:"分组名称不能为空!"}]},{default:l(()=>[o(v,{classType:"tig-form-input",modelValue:t.value.groupName,"onUpdate:modelValue":a[0]||(a[0]=d=>t.value.groupName=d),clearable:""},null,8,["modelValue"])]),_:1}),o(m,{prop:"describe",label:"分组描述："},{default:l(()=>[o(v,{classType:"tig-form-input",modelValue:t.value.describe,"onUpdate:modelValue":a[1]||(a[1]=d=>t.value.describe=d),rows:5,type:"textarea",placeholder:"请输入分组描述"},null,8,["modelValue"])]),_:1}),F(o(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(S,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:_},{default:l(()=>[...a[2]||(a[2]=[O("提交",-1)])]),_:1},512)]),_:1},512),[[U,!s.isDialog]])]),_:1},8,["model"]))])])])}}});export{H as default};

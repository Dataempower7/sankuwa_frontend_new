import{d as C,r as n,b as I,ab as V,o as B,P as d,f as m,g as N,h as b,i as y,k as D,l as q,m as i,z as a,L as E,j as U,Q as j,O as F}from"./index-B52YIGC0.js";import{b as O,u as z}from"./live-uCnADcgG.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  */import{S as G}from"./SelectGoodsRange-9RFRDbe8.js";/* empty css                                                                              *//* empty css                                                                     *//* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./SelectBrand-tHlymKqU.js";import"./brand-CyfpB5Ly.js";import"./SelectCategory.vue_vue_type_script_setup_true_lang-Bb2xH4oQ.js";import"./category-BhaHXalE.js";import"./category-D6KF81Ae.js";import"./SelectProduct-C4WsEKWV.js";import"./format-BxqOrW-w.js";import"./product-hE35r0Q_.js";import"./Pagination-C8J7-6Em.js";import"./SelectSku-ZXdrD9qH.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const M={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},ve=C({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:L,emit:R}){const l=R,r=w,u=n(!0),f=I().currentRoute.value.query,p=n(r.isDialog?r.act:String(f.act)),v=n(r.isDialog?r.id:Number(f.id)),S=p.value==="add"?"create":"update",g=V(),e=n({});B(()=>{p.value==="detail"?T():u.value=!1});const T=async()=>{try{const t=await O(p.value,{id:v.value});Object.assign(e.value,t)}catch(t){d.error(t.message),l("close")}finally{u.value=!1}},_=async()=>{await g.value.validate();try{l("update:confirmLoading",!0);const t=await z(S,{id:v.value,...e.value});l("submitCallback",t),d.success("操作成功")}catch(t){d.error(t.message)}finally{l("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{_()}}),(t,o)=>{const k=m("TigInput"),c=m("el-form-item"),h=m("el-button"),x=m("el-form");return b(),N("div",M,[y("div",P,[y("div",Q,[u.value?q("",!0):(b(),D(x,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:i(()=>[a(c,{prop:"wechatLiveTitle",label:"直播名称",rules:[{required:!0,message:"直播名称不能为空!"}]},{default:i(()=>[a(k,{classType:"tig-form-input",modelValue:e.value.wechatLiveTitle,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value.wechatLiveTitle=s)},null,8,["modelValue"])]),_:1}),a(c,{prop:"productId",label:"选择商品"},{default:i(()=>[a(U(G),{rangeIds:e.value.actRangeExt,"onUpdate:rangeIds":o[1]||(o[1]=s=>e.value.actRangeExt=s),rangeType:e.value.actRange,"onUpdate:rangeType":o[2]||(o[2]=s=>e.value.actRange=s),isSelf:1},null,8,["rangeIds","rangeType"])]),_:1}),E(a(c,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[a(h,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:_},{default:i(()=>[...o[3]||(o[3]=[j("提交",-1)])]),_:1},512)]),_:1},512),[[F,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{ve as default};

import{d as F,x as L,f as m,h as o,z as s,L as l,l as n,e as r,i as e,k as _,t as f,p as $,j as S,g as i}from"./index-BLXOA87U.js";/* empty css             */import"./index-DpgvsnVO.js";import{P as k}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-Bx-dDInM.js";import{_ as R}from"./Switch.vue_vue_type_script_setup_true_lang-D9gOYX51.js";import{D as j}from"./DeleteRecord-D6PcywRa.js";/* empty css                                                                    */import{P as E}from"./Pagination-w0YHSLYy.js";import{u as b,d as K,b as G,g as H}from"./coupon-DHqGiOxs.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as J}from"./SelectShop.vue_vue_type_script_setup_true_lang-DlIv1RgD.js";import{u as Q}from"./useListRequest-qe4Wn36b.js";import{_ as v}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./time-DX2Q3n6c.js";import"./shop-CAVes-5Z.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"bonus-wrap"},Z={class:"card-wrap"},ee={class:"card-wrap__container"},oe={class:"item-bg coupon-cards-item"},te={class:"item-bg coupon-cards-item"},ae={class:"item-bg coupon-cards-item item-bg2"},se={class:"item-bg coupon-cards-item item-bg2"},ne={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ie={class:"list-table-tool-row"},de={class:"simple-form-warp"},pe={key:0,class:"simple-form-field"},re={class:"form-group"},ue={class:"control-container"},ce={class:"simple-form-field"},me={class:"form-group"},_e={class:"control-container"},fe={class:"simple-form-field"},ge={class:"form-group"},be={key:0},ve={class:"table-container"},ke={style:{position:"relative"}},ye={key:0,class:"green"},he={key:1,class:"green"},Ce={key:1},Ie={class:"empty-warp"},Se={key:0,class:"empty-bg"},Ae={key:0,class:"pagination-con"},Ke=F({__name:"List",setup(Ue){const U=L(),{listData:D,loading:y,total:h,selectedIds:C,filterParams:d,loadData:u,onSearchSubmit:I,onSortChange:O,onSelectChange:V,onBatchAction:w}=Q({apiFunction:H,idKey:"couponId",defaultParams:{sortField:"",sortOrder:"",keyword:"",isShow:-1,shopId:0,page:1,size:U.get("pageSize")}}),x=async A=>{await w(A,G)};return u(),(A,a)=>{const g=r("el-button"),q=r("TigInput"),N=r("el-popconfirm"),T=r("el-space"),z=r("el-form"),c=r("el-table-column"),B=r("el-divider"),M=r("el-table"),P=r("a-spin");return i(),m("div",W,[o("div",X,[o("div",Y,[a[13]||(a[13]=o("p",{class:"subtitle"},"按使用场景快速创建",-1)),o("div",Z,[o("div",ee,[o("div",oe,[a[6]||(a[6]=o("div",null,[o("div",{class:"title"},"满减券"),o("div",{class:"desc"},[o("p",null,[l("例：满100元减20元"),o("br"),l("便于合理控制活动成本")])])],-1)),s(e(v),{isDrawer:"",onOkCallback:e(u),title:"添加满减券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",couponType:1}},{default:n(()=>[s(g,{type:"primary"},{default:n(()=>a[5]||(a[5]=[l("立即新建",-1)])),_:1,__:[5]})]),_:1},8,["onOkCallback"])]),o("div",te,[a[8]||(a[8]=o("div",null,[o("div",{class:"title"},"折扣券"),o("div",{class:"desc"},[o("p",null,[l("例：满100元打9折"),o("br"),l("提高店铺销量和客单价")])])],-1)),s(e(v),{isDrawer:"",onOkCallback:e(u),title:"添加折扣券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",couponType:2}},{default:n(()=>[s(g,{type:"primary"},{default:n(()=>a[7]||(a[7]=[l("立即新建",-1)])),_:1,__:[7]})]),_:1},8,["onOkCallback"])]),o("div",ae,[a[10]||(a[10]=o("div",null,[o("div",{class:"title"},"新人专享券"),o("div",{class:"desc"},[o("p",null,[l("仅店铺新客可领，提高新客"),o("br"),l("首单转化")])])],-1)),s(e(v),{isDrawer:"",onOkCallback:e(u),title:"添加新人专享券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",isNewUser:1}},{default:n(()=>[s(g,{type:"primary"},{default:n(()=>a[9]||(a[9]=[l("立即新建",-1)])),_:1,__:[9]})]),_:1},8,["onOkCallback"])]),o("div",se,[a[12]||(a[12]=o("div",null,[o("div",{class:"title"},"会员专享券"),o("div",{class:"desc"},[o("p",null,[l("限会员可领的优惠券，丰富会"),o("br"),l("员权益，凸显会员身份价值")])])],-1)),s(e(v),{isDrawer:"",onOkCallback:e(u),title:"添加会员专享券",width:"850px",path:"promotion/coupon/Info",params:{act:"add",isNewUser:2}},{default:n(()=>[s(g,{type:"primary"},{default:n(()=>a[11]||(a[11]=[l("立即新建",-1)])),_:1,__:[11]})]),_:1},8,["onOkCallback"])])])])]),o("div",ne,[o("div",le,[s(z,{model:e(d),onSubmit:$(e(I),["prevent"])},{default:n(()=>[o("div",ie,[o("div",de,[e(d).shopId==-1?(i(),m("div",pe,[o("div",re,[o("div",ue,[s(e(J),{shopId:e(d).shopId,"onUpdate:shopId":a[0]||(a[0]=t=>e(d).shopId=t)},null,8,["shopId"])])])])):_("",!0),o("div",ce,[o("div",me,[o("div",_e,[s(q,{modelValue:e(d).keyword,"onUpdate:modelValue":a[1]||(a[1]=t=>e(d).keyword=t),name:"keyword",placeholder:"输入优惠券名称",clearable:"",onClear:e(I)},{append:n(()=>[s(g,{onClick:e(I)},{default:n(()=>a[14]||(a[14]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[14]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),o("div",fe,[o("div",ge,[s(T,null,{default:n(()=>[s(N,{title:"您确认要批量删除所选数据吗？",onConfirm:a[2]||(a[2]=t=>x("del"))},{reference:n(()=>[s(g,{disabled:e(C).length===0},{default:n(()=>a[15]||(a[15]=[l("批量删除",-1)])),_:1,__:[15]},8,["disabled"])]),_:1}),e(C).length>0?(i(),m("span",be,[a[16]||(a[16]=l(" 已选择：",-1)),o("b",null,f(e(C).length),1),a[17]||(a[17]=l(" 项 ",-1))])):_("",!0)]),_:1})])])])])]),_:1},8,["model","onSubmit"])]),o("div",ve,[s(P,{spinning:e(y)},{default:n(()=>[s(M,{data:e(D),"row-key":"couponId",onSelectionChange:e(V),total:e(h),onSortChange:e(O),loading:e(y)},{empty:n(()=>[o("div",Ie,[e(y)?_("",!0):(i(),m("div",Se,"暂无数据"))])]),default:n(()=>[s(c,{type:"selection",width:"32"}),s(c,{label:"优惠券名称",prop:"couponId",width:200},{default:n(({row:t})=>[o("div",ke,[s(e(k),{label:"优惠券名称",type:"textarea",requestApi:e(b),"org-value":t.couponName,"onUpdate:orgValue":p=>t.couponName=p,params:{id:t.couponId,field:"couponName"}},{default:n(()=>[o("div",null,f(t.couponName),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),s(c,{label:"发放类型"},{default:n(({row:t})=>[l(f(t.couponType==1?"满减券":"折扣券")+" ",1),t.isNewUser==1?(i(),m("span",ye,"(新人专享)")):_("",!0),t.limitUserRank.length?(i(),m("span",he,"(会员专享)")):_("",!0)]),_:1}),s(c,{label:"优惠券金额(折扣)",prop:"couponMoney",sortable:"custom"},{default:n(({row:t})=>[t.couponType==1?(i(),S(e(k),{key:0,label:"优惠券金额",type:"decimal",requestApi:e(b),"org-value":t.couponMoney,"onUpdate:orgValue":p=>t.couponMoney=p,params:{id:t.couponId,field:"couponMoney"}},{default:n(()=>[o("div",null,f(t.couponMoney||"0"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):_("",!0),t.couponType==2?(i(),S(e(k),{key:1,label:"优惠券折扣",type:"decimal",requestApi:e(b),"org-value":t.couponDiscount,"onUpdate:orgValue":p=>t.couponDiscount=p,params:{id:t.couponId,field:"couponDiscount"}},{default:n(()=>[o("div",null,f(t.couponDiscount||"0")+"折",1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):_("",!0)]),_:1}),s(c,{label:"优惠门槛",prop:"minOrderAmount",sortable:"custom"},{default:n(({row:t})=>[t.reduceType==1?(i(),S(e(k),{key:0,label:"优惠门槛",type:t.couponUnit==1?"decimal":"integer",requestApi:e(b),"org-value":t.minOrderAmount,"onUpdate:orgValue":p=>t.minOrderAmount=p,params:{id:t.couponId,field:"minOrderAmount"}},{default:n(()=>[o("div",null,f(t.minOrderAmount||"0")+f(t.couponUnit==1?"元":"件"),1)]),_:2},1032,["type","requestApi","org-value","onUpdate:orgValue","params"])):(i(),m("div",Ce,"无门槛券"))]),_:1}),s(c,{label:"是否展示",prop:"isShow",sortable:"custom"},{default:n(({row:t})=>[s(e(R),{checked:t.isShow,"onUpdate:checked":p=>t.isShow=p,requestApi:e(b),params:{id:t.couponId,field:"isShow"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),s(c,{label:"活动时间",prop:"timeText"},{default:n(({row:t})=>[l(f(t.timeText),1)]),_:1}),s(c,{label:"操作",fixed:"right"},{default:n(({row:t})=>[s(e(v),{isDrawer:"",onOkCallback:e(u),title:"编辑优惠券",width:"800px",path:"promotion/coupon/Info",params:{act:"detail",id:t.couponId}},{default:n(()=>a[18]||(a[18]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[18]},1032,["onOkCallback","params"]),s(B,{direction:"vertical"}),s(e(j),{onAfterDelete:e(u),requestApi:e(K),params:{id:t.couponId}},{default:n(()=>a[19]||(a[19]=[l("删除",-1)])),_:2,__:[19]},1032,["onAfterDelete","requestApi","params"])]),_:1})]),_:1},8,["data","onSelectionChange","total","onSortChange","loading"])]),_:1},8,["spinning"]),e(h)>0?(i(),m("div",Ae,[s(e(E),{page:e(d).page,"onUpdate:page":a[3]||(a[3]=t=>e(d).page=t),size:e(d).size,"onUpdate:size":a[4]||(a[4]=t=>e(d).size=t),total:e(h),onCallback:e(u)},null,8,["page","size","total","onCallback"])])):_("",!0)])])])])}}});export{Ke as default};

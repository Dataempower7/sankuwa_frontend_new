import{d as K,x as q,r as B,f as p,g as h,h as C,i as e,l as k,z as s,m as l,j as t,a8 as L,Q as n,t as i,av as _,P as M}from"./index-B52YIGC0.js";/* empty css             */import{M as $}from"./MobileCard-qEvTFKQw.js";import"./index-KjhYqCTY.js";/* empty css                                                                    */import{P as j}from"./Pagination-C8J7-6Em.js";import{p as g}from"./format-BxqOrW-w.js";import{a as G,e as Q}from"./promoter-BycjLyU3.js";import{r as R}from"./export-Ds6vL4MA.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{_ as X,a as H}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-kIEw0znZ.js";import{u as J}from"./useListRequest-CprjeVXp.js";import{_ as W}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./time-EzYK4E-P.js";import"./subgroup-BHqHMm_X.js";import"./promoteMode-iKf0V1t6.js";const Y={class:"container"},Z={class:"content_wrapper"},tt={class:"lyecs-table-list-warp"},et={class:"list-table-tool lyecs-search-warp"},ot={class:"advanced-search-warp list-table-tool-row"},lt={class:"simple-form-warp"},st={class:"simple-form-field"},at={class:"form-group"},nt={class:"control-container"},it={class:"simple-form-field"},rt={class:"form-group"},dt={class:"control-container"},pt={class:"simple-form-field"},mt={class:"form-group"},ct={class:"control-container"},ft={class:"simple-form-warp"},ut={class:"simple-form-field"},_t={class:"control-container"},gt={class:"list-table-tool-row"},vt={class:"simple-form-warp"},bt={class:"simple-form-field"},ht={class:"table-container"},Ct={class:"flex flex-align-center"},xt={class:"flex flex-align-center"},wt={class:"flex flex-align-center"},yt={class:"flex flex-align-center"},It={class:"flex flex-align-center"},kt={class:"btn-link"},zt={class:"empty-warp"},Ut={key:0,class:"empty-bg"},St={key:0,class:"pagination-con"},Dt={key:0,class:"selected-action-warp selected-warp-left"},Et={class:"selected-action"},Yt=K({__name:"List",setup(Ot){const x=q(),{listData:D,loading:z,total:w,selectedIds:U,filterParams:r,loadData:y,onSearchSubmit:c,onSortChange:E,resetParams:O}=J({apiFunction:G,idKey:"articleId",defaultParams:{page:1,sortField:"",sortOrder:"",mobile:"",groupId:"",level:""}});y();const v=B(!1),V=async()=>{v.value=!0;try{const b=await Q({...r,isExport:"1",size:-1});v.value=!1,R(b,"分销员明细导出")}catch(b){M.error(b.message)}finally{v.value=!1}};return(b,o)=>{const N=p("TigInput"),I=p("el-button"),P=p("el-form"),d=p("el-table-column"),f=p("el-icon"),u=p("el-tooltip"),A=p("el-table"),F=p("a-spin"),T=p("el-space");return C(),h("div",Y,[e("div",Z,[e("div",tt,[e("div",et,[s(P,{model:t(r),name:"form"},{default:l(()=>[e("div",ot,[e("div",lt,[e("div",st,[e("div",at,[o[5]||(o[5]=e("label",{class:"control-label"},[e("span",null,"分销员：")],-1)),e("div",nt,[s(N,{modelValue:t(r).mobile,"onUpdate:modelValue":o[0]||(o[0]=a=>t(r).mobile=a),name:"mobile",placeholder:"请输入手机号",onKeyup:L(t(c),["enter"]),clearable:"",onClear:t(c)},null,8,["modelValue","onKeyup","onClear"])])])]),e("div",it,[e("div",rt,[o[6]||(o[6]=e("label",{class:"control-label"},[e("span",null,"分组：")],-1)),e("div",dt,[s(t(X),{groupId:t(r).groupId,"onUpdate:groupId":o[1]||(o[1]=a=>t(r).groupId=a),onOnChange:t(c)},null,8,["groupId","onOnChange"])])])]),e("div",pt,[e("div",mt,[o[7]||(o[7]=e("label",{class:"control-label"},[e("span",null,"等级：")],-1)),e("div",ct,[s(t(H),{level:t(r).level,"onUpdate:level":o[2]||(o[2]=a=>t(r).level=a),onOnChange:t(c)},null,8,["level","onOnChange"])])])]),e("div",ft,[e("div",ut,[o[10]||(o[10]=e("label",{class:"control-label"},null,-1)),e("div",_t,[s(I,{type:"primary",plain:"",onClick:t(c)},{default:l(()=>[...o[8]||(o[8]=[n("搜索",-1)])]),_:1},8,["onClick"]),s(I,{plain:"",onClick:t(O)},{default:l(()=>[...o[9]||(o[9]=[n("重置",-1)])]),_:1},8,["onClick"])])])])])]),e("div",gt,[e("div",vt,[e("div",bt,[s(I,{type:"primary",onClick:V,loading:v.value},{default:l(()=>[...o[11]||(o[11]=[n("导出EXCEL",-1)])]),_:1},8,["loading"])])])])]),_:1},8,["model"])]),e("div",ht,[s(F,{spinning:t(z)},{default:l(()=>[s(A,{data:t(D),total:t(w),"row-key":"productId",onSortChange:t(E)},{empty:l(()=>[e("div",zt,[t(z)?k("",!0):(C(),h("div",Ut,"暂无数据"))])]),default:l(()=>[s(d,{label:"手机号",prop:"productId",width:130,fixed:"left"},{default:l(({row:a})=>{var m;return[s($,{mobile:(m=a.baseUserInfo)==null?void 0:m.mobile},null,8,["mobile"])]}),_:1}),s(d,{label:"昵称",prop:"productId",width:150,fixed:"left"},{default:l(({row:a})=>{var m,S;return[n(i(((m=a.baseUserInfo)==null?void 0:m.nickname)||((S=a.baseUserInfo)==null?void 0:S.username)||"-"),1)]}),_:1}),s(d,{label:"等级",prop:"levelText",width:100},{default:l(({row:a})=>[n(i(a.levelText),1)]),_:1}),s(d,{label:"分组",prop:"groupInfo.groupName",width:100},{default:l(({row:a})=>{var m;return[n(i(((m=a.groupInfo)==null?void 0:m.groupName)||"-"),1)]}),_:1}),s(d,{prop:"productId",align:"left",width:"160"},{header:l(()=>[e("div",Ct,[e("p",null,"累计销售金额("+i(t(x).config.amountUnit)+")",1),s(u,{placement:"top",effect:"light"},{content:l(()=>[...o[12]||(o[12]=[n(" 累计业绩为实际有效业绩，剔除了退款金额。 ",-1)])]),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(t(g)(a.saleAmount)),1)]),_:1}),s(d,{prop:"productId",align:"left",width:"150"},{header:l(()=>[e("div",xt,[e("p",null,"支付金额("+i(t(x).config.amountUnit)+")",1),s(u,{placement:"top",effect:"light"},{content:l(()=>[...o[13]||(o[13]=[n(" 所选时间内，分销员客户的支付成功金额（含退款）。目前仅支持展示2023.11后的数据。 ",-1)])]),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(t(g)(a.payMoney)),1)]),_:1}),s(d,{prop:"refundAmount",align:"left",width:"160"},{header:l(()=>[e("div",wt,[e("p",null,"退款金额("+i(t(x).config.amountUnit)+")",1),s(u,{placement:"top",effect:"light"},{content:l(()=>[...o[14]||(o[14]=[n(" 所选时间内，分销员客户的全额退款和部分退款的退款成功金额。目前仅支持展示2023.11后的数据。 ",-1)])]),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(t(g)(a.refundAmount)),1)]),_:1}),s(d,{prop:"orderCount",width:140,align:"left"},{header:l(()=>[e("div",yt,[o[16]||(o[16]=e("p",null,"支付订单数",-1)),s(u,{placement:"top",effect:"light"},{content:l(()=>[...o[15]||(o[15]=[n(" 所选时间内，分销员客户的所有已支付的订单。目前仅支持展示2023.11后的数据。 ",-1)])]),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(a.orderCount),1)]),_:1}),s(d,{prop:"refundCount",width:140,align:"left"},{header:l(()=>[e("div",It,[o[18]||(o[18]=e("p",null,"退款订单数",-1)),s(u,{placement:"top",effect:"light"},{content:l(()=>[...o[17]||(o[17]=[n(" 所选时间内，分销员客户的全额退款和部分退款的订单总数。目前仅支持展示2023.11后的数据。 ",-1)])]),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(a.refundCount),1)]),_:1}),s(d,{label:"已结算收益",prop:"totalCommission",width:100},{default:l(({row:a})=>[n(i(t(g)(a.totalCommission)),1)]),_:1}),s(d,{label:"累计收益",prop:"totalAmountCommission",width:100},{default:l(({row:a})=>[s(t(W),{params:{act:"detail",id:a.salesmanId},isDrawer:!1,showFooter:!1,path:"salesman/salesmanDetailed/src/cumulativeGain",title:"佣金详情",width:"600px",onOkCallback:t(y)},{default:l(()=>[e("a",kt,i(t(g)(a.totalAmountCommission)),1)]),_:2},1032,["params","onOkCallback"])]),_:1}),s(d,{label:"累计客户数",prop:"totalCustomer",width:100},{default:l(({row:a})=>[n(i(a.totalCustomer),1)]),_:1})]),_:1},8,["data","total","onSortChange"])]),_:1},8,["spinning"]),t(w)>0?(C(),h("div",St,[s(t(j),{page:t(r).page,"onUpdate:page":o[3]||(o[3]=a=>t(r).page=a),size:t(r).size,"onUpdate:size":o[4]||(o[4]=a=>t(r).size=a),total:t(w),onCallback:t(y)},null,8,["page","size","total","onCallback"])])):k("",!0)]),t(U).length>0?(C(),h("div",Dt,[e("div",Et,[s(T,null,{default:l(()=>[e("span",null,[o[19]||(o[19]=n("已选择：",-1)),e("b",null,i(t(U).length),1),o[20]||(o[20]=n(" 项",-1))])]),_:1})])])):k("",!0)])])])}}});export{Yt as default};

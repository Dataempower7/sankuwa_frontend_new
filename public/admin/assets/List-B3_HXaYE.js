import{d as j,b as A,r as y,x as E,o as G,an as Q,f as r,g as p,h as d,i as a,l as m,z as s,m as n,j as e,a8 as H,Q as c,t as _,k as x,_ as J}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";/* empty css                                                                    */import{P as W}from"./Pagination-C8J7-6Em.js";import{p as w}from"./format-BxqOrW-w.js";import{_ as X}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{c as Y}from"./shop-CBisV8Of.js";import{a as Z}from"./dashboard-pwtwnvY5.js";import{S as T}from"./StatusDot-DuKP0Xmc.js";import{u as ee}from"./useListRequest-CprjeVXp.js";import{_ as te}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const oe={class:"container"},se={class:"content_wrapper"},ae={class:"container"},ne={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ie={class:"list-table-tool-row"},re={class:"simple-form-warp"},de={class:"simple-form-field"},ce={class:"form-group"},ue={class:"control-container"},pe={class:"simple-form-field"},me={class:"form-group"},_e={class:"table-container"},fe={key:2,style:{color:"red"}},ge={key:3,style:{color:"green"}},he={class:"empty-warp"},be={key:0,class:"empty-bg"},ve={key:0,class:"pagination-con"},ye={key:0,class:"selected-action-warp selected-warp-left"},we={class:"selected-action"},ke=j({__name:"List",setup(Ce){const f=A().currentRoute.value.query,V=y([{label:"全部",value:0,isShow:!0},{label:"在供",value:1,isShow:!0},{label:"断供",value:2,isShow:!0}]),z=E(),{listData:B,loading:g,total:h,selectedIds:k,filterParams:l,loadData:b,onSearchSubmit:v,onSortChange:I,onSelectChange:L,onBatchAction:O}=ee({apiFunction:Z,idKey:"shopId",defaultParams:{sortField:"",sortOrder:"",keyword:"",status:0,page:1,size:z.get("pageSize")}}),F=async u=>{await O(u,Y)};b();const N=u=>{l.status=u,l.page=1,b()},U=()=>{let u=window.location.href,o=new URL(u);o.search="",window.history.replaceState({},document.title,o.toString())},M=y(),C=y(0);return G(()=>{f.id&&Q.confirm(`为[${f.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{C.value=Number(f.id),M.value.show()}).catch(()=>{C.value=0,U()})}),(u,o)=>{const S=r("el-button"),D=r("TigInput"),P=r("TigTabs"),i=r("el-table-column"),K=r("el-table"),R=r("a-spin"),$=r("el-popconfirm"),q=r("el-space");return d(),p("div",oe,[a("div",se,[a("div",ae,[a("div",ne,[a("div",le,[a("div",ie,[a("div",re,[a("div",de,[a("div",ce,[a("div",ue,[s(D,{modelValue:e(l).keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).keyword=t),name:"username",placeholder:"输入供应商名称",onKeyup:H(e(v),["enter"]),clearable:"",onClear:e(v)},{append:n(()=>[s(S,{onClick:e(v)},{default:n(()=>[...o[5]||(o[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),a("div",pe,[a("div",me,[s(P,{modelValue:e(l).status,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).status=t),tabs:V.value,onOnTabChange:N},null,8,["modelValue","tabs"])])])])])]),a("div",_e,[s(R,{spinning:e(g)},{default:n(()=>[s(K,{data:e(B),loading:e(g),total:e(h),"row-key":"shopId",onSelectionChange:e(L),onSortChange:e(I)},{empty:n(()=>[a("div",he,[e(g)?m("",!0):(d(),p("div",be,"暂无数据"))])]),default:n(()=>[s(i,{label:"供应商名称"},{default:n(({row:t})=>[c(_(t.vendorName||"--"),1)]),_:1}),s(i,{label:"供应商LOGO"},{default:n(({row:t})=>[s(e(X),{src:t.vendorLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),s(i,{label:"供应商状态"},{default:n(({row:t})=>[t.status==2?(d(),x(T,{key:0,color:"red",flicker:!0})):m("",!0),t.status==1?(d(),x(T,{key:1,color:"green",flicker:!0})):m("",!0),t.status===2?(d(),p("span",fe,"断供")):t.status===1?(d(),p("span",ge,"在供")):m("",!0)]),_:1}),s(i,{label:"供应商资金",sortable:"custom"},{default:n(({row:t})=>[c(_(e(w)(t.vendorMoney)||0),1)]),_:1}),s(i,{label:"待结算金额",sortable:"custom"},{default:n(({row:t})=>[c(_(e(w)(t.unSettlementMoney)||0),1)]),_:1}),s(i,{label:"不可用资金",sortable:"custom"},{default:n(({row:t})=>[c(_(e(w)(t.frozenMoney)||0),1)]),_:1}),s(i,{label:"开店时间"},{default:n(({row:t})=>[c(_(t.addTime),1)]),_:1}),s(i,{width:120,fixed:"right",label:"操作"},{default:n(({row:t})=>[s(e(te),{params:{vendorId:t.vendorId},showClose:!1,showOnOk:!1,isDrawer:"",path:"vendor/adminFunds/financialLog/List",title:"资金日志",width:"800px"},{default:n(()=>[...o[6]||(o[6]=[a("a",{class:"btn-link"},"查看资金日志",-1)])]),_:1},8,["params"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(h)>0?(d(),p("div",ve,[s(e(W),{page:e(l).page,"onUpdate:page":o[2]||(o[2]=t=>e(l).page=t),size:e(l).size,"onUpdate:size":o[3]||(o[3]=t=>e(l).size=t),total:e(h),onCallback:e(b)},null,8,["page","size","total","onCallback"])])):m("",!0)]),e(k).length>0?(d(),p("div",ye,[a("div",we,[s(q,null,{default:n(()=>[a("span",null,[o[7]||(o[7]=c("已选择：",-1)),a("b",null,_(e(k).length),1),o[8]||(o[8]=c(" 项",-1))]),s($,{title:"您确认要批量删除所选数据吗？",onConfirm:o[4]||(o[4]=t=>F("del"))},{reference:n(()=>[s(S,null,{default:n(()=>[...o[9]||(o[9]=[c("批量删除",-1)])]),_:1})]),_:1})]),_:1})])])):m("",!0)])])])])}}}),De=J(ke,[["__scopeId","data-v-c41a0fe2"]]);export{De as default};

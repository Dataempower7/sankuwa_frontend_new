import{d as W,x as X,r as x,a as U,o as Y,f as m,h as o,j as u,k as d,i as e,l as n,z as s,e as r,a1 as Z,L as v,t as b,A as V,n as ee,g as l,_ as te}from"./index-BLXOA87U.js";/* empty css             */import"./index-DpgvsnVO.js";import{D as ae}from"./DeleteRecord-D6PcywRa.js";/* empty css                                                                    */import{P as oe}from"./Pagination-w0YHSLYy.js";import{i as se,r as ne}from"./format-DdZABYp4.js";import{d as le,b as ie,g as re}from"./adminUser-Dx0e6TZm.js";import{M as de}from"./MobileCard-SOyZaJkK.js";import"./Verify.vue_vue_type_style_index_0_lang-6inGDsc1.js";import"./zh-cn-DldQh89R.js";import{T as pe}from"./Tag-BG1Uisrp.js";import{i as me}from"./version-hjn5tnxG.js";import{u as ce}from"./useListRequest-qe4Wn36b.js";import{_ as N}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const ue={class:"container"},_e={class:"content_wrapper"},fe={class:"lyecs-table-list-warp"},ve={class:"list-table-tool lyecs-search-warp"},ge={class:"list-table-tool-row"},be={class:"simple-form-warp"},ye={class:"simple-form-field"},he={class:"form-group"},ke={class:"control-container"},Ce={key:0,class:"simple-form-field"},Se={class:"form-group"},Ie={class:"simple-form-field"},ze={class:"form-group"},De={key:0},xe={class:"table-container"},we={class:"avatar-username"},Ae={key:0},Te={key:0},Ue={key:1},Ve=["onClick"],Ne={class:"empty-warp"},Be={key:0,class:"empty-bg"},qe={key:0,class:"pagination-con"},Ke=W({__name:"List",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(B){const q=U(),K=X(),{listData:L,loading:y,total:h,selectedIds:k,filterParams:p,loadData:_,onSearchSubmit:C,onSortChange:O,onSelectChange:P,onBatchAction:F}=ce({apiFunction:re,idKey:"adminId",defaultParams:{page:1,size:K.get("pageSize"),sortField:"",sortOrder:"",keyword:"",adminUserType:"admin"}}),M=async c=>{await F(c,ie)},i=x("admin"),R=c=>{i.value=c,p.page=1,p.adminUserType=c,_()},$=c=>{q.push("/authority/admin_log/list?userId="+c)},g=B,w=U().currentRoute.value.query,S=x(g.isDialog?g.act:String(w.act)),I=x(g.isDialog?g.id:Number(w.id)||"");return Y(()=>{S.value&&(p.suppliersId=I.value),_()}),(c,a)=>{const A=r("el-tab-pane"),j=r("el-tabs"),z=r("el-button"),E=r("TigInput"),G=r("el-popconfirm"),H=r("el-space"),f=r("el-table-column"),D=r("el-avatar"),T=r("el-divider"),J=r("el-table"),Q=r("a-spin");return l(),m("div",ue,[o("div",_e,[e(me)()?(l(),u(j,{key:0,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:R},{default:n(()=>[s(A,{label:"管理员列表",name:"admin"}),s(A,{label:"店铺管理员列表",name:"shop"})]),_:1},8,["modelValue"])):d("",!0),o("div",fe,[o("div",ve,[o("div",ge,[o("div",be,[o("div",ye,[o("div",he,[o("div",ke,[s(E,{modelValue:e(p).keyword,"onUpdate:modelValue":a[1]||(a[1]=t=>e(p).keyword=t),name:"keyword",placeholder:i.value=="shop"?"输入员工名称":"输入管理员名称",onKeyup:Z(e(C),["enter"]),clearable:"",onClear:e(C)},{append:n(()=>[s(z,{onClick:e(C)},{default:n(()=>a[5]||(a[5]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","placeholder","onKeyup","onClear"])])])]),i.value!=="shop"?(l(),m("div",Ce,[o("div",Se,[s(e(N),{params:{act:"add",type:S.value?S.value:"",suppliersId:I.value?I.value:0,adminType:i.value},isDrawer:"",path:"authority/adminUser/Info",title:"添加管理员",width:"700px",onOkCallback:e(_)},{default:n(()=>[s(z,{type:"primary"},{default:n(()=>a[6]||(a[6]=[v("添加管理员",-1)])),_:1,__:[6]})]),_:1},8,["params","onOkCallback"])])])):d("",!0),o("div",Ie,[o("div",ze,[s(H,null,{default:n(()=>[s(G,{title:"您确认要批量删除所选数据吗？",onConfirm:a[2]||(a[2]=t=>M("del"))},{reference:n(()=>[s(z,{disabled:e(k).length===0},{default:n(()=>a[7]||(a[7]=[v("批量删除",-1)])),_:1,__:[7]},8,["disabled"])]),_:1}),e(k).length>0?(l(),m("span",De,[a[8]||(a[8]=v(" 已选择：",-1)),o("b",null,b(e(k).length),1),a[9]||(a[9]=v(" 项 ",-1))])):d("",!0)]),_:1})])])])])]),o("div",xe,[s(Q,{spinning:e(y)},{default:n(()=>[s(J,{data:e(L),loading:e(y),total:e(h),"row-key":"adminId",onSelectionChange:e(P),onSortChange:e(O)},{empty:n(()=>[o("div",Ne,[e(y)?d("",!0):(l(),m("div",Be,"暂无数据"))])]),default:n(()=>[s(f,{type:"selection",width:"32"}),s(f,{width:"200",label:i.value=="shop"?"员工名称":"管理员名称",prop:"username"},{default:n(({row:t})=>[o("div",we,[e(V)(String(t.avatar))=="one"?(l(),u(D,{key:0,size:30,src:e(se)(t.avatar)},null,8,["src"])):e(V)(String(t.avatar))=="def"?(l(),u(D,{key:1,size:30,src:e(ne)(t.avatar)},null,8,["src"])):(l(),u(D,{key:2,size:30,src:""})),o("div",null,[o("div",null,b(t.username),1),i.value=="shop"&&t.isAdmin==1?(l(),m("div",Ae,[s(e(pe),{transparent:!0,text:"店铺管理员"})])):d("",!0)])])]),_:1},8,["label"]),i.value!="shop"?(l(),u(f,{key:0,label:"权限组",prop:"roleName"},{default:n(({row:t})=>[o("span",{class:ee(t.roleName?"green":"gray")},b(t.roleName||"-"),3)]),_:1})):d("",!0),s(f,{label:"邮箱",prop:"email"},{default:n(({row:t})=>[o("span",null,b(t.email||"-"),1)]),_:1}),s(f,{label:"电话",prop:"mobile"},{default:n(({row:t})=>[t.mobile?(l(),m("span",Te,[s(de,{mobile:t.mobile},null,8,["mobile"])])):(l(),m("span",Ue,"--"))]),_:1}),s(f,{width:150,fixed:"right",label:"操作"},{default:n(({row:t})=>[s(e(N),{params:{act:"detail",id:t.adminId,adminType:i.value},isDrawer:"",path:"authority/adminUser/Info",title:i.value=="shop"?"编辑员工":"编辑管理员",width:"700px",onOkCallback:e(_)},{default:n(()=>a[10]||(a[10]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[10]},1032,["params","title","onOkCallback"]),o("template",null,[s(T,{direction:"vertical"}),i.value!="shop"?(l(),m("a",{key:0,class:"btn-link",onClick:Le=>$(t.adminId)},"日志",8,Ve)):d("",!0)]),t.adminId!=1?(l(),u(T,{key:0,direction:"vertical"})):d("",!0),t.adminId!=1?(l(),u(e(ae),{key:1,params:{id:t.adminId},requestApi:e(le),onAfterDelete:e(_)},{default:n(()=>a[11]||(a[11]=[v("删除 ",-1)])),_:2,__:[11]},1032,["params","requestApi","onAfterDelete"])):d("",!0)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(h)>0?(l(),m("div",qe,[s(e(oe),{page:e(p).page,"onUpdate:page":a[3]||(a[3]=t=>e(p).page=t),size:e(p).size,"onUpdate:size":a[4]||(a[4]=t=>e(p).size=t),total:e(h),onCallback:e(_)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}}),et=te(Ke,[["__scopeId","data-v-14347d0f"]]);export{et as default};

import{d as G,W as H,x as J,r as X,g as d,i as a,z as o,l as p,m as s,q as Y,j as e,f as r,h as l,Q as h,t as _,F as O,p as Z,k as ee,_ as te}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{P as V}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-CRFq-JzZ.js";import{_ as T}from"./Switch.vue_vue_type_script_setup_true_lang-D-71VfIC.js";import{D as oe}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as ae}from"./Pagination-C8J7-6Em.js";import{i as x,u as se}from"./format-BxqOrW-w.js";import{_ as A}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{g as ne,u as g,d as le,b as ie}from"./comment-CXSD6xQv.js";import{u as de}from"./useListRequest-CprjeVXp.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const re={class:"container"},ce={class:"content_wrapper"},me={key:0,class:"container"},pe={class:"lyecs-table-list-warp"},_e={class:"list-table-tool lyecs-search-warp"},ue={class:"list-table-tool-row"},fe={class:"simple-form-warp"},he={class:"simple-form-field"},be={class:"form-group"},ge={class:"control-container"},ke={key:0,class:"simple-form-field"},ve={class:"form-group"},ye={class:"simple-form-field"},Ce={class:"form-group"},we={key:0},Se={class:"table-container"},xe={class:"display-col"},Ae={key:0,class:"image avatar flex"},Ie={class:"text"},Oe={class:"display-col"},Ve={class:"image_comment"},Te={class:"text_comment multiline_hiding"},qe=["href"],Pe={class:"text_comment"},Ue={key:0,class:"image"},Re={key:1},De={class:"btn-link"},Fe={class:"empty-warp"},ze={key:0,class:"empty-bg"},Ne={key:0,class:"pagination-con"},Be=G({__name:"List",setup(Le){const u=H(),P=J(),{listData:U,loading:k,total:v,selectedIds:y,filterParams:c,loadData:f,onSearchSubmit:C,onSortChange:R,onSelectChange:D,onBatchAction:F}=de({apiFunction:ne,idKey:"commentId",defaultParams:{sortField:"",sortOrder:"",keyword:"",isShowed:-1,page:1,size:P.get("pageSize")}}),z=async b=>{await F(b,ie)};f();const w=X(-1),N=b=>{c.isShowed=b,c.page=1,f()};return(b,n)=>{const I=r("el-tab-pane"),B=r("el-tabs"),S=r("el-button"),L=r("TigInput"),$=r("el-popconfirm"),K=r("el-form"),i=r("el-table-column"),j=r("el-tooltip"),E=r("el-divider"),M=r("el-table"),Q=r("a-spin");return l(),d("div",re,[a("div",ce,[o(B,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=t=>w.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:N},{default:s(()=>[o(I,{name:-1,label:"全部评价"}),o(I,{name:1,label:"有晒单"})]),_:1},8,["modelValue"]),w.value!=null?(l(),d("div",me,[a("div",pe,[a("div",_e,[o(K,{model:e(c),onSubmit:Y(e(C),["prevent"])},{default:s(()=>[a("div",ue,[a("div",fe,[a("div",he,[a("div",be,[a("div",ge,[o(L,{modelValue:e(c).keyword,"onUpdate:modelValue":n[1]||(n[1]=t=>e(c).keyword=t),name:"keyword",placeholder:"请输入评价内容",clearable:"",onClear:e(C)},{append:s(()=>[o(S,{onClick:e(C)},{default:s(()=>[...n[5]||(n[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),e(u)==="admin"?(l(),d("div",ke,[a("div",ve,[o(e(q),{params:{act:"add"},isDrawer:"",path:"product/comment/Info",title:"添加用户评论",width:"600px",onOkCallback:e(f)},{default:s(()=>[o(S,{type:"primary"},{default:s(()=>[...n[6]||(n[6]=[h("添加用户评论",-1)])]),_:1})]),_:1},8,["onOkCallback"])])])):p("",!0),a("div",ye,[a("div",Ce,[o($,{title:"您确认要批量删除所选数据吗？",onConfirm:n[2]||(n[2]=t=>z("del"))},{reference:s(()=>[o(S,{disabled:e(y).length===0},{default:s(()=>[...n[7]||(n[7]=[h("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(y).length>0?(l(),d("span",we,[n[8]||(n[8]=h(" 已选择：",-1)),a("b",null,_(e(y).length),1),n[9]||(n[9]=h(" 项 ",-1))])):p("",!0)])])])])]),_:1},8,["model","onSubmit"])]),a("div",Se,[o(Q,{spinning:e(k)},{default:s(()=>[o(M,{data:e(U),loading:e(k),total:e(v),"row-key":"commentId",onSelectionChange:e(D),onSortChange:e(R)},{empty:s(()=>[a("div",Fe,[e(k)?p("",!0):(l(),d("div",ze,"暂无数据"))])]),default:s(()=>[o(i,{type:"selection",width:"32"}),o(i,{width:150,label:"用户名称",prop:"username",sortable:"custom"},{default:s(({row:t})=>[a("div",xe,[t.avatar?(l(),d("div",Ae,[o(e(A),{src:e(x)(t.avatar),class:"image-style",fit:"cover"},null,8,["src"])])):p("",!0),o(j,{class:"box-item",effect:"light",content:t.username,placement:"bottom"},{default:s(()=>[a("div",Ie,_(t.username),1)]),_:2},1032,["content"])])]),_:1}),o(i,{width:260,label:"评论对象"},{default:s(({row:t})=>[a("div",Oe,[a("div",Ve,[o(e(A),{src:e(x)(t.picThumb),class:"image-style shopPics",fit:"contain"},null,8,["src"])]),a("div",Te,[a("a",{href:e(se)({path:"product",sn:t.productSn}),target:"_blank"},_(t.productName),9,qe)])])]),_:1}),o(i,{width:260,label:"评价内容",prop:"content"},{default:s(({row:t})=>[a("div",Pe,_(t.content),1)]),_:1}),o(i,{width:250,label:"晒单",prop:"showPics"},{default:s(({row:t})=>[t.showPics?(l(),d("div",Ue,[t.showPics.length>0?(l(!0),d(O,{key:0},Z(t.showPics,(m,W)=>(l(),d(O,null,[W<4?(l(),ee(e(A),{key:0,class:"shopPics",src:e(x)(m.picThumb),width:"50",style:{},fit:"contain"},null,8,["src"])):p("",!0)],64))),256)):p("",!0)])):(l(),d("div",Re,"--"))]),_:1}),o(i,{label:"评论等级",prop:"commentRank",sortable:"custom",width:"100"},{default:s(({row:t})=>[o(e(V),{"org-value":t.commentRank,"onUpdate:orgValue":m=>t.commentRank=m,params:{id:t.commentId,field:"commentRank"},type:"integer",minNum:1,maxNum:5,requestApi:e(g),label:"评论等级"},{default:s(()=>[a("div",null,_(t.commentRank)+"星",1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(i,{label:"评论日期",prop:"addTime",sortable:"custom",width:"160"}),o(i,{label:"是否置顶",prop:"isTop",sortable:"custom",width:"100"},{default:s(({row:t})=>[o(e(T),{checked:t.isTop,"onUpdate:checked":m=>t.isTop=m,params:{id:t.commentId,field:"isTop"},requestApi:e(g)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(i,{label:"是否推荐",prop:"isRecommend",sortable:"custom",width:"100"},{default:s(({row:t})=>[o(e(T),{checked:t.isRecommend,"onUpdate:checked":m=>t.isRecommend=m,params:{id:t.commentId,field:"isRecommend"},requestApi:e(g)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(i,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:s(({row:t})=>[o(e(V),{"org-value":t.sortOrder,"onUpdate:orgValue":m=>t.sortOrder=m,params:{id:t.commentId,field:"sortOrder"},requestApi:e(g),type:"integer",label:"排序"},{default:s(()=>[a("div",null,_(t.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(i,{width:"100",fixed:"right",label:"操作"},{default:s(({row:t})=>[o(e(q),{params:{act:"detail",id:t.commentId,examine:e(u)==="admin"?0:1},isDrawer:"",showClose:e(u)==="admin",showOnOk:e(u)==="admin",path:"product/comment/Info",title:e(u)==="admin"?"编辑":"查看用户评论",width:"700px",onOkCallback:e(f)},{default:s(()=>[a("a",De,_(e(u)==="admin"?"编辑":"查看"),1)]),_:1},8,["params","showClose","showOnOk","title","onOkCallback"]),o(E,{direction:"vertical"}),o(e(oe),{params:{id:t.commentId},requestApi:e(le),onAfterDelete:e(f)},{default:s(()=>[...n[10]||(n[10]=[h("删除",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(v)>0?(l(),d("div",Ne,[o(e(ae),{page:e(c).page,"onUpdate:page":n[3]||(n[3]=t=>e(c).page=t),size:e(c).size,"onUpdate:size":n[4]||(n[4]=t=>e(c).size=t),total:e(v),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])):p("",!0)])])}}}),tt=te(Be,[["__scopeId","data-v-3e56cf86"]]);export{tt as default};

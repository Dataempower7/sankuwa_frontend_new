import{d as $,x as j,r as q,f as r,g as C,h as g,i as t,l as M,z as o,m as s,j as l,a8 as U,Q as i,t as _,k as A,aw as Y,_ as Q}from"./index-B52YIGC0.js";/* empty css             */import{M as R}from"./MobileCard-qEvTFKQw.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{p as W}from"./format-BxqOrW-w.js";/* empty css                                                                    */import{P as G}from"./Pagination-C8J7-6Em.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as H}from"./SelectTimeInterval-BUZ-hmxo.js";import{_ as J,a as X}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-kIEw0znZ.js";import{g as Z}from"./promoter-BycjLyU3.js";import{f as m}from"./time-EzYK4E-P.js";import{u as ee}from"./useListRequest-CprjeVXp.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./subgroup-BHqHMm_X.js";import"./promoteMode-iKf0V1t6.js";const le={class:"container"},te={class:"content_wrapper"},ae={class:"lyecs-table-list-warp"},oe={class:"list-table-tool lyecs-search-warp"},se={class:"advanced-search-warp list-table-tool-row"},ne={class:"simple-form-warp"},ie={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},me={class:"simple-form-field"},pe={class:"form-group"},ue={class:"flex flex-align-center"},fe={style:{"margin-left":"10px"}},_e={class:"simple-form-field"},be={class:"form-group"},ce={class:"control-container"},ge={class:"simple-form-field"},ve={class:"form-group"},ke={class:"control-container"},Ce={class:"simple-form-field"},Ye={class:"form-group"},De={class:"control-container"},we={class:"simple-form-warp"},ye={class:"simple-form-field"},Me={class:"control-container"},Ie={class:"list-table-tool-row"},Te={class:"simple-form-warp"},Se={class:"simple-form-field"},xe={class:"table-container"},Oe={class:"btn-link"},Ue={key:1},he={class:"empty-warp"},Ve={key:0,class:"empty-bg"},ze={key:0,class:"pagination-con"},Ee={key:0,class:"selected-action-warp selected-warp-left"},Ke={class:"selected-action"},Pe=$({__name:"List",setup(Le){const h=j(),{listData:V,loading:I,total:w,selectedIds:T,filterParams:n,loadData:b,onSearchSubmit:u,onSortChange:z,onSelectChange:E,resetParams:K}=ee({apiFunction:Z,idKey:"salesmanId",defaultParams:{page:1,size:h.get("pageSize"),sortField:"",sortOrder:"",mobile:"",pidMobile:"",level:"",groupId:"",addTimeStart:"",addTimeEnd:""}});b();const y=q(-1),S=f=>{if(f===-1){y.value=f;return}n.addTimeStart=m(new Date,"YYYY-MM-DD"),f===0&&(n.addTimeEnd=m(new Date,"YYYY-MM-DD")),f===1&&(n.addTimeStart=m(Y(1,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(Y(1,"sub"),"YYYY-MM-DD")),f===2&&(n.addTimeStart=m(Y(7,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(new Date,"YYYY-MM-DD")),f===3&&(n.addTimeStart=m(Y(30,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(new Date,"YYYY-MM-DD")),f===4&&(n.addTimeStart=m(Y(180,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(new Date,"YYYY-MM-DD")),b()};return(f,e)=>{const c=r("el-button"),x=r("TigInput"),v=r("el-radio-button"),P=r("el-radio-group"),L=r("el-form"),p=r("el-table-column"),N=r("el-divider"),O=r("el-space"),B=r("el-table"),F=r("a-spin");return g(),C("div",le,[t("div",te,[t("div",ae,[t("div",oe,[o(L,{model:l(n),name:"form"},{default:s(()=>[t("div",se,[t("div",ne,[t("div",ie,[t("div",de,[e[11]||(e[11]=t("label",{class:"control-label"},[t("span",null,"分销员：")],-1)),t("div",re,[o(x,{modelValue:l(n).mobile,"onUpdate:modelValue":e[0]||(e[0]=a=>l(n).mobile=a),name:"mobile",placeholder:"输入分销员手机号",onKeyup:U(l(u),["enter"]),clearable:"",onClear:l(u)},{append:s(()=>[o(c,{onClick:l(u)},{default:s(()=>[...e[10]||(e[10]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),t("div",me,[t("div",pe,[e[17]||(e[17]=t("label",{class:"control-label"},[t("span",null,"加入时间：")],-1)),t("div",ue,[o(l(H),{type:"date","start-date":l(n).addTimeStart,"onUpdate:startDate":e[1]||(e[1]=a=>l(n).addTimeStart=a),"end-date":l(n).addTimeEnd,"onUpdate:endDate":e[2]||(e[2]=a=>l(n).addTimeEnd=a),onCallback:e[3]||(e[3]=a=>S(-1))},null,8,["start-date","end-date"]),t("div",fe,[o(P,{class:"itemWidth",modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=a=>y.value=a),onChange:S},{default:s(()=>[o(v,{value:0},{default:s(()=>[...e[12]||(e[12]=[i("今天",-1)])]),_:1}),o(v,{value:1},{default:s(()=>[...e[13]||(e[13]=[i("昨天",-1)])]),_:1}),o(v,{value:2},{default:s(()=>[...e[14]||(e[14]=[i("近7天",-1)])]),_:1}),o(v,{value:3},{default:s(()=>[...e[15]||(e[15]=[i("近30天",-1)])]),_:1}),o(v,{value:4},{default:s(()=>[...e[16]||(e[16]=[i("近半年",-1)])]),_:1})]),_:1},8,["modelValue"])])])])]),t("div",_e,[t("div",be,[e[18]||(e[18]=t("label",{class:"control-label"},[t("span",null,"邀请方：")],-1)),t("div",ce,[o(x,{modelValue:l(n).pidMobile,"onUpdate:modelValue":e[5]||(e[5]=a=>l(n).pidMobile=a),name:"pidMobile",placeholder:"请输入手机号",onKeyup:U(l(u),["enter"]),clearable:"",onClear:l(u)},null,8,["modelValue","onKeyup","onClear"])])])]),t("div",ge,[t("div",ve,[e[19]||(e[19]=t("label",{class:"control-label"},[t("span",null,"分组：")],-1)),t("div",ke,[o(l(J),{groupId:l(n).groupId,"onUpdate:groupId":e[6]||(e[6]=a=>l(n).groupId=a),onOnChange:l(u)},null,8,["groupId","onOnChange"])])])]),t("div",Ce,[t("div",Ye,[e[20]||(e[20]=t("label",{class:"control-label"},[t("span",null,"等级：")],-1)),t("div",De,[o(l(X),{level:l(n).level,"onUpdate:level":e[7]||(e[7]=a=>l(n).level=a),onOnChange:l(u)},null,8,["level","onOnChange"])])])]),t("div",we,[t("div",ye,[e[23]||(e[23]=t("label",{class:"control-label"},null,-1)),t("div",Me,[o(c,{type:"primary",plain:"",onClick:l(u)},{default:s(()=>[...e[21]||(e[21]=[i("搜索",-1)])]),_:1},8,["onClick"]),o(c,{plain:"",onClick:l(K)},{default:s(()=>[...e[22]||(e[22]=[i("重置",-1)])]),_:1},8,["onClick"])])])])])]),t("div",Ie,[t("div",Te,[t("div",Se,[o(l(D),{params:{act:"add"},isDrawer:"",path:"salesman/promoter/Info",title:"添加分销员",width:"550px",onOkCallback:l(b)},{default:s(()=>[o(c,{type:"primary"},{default:s(()=>[...e[24]||(e[24]=[i("添加分销员",-1)])]),_:1})]),_:1},8,["onOkCallback"])])])])]),_:1},8,["model"])]),t("div",xe,[o(F,{spinning:l(I)},{default:s(()=>[o(B,{data:l(V),total:l(w),"row-key":"salesmanId",onSelectionChange:l(E),onSortChange:l(z)},{empty:s(()=>[t("div",he,[l(I)?M("",!0):(g(),C("div",Ve,"暂无数据"))])]),default:s(()=>[o(p,{label:"昵称",prop:"salesmanId",width:140,fixed:"left"},{default:s(({row:a})=>{var d,k;return[i(_(((d=a.baseUserInfo)==null?void 0:d.nickname)||((k=a.baseUserInfo)==null?void 0:k.username)),1)]}),_:1}),o(p,{label:"手机号",width:140,fixed:"left"},{default:s(({row:a})=>{var d;return[o(R,{mobile:(d=a.baseUserInfo)==null?void 0:d.mobile},null,8,["mobile"])]}),_:1}),o(p,{label:"等级"},{default:s(({row:a})=>[i(_(a.levelText||"--"),1)]),_:1}),o(p,{label:"分组"},{default:s(({row:a})=>{var d;return[i(_(((d=a.groupInfo)==null?void 0:d.groupName)||"--"),1)]}),_:1}),o(p,{label:"邀请方"},{default:s(({row:a})=>{var d,k;return[i(_(((k=(d=a.pidUserInfo)==null?void 0:d.baseUserInfo)==null?void 0:k.nickname)||"--"),1)]}),_:1}),o(p,{label:"累计客户数"},{default:s(({row:a})=>[a.totalCustomer?(g(),A(l(D),{key:0,showClose:!1,showOnOk:!1,maskClose:!1,params:{act:"detail",id:a.salesmanId},isDrawer:"",path:"salesman/promoter/UserList",title:"客户数量",width:"700px",onOkCallback:l(b)},{default:s(()=>[t("a",Oe,_(a.totalCustomer),1)]),_:2},1032,["params","onOkCallback"])):(g(),C("span",Ue," -- "))]),_:1}),o(p,{label:"累计销售额(元)",sortable:"custom",width:160},{default:s(({row:a})=>[i(_(l(W)(a.saleAmount)),1)]),_:1}),o(p,{label:"加入时间",sortable:"custom"},{default:s(({row:a})=>[i(_(a.addTime),1)]),_:1}),o(p,{width:120,fixed:"right",label:"操作"},{default:s(({row:a})=>[o(O,{size:0},{default:s(()=>[o(l(D),{maskClose:!1,showClose:!1,showOnOk:!1,params:{act:"detail",id:a.salesmanId},dialogClass:"noPadding",isDrawer:"",path:"salesman/promoter/Detail",title:"分销员详情",width:"900px",onOkCallback:l(b)},{default:s(()=>[...e[25]||(e[25]=[t("a",{class:"btn-link"},"详情",-1)])]),_:1},8,["params","onOkCallback"]),o(N,{direction:"vertical"}),o(l(D),{maskClose:!1,params:{act:"detail",id:a.salesmanId},isDrawer:"",path:"salesman/promoter/Info",title:"编辑分销员",width:"550px",onOkCallback:l(b)},{default:s(()=>[...e[26]||(e[26]=[t("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"])]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),l(w)>0?(g(),C("div",ze,[o(l(G),{page:l(n).page,"onUpdate:page":e[8]||(e[8]=a=>l(n).page=a),size:l(n).size,"onUpdate:size":e[9]||(e[9]=a=>l(n).size=a),total:l(w),onCallback:l(b)},null,8,["page","size","total","onCallback"])])):M("",!0)]),l(T).length>0?(g(),C("div",Ee,[t("div",Ke,[o(O,null,{default:s(()=>[t("span",null,[e[27]||(e[27]=i("已选择：",-1)),t("b",null,_(l(T).length),1),e[28]||(e[28]=i(" 项",-1))]),o(c,null,{default:s(()=>[...e[29]||(e[29]=[i("设置等级",-1)])]),_:1}),o(c,null,{default:s(()=>[...e[30]||(e[30]=[i("分组",-1)])]),_:1}),o(c,null,{default:s(()=>[...e[31]||(e[31]=[i("清退",-1)])]),_:1})]),_:1})])])):M("",!0)])])])}}}),sl=Q(Pe,[["__scopeId","data-v-4d1b66d9"]]);export{sl as default};

import{d as O,x as K,f as l,g as d,h as r,i as o,z as n,m as s,j as e,a8 as P,Q as m,l as _,t as u}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as R}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as U}from"./Pagination-C8J7-6Em.js";import{g as q,d as F,b as L}from"./appointmentTpl-DplhS7jl.js";import{u as $}from"./useListRequest-CprjeVXp.js";import{_ as h}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const j={class:"container"},E={class:"content_wrapper"},Q={class:"lyecs-table-list-warp"},G={class:"list-table-tool lyecs-search-warp"},H={class:"list-table-tool-row"},J={class:"simple-form-warp"},M={class:"simple-form-field"},W={class:"form-group"},X={class:"control-container"},Y={class:"simple-form-field"},Z={class:"form-group"},ee={class:"simple-form-field"},te={class:"form-group"},oe={key:0},ae={class:"table-container"},ne={key:0},se={key:1},le={class:"empty-warp"},ie={key:0,class:"empty-bg"},de={key:0,class:"pagination-con"},ke=O({__name:"List",setup(re){const C=K(),{listData:w,loading:f,total:g,selectedIds:v,filterParams:i,loadData:p,onSearchSubmit:b,onSortChange:S,onSelectChange:T,onBatchAction:D}=$({apiFunction:q,idKey:"reservationTplId",defaultParams:{sortField:"",sortOrder:"",keyword:"",page:1,size:C.get("pageSize")}}),x=async k=>{await D(k,L)};return p(),(k,t)=>{const y=l("el-button"),I=l("TigInput"),z=l("el-popconfirm"),V=l("el-space"),c=l("el-table-column"),N=l("el-divider"),A=l("el-table"),B=l("a-spin");return r(),d("div",j,[o("div",E,[o("div",Q,[o("div",G,[o("div",H,[o("div",J,[o("div",M,[o("div",W,[o("div",X,[n(I,{modelValue:e(i).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>e(i).keyword=a),name:"keyword",placeholder:"输入模板名称",onKeyup:P(e(b),["enter"]),clearable:"",onClear:e(b)},{append:s(()=>[n(y,{onClick:e(b)},{default:s(()=>[...t[4]||(t[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),o("div",Y,[o("div",Z,[n(e(h),{params:{act:"add"},isDrawer:"",path:"setting/appointmentTpl/Info",title:"添加预约模板",width:"900px",onOkCallback:e(p)},{default:s(()=>[n(y,{type:"primary"},{default:s(()=>[...t[5]||(t[5]=[m("添加预约模板",-1)])]),_:1})]),_:1},8,["onOkCallback"])])]),o("div",ee,[o("div",te,[n(V,null,{default:s(()=>[n(z,{title:"您确认要批量删除所选数据吗？",onConfirm:t[1]||(t[1]=a=>x("del"))},{reference:s(()=>[n(y,{disabled:e(v).length===0},{default:s(()=>[...t[6]||(t[6]=[m("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(v).length>0?(r(),d("span",oe,[t[7]||(t[7]=m(" 已选择：",-1)),o("b",null,u(e(v).length),1),t[8]||(t[8]=m(" 项 ",-1))])):_("",!0)]),_:1})])])])])]),o("div",ae,[n(B,{spinning:e(f)},{default:s(()=>[n(A,{data:e(w),loading:e(f),total:e(g),"row-key":"reservationTplId",onSelectionChange:e(T),onSortChange:e(S)},{empty:s(()=>[o("div",le,[e(f)?_("",!0):(r(),d("div",ie,"暂无数据"))])]),default:s(()=>[n(c,{type:"selection",width:"32"}),n(c,{label:"模板名称"},{default:s(({row:a})=>[o("div",null,u(a.templateName),1)]),_:1}),n(c,{label:"预约时间"},{default:s(({row:a})=>[a.reservationType?_("",!0):(r(),d("div",ne,"无需预约")),a.reservationType==1?(r(),d("div",se," 提前"+u(a.advanceNumber)+" "+u(a.advanceUnit=="d"?"天":"小时")+"预约 ",1)):_("",!0)]),_:1}),n(c,{label:"最长预约"},{default:s(({row:a})=>[o("div",null,"最长允许预约 "+u(a.maxDays)+"天内的订单",1)]),_:1}),n(c,{width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[n(e(h),{params:{act:"detail",id:a.reservationTplId},isDrawer:"",path:"setting/appointmentTpl/Info",title:"编辑预约模板",width:"900px",onOkCallback:e(p)},{default:s(()=>[...t[9]||(t[9]=[o("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"]),n(N,{direction:"vertical"}),n(e(R),{params:{id:a.reservationTplId},requestApi:e(F),onAfterDelete:e(p)},{default:s(()=>[...t[10]||(t[10]=[m("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(g)>0?(r(),d("div",de,[n(e(U),{page:e(i).page,"onUpdate:page":t[2]||(t[2]=a=>e(i).page=a),size:e(i).size,"onUpdate:size":t[3]||(t[3]=a=>e(i).size=a),total:e(g),onCallback:e(p)},null,8,["page","size","total","onCallback"])])):_("",!0)])])])])}}});export{ke as default};

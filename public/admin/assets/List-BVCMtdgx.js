import{d as M,W as $,x as j,r as k,v as Q,as as D,c as R,f as n,g,h as m,i as e,z as o,m as l,Q as d,j as r,a8 as W,F as I,p as H,k as x,l as v,t as h,ax as J,P as X,_ as Z}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as P}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as tt}from"./Pagination-C8J7-6Em.js";import{f as et,d as ot,g as lt}from"./groupon-BtcEMuW-.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as at}from"./SelectTimeInterval-BUZ-hmxo.js";import{_ as st}from"./Advertise.vue_vue_type_style_index_0_lang-BNjcxtXa.js";import{_ as b}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./time-EzYK4E-P.js";import"./export-Ds6vL4MA.js";import"./format-BxqOrW-w.js";const nt={class:"container"},it={class:"content_wrapper"},rt={class:"bonus-wrap"},dt={class:"card-wrap"},pt={class:"card-wrap__container"},ut={class:"item-bg coupon-cards-item"},mt={class:"item-bg coupon-cards-item"},ct={class:"lyecs-table-list-warp"},_t={class:"list-table-tool lyecs-search-warp"},ft={class:"advanced-search-warp list-table-tool-row"},gt={class:"simple-form-warp"},vt={class:"simple-form-field"},bt={class:"form-group"},yt={class:"control-container"},kt={class:"simple-form-field"},wt={class:"form-group"},Tt={class:"control-container"},Ct={class:"simple-form-field"},xt={class:"form-group"},ht={class:"simple-form-warp"},Dt={class:"simple-form-field"},It={class:"control-container"},Pt={class:"table-container"},St={class:"empty-warp"},zt={key:0,class:"empty-bg"},Nt={key:0,class:"pagination-con"},Ot=M({__name:"List",setup(Vt){$();const S=j();k(1);const f=k(!1),w=k([]),y=k(0);Q();const s=D({sortField:"",sortOrder:"",keyword:"",page:1,size:S.get("pageSize"),grouponName:"",endTime:"",startTime:"",status:""}),z=R(()=>!f.value&&!w.value.length),i=async()=>{f.value=!0;try{const c=await lt({...s});w.value=c.records,y.value=c.total}catch(c){X.error(c.message)}finally{f.value=!1}};i();const _=()=>{s.page=1,i()},N=()=>{s.keyword="",s.status="",s.grouponName="",s.endTime="",s.startTime="",s.page=1,s.sortField="",s.sortOrder="",i()},O=({prop:c,order:t})=>{s.sortField=c,s.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",i()},V=D([{value:1,label:"活动进行中"},{value:2,label:"活动已结束"},{value:3,label:"活动未开始"}]);return(c,t)=>{const p=n("el-button"),A=n("TigInput"),L=n("el-option"),U=n("el-select"),F=n("el-form"),u=n("el-table-column"),T=n("el-divider"),B=n("el-icon"),C=n("el-dropdown-item"),q=n("el-dropdown-menu"),Y=n("el-dropdown"),G=n("el-space"),E=n("el-table"),K=n("a-spin");return m(),g("div",nt,[e("div",it,[e("div",rt,[t[10]||(t[10]=e("p",{class:"subtitle"},"按使用场景快速创建",-1)),e("div",dt,[e("div",pt,[e("div",ut,[t[7]||(t[7]=e("div",null,[e("div",{class:"title"},"普通团"),e("div",{class:"desc"},[e("p",null,"用户下单开团后，邀请好友拼团，以优惠价格购买，提升店铺转化")])],-1)),o(r(b),{isDrawer:"",onOkCallback:i,title:"普通拼团创建",width:"800px",path:"promotion/groupon/Info",params:{act:"add",groupType:1},"body-style":{padding:"24px 19px 24px 11px"}},{default:l(()=>[o(p,{type:"primary"},{default:l(()=>[...t[6]||(t[6]=[d("立即创建",-1)])]),_:1})]),_:1})]),e("div",mt,[t[9]||(t[9]=e("div",null,[e("div",{class:"title"},"阶梯团"),e("div",{class:"desc"},[e("p",null,"成团人数越多价格越低，促进裂变转化")])],-1)),o(r(b),{isDrawer:"",onOkCallback:i,title:"阶梯拼团创建",width:"800px",path:"promotion/groupon/Info",params:{act:"add",groupType:2}},{default:l(()=>[o(p,{type:"primary"},{default:l(()=>[...t[8]||(t[8]=[d("立即创建",-1)])]),_:1})]),_:1})])])])]),e("div",ct,[e("div",_t,[o(F,{model:s,name:"form"},{default:l(()=>[e("div",ft,[e("div",gt,[e("div",vt,[e("div",bt,[t[12]||(t[12]=e("label",{class:"control-label"},[e("span",null,"活动名称：")],-1)),e("div",yt,[o(A,{modelValue:s.grouponName,"onUpdate:modelValue":t[0]||(t[0]=a=>s.grouponName=a),name:"grouponName",placeholder:"输入活动名称",onKeyup:W(_,["enter"]),clearable:"",onClear:_},{append:l(()=>[o(p,{onClick:_},{default:l(()=>[...t[11]||(t[11]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),e("div",kt,[e("div",wt,[t[13]||(t[13]=e("label",{class:"control-label"},[e("span",null,"活动状态：")],-1)),e("div",Tt,[o(U,{modelValue:s.status,"onUpdate:modelValue":t[1]||(t[1]=a=>s.status=a),clearable:"",onClear:_,onChange:_},{default:l(()=>[(m(!0),g(I,null,H(V,a=>(m(),x(L,{label:a.label,value:a.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),e("div",Ct,[e("div",xt,[t[14]||(t[14]=e("label",{class:"control-label"},[e("span",null,"活动时间：")],-1)),o(r(at),{"end-date":s.endTime,"onUpdate:endDate":t[2]||(t[2]=a=>s.endTime=a),"start-date":s.startTime,"onUpdate:startDate":t[3]||(t[3]=a=>s.startTime=a),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),e("div",ht,[e("div",Dt,[t[17]||(t[17]=e("label",{class:"control-label"},null,-1)),e("div",It,[o(p,{type:"primary",plain:"",onClick:_},{default:l(()=>[...t[15]||(t[15]=[d("搜索",-1)])]),_:1}),o(p,{plain:"",onClick:N},{default:l(()=>[...t[16]||(t[16]=[d("重置",-1)])]),_:1})])])])])])]),_:1},8,["model"])]),e("div",Pt,[o(K,{spinning:f.value},{default:l(()=>[o(E,{data:w.value,"row-key":"grouponId",total:y.value,onSortChange:O,loading:f.value},{empty:l(()=>[e("div",St,[z.value?(m(),g("div",zt,"暂无数据")):v("",!0)])]),default:l(()=>[o(u,{label:"活动名称",prop:"name",width:150}),o(u,{label:"活动时间",width:330},{default:l(({row:a})=>[d(h(a.startTime)+" 至 "+h(a.endTime),1)]),_:1}),o(u,{label:"拼团类型",align:"center"},{default:l(({row:a})=>[d(h(a.groupType==1?"普通团":a.groupType==2?"阶梯团":"--"),1)]),_:1}),o(u,{label:"应收金额",prop:"receiveAmount",align:"center"}),o(u,{label:"成团数",prop:"groupSuccessCount",align:"center"}),o(u,{label:"支付单数",prop:"payOrderCount",align:"center"}),o(u,{label:"活动状态",prop:"statusName"}),o(u,{width:280,label:"操作",fixed:"right"},{default:l(({row:a})=>[o(G,{size:0},{default:l(()=>[o(r(b),{params:{act:"detail",id:a.grouponPromotionId},isDrawer:"",onOkCallback:i,title:"编辑拼团活动",width:"900px",path:"promotion/groupon/Info"},{default:l(()=>[...t[18]||(t[18]=[e("a",{class:"btn-link"},"编辑活动",-1)])]),_:1},8,["params"]),o(T,{direction:"vertical"}),o(r(b),{isDrawer:"",title:"管理商品",width:"1012px",showOnOk:!1,path:"promotion/groupon/item/List",params:{act:"detail",grouponPromotionId:a.grouponPromotionId,groupType:a.groupType}},{default:l(()=>[...t[19]||(t[19]=[e("a",{class:"btn-link"},"管理商品",-1)])]),_:1},8,["params"]),a.status!==2?(m(),g(I,{key:0},[o(T,{direction:"vertical"}),o(st,{title:"推广",item:a,onCallBack:i},{default:l(()=>[...t[20]||(t[20]=[e("a",{class:"btn-link"},"投放",-1)])]),_:1},8,["item"])],64)):v("",!0),o(T,{direction:"vertical"}),o(Y,{trigger:"hover","hide-on-click":!1},{dropdown:l(()=>[o(q,null,{default:l(()=>[o(C,null,{default:l(()=>[o(r(b),{params:{id:a.grouponPromotionId,type:"shop"},"show-on-ok":!1,isDrawer:"",path:"promotion/groupon/record/List",title:"参与记录",width:"1200px",onOkCallback:i},{default:l(()=>[o(p,{style:{width:"100%"},link:"",type:"primary"},{default:l(()=>[...t[21]||(t[21]=[d("参与记录",-1)])]),_:1})]),_:1},8,["params"])]),_:2},1024),a.status!==2?(m(),x(r(P),{key:0,params:{id:a.grouponPromotionId},requestApi:r(et),title:"结束进行中的活动会影响粉丝正常购买，建议您提前告知或说明，确定要结束活动吗？",message:"停止活动成功！",onAfterDelete:i},{default:l(()=>[o(C,null,{default:l(()=>[o(p,{style:{width:"100%"},link:"",type:"primary"},{default:l(()=>[...t[22]||(t[22]=[d("立即结束",-1)])]),_:1})]),_:1})]),_:1},8,["params","requestApi"])):v("",!0),a.status===2?(m(),x(r(P),{key:1,params:{id:a.grouponPromotionId},requestApi:r(ot),title:"确认删除该活动？活动删除后，将不能恢复。",onAfterDelete:i},{default:l(()=>[o(C,null,{default:l(()=>[o(p,{style:{width:"100%"},link:"",type:"primary"},{default:l(()=>[...t[23]||(t[23]=[d("删除",-1)])]),_:1})]),_:1})]),_:1},8,["params","requestApi"])):v("",!0)]),_:2},1024)]),default:l(()=>[o(B,{class:"btn-link",size:"12"},{default:l(()=>[o(r(J))]),_:1})]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),y.value>0?(m(),g("div",Nt,[o(r(tt),{page:s.page,"onUpdate:page":t[4]||(t[4]=a=>s.page=a),size:s.size,"onUpdate:size":t[5]||(t[5]=a=>s.size=a),total:y.value,onCallback:i},null,8,["page","size","total"])])):v("",!0)])])])])}}}),Xt=Z(Ot,[["__scopeId","data-v-3907b842"]]);export{Xt as default};

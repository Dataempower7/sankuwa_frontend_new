import{d as $,x as j,r as q,f as C,h as t,k as I,z as o,l as s,e as r,i as l,a1 as U,L as i,t as _,j as A,ak as Y,g,_ as R}from"./index-BLXOA87U.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import"./index-DpgvsnVO.js";import{p as W}from"./format-DdZABYp4.js";/* empty css                                                                    */import{P as G}from"./Pagination-w0YHSLYy.js";/* empty css                                                                  *//* empty css                                                                              */import{S as H}from"./SelectTimeInterval-ah59IDPd.js";import{_ as J,a as Q}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-Bjrxr0tW.js";import{g as X}from"./promoter-CsD8c1kZ.js";import{f as m}from"./time-DX2Q3n6c.js";import{u as Z}from"./useListRequest-qe4Wn36b.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./subgroup-oUMrWUeM.js";import"./promoteMode-BWxoWwor.js";const ee={class:"container"},le={class:"content_wrapper"},te={class:"lyecs-table-list-warp"},ae={class:"list-table-tool lyecs-search-warp"},oe={class:"advanced-search-warp list-table-tool-row"},se={class:"simple-form-warp"},ne={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container"},re={class:"simple-form-field"},me={class:"form-group"},pe={class:"flex flex-align-center"},_e={style:{"margin-left":"10px"}},ue={class:"simple-form-field"},fe={class:"form-group"},be={class:"control-container"},ce={class:"simple-form-field"},ge={class:"form-group"},ve={class:"control-container"},ke={class:"simple-form-field"},Ce={class:"form-group"},Ye={class:"control-container"},De={class:"simple-form-warp"},we={class:"simple-form-field"},ye={class:"control-container"},Ie={class:"list-table-tool-row"},Me={class:"simple-form-warp"},Te={class:"simple-form-field"},Se={class:"table-container"},xe={class:"btn-link"},Oe={key:1},Ue={class:"empty-warp"},he={key:0,class:"empty-bg"},Ve={key:0,class:"pagination-con"},ze={key:0,class:"selected-action-warp selected-warp-left"},Ee={class:"selected-action"},Ke=$({__name:"List",setup(Le){const h=j(),{listData:V,loading:M,total:w,selectedIds:T,filterParams:n,loadData:b,onSearchSubmit:u,onSortChange:z,onSelectChange:E,resetParams:K}=Z({apiFunction:X,idKey:"salesmanId",defaultParams:{page:1,size:h.get("pageSize"),sortField:"",sortOrder:"",mobile:"",pidMobile:"",level:"",groupId:"",addTimeStart:"",addTimeEnd:""}});b();const y=q(-1),S=f=>{if(f===-1){y.value=f;return}n.addTimeStart=m(new Date,"YYYY-MM-DD"),f===0&&(n.addTimeEnd=m(new Date,"YYYY-MM-DD")),f===1&&(n.addTimeStart=m(Y(1,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(Y(1,"sub"),"YYYY-MM-DD")),f===2&&(n.addTimeStart=m(Y(7,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(new Date,"YYYY-MM-DD")),f===3&&(n.addTimeStart=m(Y(30,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(new Date,"YYYY-MM-DD")),f===4&&(n.addTimeStart=m(Y(180,"sub"),"YYYY-MM-DD"),n.addTimeEnd=m(new Date,"YYYY-MM-DD")),b()};return(f,e)=>{const c=r("el-button"),x=r("TigInput"),v=r("el-radio-button"),L=r("el-radio-group"),P=r("el-form"),p=r("el-table-column"),N=r("el-divider"),O=r("el-space"),B=r("el-table"),F=r("a-spin");return g(),C("div",ee,[t("div",le,[t("div",te,[t("div",ae,[o(P,{model:l(n),name:"form"},{default:s(()=>[t("div",oe,[t("div",se,[t("div",ne,[t("div",ie,[e[11]||(e[11]=t("label",{class:"control-label"},[t("span",null,"分销员：")],-1)),t("div",de,[o(x,{modelValue:l(n).mobile,"onUpdate:modelValue":e[0]||(e[0]=a=>l(n).mobile=a),name:"mobile",placeholder:"输入分销员手机号",onKeyup:U(l(u),["enter"]),clearable:"",onClear:l(u)},{append:s(()=>[o(c,{onClick:l(u)},{default:s(()=>e[10]||(e[10]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[10]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),t("div",re,[t("div",me,[e[17]||(e[17]=t("label",{class:"control-label"},[t("span",null,"加入时间：")],-1)),t("div",pe,[o(l(H),{type:"date","start-date":l(n).addTimeStart,"onUpdate:startDate":e[1]||(e[1]=a=>l(n).addTimeStart=a),"end-date":l(n).addTimeEnd,"onUpdate:endDate":e[2]||(e[2]=a=>l(n).addTimeEnd=a),onCallback:e[3]||(e[3]=a=>S(-1))},null,8,["start-date","end-date"]),t("div",_e,[o(L,{class:"itemWidth",modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=a=>y.value=a),onChange:S},{default:s(()=>[o(v,{value:0},{default:s(()=>e[12]||(e[12]=[i("今天",-1)])),_:1,__:[12]}),o(v,{value:1},{default:s(()=>e[13]||(e[13]=[i("昨天",-1)])),_:1,__:[13]}),o(v,{value:2},{default:s(()=>e[14]||(e[14]=[i("近7天",-1)])),_:1,__:[14]}),o(v,{value:3},{default:s(()=>e[15]||(e[15]=[i("近30天",-1)])),_:1,__:[15]}),o(v,{value:4},{default:s(()=>e[16]||(e[16]=[i("近半年",-1)])),_:1,__:[16]})]),_:1},8,["modelValue"])])])])]),t("div",ue,[t("div",fe,[e[18]||(e[18]=t("label",{class:"control-label"},[t("span",null,"邀请方：")],-1)),t("div",be,[o(x,{modelValue:l(n).pidMobile,"onUpdate:modelValue":e[5]||(e[5]=a=>l(n).pidMobile=a),name:"pidMobile",placeholder:"请输入手机号",onKeyup:U(l(u),["enter"]),clearable:"",onClear:l(u)},null,8,["modelValue","onKeyup","onClear"])])])]),t("div",ce,[t("div",ge,[e[19]||(e[19]=t("label",{class:"control-label"},[t("span",null,"分组：")],-1)),t("div",ve,[o(l(J),{groupId:l(n).groupId,"onUpdate:groupId":e[6]||(e[6]=a=>l(n).groupId=a),onOnChange:l(u)},null,8,["groupId","onOnChange"])])])]),t("div",ke,[t("div",Ce,[e[20]||(e[20]=t("label",{class:"control-label"},[t("span",null,"等级：")],-1)),t("div",Ye,[o(l(Q),{level:l(n).level,"onUpdate:level":e[7]||(e[7]=a=>l(n).level=a),onOnChange:l(u)},null,8,["level","onOnChange"])])])]),t("div",De,[t("div",we,[e[23]||(e[23]=t("label",{class:"control-label"},null,-1)),t("div",ye,[o(c,{type:"primary",plain:"",onClick:l(u)},{default:s(()=>e[21]||(e[21]=[i("搜索",-1)])),_:1,__:[21]},8,["onClick"]),o(c,{plain:"",onClick:l(K)},{default:s(()=>e[22]||(e[22]=[i("重置",-1)])),_:1,__:[22]},8,["onClick"])])])])])]),t("div",Ie,[t("div",Me,[t("div",Te,[o(l(D),{params:{act:"add"},isDrawer:"",path:"salesman/promoter/Info",title:"添加分销员",width:"550px",onOkCallback:l(b)},{default:s(()=>[o(c,{type:"primary"},{default:s(()=>e[24]||(e[24]=[i("添加分销员",-1)])),_:1,__:[24]})]),_:1},8,["onOkCallback"])])])])]),_:1},8,["model"])]),t("div",Se,[o(F,{spinning:l(M)},{default:s(()=>[o(B,{data:l(V),total:l(w),"row-key":"salesmanId",onSelectionChange:l(E),onSortChange:l(z)},{empty:s(()=>[t("div",Ue,[l(M)?I("",!0):(g(),C("div",he,"暂无数据"))])]),default:s(()=>[o(p,{label:"昵称",prop:"salesmanId",width:140,fixed:"left"},{default:s(({row:a})=>{var d,k;return[i(_(((d=a.baseUserInfo)==null?void 0:d.nickname)||((k=a.baseUserInfo)==null?void 0:k.username)),1)]}),_:1}),o(p,{label:"手机号",width:140,fixed:"left"},{default:s(({row:a})=>{var d;return[i(_(((d=a.baseUserInfo)==null?void 0:d.mobile)||"--"),1)]}),_:1}),o(p,{label:"等级"},{default:s(({row:a})=>[i(_(a.levelText||"--"),1)]),_:1}),o(p,{label:"分组"},{default:s(({row:a})=>{var d;return[i(_(((d=a.groupInfo)==null?void 0:d.groupName)||"--"),1)]}),_:1}),o(p,{label:"邀请方"},{default:s(({row:a})=>{var d,k;return[i(_(((k=(d=a.pidUserInfo)==null?void 0:d.baseUserInfo)==null?void 0:k.nickname)||"--"),1)]}),_:1}),o(p,{label:"累计客户数"},{default:s(({row:a})=>[a.totalCustomer?(g(),A(l(D),{key:0,showClose:!1,showOnOk:!1,maskClose:!1,params:{act:"detail",id:a.salesmanId},isDrawer:"",path:"salesman/promoter/UserList",title:"客户数量",width:"700px",onOkCallback:l(b)},{default:s(()=>[t("a",xe,_(a.totalCustomer),1)]),_:2},1032,["params","onOkCallback"])):(g(),C("span",Oe," -- "))]),_:1}),o(p,{label:"累计销售额(元)",sortable:"custom",width:160},{default:s(({row:a})=>[i(_(l(W)(a.saleAmount)),1)]),_:1}),o(p,{label:"加入时间",sortable:"custom"},{default:s(({row:a})=>[i(_(a.addTime),1)]),_:1}),o(p,{width:120,fixed:"right",label:"操作"},{default:s(({row:a})=>[o(O,{size:0},{default:s(()=>[o(l(D),{maskClose:!1,showClose:!1,showOnOk:!1,params:{act:"detail",id:a.salesmanId},dialogClass:"noPadding",isDrawer:"",path:"salesman/promoter/Detail",title:"分销员详情",width:"900px",onOkCallback:l(b)},{default:s(()=>e[25]||(e[25]=[t("a",{class:"btn-link"},"详情",-1)])),_:2,__:[25]},1032,["params","onOkCallback"]),o(N,{direction:"vertical"}),o(l(D),{maskClose:!1,params:{act:"detail",id:a.salesmanId},isDrawer:"",path:"salesman/promoter/Info",title:"编辑分销员",width:"550px",onOkCallback:l(b)},{default:s(()=>e[26]||(e[26]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[26]},1032,["params","onOkCallback"])]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),l(w)>0?(g(),C("div",Ve,[o(l(G),{page:l(n).page,"onUpdate:page":e[8]||(e[8]=a=>l(n).page=a),size:l(n).size,"onUpdate:size":e[9]||(e[9]=a=>l(n).size=a),total:l(w),onCallback:l(b)},null,8,["page","size","total","onCallback"])])):I("",!0)]),l(T).length>0?(g(),C("div",ze,[t("div",Ee,[o(O,null,{default:s(()=>[t("span",null,[e[27]||(e[27]=i("已选择：",-1)),t("b",null,_(l(T).length),1),e[28]||(e[28]=i(" 项",-1))]),o(c,null,{default:s(()=>e[29]||(e[29]=[i("设置等级",-1)])),_:1,__:[29]}),o(c,null,{default:s(()=>e[30]||(e[30]=[i("分组",-1)])),_:1,__:[30]}),o(c,null,{default:s(()=>e[31]||(e[31]=[i("清退",-1)])),_:1,__:[31]})]),_:1})])])):I("",!0)])])])}}}),tl=R(Ke,[["__scopeId","data-v-bb173e38"]]);export{tl as default};

import{d as oe,W as se,x as ne,r as N,c as de,g,i as l,l as d,j as e,z as o,m as s,a8 as P,P as B,f as u,h as n,A as T,Q as c,k as p,ae as ie,t as y,ac as re}from"./index-B52YIGC0.js";/* empty css             */import{i as pe}from"./format-BxqOrW-w.js";import{_ as ue}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./index-KjhYqCTY.js";import{P as D}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-CRFq-JzZ.js";import{_ as z}from"./Switch.vue_vue_type_script_setup_true_lang-D-71VfIC.js";import{D as me}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as ce}from"./Pagination-C8J7-6Em.js";import{g as be,a as fe,b as _e,u as I,d as ve,c as ge,e as ke}from"./brand-CyfpB5Ly.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as he}from"./SelectShop.vue_vue_type_script_setup_true_lang-DUXAAhbc.js";/* empty css                                                                     */import{u as ye}from"./useListRequest-CprjeVXp.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./time-EzYK4E-P.js";import"./shop-CBisV8Of.js";import"./bindShop-C4HDB3WM.js";const Ce={class:"container"},Ie={class:"content_wrapper"},Ve={class:"lyecs-table-list-warp"},Oe={key:0,class:"tabs-box"},Se={class:"list-table-tool lyecs-search-warp"},xe={class:"advanced-search-warp list-table-tool-row"},Ae={class:"simple-form-warp"},Ue={class:"simple-form-field"},we={class:"form-group"},qe={class:"control-container"},Be={key:0,class:"simple-form-field"},De={class:"form-group"},We={class:"control-container"},Fe={class:"simple-form-field"},Ne={class:"form-group"},Pe={class:"control-container"},Te={key:1,class:"simple-form-field"},ze={class:"form-group"},Ke={class:"control-container"},He={key:2,class:"simple-form-field"},Le={class:"form-group"},$e={class:"control-container"},Re={class:"simple-form-field"},je={class:"form-group"},Ee={class:"control-container"},Me={class:"simple-form-warp"},Qe={class:"simple-form-field"},Ge={class:"control-container"},Je={class:"list-table-tool-row"},Xe={class:"list-table-tool-col"},Ye={key:2},Ze={class:"table-container"},et={key:0,class:"span-product-brand"},tt={class:"span-tit"},at={class:"span-con green"},lt={key:1},ot={class:"empty-warp"},st={key:0,class:"empty-bg"},nt={key:0,class:"pagination-con"},wt=oe({__name:"List",setup(dt){const m=se(),K=ne(),i=N(1),x=N(0),H={1:_e,2:fe},L=de(()=>H[i.value]),{listData:$,loading:A,total:U,selectedIds:O,filterParams:r,loadData:f,onSearchSubmit:_,onSortChange:R,onSelectChange:j,onBatchAction:E,resetParams:M}=ye({apiFunction:L,idKey:"brandId",defaultParams:{page:1,isShow:"",brandIsHot:"",size:K.get("pageSize"),sortField:"",sortOrder:"",keyword:"",firstWord:"",shopId:"",status:m=="admin"?1:-1}}),Q=async b=>{await E(b,ge)};f();const G=b=>{i.value=b,r.page=1,b===2?r.status=0:r.status=m=="admin"?1:-1,f(),w()},w=async()=>{try{const b=await be();x.value=b}catch(b){B.error(b.message)}f()};w();const J=async()=>{try{const b=await ke();B.success("操作成功"),f()}catch(b){B.error(b.message)}};return(b,t)=>{const W=u("el-tab-pane"),X=u("el-badge"),Y=u("el-tabs"),C=u("el-button"),F=u("TigInput"),h=u("el-option"),q=u("el-select"),Z=u("router-link"),ee=u("el-popconfirm"),te=u("el-space"),v=u("el-table-column"),S=u("el-divider"),ae=u("el-table"),le=u("a-spin");return n(),g("div",Ce,[l("div",Ie,[l("div",Ve,[e(m)==="admin"&&e(T)()?(n(),g("div",Oe,[o(Y,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),"tab-position":"top",onTabChange:G},{default:s(()=>[o(W,{name:1,label:"品牌管理"}),o(W,{name:2},{label:s(()=>[o(X,{value:x.value,color:"#f33",offset:[5,-3],hidden:x.value===0},{default:s(()=>[...t[10]||(t[10]=[c(" 品牌审核 ",-1)])]),_:1},8,["value","hidden"])]),_:1})]),_:1},8,["modelValue"])])):d("",!0),l("div",Se,[l("div",xe,[l("div",Ae,[l("div",Ue,[l("div",we,[t[12]||(t[12]=l("label",{class:"control-label"},[l("span",null,"商品品牌：")],-1)),l("div",qe,[o(F,{modelValue:e(r).keyword,"onUpdate:modelValue":t[1]||(t[1]=a=>e(r).keyword=a),name:"keyword",placeholder:"输入品牌名称",onKeyup:P(e(_),["enter"]),clearable:"",onClear:e(_)},{append:s(()=>[o(C,{onClick:e(_)},{default:s(()=>[...t[11]||(t[11]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),e(m)!="shop"&&e(T)()?(n(),g("div",Be,[l("div",De,[t[13]||(t[13]=l("label",{class:"control-label"},[l("span",null,"店铺：")],-1)),l("div",We,[o(e(he),{shopId:e(r).shopId,"onUpdate:shopId":t[2]||(t[2]=a=>e(r).shopId=a),onOnChange:e(_)},null,8,["shopId","onOnChange"])])])])):d("",!0),l("div",Fe,[l("div",Ne,[t[14]||(t[14]=l("label",{class:"control-label"},[l("span",null,"是否显示：")],-1)),l("div",Pe,[o(q,{modelValue:e(r).isShow,"onUpdate:modelValue":t[3]||(t[3]=a=>e(r).isShow=a),clearable:"",onChange:e(_)},{default:s(()=>[o(h,{value:0,label:"不显示"}),o(h,{value:1,label:"显示"})]),_:1},8,["modelValue","onChange"])])])]),e(m)==="admin"?(n(),g("div",Te,[l("div",ze,[t[15]||(t[15]=l("label",{class:"control-label"},[l("span",null,"是否热门：")],-1)),l("div",Ke,[o(q,{modelValue:e(r).brandIsHot,"onUpdate:modelValue":t[4]||(t[4]=a=>e(r).brandIsHot=a),clearable:"",onChange:e(_)},{default:s(()=>[o(h,{value:0,label:"否"}),o(h,{value:1,label:"是"})]),_:1},8,["modelValue","onChange"])])])])):d("",!0),e(m)==="shop"||i.value===2?(n(),g("div",He,[l("div",Le,[t[16]||(t[16]=l("label",{class:"control-label"},[l("span",null,"审核状态：")],-1)),l("div",$e,[o(q,{modelValue:e(r).status,"onUpdate:modelValue":t[5]||(t[5]=a=>e(r).status=a),clearable:"",onChange:e(_)},{default:s(()=>[o(h,{value:-1,label:"请选择..."}),o(h,{value:0,label:"待审核"}),o(h,{value:1,label:"审核通过"}),o(h,{value:2,label:"审核拒绝"})]),_:1},8,["modelValue","onChange"])])])])):d("",!0),l("div",Re,[l("div",je,[t[17]||(t[17]=l("label",{class:"control-label"},[l("span",null,"首字母：")],-1)),l("div",Ee,[o(F,{modelValue:e(r).firstWord,"onUpdate:modelValue":t[6]||(t[6]=a=>e(r).firstWord=a),onKeyup:P(e(_),["enter"]),clearable:"",onClear:e(_)},null,8,["modelValue","onKeyup","onClear"])])])]),l("div",Me,[l("div",Qe,[t[20]||(t[20]=l("label",{class:"control-label"},null,-1)),l("div",Ge,[o(C,{type:"primary",plain:"",onClick:e(_)},{default:s(()=>[...t[18]||(t[18]=[c("搜索",-1)])]),_:1},8,["onClick"]),o(C,{plain:"",onClick:e(M)},{default:s(()=>[...t[19]||(t[19]=[c("重置",-1)])]),_:1},8,["onClick"])])])])])])]),l("div",Je,[l("div",Xe,[o(te,null,{default:s(()=>[i.value===1?(n(),p(e(V),{key:0,params:{act:"add"},isDrawer:"",path:"product/brand/Info",title:"添加品牌",width:"600px",onOkCallback:e(f)},{default:s(()=>[o(C,{type:"primary"},{default:s(()=>[...t[21]||(t[21]=[c("添加品牌",-1)])]),_:1})]),_:1},8,["onOkCallback"])):d("",!0),i.value===1&&e(ie)()&&e(m)==="admin"?(n(),p(Z,{key:1,to:{path:"/setting/translationContent/list",query:{type:"brand"}}},{default:s(()=>[o(C,null,{default:s(()=>[...t[22]||(t[22]=[c("批量翻译品牌名称",-1)])]),_:1})]),_:1})):d("",!0),o(ee,{title:"您确认要批量删除所选数据吗？",onConfirm:t[7]||(t[7]=a=>Q("del"))},{reference:s(()=>[o(C,{disabled:e(O).length===0},{default:s(()=>[...t[23]||(t[23]=[c("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),o(C,{loading:!1,disabled:e(O).length===0,onClick:J},{default:s(()=>[...t[24]||(t[24]=[c("批量更新品牌首字母 ",-1)])]),_:1},8,["disabled"]),e(O).length>0?(n(),g("span",Ye,[t[25]||(t[25]=c(" 已选择：",-1)),l("b",null,y(e(O).length),1),t[26]||(t[26]=c(" 项 ",-1))])):d("",!0)]),_:1})])]),l("div",Ze,[o(le,{spinning:e(A)},{default:s(()=>[o(ae,{data:e($),loading:e(A),total:e(U),"row-key":"brandId","show-overflow-tooltip":"",onSelectionChange:e(j),onSortChange:e(R)},{empty:s(()=>[l("div",ot,[e(A)?d("",!0):(n(),g("div",st,"暂无数据"))])]),default:s(()=>[o(v,{type:"selection",width:"32"}),o(v,{width:200,label:"品牌名称",prop:"brandId",sortable:"custom"},{default:s(({row:a})=>[o(e(D),{"org-value":a.brandName,"onUpdate:orgValue":k=>a.brandName=k,max:30,params:{id:a.brandId,field:"brandName"},requestApi:e(I),label:"品牌名称",type:"textarea"},{default:s(()=>[c(y(a.brandName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"]),a.shop?(n(),g("p",et,[l("span",tt,y(e(re)()===2?"门店":"店铺")+"：",1),l("span",at,y(a.shop.shopTitle),1)])):d("",!0)]),_:1}),o(v,{label:"品牌缩略图",width:"100"},{default:s(({row:a})=>[a.brandLogo?(n(),p(e(ue),{key:0,src:e(pe)(a.brandLogo),fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])):(n(),g("span",lt,"暂无图片"))]),_:1}),o(v,{label:"首字母"},{default:s(({row:a})=>[o(e(D),{"org-value":a.firstWord,"onUpdate:orgValue":k=>a.firstWord=k,len:1,params:{id:a.brandId,field:"firstWord"},requestApi:e(I),label:"首字母",type:"input"},{default:s(()=>[l("div",null,y(a.firstWord||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),e(m)==="admin"&&i.value===1?(n(),p(v,{key:0,label:"是否热销"},{default:s(({row:a})=>[o(e(z),{checked:a.brandIsHot,"onUpdate:checked":k=>a.brandIsHot=k,params:{id:a.brandId,field:"brandIsHot"},requestApi:e(I)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1})):d("",!0),o(v,{label:"是否显示",prop:"isShow",sortable:"custom"},{default:s(({row:a})=>[o(e(z),{checked:a.isShow,"onUpdate:checked":k=>a.isShow=k,params:{id:a.brandId,field:"isShow"},requestApi:e(I)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),e(m)==="shop"||i.value===2?(n(),p(v,{key:1,label:"审核状态",prop:"status"},{default:s(({row:a})=>[c(y(a.statusText),1)]),_:1})):d("",!0),e(m)==="shop"||i.value===2?(n(),p(v,{key:2,label:"审核备注",prop:"rejectRemark"},{default:s(({row:a})=>[c(y(a.rejectRemark||"-"),1)]),_:1})):d("",!0),e(m)==="admin"&&i.value===1?(n(),p(v,{key:3,label:"排序",prop:"sortOrder",sortable:"custom"},{default:s(({row:a})=>[o(e(D),{"org-value":a.sortOrder,"onUpdate:orgValue":k=>a.sortOrder=k,params:{id:a.brandId,field:"sortOrder"},requestApi:e(I),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"integer"},{default:s(()=>[l("div",null,y(a.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):d("",!0),o(v,{width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[i.value===1&&a.status!=0?(n(),p(e(V),{key:0,params:{act:"detail",id:a.brandId},isDrawer:"",path:"product/brand/Info",title:"编辑品牌",width:"600px",onOkCallback:e(f)},{default:s(()=>[...t[27]||(t[27]=[l("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"])):d("",!0),i.value===1&&a.status!=0?(n(),p(S,{key:1,direction:"vertical"})):d("",!0),e(m)==="shop"&&i.value===1&&a.status===0?(n(),p(e(V),{key:2,params:{act:"detail",id:a.brandId,examine:1},isDrawer:"",showClose:!1,showOnOk:!1,path:"product/brand/Info",title:"品牌详情",width:"600px",onOkCallback:e(f)},{default:s(()=>[...t[28]||(t[28]=[l("a",{class:"btn-link"},"详情",-1)])]),_:1},8,["params","onOkCallback"])):d("",!0),e(m)==="shop"&&i.value===1&&a.status===0?(n(),p(S,{key:3,direction:"vertical"})):d("",!0),i.value===2&&a.status!=0?(n(),p(e(V),{key:4,params:{act:"detail",id:a.brandId,examine:1},isDrawer:"",showClose:!1,showOnOk:!1,path:"product/brand/Info",title:"品牌详情",width:"600px",onOkCallback:e(f)},{default:s(()=>[...t[29]||(t[29]=[l("a",{class:"btn-link"},"详情",-1)])]),_:1},8,["params","onOkCallback"])):d("",!0),i.value===2&&a.status!=0?(n(),p(S,{key:5,direction:"vertical"})):d("",!0),i.value===2&&a.status===0?(n(),p(e(V),{key:6,dialogClass:"noPadding",params:{act:"detail",id:a.brandId},isDrawer:"",path:"product/brand/Examine",title:"品牌审核",width:"600px",onOkCallback:w},{default:s(()=>[...t[30]||(t[30]=[l("a",{class:"btn-link"},"去处理",-1)])]),_:1},8,["params"])):d("",!0),i.value===2&&a.status===0?(n(),p(S,{key:7,direction:"vertical"})):d("",!0),o(e(me),{params:{id:a.brandId},requestApi:e(ve),onAfterDelete:e(f)},{default:s(()=>[...t[31]||(t[31]=[c("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(U)>0?(n(),g("div",nt,[o(e(ce),{page:e(r).page,"onUpdate:page":t[8]||(t[8]=a=>e(r).page=a),size:e(r).size,"onUpdate:size":t[9]||(t[9]=a=>e(r).size=a),total:e(U),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}});export{wt as default};

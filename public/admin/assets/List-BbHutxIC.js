/* empty css             */import{d as ae,x as ne,r as F,o as ie,f as d,g as p,h as i,i as l,z as s,m as a,Q as h,j as o,F as I,p as O,k as y,aY as re,l as b,t as f,an as $,cu as N,f8 as M,P as T,_ as de}from"./index-B52YIGC0.js";/* empty css                                                                    */import{P as ue}from"./Pagination-C8J7-6Em.js";import{u as pe}from"./useListRequest-CprjeVXp.js";import{l as ce,m as me,n as _e,f as be,o as he,p as fe}from"./buyShow-GI1gwX70.js";import"./index-KjhYqCTY.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as ye}from"./SelectTimeInterval-BUZ-hmxo.js";import{P as we}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-CRFq-JzZ.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./time-EzYK4E-P.js";const ge={class:"lyecs-table-list-warp"},ve={class:"simple-form-field"},ke={class:"form-group"},Ce={class:"list-table-tool lyecs-search-warp"},Se={class:"advanced-search-warp list-table-tool-row"},xe={class:"simple-form-warp"},Ie={class:"simple-form-field"},Oe={class:"form-group"},Te={class:"control-container"},Be={class:"simple-form-field"},Le={class:"form-group"},Ve={class:"control-container"},De={class:"simple-form-field"},Ue={class:"form-group"},ze={class:"simple-form-field"},Pe={class:"form-group"},Fe={class:"control-container"},$e={class:"simple-form-warp"},Ne={class:"simple-form-field"},Me={class:"control-container"},Ye={class:"list-table-tool-row"},Ae={class:"list-table-tool-col"},Ge={key:0},He={class:"table-container"},qe={class:"contentBox"},Re={class:"contentImgs"},je=["src"],Ee={class:"imgBox"},Ke=["src"],Qe={class:"imgCount"},Je={class:"ml5 content",style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},We={class:"btn-link mr10"},Xe={key:1},Ze={class:"flex flex-align-center"},et={key:0},tt=["onClick"],ot=["onClick"],lt=["onClick"],st={class:"empty-warp"},at={key:0,class:"empty-bg"},nt={key:0,class:"pagination-con"},it=ae({__name:"List",setup(rt){const Y=ne(),{listData:A,loading:S,total:x,selectedIds:C,filterParams:r,loadData:c,onSearchSubmit:g,onSortChange:G,onSelectChange:H,onBatchAction:q,resetParams:R}=pe({apiFunction:ce,idKey:"buyerShowId",defaultParams:{page:1,size:Y.get("pageSize"),sortField:"",sortOrder:"",keyword:"",content:"",startTime:"",endTime:"",goodsId:"",status:""}}),B=async(n,e)=>{await q(n,_e,e)},j=F([{value:"",label:"全部状态"},{value:-1,label:"待审核"},{value:0,label:"隐藏"},{value:1,label:"公开"}]),L=F([]),E=async()=>{const n=await be({page:1,size:1e3});L.value=n.records||[]},K=async n=>{$.confirm(n.isShow==0?"隐藏后，该买家秀仅创建人自己可见":"公开后，该买家秀将变为公开状态，所有客户可见",{confirmButtonText:"确定",cancelButtonText:"取消",icon:N(M),customClass:"buyShowHide"}).then(async()=>{await he(n),T.success("操作成功"),c()}).catch(()=>{T.error("取消操作")})},V=async n=>{$.confirm(n.status==1?"通过后，该买家秀将变为公开状态，所有客户可见":"拒绝后，该买家秀将变为隐藏状态，所有客户不可见",{confirmButtonText:"确定",cancelButtonText:"取消",icon:N(M),customClass:"buyShowHide"}).then(async()=>{await fe(n),T.success("操作成功"),c()}).catch(()=>{})},Q=(n,e)=>n.status===0,D=n=>{var e,m,v,k;return((m=(e=n.videoList)==null?void 0:e[0])==null?void 0:m.videoCover)||((k=(v=n.imgList)==null?void 0:v[0])==null?void 0:k.picUrl)},U=n=>{var e;return(e=n.videoList)==null?void 0:e.concat(n.imgList||[]).map(m=>m.videoCover||m.picUrl).filter(Boolean)};return ie(()=>{E()}),c(),(n,e)=>{const m=d("el-button"),v=d("el-option"),k=d("el-select"),J=d("el-input"),z=d("el-popconfirm"),W=d("el-space"),X=d("el-form"),_=d("el-table-column"),Z=d("el-popover"),P=d("el-dropdown-item"),ee=d("el-dropdown-menu"),te=d("el-dropdown"),oe=d("el-table"),le=d("a-spin");return i(),p("div",ge,[l("div",ve,[l("div",ke,[s(o(w),{params:{act:"add"},isDrawer:"",delayed:2e4,path:"promotion/buyerShow/buyerShowListings/Info",title:"新建买家秀",width:"800px",onOkCallback:o(c)},{default:a(()=>[s(m,{type:"primary"},{default:a(()=>[...e[9]||(e[9]=[h("新建买家秀",-1)])]),_:1})]),_:1},8,["onOkCallback"])])]),l("div",Ce,[s(X,{model:o(r)},{default:a(()=>[l("div",Se,[l("div",xe,[l("div",Ie,[l("div",Oe,[e[10]||(e[10]=l("label",{class:"control-label",style:{width:"100px"}},[l("span",null,"买家秀状态：")],-1)),l("div",Te,[s(k,{"empty-values":[null,void 0],modelValue:o(r).status,"onUpdate:modelValue":e[0]||(e[0]=t=>o(r).status=t),clearable:"",onClear:o(g),onChange:o(g)},{default:a(()=>[(i(!0),p(I,null,O(j.value,(t,u)=>(i(),y(v,{key:u,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onClear","onChange"])])])]),l("div",Be,[l("div",Le,[e[11]||(e[11]=l("label",{class:"control-label",style:{width:"100px"}},[l("span",null,"买家秀分组：")],-1)),l("div",Ve,[s(k,{modelValue:o(r).goodsId,"onUpdate:modelValue":e[1]||(e[1]=t=>o(r).goodsId=t),clearable:"",onClear:o(g),onChange:o(g)},{default:a(()=>[(i(!0),p(I,null,O(L.value,(t,u)=>(i(),y(v,{key:u,value:t.buyerShowGroupId,label:t.groupName},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onClear","onChange"])])])]),l("div",De,[l("div",Ue,[e[12]||(e[12]=l("label",{class:"control-label",style:{width:"100px"}},[l("span",null,"下单时间：")],-1)),s(o(ye),{"end-date":o(r).endTime,"onUpdate:endDate":e[2]||(e[2]=t=>o(r).endTime=t),"start-date":o(r).startTime,"onUpdate:startDate":e[3]||(e[3]=t=>o(r).startTime=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),l("div",ze,[l("div",Pe,[e[13]||(e[13]=l("label",{class:"control-label",style:{width:"100px"}},[l("span",null,"买家秀内容：")],-1)),l("div",Fe,[s(J,{placeholder:"请输入买家秀内容",modelValue:o(r).keyword,"onUpdate:modelValue":e[4]||(e[4]=t=>o(r).keyword=t),style:{width:"240px"}},null,8,["modelValue"])])])]),l("div",$e,[l("div",Ne,[e[16]||(e[16]=l("label",{class:"control-label"},null,-1)),l("div",Me,[s(m,{type:"primary",plain:"",onClick:o(g)},{default:a(()=>[...e[14]||(e[14]=[h("搜索",-1)])]),_:1},8,["onClick"]),s(m,{plain:"",onClick:o(R)},{default:a(()=>[...e[15]||(e[15]=[h("重置",-1)])]),_:1},8,["onClick"])])])])])]),l("div",Ye,[l("div",Ae,[s(W,null,{default:a(()=>[re(n.$slots,"default",{},void 0,!0),s(z,{title:"您确认要批量通过所选数据吗？",onConfirm:e[5]||(e[5]=t=>B("audit",{value:1}))},{reference:a(()=>[s(m,{disabled:o(C).length===0},{default:a(()=>[...e[17]||(e[17]=[h("批量通过",-1)])]),_:1},8,["disabled"])]),_:1}),s(z,{title:"您确认要批量拒绝所选数据吗？",onConfirm:e[6]||(e[6]=t=>B("audit",{value:2}))},{reference:a(()=>[s(m,{disabled:o(C).length===0},{default:a(()=>[...e[18]||(e[18]=[h("批量拒绝",-1)])]),_:1},8,["disabled"])]),_:1}),o(C).length>0?(i(),p("span",Ge,[e[19]||(e[19]=h(" 已选择：",-1)),l("b",null,f(o(C).length),1),e[20]||(e[20]=h(" 项 ",-1))])):b("",!0)]),_:3})])])]),_:3},8,["model"])]),l("div",He,[s(le,{spinning:o(S)},{default:a(()=>[s(oe,{data:o(A),"row-key":"buyerShowId",onSelectionChange:o(H),total:o(x),onSortChange:o(G),loading:o(S)},{empty:a(()=>[l("div",st,[o(S)?b("",!0):(i(),p("div",at,"暂无数据"))])]),default:a(()=>[s(_,{type:"selection",width:"32",selectable:Q}),s(_,{label:"买家秀内容",prop:"content",width:"300","show-overflow-tooltip":"","class-name":"myTooltips"},{default:a(({row:t})=>[l("div",qe,[D(t)?(i(),y(Z,{key:0,class:"box-item",placement:"right",width:"auto"},{reference:a(()=>{var u;return[l("div",Ee,[l("img",{src:D(t),height:"50",width:"50"},null,8,Ke),l("div",Qe,"+"+f((u=U(t))==null?void 0:u.length),1)])]}),default:a(()=>[l("div",Re,[(i(!0),p(I,null,O(U(t),(u,se)=>(i(),p("img",{key:se,src:u,height:"80",width:"80"},null,8,je))),128))])]),_:2},1024)):b("",!0),l("p",Je,f(t.content),1)])]),_:1}),s(_,{label:"分组",prop:"groupList"}),s(_,{label:"商品数",prop:"productCount",width:"70"}),s(_,{label:"点赞数",prop:"likeCount",width:"70"}),s(_,{label:"评论数",prop:"commentCount",width:"70"},{default:a(({row:t})=>[t.commentCount?(i(),y(o(w),{key:0,params:{buyerShowId:t.buyerShowId},isDrawer:"",delayed:2e4,path:"promotion/buyerShow/buyerShowComments/commentManagementList",title:"相关评论",width:"900px",onOkCallback:o(c),onCloseCallback:o(c),showClose:!1,showOnOk:!1},{default:a(()=>[l("a",We,f(t.commentCount),1)]),_:2},1032,["params","onOkCallback","onCloseCallback"])):(i(),p("span",Xe,f(t.commentCount),1))]),_:1}),s(_,{label:"创建时间",prop:"addTime"}),s(_,{label:"发布人",prop:"buyerName"}),s(_,{label:"状态",prop:"statusText",width:"70"}),s(_,{label:"排序",prop:"sortOrder",sortable:"custom",width:"90"},{default:a(({row:t})=>[s(o(we),{label:"排序",type:"integer",requestApi:o(me),"org-value":t.sortOrder,"onUpdate:orgValue":u=>t.sortOrder=u,params:{id:t.buyerShowId,field:"sortOrder"},extra:"默认值为50，数值越小，排序越靠前"},{default:a(()=>[l("div",null,f(t.sortOrder),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),s(_,{label:"操作",fixed:"right",width:200},{default:a(({row:t})=>[l("div",Ze,[t.statusText==="待审核"?(i(),p("div",et,[l("a",{class:"btn-link mr10",onClick:u=>V({buyerShowId:t.buyerShowId,status:1})}," 通过 ",8,tt),t.statusText==="待审核"?(i(),p("a",{key:0,class:"btn-link mr10",onClick:u=>V({buyerShowId:t.buyerShowId,status:2})}," 拒绝 ",8,ot)):b("",!0)])):b("",!0),["公开","隐藏"].includes(t.statusText)?(i(),p("a",{key:1,class:"btn-link mr10",onClick:u=>K({buyerShowId:t.buyerShowId,isShow:t.statusText==="隐藏"?1:0})},f(t.statusText==="隐藏"?"公开":"隐藏"),9,lt)):b("",!0),s(o(w),{isDrawer:"",onOkCallback:o(c),title:"买家秀详情",width:"800px",path:"promotion/buyerShow/buyerShowListings/Info",params:{act:"detail",id:t.buyerShowId},showClose:!1,showOnOk:!1},{default:a(()=>[...e[21]||(e[21]=[l("a",{class:"btn-link mr10"},"查看详情",-1)])]),_:1},8,["onOkCallback","params"]),t.statusText==="隐藏"?(i(),y(o(w),{key:2,isDrawer:"",onOkCallback:o(c),title:"编辑买家秀",width:"800px",path:"promotion/buyerShow/buyerShowListings/Info",params:{act:"edit",id:t.buyerShowId}},{default:a(()=>[...e[22]||(e[22]=[l("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["onOkCallback","params"])):b("",!0),t.statusText==="公开"?(i(),y(te,{key:3},{dropdown:a(()=>[s(ee,null,{default:a(()=>[s(P,null,{default:a(()=>[s(o(w),{isDrawer:"",onOkCallback:o(c),title:"新建评论",width:"600px",path:"promotion/buyerShow/buyerShowListings/addComments",params:{act:"add",id:t.buyerShowId}},{default:a(()=>[...e[23]||(e[23]=[l("span",null,"评论",-1)])]),_:1},8,["onOkCallback","params"])]),_:2},1024),s(P,null,{default:a(()=>[s(o(w),{isDrawer:"",onOkCallback:o(c),title:"编辑买家秀",width:"800px",path:"promotion/buyerShow/buyerShowListings/Info",params:{act:"edit",id:t.buyerShowId}},{default:a(()=>[...e[24]||(e[24]=[l("span",null,"编辑",-1)])]),_:1},8,["onOkCallback","params"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[e[25]||(e[25]=l("span",{class:"btn-link"}," 更多 ",-1))]),_:2},1024)):b("",!0)])]),_:1})]),_:1},8,["data","onSelectionChange","total","onSortChange","loading"])]),_:1},8,["spinning"]),o(x)>0?(i(),p("div",nt,[s(o(ue),{page:o(r).page,"onUpdate:page":e[7]||(e[7]=t=>o(r).page=t),size:o(r).size,"onUpdate:size":e[8]||(e[8]=t=>o(r).size=t),total:o(x),onCallback:o(c)},null,8,["page","size","total","onCallback"])])):b("",!0)])])}}}),xt=de(it,[["__scopeId","data-v-e0b7a1fb"]]);export{xt as default};

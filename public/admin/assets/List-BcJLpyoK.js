import{d as q,x as G,Q as R,f as c,h as t,z as a,l as s,e as i,i as e,L as _,k as m,t as C,a1 as M,j as w,g as d,_ as $}from"./index-BLXOA87U.js";/* empty css             */import"./index-DpgvsnVO.js";import{_ as j}from"./Switch.vue_vue_type_script_setup_true_lang-D9gOYX51.js";/* empty css                                                                    */import{P as E}from"./Pagination-w0YHSLYy.js";import{i as x}from"./format-DdZABYp4.js";import{u as H,g as Q}from"./user-x3qW2Zo8.js";import"./Verify.vue_vue_type_style_index_0_lang-6inGDsc1.js";import"./zh-cn-DldQh89R.js";import{T as J}from"./Tag-BG1Uisrp.js";import{M as W}from"./MobileCard-SOyZaJkK.js";import{U as X}from"./UserCard-BfIXCUcK.js";import{u as Y}from"./useListRequest-qe4Wn36b.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const Z={class:"container"},ee={class:"content_wrapper"},te={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},oe={class:"advanced-search-warp list-table-tool-row"},ae={class:"simple-form-warp"},se={class:"simple-form-field"},ne={class:"form-group"},ie={class:"control-container"},re={class:"simple-form-field"},de={class:"form-group"},pe={class:"control-container"},ce={class:"simple-form-field"},me={class:"form-group"},ue={class:"control-container"},_e={class:"simple-form-field"},fe={class:"form-group"},be={class:"control-container"},ke={class:"simple-form-field"},ge={class:"form-group"},ve={class:"control-container"},Ce={class:"simple-form-warp"},he={class:"simple-form-field"},ye={class:"control-container"},we={class:"list-table-tool-row"},Ve={class:"list-table-tool-col"},xe={key:0},Te={class:"table-container"},Oe={class:"avatar-info"},Ue={class:"info"},Ie={key:1},Le={class:"rank-container"},Se={class:"text"},ze={key:0,style:{color:"#67c23a"}},Ae={key:1,style:{color:"#f50"}},De={key:0,style:{color:"#999999"}},Ne={class:"empty-warp"},Pe={key:0,class:"empty-bg"},Be={key:0,class:"pagination-con"},Fe=q({__name:"List",setup(Ke){const T=G(),O=R(),{listData:U,loading:h,total:y,selectedIds:g,filterParams:n,loadData:u,onSearchSubmit:p,onSortChange:I,onSelectChange:L,resetParams:S}=Y({apiFunction:Q,idKey:"userId",defaultParams:{sortField:"",sortOrder:"",keyword:"",fromTag:"",balance:"",pointsLt:"",pointsGt:"",rankId:0,page:1,size:T.get("pageSize")}});return u(),(qe,l)=>{const f=i("el-button"),v=i("TigInput"),b=i("el-option"),z=i("el-select"),A=i("el-space"),D=i("el-form"),r=i("el-table-column"),N=i("el-avatar"),P=i("el-image"),V=i("el-divider"),B=i("el-table"),F=i("a-spin");return d(),c("div",Z,[t("div",ee,[t("div",te,[t("div",le,[a(D,{model:e(n),onKeyup:M(e(p),["enter"])},{default:s(()=>[t("div",oe,[t("div",ae,[t("div",se,[t("div",ne,[l[8]||(l[8]=t("label",{class:"control-label"},[t("span",null,"用户信息：")],-1)),t("div",ie,[a(v,{modelValue:e(n).keyword,"onUpdate:modelValue":l[0]||(l[0]=o=>e(n).keyword=o),name:"keyword",placeholder:"输入会员名称/手机号/邮箱",clearable:"",onClear:e(p)},{append:s(()=>[a(f,{onClick:e(p)},{default:s(()=>l[7]||(l[7]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[7]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),t("div",re,[t("div",de,[l[9]||(l[9]=t("label",{class:"control-label"},[t("span",null,"用户筛选：")],-1)),t("div",pe,[a(z,{modelValue:e(n).fromTag,"onUpdate:modelValue":l[1]||(l[1]=o=>e(n).fromTag=o),clearable:"",onChange:e(p)},{default:s(()=>[a(b,{value:1,label:"微信公众号"}),a(b,{value:2,label:"微信小程序"}),a(b,{value:3,label:"H5"}),a(b,{value:4,label:"PC"}),a(b,{value:5,label:"APP"})]),_:1},8,["modelValue","onChange"])])])]),t("div",ce,[t("div",me,[l[10]||(l[10]=t("label",{class:"control-label"},[t("span",null,"余额大于：")],-1)),t("div",ue,[a(v,{type:"decimal",modelValue:e(n).balance,"onUpdate:modelValue":l[2]||(l[2]=o=>e(n).balance=o),clearable:"",onClear:e(p)},null,8,["modelValue","onClear"])])])]),t("div",_e,[t("div",fe,[l[11]||(l[11]=t("label",{class:"control-label"},[t("span",null,"积分大于：")],-1)),t("div",be,[a(v,{type:"integer",modelValue:e(n).pointsGt,"onUpdate:modelValue":l[3]||(l[3]=o=>e(n).pointsGt=o),clearable:"",onClear:e(p)},null,8,["modelValue","onClear"])])])]),t("div",ke,[t("div",ge,[l[12]||(l[12]=t("label",{class:"control-label"},[t("span",null,"积分小于：")],-1)),t("div",ve,[a(v,{type:"integer",modelValue:e(n).pointsLt,"onUpdate:modelValue":l[4]||(l[4]=o=>e(n).pointsLt=o),clearable:"",onClear:e(p)},null,8,["modelValue","onClear"])])])]),t("div",Ce,[t("div",he,[l[15]||(l[15]=t("label",{class:"control-label"},null,-1)),t("div",ye,[a(f,{type:"primary",plain:"",onClick:e(p)},{default:s(()=>l[13]||(l[13]=[_("搜索",-1)])),_:1,__:[13]},8,["onClick"]),a(f,{plain:"",onClick:e(S)},{default:s(()=>l[14]||(l[14]=[_("重置",-1)])),_:1,__:[14]},8,["onClick"])])])])])]),t("div",we,[t("div",Ve,[a(A,null,{default:s(()=>[a(e(k),{params:{act:"add"},isDrawer:"",path:"user/user/Info",title:"添加会员",width:"560px",onOkCallback:e(u)},{default:s(()=>[a(f,{type:"primary"},{default:s(()=>l[16]||(l[16]=[_("添加会员",-1)])),_:1,__:[16]})]),_:1},8,["onOkCallback"]),a(e(k),{params:{act:"setRank",ids:e(g)},isDrawer:"",path:"user/user/BatchRank",title:"批量修改会员等级",width:"600px",onOkCallback:e(u)},{default:s(()=>[a(f,{disabled:e(g).length===0},{default:s(()=>l[17]||(l[17]=[_("批量修改会员等级",-1)])),_:1,__:[17]},8,["disabled"])]),_:1},8,["params","onOkCallback"]),e(g).length>0?(d(),c("span",xe,[l[18]||(l[18]=_(" 已选择：",-1)),t("b",null,C(e(g).length),1),l[19]||(l[19]=_(" 项 ",-1))])):m("",!0)]),_:1})])])]),_:1},8,["model","onKeyup"])]),t("div",Te,[a(F,{spinning:e(h)},{default:s(()=>[a(B,{data:e(U),loading:e(h),total:e(y),"row-key":"userId",onSelectionChange:e(L),onSortChange:e(I)},{empty:s(()=>[t("div",Ne,[e(h)?m("",!0):(d(),c("div",Pe,"暂无数据"))])]),default:s(()=>[a(r,{type:"selection",width:"32"}),a(r,{width:200,label:"会员名称",prop:"username",sortable:"custom"},{default:s(({row:o})=>[t("div",Oe,[a(N,{size:30,src:e(x)(o.avatar)},null,8,["src"]),t("div",Ue,[o.username!=o.mobile?(d(),w(X,{key:0,user:o.username,isCompanyAuth:o.isCompanyAuth},null,8,["user","isCompanyAuth"])):m("",!0),a(W,{mobile:o.mobile},null,8,["mobile"]),o.fromTagName?(d(),c("div",Ie,[a(e(J),{color:o.fromTag===2||o.fromTag===5?"#31c19e":"#1890FF",text:o.fromTagName,transparent:!1,style:{"margin-left":"0"}},null,8,["color","text"])])):m("",!0)])])]),_:1}),a(r,{width:140,label:"会员等级",prop:"rankName"},{default:s(({row:o})=>[t("div",Le,[o.rankLogo?(d(),w(P,{key:0,src:e(x)(o.rankLogo),class:"image",fit:"contain"},null,8,["src"])):m("",!0),t("div",Se,C(o.rankName),1)])]),_:1}),a(r,{width:140,label:"是否认证",prop:"isCompanyAuth"},{default:s(({row:o})=>[t("div",null,[o.isCompanyAuth?(d(),c("div",ze,"已认证")):(d(),c("div",Ae,"未认证"))])]),_:1}),e(O)=="admin"?(d(),w(r,{key:0,width:140,label:"是否启用",prop:"status"},{default:s(({row:o})=>[a(e(j),{checked:o.status,"onUpdate:checked":K=>o.status=K,params:{id:o.userId,field:"status"},requestApi:e(H)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1})):m("",!0),a(r,{label:"余额",prop:"balance",sortable:"custom"},{default:s(({row:o})=>[t("ul",null,[t("li",null,C(o.balance),1),o.frozenBalance>0?(d(),c("li",De,"(冻结："+C(o.frozenBalance)+")",1)):m("",!0)])]),_:1}),a(r,{width:130,label:"消费积分",prop:"points",sortable:"custom"}),a(r,{width:140,label:"累计消费次数",prop:"orderCount",sortable:"custom"}),a(r,{width:140,label:"累计消费金额",prop:"orderAmount",sortable:"custom"}),a(r,{width:160,label:"注册日期",prop:"regTime",sortable:"custom"}),a(r,{width:200,fixed:"right",label:"操作"},{default:s(({row:o})=>[a(e(k),{params:{act:"detail",id:o.userId},isDrawer:"",path:"user/user/Detail",title:"会员管理",width:"800px",onOkCallback:e(u),onCallback:e(u),showClose:!1,showOnOk:!1},{default:s(()=>l[20]||(l[20]=[t("a",{class:"btn-link"},"查看",-1)])),_:2,__:[20]},1032,["params","onOkCallback","onCallback"]),a(V,{direction:"vertical"}),a(e(k),{params:{act:"user",id:o.userId},showOnOk:!1,isDrawer:"",path:"order/order/List",title:o.username+" - 查看订单",width:"1200px"},{default:s(()=>l[21]||(l[21]=[t("a",{class:"btn-link"},"查看订单",-1)])),_:2,__:[21]},1032,["params","title"]),a(V,{direction:"vertical"}),a(e(k),{params:{id:o.userId},isDrawer:"",path:"user/user/AccountLog",title:"会员"+o.username+"的账目明细",width:"800px",onOkCallback:e(u)},{default:s(()=>l[22]||(l[22]=[t("a",{class:"btn-link"},"账目明细",-1)])),_:2,__:[22]},1032,["params","title","onOkCallback"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(y)>0?(d(),c("div",Be,[a(e(E),{page:e(n).page,"onUpdate:page":l[5]||(l[5]=o=>e(n).page=o),size:e(n).size,"onUpdate:size":l[6]||(l[6]=o=>e(n).size=o),total:e(y),onCallback:e(u)},null,8,["page","size","total","onCallback"])])):m("",!0)])])])])}}}),ot=$(Fe,[["__scopeId","data-v-6dfd61cd"]]);export{ot as default};

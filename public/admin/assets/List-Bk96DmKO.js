import{d as W,r as x,b as U,x as X,o as Y,an as Z,f as r,g as d,h as i,i as a,z as l,m as s,j as e,a8 as O,F as ee,p as te,k as g,Q as h,l as u,t as f,ei as oe,ax as ae,_ as le}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as se}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as ne}from"./Pagination-C8J7-6Em.js";import{_ as ie}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{a as re,f as de}from"./shop-CBisV8Of.js";import{S as D}from"./StatusDot-DuKP0Xmc.js";import{u as ce}from"./useListRequest-CprjeVXp.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./format-BxqOrW-w.js";const pe={class:"container"},ue={class:"content_wrapper"},me={class:"container"},_e={class:"lyecs-table-list-warp"},he={class:"list-table-tool lyecs-search-warp"},fe={class:"advanced-search-warp list-table-tool-row"},ke={class:"simple-form-warp"},be={class:"simple-form-field"},ye={class:"form-group"},ge={class:"control-container"},ve={class:"simple-form-field"},Ce={class:"form-group"},we={class:"control-container"},Se={class:"simple-form-field"},xe={class:"form-group"},Oe={class:"control-container"},De={class:"simple-form-field"},Ve={class:"form-group"},Ie={class:"control-container"},ze={class:"simple-form-warp"},Ae={class:"simple-form-field"},Le={class:"control-container"},Te={class:"list-table-tool-row mt20"},Ue={class:"list-table-tool-col"},Ke={class:"table-container"},Ne={key:0},Be={key:0},Fe={key:1},qe={key:0,class:"btn-link green"},Me={key:1,class:"btn-link grey"},Pe={key:3,style:{color:"red"}},Re={key:4,style:{color:"green"}},$e={key:0},je={key:1},Ee=["href"],Ge={class:"empty-warp"},Qe={key:0,class:"empty-bg"},He={key:0,class:"pagination-con"},Je=W({__name:"List",setup(We){const K=x([{label:"开业",value:1,isShow:!0},{label:"停业",value:4,isShow:!0},{label:"打烊",value:10,isShow:!0}]),b=U().currentRoute.value.query,N=X(),{listData:B,loading:v,total:C,filterParams:n,loadData:c,onSearchSubmit:p,onSortChange:F,onSelectChange:q}=ce({apiFunction:re,idKey:"shopId",defaultParams:{shopType:1,sortField:"",sortOrder:"",keyword:"",account:b.account||"",mainAccount:"",status:"",page:1,size:N.get("pageSize")}}),M=()=>{n.keyword="",n.account="",n.mainAccount="",n.status="",n.page=1,c()};c(),U().replace({query:{}});const P=()=>{w(),c()},w=()=>{let I=window.location.href,o=new URL(I);o.search="",window.history.replaceState({},document.title,o.toString())},V=x(),y=x(0);Y(()=>{b.id&&Z.confirm(`为[${b.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{y.value=Number(b.id),V.value.show()}).catch(()=>{y.value=0,w()})});const R=()=>{y.value=0,w()};return(I,o)=>{const m=r("el-button"),S=r("TigInput"),$=r("el-option"),j=r("el-select"),z=r("el-space"),_=r("el-table-column"),A=r("el-divider"),E=r("el-icon"),L=r("el-dropdown-item"),G=r("el-dropdown-menu"),Q=r("el-dropdown"),H=r("el-table"),J=r("a-spin");return i(),d("div",pe,[a("div",ue,[a("div",me,[a("div",_e,[a("div",he,[a("div",fe,[a("div",ke,[a("div",be,[a("div",ye,[o[7]||(o[7]=a("label",{class:"control-label"},[a("span",null,"店铺名称：")],-1)),a("div",ge,[l(S,{modelValue:e(n).keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e(n).keyword=t),name:"keyword",placeholder:"输入店铺名称",onKeyup:O(e(p),["enter"]),clearable:"",onClear:e(p)},{append:s(()=>[l(m,{onClick:e(p)},{default:s(()=>[...o[6]||(o[6]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),a("div",ve,[a("div",Ce,[o[8]||(o[8]=a("label",{class:"control-label"},[a("span",null,"关联账号：")],-1)),a("div",we,[l(S,{modelValue:e(n).account,"onUpdate:modelValue":o[1]||(o[1]=t=>e(n).account=t),name:"account",placeholder:"输入关联账号名称",onKeyup:O(e(p),["enter"]),clearable:"",onClear:e(p)},null,8,["modelValue","onKeyup","onClear"])])])]),a("div",Se,[a("div",xe,[o[9]||(o[9]=a("label",{class:"control-label"},[a("span",null,"主账号：")],-1)),a("div",Oe,[l(S,{modelValue:e(n).mainAccount,"onUpdate:modelValue":o[2]||(o[2]=t=>e(n).mainAccount=t),name:"mainAccount",placeholder:"输入主账号名称",onKeyup:O(e(p),["enter"]),clearable:"",onClear:e(p)},null,8,["modelValue","onKeyup","onClear"])])])]),a("div",De,[a("div",Ve,[o[10]||(o[10]=a("label",{class:"control-label"},[a("span",null,"状态 ：")],-1)),a("div",Ie,[l(j,{modelValue:e(n).status,"onUpdate:modelValue":o[3]||(o[3]=t=>e(n).status=t),clearable:"",onChange:e(p)},{default:s(()=>[(i(!0),d(ee,null,te(K.value,t=>(i(),g($,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue","onChange"])])])]),a("div",ze,[a("div",Ae,[o[13]||(o[13]=a("label",{class:"control-label"},null,-1)),a("div",Le,[l(m,{type:"primary",plain:"",onClick:e(p)},{default:s(()=>[...o[11]||(o[11]=[h("搜索",-1)])]),_:1},8,["onClick"]),l(m,{plain:"",onClick:M},{default:s(()=>[...o[12]||(o[12]=[h("重置",-1)])]),_:1})])])])])]),a("div",Te,[a("div",Ue,[l(z,null,{default:s(()=>[l(e(k),{ref_key:"dialogForm",ref:V,params:{act:"add",id:y.value},isDrawer:"",path:"shop/shop/Add",title:"新增店铺",width:"800px",onCloseCallback:R,onOkCallback:P},{default:s(()=>[l(m,{type:"primary"},{default:s(()=>[...o[14]||(o[14]=[h("新增店铺",-1)])]),_:1})]),_:1},8,["params"])]),_:1})])])]),a("div",Ke,[l(J,{spinning:e(v)},{default:s(()=>[l(H,{data:e(B),loading:e(v),total:e(C),"row-key":"shopId",onSelectionChange:e(q),onSortChange:e(F)},{empty:s(()=>[a("div",Ge,[e(v)?u("",!0):(i(),d("div",Qe,"暂无数据"))])]),default:s(()=>[l(_,{label:"店铺名称"},{default:s(({row:t})=>[h(f(t.shopTitle||"--"),1)]),_:1}),l(_,{label:"店铺LOGO"},{default:s(({row:t})=>[l(e(ie),{src:t.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),l(_,{label:"商户名称",width:200},{default:s(({row:t})=>{var T;return[t.merchant?(i(),d("div",Ne,[t.merchant.type==2?(i(),d("span",Be,f(((T=t.merchant.merchantData)==null?void 0:T.merchantName)||"--"),1)):u("",!0),t.merchant.type==1?(i(),d("span",Fe,f(t.merchant.corporateName||"--"),1)):u("",!0),l(e(k),{params:{act:"detail",id:t.merchant.merchantId},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:e(c)},{default:s(()=>[t.merchant.status==1?(i(),d("a",qe,"(已认证)")):(i(),d("a",Me,"(未认证)"))]),_:2},1032,["params","onOkCallback"])])):u("",!0)]}),_:1}),l(_,{label:"店铺状态",sortable:"custom"},{default:s(({row:t})=>[t.status==10?(i(),g(D,{key:0,color:"red",flicker:!0})):u("",!0),t.status==4?(i(),g(D,{key:1,color:"red",flicker:!0})):u("",!0),t.status==1?(i(),g(D,{key:2,color:"green",flicker:!0})):u("",!0),t.status===10||t.status===4?(i(),d("span",Pe,f(t.statusText),1)):t.status===1?(i(),d("span",Re,f(t.statusText),1)):u("",!0)]),_:1}),l(_,{label:"主账号",align:"center"},{default:s(({row:t})=>[t.merchant&&t.merchant.admin?(i(),d("div",$e,[l(e(k),{params:{id:t.shopId,type:"shop"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:e(c),showClose:!1,showOnOk:!1},{default:s(()=>[a("a",null,f(t.merchant.admin.username||"--"),1)]),_:2},1032,["params","onOkCallback"])])):(i(),d("div",je,"--"))]),_:1}),l(_,{width:200,fixed:"right",label:"操作"},{default:s(({row:t})=>[l(z,{size:0},{default:s(()=>[l(e(k),{params:{act:"detail",id:t.shopId},isDrawer:"",path:"shop/shop/Info",title:"编辑店铺",width:"700px",onOkCallback:e(c)},{default:s(()=>[...o[15]||(o[15]=[a("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"]),l(A,{direction:"vertical"}),a("a",{href:e(oe)("shop",t.shopId),target:"_blank",class:"btn-link"},"店铺首页",8,Ee),l(A,{direction:"vertical"}),l(Q,null,{dropdown:s(()=>[l(G,null,{default:s(()=>[l(L,null,{default:s(()=>[l(e(k),{params:{id:t.shopId,type:"shop"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:e(c),showClose:!1,showOnOk:!1},{default:s(()=>[l(m,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[...o[16]||(o[16]=[h("主账号管理",-1)])]),_:1})]),_:1},8,["params","onOkCallback"])]),_:2},1024),l(e(se),{params:{id:t.shopId},title:"删除后店铺信息将无法恢复，请确认是否删除该店铺？",requestApi:e(de),onAfterDelete:e(c)},{default:s(()=>[l(L,null,{default:s(()=>[l(m,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[...o[17]||(o[17]=[h("删除",-1)])]),_:1})]),_:1})]),_:1},8,["params","requestApi","onAfterDelete"])]),_:2},1024)]),default:s(()=>[l(E,{class:"btn-link",size:"12"},{default:s(()=>[l(e(ae))]),_:1})]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(C)>0?(i(),d("div",He,[l(e(ne),{page:e(n).page,"onUpdate:page":o[4]||(o[4]=t=>e(n).page=t),size:e(n).size,"onUpdate:size":o[5]||(o[5]=t=>e(n).size=t),total:e(C),onCallback:e(c)},null,8,["page","size","total","onCallback"])])):u("",!0)])])])])])}}}),ct=le(Je,[["__scopeId","data-v-5e8434bd"]]);export{ct as default};

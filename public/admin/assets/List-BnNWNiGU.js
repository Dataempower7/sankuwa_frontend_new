import{d as j,a as A,r as v,x as E,o as G,ad as H,f as _,h as a,k as m,z as s,l,e as r,i as e,a1 as J,L as c,t as d,j as x,g as p,_ as Q}from"./index-BLXOA87U.js";/* empty css             */import"./index-DpgvsnVO.js";/* empty css                                                                    */import{P as W}from"./Pagination-w0YHSLYy.js";import{p as w}from"./format-DdZABYp4.js";import{_ as X}from"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import{b as Y,c as Z}from"./shop-CAVes-5Z.js";import{S as T}from"./StatusDot-Lzlci0Qd.js";import{u as tt}from"./useListRequest-qe4Wn36b.js";import{_ as et}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const ot={class:"container"},st={class:"content_wrapper"},at={class:"container"},lt={class:"lyecs-table-list-warp"},nt={class:"list-table-tool lyecs-search-warp"},it={class:"list-table-tool-row"},rt={class:"simple-form-warp"},ct={class:"simple-form-field"},dt={class:"form-group"},pt={class:"control-container"},ut={class:"simple-form-field"},_t={class:"form-group"},mt={class:"table-container"},ft={key:2,style:{color:"red"}},ht={key:3,style:{color:"green"}},gt={class:"empty-warp"},bt={key:0,class:"empty-bg"},yt={key:0,class:"pagination-con"},vt={key:0,class:"selected-action-warp selected-warp-left"},wt={class:"selected-action"},kt=j({__name:"List",setup(St){const f=A().currentRoute.value.query,L=v([{label:"全部",value:0,isShow:!0},{label:"开业",value:1,isShow:!0},{label:"关店",value:10,isShow:!0}]),V=E(),{listData:z,loading:h,total:g,selectedIds:k,filterParams:n,loadData:b,onSearchSubmit:y,onSortChange:B,onSelectChange:I,onBatchAction:O}=tt({apiFunction:Z,idKey:"shopId",defaultParams:{sortField:"",sortOrder:"",keyword:"",status:0,page:1,size:V.get("pageSize")}}),U=async u=>{await O(u,Y)};b();const N=u=>{n.status=u,n.page=1,b()},D=()=>{let u=window.location.href,o=new URL(u);o.search="",window.history.replaceState({},document.title,o.toString())},F=v(),S=v(0);return G(()=>{f.id&&H.confirm(`为[${f.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{S.value=Number(f.id),F.value.show()}).catch(()=>{S.value=0,D()})}),(u,o)=>{const C=r("el-button"),M=r("TigInput"),P=r("TigTabs"),i=r("el-table-column"),K=r("el-table"),R=r("a-spin"),$=r("el-popconfirm"),q=r("el-space");return p(),_("div",ot,[a("div",st,[a("div",at,[a("div",lt,[a("div",nt,[a("div",it,[a("div",rt,[a("div",ct,[a("div",dt,[a("div",pt,[s(M,{modelValue:e(n).keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e(n).keyword=t),name:"username",placeholder:"输入店铺名称",onKeyup:J(e(y),["enter"]),clearable:"",onClear:e(y)},{append:l(()=>[s(C,{onClick:e(y)},{default:l(()=>o[5]||(o[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),a("div",ut,[a("div",_t,[s(P,{modelValue:e(n).status,"onUpdate:modelValue":o[1]||(o[1]=t=>e(n).status=t),tabs:L.value,onOnTabChange:N},null,8,["modelValue","tabs"])])])])])]),a("div",mt,[s(R,{spinning:e(h)},{default:l(()=>[s(K,{data:e(z),loading:e(h),total:e(g),"row-key":"shopId",onSelectionChange:e(I),onSortChange:e(B)},{empty:l(()=>[a("div",gt,[e(h)?m("",!0):(p(),_("div",bt,"暂无数据"))])]),default:l(()=>[s(i,{label:"店铺名称"},{default:l(({row:t})=>[c(d(t.shopTitle||"--"),1)]),_:1}),s(i,{label:"店铺LOGO"},{default:l(({row:t})=>[s(e(X),{src:t.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),s(i,{label:"店铺状态"},{default:l(({row:t})=>[t.status==10?(p(),x(T,{key:0,color:"red",flicker:!0})):m("",!0),t.status==1?(p(),x(T,{key:1,color:"green",flicker:!0})):m("",!0),t.status===10?(p(),_("span",ft,d(t.statusText),1)):t.status===1?(p(),_("span",ht,d(t.statusText),1)):m("",!0)]),_:1}),s(i,{label:"店铺资金",sortable:"custom"},{default:l(({row:t})=>[c(d(e(w)(t.shopMoney)||0),1)]),_:1}),s(i,{label:"待结算金额",sortable:"custom"},{default:l(({row:t})=>[c(d(e(w)(t.unSettlementOrder)||0),1)]),_:1}),s(i,{label:"不可用资金",sortable:"custom"},{default:l(({row:t})=>[c(d(e(w)(t.frozenMoney)||0),1)]),_:1}),s(i,{label:"开店时间"},{default:l(({row:t})=>[c(d(t.addTime),1)]),_:1}),s(i,{width:120,fixed:"right",label:"操作"},{default:l(({row:t})=>[s(e(et),{params:{shopId:t.shopId},showClose:!1,showOnOk:!1,isDrawer:"",path:"shop/financialLog/List",title:"资金日志",width:"800px"},{default:l(()=>o[6]||(o[6]=[a("a",{class:"btn-link"},"查看资金日志",-1)])),_:2,__:[6]},1032,["params"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(g)>0?(p(),_("div",yt,[s(e(W),{page:e(n).page,"onUpdate:page":o[2]||(o[2]=t=>e(n).page=t),size:e(n).size,"onUpdate:size":o[3]||(o[3]=t=>e(n).size=t),total:e(g),onCallback:e(b)},null,8,["page","size","total","onCallback"])])):m("",!0)]),e(k).length>0?(p(),_("div",vt,[a("div",wt,[s(q,null,{default:l(()=>[a("span",null,[o[7]||(o[7]=c("已选择：",-1)),a("b",null,d(e(k).length),1),o[8]||(o[8]=c(" 项",-1))]),s($,{title:"您确认要批量删除所选数据吗？",onConfirm:o[4]||(o[4]=t=>U("del"))},{reference:l(()=>[s(C,null,{default:l(()=>o[9]||(o[9]=[c("批量删除",-1)])),_:1,__:[9]})]),_:1})]),_:1})])])):m("",!0)])])])])}}}),Ft=Q(kt,[["__scopeId","data-v-2dd1a0cd"]]);export{Ft as default};

import{d as G,x as H,r as z,as as J,f as d,g as _,h as c,i as a,z as o,l as y,j as s,a8 as X,m as l,Q as r,t as p,av as Z,P as ee,aw as Y,_ as te}from"./index-B52YIGC0.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{p as P}from"./format-BxqOrW-w.js";/* empty css                                                                    */import{P as oe}from"./Pagination-C8J7-6Em.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as le}from"./SelectTimeInterval-BUZ-hmxo.js";import{f as u}from"./time-EzYK4E-P.js";import{a as ae,b as se}from"./performanceSettlement-DKhT0Y_3.js";import{r as ne}from"./export-Ds6vL4MA.js";import{u as re}from"./useListRequest-CprjeVXp.js";import{_ as ie}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const de={class:"container"},me={class:"content_wrapper"},pe={class:"lyecs-table-list-warp"},ue={class:"list-table-tool lyecs-search-warp"},fe={class:"advanced-search-warp list-table-tool-row"},_e={class:"simple-form-warp"},ce={class:"simple-form-field mr10"},ge={class:"form-group"},be={class:"control-container"},ve={key:0,class:"simple-form-field"},ye={class:"form-group"},Ye={class:"control-container"},De={class:"simple-form-field"},Se={class:"form-group"},Te={class:"control-container"},Ce={class:"simple-form-field"},we={class:"form-group"},ke={class:"simple-form-field"},xe={class:"form-group"},Ve={class:"simple-form-warp"},Me={class:"simple-form-field"},Ie={class:"control-container"},Ue={style:{"padding-top":"30px"}},he={class:"extra"},Ee={key:0},ze={key:1},Pe={class:"dialog-footer"},Oe={class:"table-container"},$e={class:"flex flex-align-center"},Ne={key:0},Fe={key:1},Ke={class:"empty-warp"},Le={key:0,class:"empty-bg"},qe={key:0,class:"pagination-con"},Be=G({__name:"List",setup(We){const x=H(),{listData:O,loading:V,total:C,filterParams:n,loadData:D,onSearchSubmit:S,onSortChange:$,onSelectChange:N,resetParams:F}=re({apiFunction:ae,idKey:"productId",defaultParams:{page:1,size:x.get("pageSize"),sortField:"",sortOrder:"",orderSn:"",orderTimeStart:"",orderTimeEnd:"",status:"",timeType:1}});D();const w=z(!1),g=J({range:0,isExport:1}),K=async()=>{try{const i=await se({...n,...g});ne(i,"分销员业绩结算表")}catch(i){ee.error(i.message)}},k=z(-1),M=i=>{if(i===-1){k.value=i;return}n.orderTimeStart=u(new Date,"YYYY-MM-DD"),i===0&&(n.orderTimeEnd=u(new Date,"YYYY-MM-DD")),i===1&&(n.orderTimeStart=u(Y(1,"sub"),"YYYY-MM-DD"),n.orderTimeEnd=u(Y(1,"sub"),"YYYY-MM-DD")),i===2&&(n.orderTimeStart=u(Y(7,"sub"),"YYYY-MM-DD"),n.orderTimeEnd=u(new Date,"YYYY-MM-DD")),i===3&&(n.orderTimeStart=u(Y(30,"sub"),"YYYY-MM-DD"),n.orderTimeEnd=u(new Date,"YYYY-MM-DD")),i===4&&(n.orderTimeStart=u(Y(180,"sub"),"YYYY-MM-DD"),n.orderTimeEnd=u(new Date,"YYYY-MM-DD")),D()},L=(i,e)=>{let T="--",f=1;return i.commissionData&&(f=i.commissionType,T=`${f==3?"":"比例"}${e}${f==3?x.get("amountUnit"):"%"}（按实付金额计算）`),T};return(i,e)=>{const T=d("TigInput"),f=d("el-option"),I=d("el-select"),b=d("el-radio-button"),U=d("el-radio-group"),v=d("el-button"),h=d("el-radio"),q=d("el-form-item"),B=d("el-form"),W=d("el-dialog"),m=d("el-table-column"),j=d("el-icon"),A=d("el-tooltip"),Q=d("el-table"),R=d("a-spin");return c(),_("div",de,[a("div",me,[a("div",pe,[a("div",ue,[a("div",fe,[a("div",_e,[a("div",ce,[a("div",ge,[e[12]||(e[12]=a("label",{class:"control-label"},[a("span",null,"订单编号：")],-1)),a("div",be,[o(T,{modelValue:s(n).orderSn,"onUpdate:modelValue":e[0]||(e[0]=t=>s(n).orderSn=t),name:"orderSn",placeholder:"请输入订单编号",onKeyup:X(s(S),["enter"]),clearable:"",onClear:s(S)},null,8,["modelValue","onKeyup","onClear"])])])]),s(n).timeType===1?(c(),_("div",ve,[a("div",ye,[e[13]||(e[13]=a("label",{class:"control-label"},[a("span",null,"结算状态：")],-1)),a("div",Ye,[o(I,{modelValue:s(n).status,"onUpdate:modelValue":e[1]||(e[1]=t=>s(n).status=t),placeholder:"请选择",onChange:s(S),clearable:""},{default:l(()=>[o(f,{label:"未结算",value:0}),o(f,{label:"已结算",value:1})]),_:1},8,["modelValue","onChange"])])])])):y("",!0),a("div",De,[a("div",Se,[e[14]||(e[14]=a("label",{class:"control-label"},[a("span",null,"筛选类型：")],-1)),a("div",Te,[o(I,{modelValue:s(n).timeType,"onUpdate:modelValue":e[2]||(e[2]=t=>s(n).timeType=t),placeholder:"请选择时间"},{default:l(()=>[o(f,{label:"下单时间",value:1}),o(f,{label:"退款时间",value:2})]),_:1},8,["modelValue"])])])]),a("div",Ce,[a("div",we,[e[15]||(e[15]=a("label",{class:"control-label"},[a("span",null,"筛选时间：")],-1)),o(s(le),{type:"date","start-date":s(n).orderTimeStart,"onUpdate:startDate":e[3]||(e[3]=t=>s(n).orderTimeStart=t),"end-date":s(n).orderTimeEnd,"onUpdate:endDate":e[4]||(e[4]=t=>s(n).orderTimeEnd=t),onCallback:e[5]||(e[5]=t=>M(-1))},null,8,["start-date","end-date"])])]),a("div",ke,[a("div",xe,[o(U,{class:"itemWidth",modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=t=>k.value=t),onChange:M},{default:l(()=>[o(b,{value:0},{default:l(()=>[...e[16]||(e[16]=[r("今天",-1)])]),_:1}),o(b,{value:1},{default:l(()=>[...e[17]||(e[17]=[r("昨天",-1)])]),_:1}),o(b,{value:2},{default:l(()=>[...e[18]||(e[18]=[r("近7天",-1)])]),_:1}),o(b,{value:3},{default:l(()=>[...e[19]||(e[19]=[r("近30天",-1)])]),_:1}),o(b,{value:4},{default:l(()=>[...e[20]||(e[20]=[r("近半年",-1)])]),_:1})]),_:1},8,["modelValue"])])]),a("div",Ve,[a("div",Me,[e[23]||(e[23]=a("label",{class:"control-label"},null,-1)),a("div",Ie,[o(v,{type:"primary",plain:"",onClick:s(S)},{default:l(()=>[...e[21]||(e[21]=[r("搜索",-1)])]),_:1},8,["onClick"]),o(v,{plain:"",onClick:s(F)},{default:l(()=>[...e[22]||(e[22]=[r("重置",-1)])]),_:1},8,["onClick"])])])])])])]),o(W,{modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=t=>w.value=t),title:"导出数据",width:"500",top:"30vh","append-to-body":"",style:{zIndex:2e3}},{footer:l(()=>[a("div",Pe,[o(v,{onClick:e[8]||(e[8]=t=>w.value=!1)},{default:l(()=>[...e[26]||(e[26]=[r("取消",-1)])]),_:1}),o(v,{type:"primary",onClick:K},{default:l(()=>[...e[27]||(e[27]=[r(" 导出 ",-1)])]),_:1})])]),default:l(()=>[a("div",Ue,[o(B,{model:g,"label-width":"100px"},{default:l(()=>[o(q,{label:"导出维度："},{default:l(()=>[a("div",null,[o(U,{modelValue:g.range,"onUpdate:modelValue":e[7]||(e[7]=t=>g.range=t)},{default:l(()=>[o(h,{value:0},{default:l(()=>[...e[24]||(e[24]=[r("商品维度",-1)])]),_:1}),o(h,{value:1},{default:l(()=>[...e[25]||(e[25]=[r("订单维度",-1)])]),_:1})]),_:1},8,["modelValue"]),a("div",he,[g.range==0?(c(),_("div",Ee,"以商品维度导出，每个商品展示一行")):y("",!0),g.range==1?(c(),_("div",ze,"以订单维度导出，每个订单展示一行")):y("",!0)])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"]),a("div",Oe,[o(R,{spinning:s(V)},{default:l(()=>[o(Q,{data:s(O),total:s(C),"row-key":"orderUserInfo.orderId",onSelectionChange:s(N),onSortChange:s($)},{empty:l(()=>[a("div",Ke,[s(V)?y("",!0):(c(),_("div",Le,"暂无数据"))])]),default:l(()=>[o(m,{label:"订单号",prop:"orderId",minWidth:190,fixed:"left"},{default:l(({row:t})=>[o(s(ie),{params:{act:"detail",id:t.orderUserInfo.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderUserInfo.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:s(D)},{default:l(()=>[o(v,{link:"",type:"primary"},{default:l(()=>[r(p(t.orderUserInfo.orderSn),1)]),_:2},1024)]),_:2},1032,["params","title","onCallback"])]),_:1}),o(m,{prop:"orderAmount",width:140},{header:l(()=>[a("div",$e,[e[29]||(e[29]=a("p",null,"成交金额",-1)),o(A,{placement:"bottom-start",effect:"light"},{content:l(()=>[...e[28]||(e[28]=[r(" 不计运费、税费和附加费 ",-1)])]),default:l(()=>[o(j,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[o(s(Z))]),_:1})]),_:1})])]),default:l(({row:t})=>[r(p(s(P)(t.userOrderItem.totalProductMoney)),1)]),_:1}),o(m,{label:"分销员",width:140},{default:l(({row:t})=>[r(p(t.salesman.baseUserInfo.nickname||t.salesman.baseUserInfo.username),1)]),_:1}),o(m,{label:"客户",width:140},{default:l(({row:t})=>[r(p(t.orderUserInfo.user.nickname||"-"),1)]),_:1}),o(m,{label:"收益类型",width:140},{default:l(({row:t})=>[...e[30]||(e[30]=[r(" 商品佣金 ",-1)])]),_:1}),o(m,{label:"收益组成",width:240},{default:l(({row:t})=>[r(p(L(t.salesmanProductData,t.profitComposition)),1)]),_:1}),o(m,{label:"所属分组",width:240},{default:l(({row:t})=>[r(p(t.salesman.groupInfo.groupName||"-"),1)]),_:1}),o(m,{label:"收益",width:240},{default:l(({row:t})=>[r(p(s(P)(t.amount)),1)]),_:1}),o(m,{label:"结算方式",width:140},{default:l(({row:t})=>{var E;return[t.salesmanSettlementData&&t.salesmanSettlementData!==null?(c(),_("span",Ne,p(((E=t.salesmanSettlementData)==null?void 0:E.settlementType)==1?"系统结算":"人工结算"),1)):(c(),_("span",Fe,"--"))]}),_:1}),o(m,{label:"结算状态",width:140,fixed:"right"},{default:l(({row:t})=>[r(p(t.statusText),1)]),_:1}),o(m,{label:"退款时间",width:150,fixed:"right"},{default:l(({row:t})=>[r(p(t.refundTime||"--"),1)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),s(C)>0?(c(),_("div",qe,[o(s(oe),{page:s(n).page,"onUpdate:page":e[10]||(e[10]=t=>s(n).page=t),size:s(n).size,"onUpdate:size":e[11]||(e[11]=t=>s(n).size=t),total:s(C),onCallback:s(D)},null,8,["page","size","total","onCallback"])])):y("",!0)])])])])}}}),it=te(Be,[["__scopeId","data-v-25909aa8"]]);export{it as default};

import{d as j,r as C,a as E,x as A,o as G,ad as H,f as i,h as s,z as a,l,e as d,i as e,a1 as J,L as V,k as c,t as u,j as S,ds as Q,g as n,_ as W}from"./index-BLXOA87U.js";/* empty css             */import"./index-DpgvsnVO.js";/* empty css                                                                    */import{P as X}from"./Pagination-w0YHSLYy.js";import{_ as Y}from"./Image.vue_vue_type_script_setup_true_lang-BK00jvUw.js";import{a as Z}from"./shop-CAVes-5Z.js";import{S as w}from"./StatusDot-Lzlci0Qd.js";import{u as tt}from"./useListRequest-qe4Wn36b.js";import{_ as f}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./format-DdZABYp4.js";const et={class:"container"},at={class:"content_wrapper"},st={class:"container"},ot={class:"lyecs-table-list-warp"},lt={class:"list-table-tool lyecs-search-warp"},nt={class:"list-table-tool-row"},it={class:"simple-form-warp"},rt={class:"simple-form-field"},ct={class:"form-group"},dt={class:"control-container"},pt={class:"simple-form-field"},_t={class:"form-group"},ut={class:"list-table-tool-row mt20"},mt={class:"list-table-tool-col"},ht={class:"table-container"},ft={key:0},kt={key:0},bt={key:1},gt={key:0,class:"btn-link green"},yt={key:1,class:"btn-link grey"},vt={key:3,style:{color:"red"}},Ct={key:4,style:{color:"green"}},St={key:0},wt={key:1},xt=["href"],Ot={class:"empty-warp"},Tt={key:0,class:"empty-bg"},It={key:0,class:"pagination-con"},Vt=j({__name:"List",setup(Dt){const D=C([{label:"全部",value:0,isShow:!0},{label:"开业",value:1,isShow:!0},{label:"暂停运营",value:4,isShow:!0},{label:"打烊",value:10,isShow:!0}]),k=E().currentRoute.value.query,L=A(),{listData:z,loading:b,total:g,filterParams:r,loadData:p,onSearchSubmit:y,onSortChange:N,onSelectChange:B}=tt({apiFunction:Z,idKey:"shopId",defaultParams:{sortField:"",sortOrder:"",keyword:"",status:0,page:1,size:L.get("pageSize")}});p();const U=h=>{r.status=h,r.page=1,p()},F=()=>{v(),p()},v=()=>{let h=window.location.href,o=new URL(h);o.search="",window.history.replaceState({},document.title,o.toString())},x=C(),m=C(0);G(()=>{k.id&&H.confirm(`为[${k.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{m.value=Number(k.id),x.value.show()}).catch(()=>{m.value=0,v()})});const P=()=>{m.value=0,v()};return(h,o)=>{const O=d("el-button"),K=d("TigInput"),M=d("TigTabs"),R=d("el-space"),_=d("el-table-column"),T=d("el-divider"),q=d("el-table"),$=d("a-spin");return n(),i("div",et,[s("div",at,[s("div",st,[s("div",ot,[s("div",lt,[s("div",nt,[s("div",it,[s("div",rt,[s("div",ct,[s("div",dt,[a(K,{modelValue:e(r).keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e(r).keyword=t),name:"keyword",placeholder:"输入店铺名称",onKeyup:J(e(y),["enter"]),clearable:"",onClear:e(y)},{append:l(()=>[a(O,{onClick:e(y)},{default:l(()=>o[4]||(o[4]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[4]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),s("div",pt,[s("div",_t,[a(M,{modelValue:e(r).status,"onUpdate:modelValue":o[1]||(o[1]=t=>e(r).status=t),tabs:D.value,onOnTabChange:U},null,8,["modelValue","tabs"])])])])]),s("div",ut,[s("div",mt,[a(R,null,{default:l(()=>[a(e(f),{ref_key:"dialogForm",ref:x,params:{act:"add",id:m.value},isDrawer:"",path:"shop/shop/Add",title:"新增店铺",width:"800px",onCloseCallback:P,onOkCallback:F},{default:l(()=>[a(O,{type:"primary"},{default:l(()=>o[5]||(o[5]=[V("新增店铺",-1)])),_:1,__:[5]})]),_:1},8,["params"])]),_:1})])])]),s("div",ht,[a($,{spinning:e(b)},{default:l(()=>[a(q,{data:e(z),loading:e(b),total:e(g),"row-key":"shopId",onSelectionChange:e(B),onSortChange:e(N)},{empty:l(()=>[s("div",Ot,[e(b)?c("",!0):(n(),i("div",Tt,"暂无数据"))])]),default:l(()=>[a(_,{label:"店铺名称"},{default:l(({row:t})=>[V(u(t.shopTitle||"--"),1)]),_:1}),a(_,{label:"店铺LOGO"},{default:l(({row:t})=>[a(e(Y),{src:t.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),a(_,{label:"商户名称",width:200},{default:l(({row:t})=>{var I;return[t.merchant?(n(),i("div",ft,[t.merchant.type==2?(n(),i("span",kt,u(((I=t.merchant.merchantData)==null?void 0:I.merchantName)||"--"),1)):c("",!0),t.merchant.type==1?(n(),i("span",bt,u(t.merchant.corporateName||"--"),1)):c("",!0),a(e(f),{params:{act:"detail",id:t.merchant.merchantId},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:e(p)},{default:l(()=>[t.merchant.status==1?(n(),i("a",gt,"(已认证)")):(n(),i("a",yt,"(未认证)"))]),_:2},1032,["params","onOkCallback"])])):c("",!0)]}),_:1}),a(_,{label:"店铺状态",sortable:"custom"},{default:l(({row:t})=>[t.status==10?(n(),S(w,{key:0,color:"red",flicker:!0})):c("",!0),t.status==4?(n(),S(w,{key:1,color:"red",flicker:!0})):c("",!0),t.status==1?(n(),S(w,{key:2,color:"green",flicker:!0})):c("",!0),t.status===10||t.status===4?(n(),i("span",vt,u(t.statusText),1)):t.status===1?(n(),i("span",Ct,u(t.statusText),1)):c("",!0)]),_:1}),a(_,{label:"店铺管理员",align:"center"},{default:l(({row:t})=>[t.merchant&&t.merchant.admin?(n(),i("div",St,[s("p",null,u(t.merchant.admin.username||"--"),1)])):(n(),i("div",wt,"--"))]),_:1}),a(_,{width:200,fixed:"right",label:"操作"},{default:l(({row:t})=>[a(e(f),{params:{act:"detail",id:t.shopId},isDrawer:"",path:"shop/shop/Info",title:"编辑店铺",width:"700px",onOkCallback:e(p)},{default:l(()=>o[6]||(o[6]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[6]},1032,["params","onOkCallback"]),a(T,{direction:"vertical"}),a(e(f),{params:{id:t.shopId},isDrawer:"",path:"shop/shop/Set",title:"店铺结算设置",width:"500px",onOkCallback:e(p)},{default:l(()=>o[7]||(o[7]=[s("a",{class:"btn-link"},"结算设置",-1)])),_:2,__:[7]},1032,["params","onOkCallback"]),a(T,{direction:"vertical"}),s("a",{href:e(Q)("shop",t.shopId),target:"_blank",class:"btn-link"},"查看店铺",8,xt)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(g)>0?(n(),i("div",It,[a(e(X),{page:e(r).page,"onUpdate:page":o[2]||(o[2]=t=>e(r).page=t),size:e(r).size,"onUpdate:size":o[3]||(o[3]=t=>e(r).size=t),total:e(g),onCallback:e(p)},null,8,["page","size","total","onCallback"])])):c("",!0)])])])])])}}}),jt=W(Vt,[["__scopeId","data-v-a83a9f53"]]);export{jt as default};

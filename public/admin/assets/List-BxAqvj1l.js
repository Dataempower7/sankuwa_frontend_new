import{d as A,b as E,r as k,x as G,ac as Q,o as H,an as J,f as c,g as f,h as i,i as a,l as u,z as s,m as l,j as e,a8 as W,Q as d,t as p,k as w,_ as X}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";/* empty css                                                                    */import{P as Y}from"./Pagination-C8J7-6Em.js";import{p as S}from"./format-BxqOrW-w.js";import{_ as Z}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{b as ee,c as te}from"./shop-CBisV8Of.js";import{S as C}from"./StatusDot-DuKP0Xmc.js";import{u as oe}from"./useListRequest-CprjeVXp.js";import{_ as se}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const ae={class:"container"},le={class:"content_wrapper"},ne={class:"container"},ie={class:"lyecs-table-list-warp"},re={class:"list-table-tool lyecs-search-warp"},ce={class:"list-table-tool-row"},de={class:"simple-form-warp"},pe={class:"simple-form-field"},ue={class:"form-group"},me={class:"control-container"},_e={class:"simple-form-field"},fe={class:"form-group"},he={class:"table-container"},ge={key:3,style:{color:"red"}},be={key:4,style:{color:"green"}},ye={class:"empty-warp"},ve={key:0,class:"empty-bg"},ke={key:0,class:"pagination-con"},we={key:0,class:"selected-action-warp selected-warp-left"},Se={class:"selected-action"},Ce=A({__name:"List",setup(Te){const m="店铺",h=E().currentRoute.value.query,$=k([{label:"全部",value:0,isShow:!0},{label:"开业",value:1,isShow:!0},{label:"停业",value:4,isShow:!0},{label:"打烊",value:10,isShow:!0}]),z=G(),{listData:B,loading:g,total:b,selectedIds:T,filterParams:n,loadData:y,onSearchSubmit:v,onSortChange:I,onSelectChange:L,onBatchAction:O}=oe({apiFunction:ee,idKey:"shopId",defaultParams:{sortField:"",sortOrder:"",keyword:"",status:0,page:1,size:z.get("pageSize"),shopType:Q()===1?1:2}}),N=async _=>{await O(_,te)};y();const U=_=>{n.status=_,n.page=1,y()},D=()=>{let _=window.location.href,o=new URL(_);o.search="",window.history.replaceState({},document.title,o.toString())},F=k(),x=k(0);return H(()=>{h.id&&J.confirm(`为[${h.companyName||"--"}]立即创建${m}?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{x.value=Number(h.id),F.value.show()}).catch(()=>{x.value=0,D()})}),(_,o)=>{const V=c("el-button"),M=c("TigInput"),P=c("TigTabs"),r=c("el-table-column"),K=c("el-table"),R=c("a-spin"),q=c("el-popconfirm"),j=c("el-space");return i(),f("div",ae,[a("div",le,[a("div",ne,[a("div",ie,[a("div",re,[a("div",ce,[a("div",de,[a("div",pe,[a("div",ue,[a("div",me,[s(M,{modelValue:e(n).keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e(n).keyword=t),name:"username",placeholder:`输入${e(m)}名称`,onKeyup:W(e(v),["enter"]),clearable:"",onClear:e(v)},{append:l(()=>[s(V,{onClick:e(v)},{default:l(()=>[...o[5]||(o[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","placeholder","onKeyup","onClear"])])])]),a("div",_e,[a("div",fe,[s(P,{modelValue:e(n).status,"onUpdate:modelValue":o[1]||(o[1]=t=>e(n).status=t),tabs:$.value,onOnTabChange:U},null,8,["modelValue","tabs"])])])])])]),a("div",he,[s(R,{spinning:e(g)},{default:l(()=>[s(K,{data:e(B),loading:e(g),total:e(b),"row-key":"shopId",onSelectionChange:e(L),onSortChange:e(I)},{empty:l(()=>[a("div",ye,[e(g)?u("",!0):(i(),f("div",ve,"暂无数据"))])]),default:l(()=>[s(r,{label:`${e(m)}名称`},{default:l(({row:t})=>[d(p(t.shopTitle||"--"),1)]),_:1},8,["label"]),s(r,{label:`${e(m)}LOGO`},{default:l(({row:t})=>[s(e(Z),{src:t.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1},8,["label"]),s(r,{label:`${e(m)}状态`},{default:l(({row:t})=>[t.status==10?(i(),w(C,{key:0,color:"red",flicker:!0})):u("",!0),t.status==4?(i(),w(C,{key:1,color:"red",flicker:!0})):u("",!0),t.status==1?(i(),w(C,{key:2,color:"green",flicker:!0})):u("",!0),t.status===10||t.status===4?(i(),f("span",ge,p(t.statusText),1)):t.status===1?(i(),f("span",be,p(t.statusText),1)):u("",!0)]),_:1},8,["label"]),s(r,{label:`${e(m)}资金`,sortable:"custom"},{default:l(({row:t})=>[d(p(e(S)(t.shopMoney)||0),1)]),_:1},8,["label"]),s(r,{label:"待结算金额",sortable:"custom"},{default:l(({row:t})=>[d(p(e(S)(t.unSettlementOrder)||0),1)]),_:1}),s(r,{label:"不可用资金",sortable:"custom"},{default:l(({row:t})=>[d(p(e(S)(t.frozenMoney)||0),1)]),_:1}),s(r,{label:"开店时间"},{default:l(({row:t})=>[d(p(t.addTime),1)]),_:1}),s(r,{width:120,fixed:"right",label:"操作"},{default:l(({row:t})=>[s(e(se),{params:{shopId:t.shopId},showClose:!1,showOnOk:!1,isDrawer:"",path:"shop/financialLog/List",title:"资金日志",width:"800px"},{default:l(()=>[...o[6]||(o[6]=[a("a",{class:"btn-link"},"查看资金日志",-1)])]),_:1},8,["params"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(b)>0?(i(),f("div",ke,[s(e(Y),{page:e(n).page,"onUpdate:page":o[2]||(o[2]=t=>e(n).page=t),size:e(n).size,"onUpdate:size":o[3]||(o[3]=t=>e(n).size=t),total:e(b),onCallback:e(y)},null,8,["page","size","total","onCallback"])])):u("",!0)]),e(T).length>0?(i(),f("div",we,[a("div",Se,[s(j,null,{default:l(()=>[a("span",null,[o[7]||(o[7]=d("已选择：",-1)),a("b",null,p(e(T).length),1),o[8]||(o[8]=d(" 项",-1))]),s(q,{title:"您确认要批量删除所选数据吗？",onConfirm:o[4]||(o[4]=t=>N("del"))},{reference:l(()=>[s(V,null,{default:l(()=>[...o[9]||(o[9]=[d("批量删除",-1)])]),_:1})]),_:1})]),_:1})])])):u("",!0)])])])])}}}),Me=X(Ce,[["__scopeId","data-v-9e566ff6"]]);export{Me as default};

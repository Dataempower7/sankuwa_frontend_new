import{d as I,x as v,r as S,f as r,g as _,h as u,i as e,t as z,z as o,m as s,j as t,dB as V,Q as D,q as P,l as h,P as B}from"./index-B52YIGC0.js";/* empty css             */import{_ as N}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./index-KjhYqCTY.js";/* empty css                                                                    */import{P as R}from"./Pagination-C8J7-6Em.js";import{g as U,a as F}from"./live-uCnADcgG.js";import{u as O}from"./useListRequest-CprjeVXp.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./format-BxqOrW-w.js";import"./index-C9ZdVeVx.js";const A={class:"container"},$={class:"content_wrapper"},j={class:"notice-warp"},E={class:"lyecs-table-list-warp"},K={class:"list-table-tool lyecs-search-warp"},M={class:"list-table-tool-row"},Q={class:"simple-form-warp"},G={class:"simple-form-field"},H={class:"form-group"},J={class:"simple-form-field"},W={class:"form-group"},X={class:"control-container"},Y={class:"table-container"},Z={class:"empty-warp"},tt={key:0,class:"empty-bg"},et={key:0,class:"pagination-con"},ut=I({__name:"List",setup(ot){const b=v(),w=S(v().domain),{listData:k,loading:p,total:c,filterParams:n,loadData:d,onSearchSubmit:m}=O({apiFunction:U,idKey:"roomId",defaultParams:{sortField:"",sortOrder:"",wechatLiveTitle:"",page:1,size:b.get("pageSize")}});d();const y=async()=>{p.value=!0;try{await F(),d()}catch(f){B.error(f.message)}finally{p.value=!1}};return(f,a)=>{const g=r("el-button"),C=r("TigInput"),x=r("el-form"),l=r("el-table-column"),T=r("el-table"),L=r("a-spin");return u(),_("div",A,[e("div",$,[e("div",j,[e("p",null,"积分兑换列表前台地址为："+z(w.value)+"/exchange/list.html",1)]),e("div",E,[e("div",K,[o(x,{model:t(n),onSubmit:P(t(m),["prevent"])},{default:s(()=>[e("div",M,[e("div",Q,[e("div",G,[e("div",H,[o(g,{type:"primary",icon:t(V),onClick:y},{default:s(()=>[...a[3]||(a[3]=[D("API更新直播间",-1)])]),_:1},8,["icon"]),a[4]||(a[4]=e("span",null,"（一天上限三百次）",-1))])]),e("div",J,[e("div",W,[e("div",X,[o(C,{modelValue:t(n).wechatLiveTitle,"onUpdate:modelValue":a[0]||(a[0]=i=>t(n).wechatLiveTitle=i),name:"wechatLiveTitle",placeholder:"输入直播名称",clearable:"",onClear:t(m)},{append:s(()=>[o(g,{onClick:t(m)},{default:s(()=>[...a[5]||(a[5]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])])])])]),_:1},8,["model","onSubmit"])]),e("div",Y,[o(L,{spinning:t(p)},{default:s(()=>[o(T,{data:t(k),"row-key":"roomId",total:t(c)},{empty:s(()=>[e("div",Z,[t(p)?h("",!0):(u(),_("div",tt,"暂无数据"))])]),default:s(()=>[o(l,{label:"房间ID",prop:"roomId",width:80}),o(l,{label:"直播名称",prop:"wechatLiveTitle",width:200}),o(l,{label:"开始日期",prop:"lastUpdateTime"}),o(l,{label:"结束日期",prop:"endTime"}),o(l,{label:"当前状态",prop:"liveStatusText"}),o(l,{label:"直播封面",prop:"pointsDeductedAmount"},{default:s(({row:i})=>[o(t(N),{src:i.coverImg,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(l,{label:"商品显示范围",prop:"actRangeText"}),o(l,{label:"操作",fixed:"right",width:100},{default:s(({row:i})=>[o(t(q),{isDrawer:"",onOkCallback:t(d),title:"编辑直播",width:"750px",path:"promotion/live/Info",params:{act:"detail",id:i.roomId}},{default:s(()=>[...a[6]||(a[6]=[e("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["onOkCallback","params"])]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),t(c)>0?(u(),_("div",et,[o(t(R),{page:t(n).page,"onUpdate:page":a[1]||(a[1]=i=>t(n).page=i),size:t(n).size,"onUpdate:size":a[2]||(a[2]=i=>t(n).size=i),total:t(c),onCallback:t(d)},null,8,["page","size","total","onCallback"])])):h("",!0)])])])])}}});export{ut as default};

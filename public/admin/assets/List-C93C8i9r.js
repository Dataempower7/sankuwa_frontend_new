import{d as E,aq as R,r as S,as as J,ar as X,o as $,P as Y,f as p,k as T,h as i,m as s,g as _,F as Z,p as ee,b as q,x as te,an as oe,i as a,z as l,j as e,l as g,a8 as N,W as ae,A as le,Q as h,t as b,_ as se}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as ne}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as ie}from"./Pagination-C8J7-6Em.js";import{_ as re}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{a as j,f as de}from"./shop-CBisV8Of.js";import{S as z}from"./StatusDot-DuKP0Xmc.js";import{u as pe}from"./useListRequest-CprjeVXp.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as ue}from"./SelectTimeInterval-BUZ-hmxo.js";import{_ as B}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./format-BxqOrW-w.js";import"./time-EzYK4E-P.js";const ce=E({__name:"SelectStore",props:R({modelValue:{type:[Number,String]},multiple:{type:Boolean,default:!1}},{storeId:{},storeIdModifiers:{}}),emits:R(["update:modelValue","onChange"],["update:storeId"]),setup(P,{emit:D}){const y=P,w=S(!0),I=J({keyword:""}),v=D,k=X(P,"storeId"),n=u=>{v("update:modelValue",u),v("onChange",u)};$(()=>{r()});const d=S([]),r=async u=>{w.value=!0,I.keyword=String(u||"");try{let c;c=await j({...I,shopType:2,size:99,select:1}),d.value=c.records}catch(c){Y.error(c.message)}finally{w.value=!1}},O=u=>{r(u)};return(u,c)=>{const U=p("el-option"),A=p("el-select");return i(),T(A,{modelValue:k.value,"onUpdate:modelValue":c[0]||(c[0]=m=>k.value=m),loading:w.value,filterable:"",remote:"",remoteMethod:O,multiple:y.multiple,placeholder:"请输入门店名称",clearable:"","reserve-keyword":"",onChange:n},{default:s(()=>[(i(!0),_(Z,null,ee(d.value,m=>(i(),T(U,{key:m.shopId,label:m.shopTitle,value:m.shopId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","multiple"])}}}),me={class:"container"},_e={class:"content_wrapper"},fe={class:"container"},ge={class:"lyecs-table-list-warp"},he={class:"list-table-tool lyecs-search-warp"},be={class:"advanced-search-warp list-table-tool-row"},ye={class:"simple-form-warp"},ve={class:"simple-form-field"},ke={class:"form-group"},Ce={class:"control-container"},we={class:"simple-form-field"},Se={class:"form-group"},Te={class:"control-container"},Ie={key:0,class:"simple-form-field"},Ve={class:"form-group"},xe={class:"control-container"},Pe={class:"simple-form-field"},De={class:"form-group"},Oe={class:"control-container"},Ue={class:"simple-form-field"},Ae={class:"form-group"},Me={class:"simple-form-warp"},Ne={class:"simple-form-field"},ze={class:"control-container"},Be={class:"list-table-tool-row mt20"},Fe={class:"list-table-tool-col"},Ke={class:"table-container"},Le={key:0},Re={key:1},qe={key:3,style:{color:"red"}},Ee={key:4,style:{color:"green"}},$e={class:"empty-warp"},je={key:0,class:"empty-bg"},Ge={key:0,class:"pagination-con"},Qe=E({__name:"List",setup(P){const D=S([{label:"全部",value:"",isShow:!0},{label:"启用",value:1,isShow:!0},{label:"禁用",value:10,isShow:!0}]),y=q().currentRoute.value.query,w=te(),{listData:I,loading:v,total:k,filterParams:n,loadData:d,onSearchSubmit:r,onSortChange:O,onSelectChange:u,resetParams:c}=pe({apiFunction:j,idKey:"shopId",defaultParams:{shopType:3,storeParentId:"",sortField:"",sortOrder:"",keyword:"",account:y.account||"",mainAccount:"",status:"",page:1,addStartTime:"",addEndTime:"",size:w.get("pageSize")}});d(),q().replace({query:{}});const U=x=>{n.status=x,n.page=1,d()},A=()=>{m(),d()},m=()=>{let x=window.location.href,t=new URL(x);t.search="",window.history.replaceState({},document.title,t.toString())},F=S(),V=S(0);$(()=>{y.id&&oe.confirm(`为[${y.companyName||"--"}]立即创建自提点?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{V.value=Number(y.id),F.value.show()}).catch(()=>{V.value=0,m()})});const G=()=>{V.value=0,m()};return(x,t)=>{const Q=p("TigTabs"),C=p("el-button"),M=p("TigInput"),K=p("el-space"),f=p("el-table-column"),L=p("el-divider"),W=p("el-table"),H=p("a-spin");return i(),_("div",me,[a("div",_e,[a("div",fe,[a("div",ge,[l(Q,{modelValue:e(n).status,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).status=o),tabs:D.value,onOnTabChange:U},null,8,["modelValue","tabs"]),a("div",he,[a("div",be,[a("div",ye,[a("div",ve,[a("div",ke,[t[10]||(t[10]=a("label",{class:"control-label"},[a("span",null,"自提点：")],-1)),a("div",Ce,[l(M,{modelValue:e(n).keyword,"onUpdate:modelValue":t[1]||(t[1]=o=>e(n).keyword=o),name:"keyword",placeholder:"输入自提点名称",onKeyup:N(e(r),["enter"]),clearable:"",onClear:e(r)},{append:s(()=>[l(C,{onClick:e(r)},{default:s(()=>[...t[9]||(t[9]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),a("div",we,[a("div",Se,[t[11]||(t[11]=a("label",{class:"control-label"},[a("span",null,"关联账号：")],-1)),a("div",Te,[l(M,{modelValue:e(n).account,"onUpdate:modelValue":t[2]||(t[2]=o=>e(n).account=o),name:"account",placeholder:"输入关联账号名称",onKeyup:N(e(r),["enter"]),clearable:"",onClear:e(r)},null,8,["modelValue","onKeyup","onClear"])])])]),e(ae)()=="admin"&&e(le)()?(i(),_("div",Ie,[a("div",Ve,[t[12]||(t[12]=a("label",{class:"control-label"},[a("span",null,"上级组织：")],-1)),a("div",xe,[l(e(ce),{storeId:e(n).storeParentId,"onUpdate:storeId":t[3]||(t[3]=o=>e(n).storeParentId=o),onOnChange:e(r)},null,8,["storeId","onOnChange"])])])])):g("",!0),a("div",Pe,[a("div",De,[t[13]||(t[13]=a("label",{class:"control-label"},[a("span",null,"主账号：")],-1)),a("div",Oe,[l(M,{modelValue:e(n).mainAccount,"onUpdate:modelValue":t[4]||(t[4]=o=>e(n).mainAccount=o),name:"mainAccount",placeholder:"输入主账号名称",onKeyup:N(e(r),["enter"]),clearable:"",onClear:e(r)},null,8,["modelValue","onKeyup","onClear"])])])]),a("div",Ue,[a("div",Ae,[t[14]||(t[14]=a("label",{class:"control-label"},[a("span",null,"创建时间：")],-1)),l(e(ue),{type:"date","start-date":e(n).addStartTime,"onUpdate:startDate":t[5]||(t[5]=o=>e(n).addStartTime=o),"end-date":e(n).addEndTime,"onUpdate:endDate":t[6]||(t[6]=o=>e(n).addEndTime=o)},null,8,["start-date","end-date"])])]),a("div",Me,[a("div",Ne,[t[17]||(t[17]=a("label",{class:"control-label"},null,-1)),a("div",ze,[l(C,{type:"primary",plain:"",onClick:e(r)},{default:s(()=>[...t[15]||(t[15]=[h("搜索",-1)])]),_:1},8,["onClick"]),l(C,{plain:"",onClick:e(c)},{default:s(()=>[...t[16]||(t[16]=[h("重置",-1)])]),_:1},8,["onClick"])])])])])]),a("div",Be,[a("div",Fe,[l(K,null,{default:s(()=>[l(e(B),{ref_key:"dialogForm",ref:F,params:{act:"add",id:V.value},isDrawer:"",path:"store/adminPages/selfPackManage/Info",title:"新增自提点",width:"950px",onCloseCallback:G,onOkCallback:A},{default:s(()=>[l(C,{type:"primary"},{default:s(()=>[...t[18]||(t[18]=[h("新增自提点",-1)])]),_:1})]),_:1},8,["params"])]),_:1})])])]),a("div",Ke,[l(H,{spinning:e(v)},{default:s(()=>[l(W,{data:e(I),loading:e(v),total:e(k),"row-key":"shopId",onSelectionChange:e(u),onSortChange:e(O)},{empty:s(()=>[a("div",$e,[e(v)?g("",!0):(i(),_("div",je,"暂无数据"))])]),default:s(()=>[l(f,{label:"自提点名称"},{default:s(({row:o})=>[h(b(o.shopTitle||"--"),1)]),_:1}),l(f,{label:"自提点LOGO"},{default:s(({row:o})=>[l(e(re),{src:o.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),l(f,{label:"上级组织",width:200},{default:s(({row:o})=>[a("div",null,[a("span",null,b(o.storeParentName||"--"),1)])]),_:1}),l(f,{label:"地址",width:200},{default:s(({row:o})=>[a("div",null,[o.shopRegionNames&&o.shopRegionNames.length>0?(i(),_("span",Le,b(o.shopRegionNames.join(""))+b(o.shopDetailedAddress||"--"),1)):(i(),_("span",Re,"--"))])]),_:1}),l(f,{label:"自提点状态",prop:"status",sortable:"custom"},{default:s(({row:o})=>[o.status==10?(i(),T(z,{key:0,color:"red",flicker:!0})):g("",!0),o.status==4?(i(),T(z,{key:1,color:"red",flicker:!0})):g("",!0),o.status==1?(i(),T(z,{key:2,color:"green",flicker:!0})):g("",!0),o.status===10||o.status===4?(i(),_("span",qe,b(o.statusText),1)):o.status===1?(i(),_("span",Ee,b(o.statusText),1)):g("",!0)]),_:1}),l(f,{label:"创建时间",prop:"addTime",sortable:"custom"},{default:s(({row:o})=>[h(b(o.addTime),1)]),_:1}),l(f,{width:200,fixed:"right",label:"操作"},{default:s(({row:o})=>[l(K,{size:0},{default:s(()=>[l(e(B),{params:{act:"detail",id:o.shopId},isDrawer:"",path:"store/adminPages/selfPackManage/Info",title:"编辑自提点",width:"950px",onOkCallback:e(d)},{default:s(()=>[...t[19]||(t[19]=[a("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"]),l(L,{direction:"vertical"}),l(e(B),{params:{id:o.shopId,type:"pickup"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:e(d),showClose:!1,showOnOk:!1},{default:s(()=>[l(C,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[...t[20]||(t[20]=[h("主账号管理",-1)])]),_:1})]),_:1},8,["params","onOkCallback"]),l(L,{direction:"vertical"}),l(e(ne),{params:{id:o.shopId},title:"删除后自提点信息将无法恢复，请确认是否删除该自提点？",requestApi:e(de),onAfterDelete:e(d)},{default:s(()=>[l(C,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[...t[21]||(t[21]=[h("删除",-1)])]),_:1})]),_:1},8,["params","requestApi","onAfterDelete"])]),_:2},1024)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(k)>0?(i(),_("div",Ge,[l(e(ie),{page:e(n).page,"onUpdate:page":t[7]||(t[7]=o=>e(n).page=o),size:e(n).size,"onUpdate:size":t[8]||(t[8]=o=>e(n).size=o),total:e(k),onCallback:e(d)},null,8,["page","size","total","onCallback"])])):g("",!0)])])])])])}}}),mt=se(Qe,[["__scopeId","data-v-e4a94d1a"]]);export{mt as default};

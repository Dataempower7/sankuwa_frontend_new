/* empty css             */import"./index-KjhYqCTY.js";import{P as N}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-CRFq-JzZ.js";import{d as j,R as E,x as K,r as C,f as r,g as v,h as g,i,z as o,m as n,k as Q,l as b,j as e,Q as u,t as I}from"./index-B52YIGC0.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-D-71VfIC.js";import{D as J}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as M}from"./Pagination-C8J7-6Em.js";import{a as X,u as S,d as Y,b as Z}from"./region-DzZbv6Nj.js";import{u as ee}from"./useListRequest-CprjeVXp.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const te={class:"container"},ae={class:"content_wrapper"},oe={class:"lyecs-table-list-warp"},ne={class:"list-table-tool lyecs-search-warp"},ie={class:"list-table-tool-row"},se={class:"list-table-tool-col"},le={key:1},re={class:"table-container"},de={style:{position:"relative"}},pe=["onClick"],ce={class:"empty-warp"},ue={key:0,class:"empty-bg"},me={key:0,class:"pagination-con"},Ne=j({__name:"List",setup(ge){E();const q=K(),{listData:z,loading:h,total:k,selectedIds:y,filterParams:s,loadData:d,onSortChange:P,onSelectChange:U,onBatchAction:V}=ee({apiFunction:X,idKey:"regionId",defaultParams:{sortField:"",sortOrder:"",keyword:"",parentId:0,page:1,size:q.get("pageSize")}}),B=async l=>{await V(l,Z)};d();const R=l=>{l&&typeof l=="number"&&(s.parentId=l),d()},_=C([]),f=C([]),F=()=>{d()},A=C(""),O=(l,a,c)=>{_.value.push(l),f.value.push(c),s.parentId=a,A.value=c,d()},$=()=>{s.parentId=_.value[_.value.length-1],A.value=f.value[f.value.length-1],_.value.pop(),f.value.pop(),d()};return(l,a)=>{const c=r("el-button"),W=r("el-popconfirm"),w=r("el-space"),H=r("el-form"),m=r("el-table-column"),x=r("el-divider"),L=r("el-table"),T=r("a-spin");return g(),v("div",te,[i("div",ae,[i("div",oe,[i("div",ne,[o(H,{model:e(s)},{default:n(()=>[i("div",ie,[i("div",se,[o(w,null,{default:n(()=>[e(s).parentId>0?(g(),Q(c,{key:0,onClick:$},{default:n(()=>[...a[3]||(a[3]=[i("i",{class:"iconfont icon-fanhui",style:{"font-size":"14px","padding-right":"5px"}},null,-1),u(" 返回上一级 ",-1)])]),_:1})):b("",!0),o(e(D),{params:{act:"add",regionId:e(s).parentId},isDrawer:"",path:"setting/region/Info",title:"添加地区",width:"580px",onOkCallback:e(d)},{default:n(()=>[o(c,{type:"primary"},{default:n(()=>[...a[4]||(a[4]=[u("添加地区",-1)])]),_:1})]),_:1},8,["params","onOkCallback"]),o(W,{title:"您确认要批量删除所选数据吗？",onConfirm:a[0]||(a[0]=t=>B("del"))},{reference:n(()=>[o(c,{disabled:e(y).length===0},{default:n(()=>[...a[5]||(a[5]=[u("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(y).length>0?(g(),v("span",le,[a[6]||(a[6]=u(" 已选择：",-1)),i("b",null,I(e(y).length),1),a[7]||(a[7]=u(" 项 ",-1))])):b("",!0)]),_:1})])])]),_:1},8,["model"])]),i("div",re,[o(T,{spinning:e(h)},{default:n(()=>[o(L,{data:e(z),loading:e(h),total:e(k),"row-key":"regionId",onSelectionChange:e(U),onSortChange:e(P)},{empty:n(()=>[i("div",ce,[e(h)?b("",!0):(g(),v("div",ue,"暂无数据"))])]),default:n(()=>[o(m,{type:"selection",width:"32"}),o(m,{width:200,label:"地区名称",prop:"regionId",sortable:"custom"},{default:n(({row:t})=>[i("div",de,[o(e(N),{"org-value":t.regionName,"onUpdate:orgValue":p=>t.regionName=p,max:30,params:{id:t.regionId,field:"regionName"},requestApi:e(S),label:"地区名称",type:"textarea"},{default:n(()=>[i("div",null,I(t.regionName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),o(m,{label:"首字母"},{default:n(({row:t})=>[o(e(N),{"org-value":t.firstWord,"onUpdate:orgValue":p=>t.firstWord=p,len:1,params:{id:t.regionId,field:"firstWord"},requestApi:e(S),label:"首字母",type:"input"},{default:n(()=>[i("div",null,I(t.firstWord||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(m,{label:"是否热门"},{default:n(({row:t})=>[o(e(G),{checked:t.isHot,"onUpdate:checked":p=>t.isHot=p,params:{id:t.regionId,field:"isHot"},requestApi:e(S)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(m,{width:200,fixed:"right",label:"操作"},{default:n(({row:t})=>[i("a",{class:"btn-link",onClick:p=>O(t.parentId,t.regionId,t.regionName)},"子地区",8,pe),o(x,{direction:"vertical"}),o(e(D),{params:{act:"add",regionId:t.regionId},isDrawer:"",path:"setting/region/Info",title:"添加子地区",width:"600",onOkCallback:e(d)},{default:n(()=>[...a[8]||(a[8]=[i("a",{class:"btn-link"},"添加子地区",-1)])]),_:1},8,["params","onOkCallback"]),o(x,{direction:"vertical"}),o(e(J),{params:{id:t.regionId},requestApi:e(Y),onAfterDelete:p=>R(t.parentId)},{default:n(()=>[...a[9]||(a[9]=[u("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(k)>0?(g(),v("div",me,[o(e(M),{page:e(s).page,"onUpdate:page":a[1]||(a[1]=t=>e(s).page=t),size:e(s).size,"onUpdate:size":a[2]||(a[2]=t=>e(s).size=t),total:e(k),onCallback:F},null,8,["page","size","total"])])):b("",!0)])])])])}}});export{Ne as default};

import{d as W,x as X,r as w,f as m,g as v,h as d,i as l,z as n,m as o,l as i,j as t,a8 as Z,Q as c,k as p,t as k,F as ee,ax as te,_ as ae}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{_ as le}from"./Switch.vue_vue_type_script_setup_true_lang-D-71VfIC.js";import{D}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as oe}from"./Pagination-C8J7-6Em.js";import{u as se,i as ne}from"./format-BxqOrW-w.js";import{S as de}from"./SelectBrand-tHlymKqU.js";import{_ as ie}from"./SelectCategory.vue_vue_type_script_setup_true_lang-Bb2xH4oQ.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as re}from"./SelectTimeInterval-BUZ-hmxo.js";import{_ as pe}from"./SelectVendor.vue_vue_type_script_setup_true_lang-BoLpkKlM.js";import{g as ue,a as me,P as A,u as q,b as ce}from"./product-CL06FDSJ.js";import{u as fe}from"./useListRequest-CprjeVXp.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./brand-CyfpB5Ly.js";import"./category-BhaHXalE.js";import"./category-D6KF81Ae.js";import"./time-EzYK4E-P.js";import"./suppliers-C_UEn0j3.js";const _e={class:"container"},ve={class:"content_wrapper"},be={class:"lyecs-table-list-warp"},ke={class:"list-table-tool lyecs-search-warp"},ge={class:"advanced-search-warp list-table-tool-row"},ye={class:"simple-form-warp"},Se={class:"simple-form-field"},he={class:"form-group"},Ce={class:"control-container"},Ie={class:"simple-form-field"},we={class:"form-group"},De={class:"control-container"},Te={class:"simple-form-field"},Oe={class:"form-group"},xe={class:"control-container"},Ae={class:"simple-form-field"},Pe={class:"form-group"},Ve={key:0,class:"simple-form-field"},qe={class:"form-group"},Ne={class:"control-container"},Ue={class:"simple-form-warp"},Fe={class:"simple-form-field"},ze={class:"control-container"},Be={key:0,class:"list-table-tool-row"},Re={class:"list-table-tool-col"},Ee={key:3},$e={class:"table-container"},Le={class:"flex"},Ke={key:0,class:"span-pic"},Ye=["href"],je=["src"],Me={class:"span-product-con"},Qe={class:"span-product-name",style:{"word-break":"break-all"}},Ge={key:0,class:"span-product-brand"},He={class:"span-con green"},Je={key:0,class:"green"},We={key:1,class:"red"},Xe={class:"empty-warp"},Ze={key:0,class:"empty-bg"},et={key:0,class:"pagination-con"},tt=W({__name:"List",setup(at){const N=X();w(0);const f=w(localStorage.getItem("adminType")),r=w(1),{listData:U,loading:P,total:T,selectedIds:h,filterParams:s,loadData:u,onSearchSubmit:y,onSortChange:F,onSelectChange:z,onBatchAction:B}=fe({apiFunction:f.value=="vendor"?ue:me,idKey:"id",defaultParams:{page:1,size:N.get("pageSize"),sortField:"",sortOrder:"",keyword:"",introType:"",shopId:"",vendorId:"",categoryId:"",brandId:"",productState:1,isRecycle:0,auditState:1,searchEndTime:"",searchStartTime:""}},["auditState","productState","isRecycle"]);u();const V=b=>{r.value=b,s.productState=b===1||b===0?b:"",f.value=="vendor"&&(s.auditState=b===6?2:1),f.value!=="vendor"&&(s.auditState=b===8?0:1),s.isRecycle=b===7?1:0,s.page=1,Object.keys(s).forEach(e=>{s[e]===void 0&&delete s[e]}),u()},R=()=>{s.sortField="",s.sortOrder="",s.keyword="",s.introType="",s.shopId="",s.vendorId="",s.categoryId="",s.brandId="",s.productState=1,s.isRecycle=0,s.auditState=1,s.searchEndTime="",s.searchStartTime="",V(r.value)},E=w([{label:"在售商品",value:1,isShow:!0},{label:"断供商品",value:0,isShow:!0},{label:"商品回收站",value:7,isShow:f.value=="vendor"},{label:"待审核商品",value:8,isShow:f.value=="admin"},{label:"审核失败商品",value:6,isShow:f.value=="vendor"}]),O=async b=>{await B(b,ce)};return(b,e)=>{const $=m("TigTabs"),g=m("el-button"),L=m("TigInput"),x=m("el-popconfirm"),C=m("el-space"),K=m("el-form"),_=m("el-table-column"),I=m("el-divider"),Y=m("el-icon"),j=m("el-dropdown-item"),M=m("el-dropdown-menu"),Q=m("el-dropdown"),G=m("el-table"),H=m("a-spin");return d(),v("div",_e,[l("div",ve,[l("div",be,[n($,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),tabs:E.value,onOnTabChange:V},null,8,["modelValue","tabs"]),l("div",ke,[n(K,{model:t(s),name:"form"},{default:o(()=>[l("div",ge,[l("div",ye,[l("div",Se,[l("div",he,[e[13]||(e[13]=l("label",{class:"control-label"},[l("span",null,"商品名称：")],-1)),l("div",Ce,[n(L,{modelValue:t(s).keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).keyword=a),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:Z(t(y),["enter"]),clearable:"",onClear:t(y)},{append:o(()=>[n(g,{onClick:t(y)},{default:o(()=>[...e[12]||(e[12]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),l("div",Ie,[l("div",we,[e[14]||(e[14]=l("label",{class:"control-label"},[l("span",null,"分类：")],-1)),l("div",De,[n(t(ie),{ref:"selectCategoryRef",categoryId:t(s).categoryId,"onUpdate:categoryId":e[2]||(e[2]=a=>t(s).categoryId=a)},null,8,["categoryId"])])])]),l("div",Te,[l("div",Oe,[e[15]||(e[15]=l("label",{class:"control-label"},[l("span",null,"品牌：")],-1)),l("div",xe,[n(t(de),{brandId:t(s).brandId,"onUpdate:brandId":e[3]||(e[3]=a=>t(s).brandId=a),onOnChange:t(y)},null,8,["brandId","onOnChange"])])])]),l("div",Ae,[l("div",Pe,[e[16]||(e[16]=l("label",{class:"control-label"},[l("span",null,"创建时间：")],-1)),n(t(re),{"end-date":t(s).searchEndTime,"onUpdate:endDate":e[4]||(e[4]=a=>t(s).searchEndTime=a),"start-date":t(s).searchStartTime,"onUpdate:startDate":e[5]||(e[5]=a=>t(s).searchStartTime=a),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),f.value=="admin"?(d(),v("div",Ve,[l("div",qe,[e[17]||(e[17]=l("label",{class:"control-label"},[l("span",null,"供应商：")],-1)),l("div",Ne,[n(t(pe),{vendorId:t(s).vendorId,"onUpdate:vendorId":e[6]||(e[6]=a=>t(s).vendorId=a),onOnChange:t(y)},null,8,["vendorId","onOnChange"])])])])):i("",!0)]),l("div",Ue,[l("div",Fe,[e[20]||(e[20]=l("label",{class:"control-label"},null,-1)),l("div",ze,[n(g,{type:"primary",plain:"",onClick:t(y)},{default:o(()=>[...e[18]||(e[18]=[c("搜索",-1)])]),_:1},8,["onClick"]),n(g,{plain:"",onClick:R},{default:o(()=>[...e[19]||(e[19]=[c("重置",-1)])]),_:1})])])])]),f.value=="vendor"?(d(),v("div",Be,[l("div",Re,[n(C,null,{default:o(()=>[n(t(S),{params:{act:"add"},isDrawer:"",path:"vendor/supplier/product/Info",title:"添加商品",width:"1100px",onOkCallback:t(u)},{default:o(()=>[n(g,{type:"primary"},{default:o(()=>[...e[21]||(e[21]=[c("添加商品",-1)])]),_:1})]),_:1},8,["onOkCallback"]),r.value==0||r.value==1?(d(),p(x,{key:0,title:"您确认要批量移入回收站吗？",onConfirm:e[7]||(e[7]=a=>O("recycle"))},{reference:o(()=>[n(g,{disabled:t(h).length===0},{default:o(()=>[...e[22]||(e[22]=[c("批量移入回收站",-1)])]),_:1},8,["disabled"])]),_:1})):i("",!0),r.value==7?(d(),p(x,{key:1,title:"您确认要批量还原吗？",onConfirm:e[8]||(e[8]=a=>O("restore"))},{reference:o(()=>[n(g,{disabled:t(h).length===0},{default:o(()=>[...e[23]||(e[23]=[c("批量还原",-1)])]),_:1},8,["disabled"])]),_:1})):i("",!0),r.value==1?(d(),p(x,{key:2,title:"您确认要批量断供吗？",onConfirm:e[9]||(e[9]=a=>O("outage"))},{reference:o(()=>[n(g,{disabled:t(h).length===0},{default:o(()=>[...e[24]||(e[24]=[c("批量断供",-1)])]),_:1},8,["disabled"])]),_:1})):i("",!0),t(h).length>0?(d(),v("span",Ee,[e[25]||(e[25]=c(" 已选择：",-1)),l("b",null,k(t(h).length),1),e[26]||(e[26]=c(" 项 ",-1))])):i("",!0)]),_:1})])])):i("",!0)]),_:1},8,["model"])]),l("div",$e,[n(H,{spinning:t(P)},{default:o(()=>[n(G,{data:t(U),total:t(T),"row-key":"id",onSelectionChange:t(z),onSortChange:t(F)},{empty:o(()=>[l("div",Xe,[t(P)?i("",!0):(d(),v("div",Ze,"暂无数据"))])]),default:o(()=>[n(_,{type:"selection",width:"32"}),n(_,{label:"商品名称",prop:"id",sortable:"custom","min-width":320},{default:o(({row:a})=>[l("div",Le,[a.picThumb?(d(),v("div",Ke,[l("a",{href:t(se)({path:"product",sn:a.productSn}),target:"_blank"},[l("img",{src:t(ne)(a.picThumb),height:"68",width:"68",alt:""},null,8,je)],8,Ye)])):i("",!0),l("div",Me,[l("div",Qe,[l("div",null,k(a.productName),1)]),a.vendorName?(d(),v("p",Ge,[e[27]||(e[27]=l("span",{class:"span-tit"},"供应商：",-1)),l("span",He,k(a.vendorName),1)])):i("",!0)])])]),_:1}),n(_,{width:100,label:"商品分类",prop:"productCategoryName",align:"center"},{default:o(({row:a})=>[l("div",null,k(a.productCategoryName||"--"),1)]),_:1}),n(_,{width:100,label:"品牌",prop:"productBrandName",align:"center"},{default:o(({row:a})=>[l("div",null,k(a.productBrandName||"--"),1)]),_:1}),n(_,{width:100,label:"供货价",prop:"supplyPrice",sortable:"custom",align:"center"},{default:o(({row:a})=>[l("div",null,k(a.supplyPrice),1)]),_:1}),n(_,{width:100,label:"库存",prop:"sumSkuStock",sortable:"custom",align:"center"},{default:o(({row:a})=>[l("div",null,k(a.sumSkuStock),1)]),_:1}),n(_,{width:100,label:"商品状态",prop:"productState",align:"center"},{default:o(({row:a})=>[f.value=="admin"?(d(),v(ee,{key:0},[a.productState===1?(d(),v("div",Je,"在供")):(d(),v("div",We,"断供"))],64)):(d(),p(t(le),{key:1,checked:a.productState,"onUpdate:checked":J=>a.productState=J,params:{id:a.id,field:"productState"},requestApi:t(A),onCallback:t(u)},null,8,["checked","onUpdate:checked","params","requestApi","onCallback"]))]),_:1}),n(_,{width:100,label:"销量",prop:"sumSalesVolume",sortable:"custom",align:"center"},{default:o(({row:a})=>[c(k(a.sumSalesVolume),1)]),_:1}),r.value===6?(d(),p(_,{key:0,width:120,label:"失败原因","show-overflow-tooltip":""},{default:o(({row:a})=>[c(k(a.auditFailReason),1)]),_:1})):i("",!0),f.value=="vendor"?(d(),p(_,{key:1,width:r.value!=6?180:80,fixed:"right",label:"操作"},{default:o(({row:a})=>[r.value!=6?(d(),p(C,{key:0},{default:o(()=>[a.productState===0&&r.value!=7?(d(),p(t(S),{key:0,maskClose:!1,params:{act:"detail",id:a.id},isDrawer:"",path:"vendor/supplier/product/Info",title:"编辑商品",width:"1100px",onOkCallback:t(u)},{default:o(()=>[...e[28]||(e[28]=[l("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"])):i("",!0),a.auditState===1&&a.productState===0&&r.value!=7?(d(),p(I,{key:1,direction:"vertical"})):i("",!0),a.auditState===1&&a.productState===0&&r.value!=7?(d(),p(t(D),{key:2,params:{id:a.id,field:"productState",val:1},requestApi:t(A),title:"确定起售该商品吗？",message:"操作成功",onAfterDelete:t(u)},{default:o(()=>[...e[29]||(e[29]=[c(" 起售 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])):i("",!0),a.productState===1&&r.value!=7?(d(),p(t(D),{key:3,params:{id:a.id,field:"productState",val:0},requestApi:t(A),title:"确定停止供应该商品吗？",message:"操作成功",onAfterDelete:t(u)},{default:o(()=>[...e[30]||(e[30]=[c(" 断供 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])):i("",!0),a.productState===1&&r.value!=7?(d(),p(I,{key:4,direction:"vertical"})):i("",!0),a.productState===1&&r.value!=7?(d(),p(t(S),{key:5,maskClose:!1,params:{act:"detail",id:a.id,examine:1},isDrawer:"",path:"vendor/supplier/product/Info",title:"查看商品",width:"1000px",onOkCallback:t(u)},{default:o(()=>[...e[31]||(e[31]=[l("a",{class:"btn-link"},"查看",-1)])]),_:1},8,["params","onOkCallback"])):i("",!0),r.value===7?(d(),p(t(D),{key:6,params:{ids:[a.id],type:"restore"},requestApi:t(q),title:"确定还原该商品吗？",message:"操作成功",onAfterDelete:t(u)},{default:o(()=>[...e[32]||(e[32]=[c(" 还原 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])):i("",!0),a.auditState===1&&r.value!=7?(d(),p(I,{key:7,direction:"vertical"})):i("",!0),a.auditState===1&&r.value!=7?(d(),p(Q,{key:8,trigger:"hover","hide-on-click":!1},{dropdown:o(()=>[n(M,null,{default:o(()=>[n(t(D),{params:{ids:[a.id],type:"recycle"},requestApi:t(q),title:"确定把该商品移入回收站吗？",message:"操作成功",onAfterDelete:t(u)},{default:o(()=>[n(j,null,{default:o(()=>[n(g,{style:{width:"100%"},link:"",type:"primary"},{default:o(()=>[...e[33]||(e[33]=[c("移入回收站",-1)])]),_:1})]),_:1})]),_:1},8,["params","requestApi","onAfterDelete"])]),_:2},1024)]),default:o(()=>[n(Y,{class:"btn-link",size:"12"},{default:o(()=>[n(t(te))]),_:1})]),_:2},1024)):i("",!0)]),_:2},1024)):i("",!0),r.value==6?(d(),p(C,{key:1},{default:o(()=>[n(t(S),{maskClose:!1,params:{act:"detail",id:a.id},isDrawer:"",path:"vendor/supplier/product/Info",title:"编辑商品",width:"1100px",onOkCallback:t(u)},{default:o(()=>[...e[34]||(e[34]=[l("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"])]),_:2},1024)):i("",!0)]),_:1},8,["width"])):i("",!0),f.value=="admin"?(d(),p(_,{key:2,width:150,fixed:"right",label:"操作"},{default:o(({row:a})=>[n(C,null,{default:o(()=>[n(t(S),{maskClose:!1,params:{act:"detail",id:a.id,examine:1},isDrawer:"",path:"vendor/supplier/product/Info",title:"查看商品",width:"1000px",showFooter:!1,onOkCallback:t(u)},{default:o(()=>[...e[35]||(e[35]=[l("a",{class:"btn-link"},"查看",-1)])]),_:1},8,["params","onOkCallback"]),r.value==8&&a.auditState===0?(d(),p(I,{key:0,direction:"vertical"})):i("",!0),r.value==8&&a.auditState===0?(d(),p(t(S),{key:1,maskClose:!1,params:{act:"detail",id:a.id},dialogClass:"noPadding",isDrawer:"",path:"vendor/supplier/product/Examine",title:"商品审核",width:"600px",onOkCallback:t(u)},{default:o(()=>[...e[36]||(e[36]=[l("a",{class:"btn-link"},"去处理",-1)])]),_:1},8,["params","onOkCallback"])):i("",!0)]),_:2},1024)]),_:1})):i("",!0)]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),t(T)>0?(d(),v("div",et,[n(t(oe),{page:t(s).page,"onUpdate:page":e[10]||(e[10]=a=>t(s).page=a),size:t(s).size,"onUpdate:size":e[11]||(e[11]=a=>t(s).size=a),total:t(T),onCallback:t(u)},null,8,["page","size","total","onCallback"])])):i("",!0)])])])])}}}),Ot=ae(tt,[["__scopeId","data-v-ebef81c6"]]);export{Ot as default};

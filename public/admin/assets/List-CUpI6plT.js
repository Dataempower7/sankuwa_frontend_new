import{d as Q,x as W,r as V,f as d,g as u,h as r,i as s,l as f,z as o,m as a,j as e,a8 as G,F as J,p as X,k as v,Q as n,t as g,H as Y,aw as I,P as Z,_ as tt}from"./index-B52YIGC0.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{D as H}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as et}from"./Pagination-C8J7-6Em.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as st}from"./SelectTimeInterval-BUZ-hmxo.js";import{f as k}from"./time-EzYK4E-P.js";import{g as lt,u as z,d as ot,a as at}from"./notice-Dfj5MN39.js";import{u as it}from"./useListRequest-CprjeVXp.js";import{_ as O}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const nt={class:"container"},dt={class:"content_wrapper"},rt={class:"lyecs-table-list-warp"},mt={class:"list-table-tool lyecs-search-warp"},pt={class:"advanced-search-warp list-table-tool-row"},ut={class:"simple-form-warp"},ft={class:"simple-form-field"},_t={class:"form-group"},ct={class:"control-container"},vt={key:0,class:"simple-form-field"},gt={class:"form-group"},bt={class:"control-container"},yt={class:"simple-form-field"},Dt={class:"form-group"},Yt={class:"flex flex-align-center"},kt={style:{"margin-left":"10px"}},Ct={class:"simple-form-warp"},Tt={class:"simple-form-field"},wt={class:"control-container"},Ht={class:"list-table-tool-row"},Mt={class:"simple-form-warp"},xt={class:"simple-form-field"},At={class:"table-container"},St={class:"tit-row flex flex-align-center"},Vt={key:0,class:"label"},It={class:"txt"},zt={class:"empty-warp"},Ot={key:0,class:"empty-bg"},ht={key:0,class:"pagination-con"},qt={key:0,class:"selected-action-warp selected-warp-left"},Ut={class:"selected-action"},Ft=Q({__name:"List",setup(Pt){const h=W(),{listData:q,loading:b,total:C,selectedIds:M,filterParams:i,loadData:p,onSearchSubmit:y,onSortChange:U,onSelectChange:F,resetParams:P}=it({apiFunction:lt,idKey:"productId",defaultParams:{page:1,size:h.get("pageSize"),sortField:"",sortOrder:"",title:"",status:"",endTime:"",startTime:""}});p();const T=V(-1),x=m=>{if(m===-1){T.value=m;return}i.startTime=Y().startOf("day").format("YYYY-MM-DD HH:mm:ss"),m===0&&(i.endTime=Y().endOf("day").format("YYYY-MM-DD HH:mm:ss")),m===1&&(i.startTime=Y().subtract(1,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),i.endTime=Y().subtract(1,"day").endOf("day").format("YYYY-MM-DD HH:mm:ss")),m===2&&(i.startTime=k(I(7,"sub"),"YYYY-MM-DD HH:mm:ss"),i.endTime=k(new Date,"YYYY-MM-DD HH:mm:ss")),m===3&&(i.startTime=k(I(30,"sub"),"YYYY-MM-DD HH:mm:ss"),i.endTime=k(new Date,"YYYY-MM-DD HH:mm:ss")),p()},w=V();return(async()=>{b.value=!0;try{const m=await at();w.value=m}catch(m){Z.error(m.message)}finally{b.value=!1}})(),(m,t)=>{const L=d("TigInput"),B=d("el-option"),K=d("el-select"),D=d("el-radio-button"),N=d("el-radio-group"),_=d("el-button"),j=d("el-form"),c=d("el-table-column"),A=d("el-divider"),S=d("el-space"),R=d("el-table"),$=d("a-spin");return r(),u("div",nt,[s("div",dt,[s("div",rt,[s("div",mt,[o(j,{model:e(i),name:"form"},{default:a(()=>[s("div",pt,[s("div",ut,[s("div",ft,[s("div",_t,[t[8]||(t[8]=s("label",{class:"control-label"},[s("span",null,"标题：")],-1)),s("div",ct,[o(L,{modelValue:e(i).title,"onUpdate:modelValue":t[0]||(t[0]=l=>e(i).title=l),name:"keyword",placeholder:"请输入内容标题",onKeyup:G(e(y),["enter"]),clearable:"",onClear:e(y)},null,8,["modelValue","onKeyup","onClear"])])])]),w.value?(r(),u("div",vt,[s("div",gt,[t[9]||(t[9]=s("label",{class:"control-label"},[s("span",null,"状态：")],-1)),s("div",bt,[o(K,{modelValue:e(i).status,"onUpdate:modelValue":t[1]||(t[1]=l=>e(i).status=l),placeholder:"请选择文章状态",onChange:e(y),clearable:""},{default:a(()=>[(r(!0),u(J,null,X(w.value,(l,E)=>(r(),v(B,{label:l,value:E},null,8,["label","value"]))),256))]),_:1},8,["modelValue","onChange"])])])])):f("",!0),s("div",yt,[s("div",Dt,[t[14]||(t[14]=s("label",{class:"control-label"},[s("span",null,"推送时间：")],-1)),s("div",Yt,[o(e(st),{"start-date":e(i).startTime,"onUpdate:startDate":t[2]||(t[2]=l=>e(i).startTime=l),"end-date":e(i).endTime,"onUpdate:endDate":t[3]||(t[3]=l=>e(i).endTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:t[4]||(t[4]=l=>x(-1))},null,8,["start-date","end-date"]),s("div",kt,[o(N,{class:"itemWidth",modelValue:T.value,"onUpdate:modelValue":t[5]||(t[5]=l=>T.value=l),onChange:x},{default:a(()=>[o(D,{value:0},{default:a(()=>[...t[10]||(t[10]=[n("今天",-1)])]),_:1}),o(D,{value:1},{default:a(()=>[...t[11]||(t[11]=[n("昨天",-1)])]),_:1}),o(D,{value:2},{default:a(()=>[...t[12]||(t[12]=[n("近7天",-1)])]),_:1}),o(D,{value:3},{default:a(()=>[...t[13]||(t[13]=[n("近30天",-1)])]),_:1})]),_:1},8,["modelValue"])])])])]),s("div",Ct,[s("div",Tt,[t[17]||(t[17]=s("label",{class:"control-label"},null,-1)),s("div",wt,[o(_,{type:"primary",plain:"",onClick:e(y)},{default:a(()=>[...t[15]||(t[15]=[n("搜索",-1)])]),_:1},8,["onClick"]),o(_,{plain:"",onClick:e(P)},{default:a(()=>[...t[16]||(t[16]=[n("重置",-1)])]),_:1},8,["onClick"])])])])])]),s("div",Ht,[s("div",Mt,[s("div",xt,[o(e(O),{isDrawer:"",onOkCallback:e(p),title:"添加活动通知",width:"700px",path:"salesman/notice/Info",params:{act:"add"}},{default:a(()=>[o(_,{type:"primary"},{default:a(()=>[...t[18]||(t[18]=[n("立即新建",-1)])]),_:1})]),_:1},8,["onOkCallback"])])])])]),_:1},8,["model"])]),s("div",At,[o($,{spinning:e(b)},{default:a(()=>[o(R,{data:e(q),total:e(C),"row-key":"productId",onSelectionChange:e(F),onSortChange:e(U)},{empty:a(()=>[s("div",zt,[e(b)?f("",!0):(r(),u("div",Ot,"暂无数据"))])]),default:a(()=>[o(c,{label:"标题",prop:"productId",width:250,fixed:"left","show-overflow-tooltip":""},{default:a(({row:l})=>[s("div",St,[l.isTop!=0?(r(),u("div",Vt,"置顶")):f("",!0),s("div",It,g(l.title),1)])]),_:1}),o(c,{label:"推送时间",width:200,sortable:"custom"},{default:a(({row:l})=>[n(g(l.startTime),1)]),_:1}),o(c,{label:"失效时间",width:200,sortable:"custom"},{default:a(({row:l})=>[n(g(l.endTime||"--"),1)]),_:1}),o(c,{label:"状态"},{default:a(({row:l})=>[n(g(l.statusText),1)]),_:1}),o(c,{width:200,fixed:"right",label:"操作"},{default:a(({row:l})=>[o(S,{size:0},{default:a(()=>[l.isTop!=0?(r(),v(e(H),{key:0,onAfterDelete:e(p),requestApi:e(z),params:{id:l.id,field:"isTop",val:0},title:"确定取消置顶吗？"},{default:a(()=>[...t[19]||(t[19]=[n("取消置顶",-1)])]),_:1},8,["onAfterDelete","requestApi","params"])):f("",!0),l.isTop!=0?(r(),v(A,{key:1,direction:"vertical"})):f("",!0),o(e(O),{params:{act:"detail",id:l.id},isDrawer:"",path:"salesman/notice/Info",title:"编辑内容",width:"700px",onOkCallback:e(p)},{default:a(()=>[...t[20]||(t[20]=[s("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"]),o(A,{direction:"vertical"}),l.isAvailable==1?(r(),v(e(H),{key:2,onAfterDelete:e(p),requestApi:e(z),params:{id:l.id,field:"isAvailable",val:0},title:"失效后将不可恢复，确认失效？",message:"操作成功"},{default:a(()=>[...t[21]||(t[21]=[n("失效",-1)])]),_:1},8,["onAfterDelete","requestApi","params"])):(r(),v(e(H),{key:3,onAfterDelete:e(p),requestApi:e(ot),params:{id:l.id}},{default:a(()=>[...t[22]||(t[22]=[n("删除",-1)])]),_:1},8,["onAfterDelete","requestApi","params"]))]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(C)>0?(r(),u("div",ht,[o(e(et),{page:e(i).page,"onUpdate:page":t[6]||(t[6]=l=>e(i).page=l),size:e(i).size,"onUpdate:size":t[7]||(t[7]=l=>e(i).size=l),total:e(C),onCallback:e(p)},null,8,["page","size","total","onCallback"])])):f("",!0)]),e(M).length>0?(r(),u("div",qt,[s("div",Ut,[o(S,null,{default:a(()=>[s("span",null,[t[23]||(t[23]=n("已选择：",-1)),s("b",null,g(e(M).length),1),t[24]||(t[24]=n(" 项",-1))]),o(_,null,{default:a(()=>[...t[25]||(t[25]=[n("设置等级",-1)])]),_:1}),o(_,null,{default:a(()=>[...t[26]||(t[26]=[n("分组",-1)])]),_:1}),o(_,null,{default:a(()=>[...t[27]||(t[27]=[n("清退",-1)])]),_:1})]),_:1})])])):f("",!0)])])])}}}),le=tt(Ft,[["__scopeId","data-v-6b6fc77c"]]);export{le as default};

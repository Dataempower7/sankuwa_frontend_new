import{d as B,x as D,r as N,b as z,o as K,g as n,i as s,z as r,m as p,j as o,l as i,P as j,f as m,h as l,a8 as $,F as h,p as k,k as w,Q as I,t as d,n as E,_ as M}from"./index-B52YIGC0.js";/* empty css             */import{S as Q}from"./SortButton-CPyUGKlg.js";/* empty css                                                                    */import{P as G}from"./Pagination-C8J7-6Em.js";import{P as H}from"./ProductCard-8OYszTHR.js";import{g as J,a as W,b as X}from"./aftersales-Bt16NHXV.js";import{p as Y}from"./format-BxqOrW-w.js";import{u as Z}from"./useListRequest-CprjeVXp.js";import{_ as ss}from"./ListBtn.vue_vue_type_script_setup_true_lang-BXyP_h6T.js";import"./index-KjhYqCTY.js";import"./index-C9ZdVeVx.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const ts={class:"container"},es={class:"content_wrapper"},os={class:"lyecs-table-list-warp"},as={class:"list-table-tool lyecs-search-warp"},ls={class:"advanced-search-warp list-table-tool-row"},ns={class:"simple-form-warp"},rs={class:"simple-form-field"},is={class:"form-group"},ds={class:"control-container"},us={class:"simple-form-field"},ps={class:"form-group"},cs={class:"control-container"},ms={class:"simple-form-field"},_s={class:"form-group"},fs={class:"control-container"},ys={class:"simple-form-warp"},vs={class:"simple-form-field"},bs={class:"control-container"},gs={class:"table-container"},hs={class:"custom-table"},ks={class:"custom-table"},ws={class:"data-tr"},Cs={colspan:"4"},Ts={class:"check-box"},Ns={class:"check-box"},Is={class:"check-box"},Ss={key:1,class:"check-box"},Vs={key:3,class:"check-box"},Fs={class:"displayRow flex-justify-between"},xs={class:"displayColumn textR whiteSN widthAuto"},zs={class:"red ml10"},Ls=["rowspan"],Ps=["rowspan"],Os=["rowspan"],Rs=["rowspan"],Us={key:0,class:"empty-warp"},qs={key:0,class:"empty-bg"},As={key:0,class:"pagination-con"},Bs=B({__name:"List",setup(Ds){const L=D();N(localStorage.getItem("adminType"));const c=z().currentRoute.value.query,{listData:P,loading:f,total:C,filterParams:a,loadData:y,onSearchSubmit:_}=Z({apiFunction:X,idKey:"aftersaleId",defaultParams:{sortField:"",sortOrder:"",keyword:"",aftersaleType:"",status:c.status||"",page:1,size:L.get("pageSize")}});y();const O=()=>{a.page=1,a.sortField="",a.sortOrder="",a.keyword="",a.aftersaleType="",a.status="",y()};z().replace({query:{}});const S=N({}),V=N({}),R=async()=>{f.value=!0;try{const v=await J();V.value=v;const e=await W();S.value=e,c&&c.status&&(a.status=c.status)}catch(v){j.error(v.message)}finally{f.value=!1}};return K(()=>{c&&c.status&&(a.status=Number(c.status)),R()}),(v,e)=>{const T=m("el-button"),U=m("TigInput"),F=m("el-option"),x=m("el-select"),q=m("el-form"),b=m("el-divider"),A=m("a-spin");return l(),n("div",ts,[s("div",es,[s("div",os,[s("div",as,[r(q,{model:o(a)},{default:p(()=>[s("div",ls,[s("div",ns,[s("div",rs,[s("div",is,[e[9]||(e[9]=s("label",{class:"control-label"},[s("span",null,"订单号：")],-1)),s("div",ds,[r(U,{modelValue:o(a).keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>o(a).keyword=t),name:"keyword",placeholder:"订单号",onKeyup:$(o(_),["enter"]),clearable:"",onClear:o(_)},{append:p(()=>[r(T,{onClick:o(_)},{default:p(()=>[...e[8]||(e[8]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),s("div",us,[s("div",ps,[e[10]||(e[10]=s("label",{class:"control-label"},[s("span",null,"申请类型：")],-1)),s("div",cs,[r(x,{modelValue:o(a).aftersaleType,"onUpdate:modelValue":e[1]||(e[1]=t=>o(a).aftersaleType=t),clearable:"",onChange:o(_)},{default:p(()=>[(l(!0),n(h,null,k(V.value,(t,u)=>(l(),w(F,{value:u,label:t},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),s("div",ms,[s("div",_s,[e[11]||(e[11]=s("label",{class:"control-label"},[s("span",null,"退换状态：")],-1)),s("div",fs,[r(x,{modelValue:o(a).status,"onUpdate:modelValue":e[2]||(e[2]=t=>o(a).status=t),clearable:"",onChange:o(_)},{default:p(()=>[(l(!0),n(h,null,k(S.value,(t,u)=>(l(),w(F,{value:u,label:t},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),s("div",ys,[s("div",vs,[e[14]||(e[14]=s("label",{class:"control-label"},null,-1)),s("div",bs,[r(T,{type:"primary",plain:"",onClick:o(_)},{default:p(()=>[...e[12]||(e[12]=[I("搜索",-1)])]),_:1},8,["onClick"]),r(T,{plain:"",onClick:O},{default:p(()=>[...e[13]||(e[13]=[I("重置",-1)])]),_:1})])])])])])]),_:1},8,["model"])]),s("div",gs,[r(A,{spinning:o(f)},{default:p(()=>[s("table",hs,[s("thead",null,[s("tr",null,[s("th",null,[r(Q,{sortField:o(a).sortField,"onUpdate:sortField":e[3]||(e[3]=t=>o(a).sortField=t),sortOrder:o(a).sortOrder,"onUpdate:sortOrder":e[4]||(e[4]=t=>o(a).sortOrder=t),sortName:"orderId",text:"退换货商品",onLoadData:e[5]||(e[5]=t=>o(y)())},null,8,["sortField","sortOrder"])]),e[15]||(e[15]=s("th",null,"售后原因",-1)),e[16]||(e[16]=s("th",null,"服务类型",-1)),e[17]||(e[17]=s("th",null,"售后状态",-1)),e[18]||(e[18]=s("th",null,"操作",-1))])])]),(l(!0),n(h,null,k(o(P),t=>(l(),n("table",ks,[s("thead",null,[s("tr",ws,[s("th",Cs,[s("span",Ts,"订单编号："+d(t.orderSn),1),r(b,{direction:"vertical"}),s("span",Ns,"售后编号："+d(t.aftersalesSn),1),r(b,{direction:"vertical"}),s("span",Is,"申请时间："+d(t.addTime),1),t.shippingTime?(l(),w(b,{key:0,direction:"vertical"})):i("",!0),t.userName?(l(),n("span",Ss,"发货时间："+d(t.shippingTime),1)):i("",!0),t.userName?(l(),w(b,{key:2,direction:"vertical"})):i("",!0),t.userName?(l(),n("span",Vs,"申请人："+d(t.userName),1)):i("",!0)])])]),s("tbody",null,[(l(!0),n(h,null,k(t.aftersalesItems,(u,g)=>(l(),n("tr",null,[s("td",null,[s("div",Fs,[r(o(H),{picThumb:u.picThumb,productId:u.productId,productName:u.productName},null,8,["picThumb","productId","productName"]),s("div",xs,[s("div",null,d(o(Y)(u.price)),1),s("div",null,[I(" × "+d(u.quantity),1),s("span",zs,"(退货数量："+d(u.number)+")",1)]),e[19]||(e[19]=s("div",null,null,-1))])])]),g==0?(l(),n("td",{key:0,rowspan:t.aftersalesItems.length},[s("p",null,d(t.aftersaleReason||"-"),1)],8,Ls)):i("",!0),g==0?(l(),n("td",{key:1,rowspan:t.aftersalesItems.length},[s("span",null,d(t.aftersalesTypeName),1)],8,Ps)):i("",!0),g==0?(l(),n("td",{key:2,rowspan:t.aftersalesItems.length},[s("span",{class:E({orange:t.status===0,black:t.status===1||t.status===2||t.status===4,gray:t.status===3,green:t.status===5})},d(t.statusName),3)],8,Os)):i("",!0),g==0?(l(),n("td",{key:3,rowspan:t.aftersalesItems.length},[r(ss,{item:t,onCallback:o(y)},null,8,["item","onCallback"])],8,Rs)):i("",!0)]))),256))])]))),256)),o(f)||o(C)==0?(l(),n("div",Us,[o(f)?i("",!0):(l(),n("div",qs,"暂无数据"))])):i("",!0)]),_:1},8,["spinning"]),o(C)>0?(l(),n("div",As,[r(o(G),{page:o(a).page,"onUpdate:page":e[6]||(e[6]=t=>o(a).page=t),size:o(a).size,"onUpdate:size":e[7]||(e[7]=t=>o(a).size=t),total:o(C),onCallback:o(y)},null,8,["page","size","total","onCallback"])])):i("",!0)])])])])}}}),st=M(Bs,[["__scopeId","data-v-b7514489"]]);export{st as default};

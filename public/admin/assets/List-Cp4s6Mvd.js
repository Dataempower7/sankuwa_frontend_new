import{d as Q,x as X,r as P,ah as Z,f as c,h as a,z as t,k as v,i as s,a1 as ee,e as d,l,L as n,t as p,al as te,K as oe,ak as Y,g,_ as le}from"./index-BLXOA87U.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";import"./index-DpgvsnVO.js";import{p as O}from"./format-DdZABYp4.js";/* empty css                                                                    */import{P as ae}from"./Pagination-w0YHSLYy.js";/* empty css                                                                  *//* empty css                                                                              */import{S as se}from"./SelectTimeInterval-ah59IDPd.js";import{f as u}from"./time-DX2Q3n6c.js";import{a as ne,b as re}from"./performanceSettlement-DBCraIIb.js";import{r as de}from"./export-CBIgYMwp.js";import{u as ie}from"./useListRequest-qe4Wn36b.js";import{_ as me}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const pe={class:"container"},ue={class:"content_wrapper"},_e={class:"lyecs-table-list-warp"},fe={class:"list-table-tool lyecs-search-warp"},ce={class:"advanced-search-warp list-table-tool-row"},ge={class:"simple-form-warp"},be={class:"simple-form-field mr10"},ve={class:"form-group"},ye={class:"control-container"},Ye={key:0,class:"simple-form-field"},De={class:"form-group"},we={class:"control-container"},Se={class:"simple-form-field"},Te={class:"form-group"},Ce={class:"control-container"},ke={class:"simple-form-field"},xe={class:"form-group"},Ve={class:"simple-form-field"},Me={class:"form-group"},Ie={class:"simple-form-warp"},Ue={class:"simple-form-field"},Ee={class:"control-container"},he={style:{"padding-top":"30px"}},ze={class:"extra"},Pe={key:0},Oe={key:1},$e={class:"dialog-footer"},Ke={class:"table-container"},Le={class:"flex flex-align-center"},Ne={class:"empty-warp"},Fe={key:0,class:"empty-bg"},qe={key:0,class:"pagination-con"},Be={key:0,class:"selected-action-warp selected-warp-left"},Ae={class:"selected-action"},Re=Q({__name:"List",setup(We){const x=X(),{listData:$,loading:V,total:T,selectedIds:M,filterParams:r,loadData:D,onSearchSubmit:w,onSortChange:K,onSelectChange:L,resetParams:N}=ie({apiFunction:re,idKey:"productId",defaultParams:{page:1,size:x.get("pageSize"),sortField:"",sortOrder:"",orderSn:"",orderTimeStart:"",orderTimeEnd:"",status:"",timeType:1}});D();const C=P(!1),b=Z({range:0,isExport:1}),F=async()=>{try{const i=await ne({...r,...b});de(i,"分销员业绩结算表")}catch(i){oe.error(i.message)}},k=P(-1),I=i=>{if(i===-1){k.value=i;return}r.orderTimeStart=u(new Date,"YYYY-MM-DD"),i===0&&(r.orderTimeEnd=u(new Date,"YYYY-MM-DD")),i===1&&(r.orderTimeStart=u(Y(1,"sub"),"YYYY-MM-DD"),r.orderTimeEnd=u(Y(1,"sub"),"YYYY-MM-DD")),i===2&&(r.orderTimeStart=u(Y(7,"sub"),"YYYY-MM-DD"),r.orderTimeEnd=u(new Date,"YYYY-MM-DD")),i===3&&(r.orderTimeStart=u(Y(30,"sub"),"YYYY-MM-DD"),r.orderTimeEnd=u(new Date,"YYYY-MM-DD")),i===4&&(r.orderTimeStart=u(Y(180,"sub"),"YYYY-MM-DD"),r.orderTimeEnd=u(new Date,"YYYY-MM-DD")),D()},q=(i,e)=>{let S="--",_=1;return i.commissionData&&(_=i.commissionType,S=`${_==3?"":"比例"}${e}${_==3?x.get("amountUnit"):"%"}（按实付金额计算）`),S};return(i,e)=>{const S=d("TigInput"),_=d("el-option"),U=d("el-select"),y=d("el-radio-button"),E=d("el-radio-group"),f=d("el-button"),h=d("el-radio"),B=d("el-form-item"),A=d("el-form"),R=d("el-dialog"),m=d("el-table-column"),W=d("el-icon"),j=d("el-tooltip"),G=d("el-table"),H=d("a-spin"),J=d("el-space");return g(),c("div",pe,[a("div",ue,[a("div",_e,[a("div",fe,[a("div",ce,[a("div",ge,[a("div",be,[a("div",ve,[e[12]||(e[12]=a("label",{class:"control-label"},[a("span",null,"订单编号：")],-1)),a("div",ye,[t(S,{modelValue:s(r).orderSn,"onUpdate:modelValue":e[0]||(e[0]=o=>s(r).orderSn=o),name:"orderSn",placeholder:"请输入订单编号",onKeyup:ee(s(w),["enter"]),clearable:"",onClear:s(w)},null,8,["modelValue","onKeyup","onClear"])])])]),s(r).timeType===1?(g(),c("div",Ye,[a("div",De,[e[13]||(e[13]=a("label",{class:"control-label"},[a("span",null,"结算状态：")],-1)),a("div",we,[t(U,{modelValue:s(r).status,"onUpdate:modelValue":e[1]||(e[1]=o=>s(r).status=o),placeholder:"请选择",onChange:s(w),clearable:""},{default:l(()=>[t(_,{label:"未结算",value:0}),t(_,{label:"已结算",value:1})]),_:1},8,["modelValue","onChange"])])])])):v("",!0),a("div",Se,[a("div",Te,[e[14]||(e[14]=a("label",{class:"control-label"},[a("span",null,"筛选类型：")],-1)),a("div",Ce,[t(U,{modelValue:s(r).timeType,"onUpdate:modelValue":e[2]||(e[2]=o=>s(r).timeType=o),placeholder:"请选择时间"},{default:l(()=>[t(_,{label:"下单时间",value:1}),t(_,{label:"退款时间",value:2})]),_:1},8,["modelValue"])])])]),a("div",ke,[a("div",xe,[e[15]||(e[15]=a("label",{class:"control-label"},[a("span",null,"筛选时间：")],-1)),t(s(se),{type:"date","start-date":s(r).orderTimeStart,"onUpdate:startDate":e[3]||(e[3]=o=>s(r).orderTimeStart=o),"end-date":s(r).orderTimeEnd,"onUpdate:endDate":e[4]||(e[4]=o=>s(r).orderTimeEnd=o),onCallback:e[5]||(e[5]=o=>I(-1))},null,8,["start-date","end-date"])])]),a("div",Ve,[a("div",Me,[t(E,{class:"itemWidth",modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),onChange:I},{default:l(()=>[t(y,{value:0},{default:l(()=>e[16]||(e[16]=[n("今天",-1)])),_:1,__:[16]}),t(y,{value:1},{default:l(()=>e[17]||(e[17]=[n("昨天",-1)])),_:1,__:[17]}),t(y,{value:2},{default:l(()=>e[18]||(e[18]=[n("近7天",-1)])),_:1,__:[18]}),t(y,{value:3},{default:l(()=>e[19]||(e[19]=[n("近30天",-1)])),_:1,__:[19]}),t(y,{value:4},{default:l(()=>e[20]||(e[20]=[n("近半年",-1)])),_:1,__:[20]})]),_:1},8,["modelValue"])])]),a("div",Ie,[a("div",Ue,[e[23]||(e[23]=a("label",{class:"control-label"},null,-1)),a("div",Ee,[t(f,{type:"primary",plain:"",onClick:s(w)},{default:l(()=>e[21]||(e[21]=[n("搜索",-1)])),_:1,__:[21]},8,["onClick"]),t(f,{plain:"",onClick:s(N)},{default:l(()=>e[22]||(e[22]=[n("重置",-1)])),_:1,__:[22]},8,["onClick"])])])])])])]),t(R,{modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=o=>C.value=o),title:"导出数据",width:"500",top:"30vh","append-to-body":"",style:{zIndex:2e3}},{footer:l(()=>[a("div",$e,[t(f,{onClick:e[8]||(e[8]=o=>C.value=!1)},{default:l(()=>e[26]||(e[26]=[n("取消",-1)])),_:1,__:[26]}),t(f,{type:"primary",onClick:F},{default:l(()=>e[27]||(e[27]=[n(" 导出 ",-1)])),_:1,__:[27]})])]),default:l(()=>[a("div",he,[t(A,{model:b,"label-width":"100px"},{default:l(()=>[t(B,{label:"导出维度："},{default:l(()=>[a("div",null,[t(E,{modelValue:b.range,"onUpdate:modelValue":e[7]||(e[7]=o=>b.range=o)},{default:l(()=>[t(h,{value:0},{default:l(()=>e[24]||(e[24]=[n("商品维度",-1)])),_:1,__:[24]}),t(h,{value:1},{default:l(()=>e[25]||(e[25]=[n("订单维度",-1)])),_:1,__:[25]})]),_:1},8,["modelValue"]),a("div",ze,[b.range==0?(g(),c("div",Pe,"以商品维度导出，每个商品展示一行")):v("",!0),b.range==1?(g(),c("div",Oe,"以订单维度导出，每个订单展示一行")):v("",!0)])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"]),a("div",Ke,[t(H,{spinning:s(V)},{default:l(()=>[t(G,{data:s($),total:s(T),"row-key":"productId",onSelectionChange:s(L),onSortChange:s(K)},{empty:l(()=>[a("div",Ne,[s(V)?v("",!0):(g(),c("div",Fe,"暂无数据"))])]),default:l(()=>[t(m,{type:"selection",width:"32",fixed:"left"}),t(m,{label:"订单号",prop:"orderId",width:190,fixed:"left"},{default:l(({row:o})=>[t(s(me),{params:{act:"detail",id:o.orderUserInfo.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+o.orderUserInfo.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:s(D)},{default:l(()=>[t(f,{link:"",type:"primary"},{default:l(()=>[n(p(o.orderUserInfo.orderSn),1)]),_:2},1024)]),_:2},1032,["params","title","onCallback"])]),_:1}),t(m,{prop:"orderAmount",width:140},{header:l(()=>[a("div",Le,[e[29]||(e[29]=a("p",null,"成交金额",-1)),t(j,{placement:"bottom-start",effect:"light"},{content:l(()=>e[28]||(e[28]=[n(" 不计运费、税费和附加费 ",-1)])),default:l(()=>[t(W,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[t(s(te))]),_:1})]),_:1})])]),default:l(({row:o})=>[n(p(s(O)(o.userOrderItem.totalProductMoney)),1)]),_:1}),t(m,{label:"分销员",width:140},{default:l(({row:o})=>[n(p(o.salesman.baseUserInfo.nickname||o.salesman.baseUserInfo.username),1)]),_:1}),t(m,{label:"客户",width:140},{default:l(({row:o})=>[n(p(o.orderUserInfo.user.nickname||"-"),1)]),_:1}),t(m,{label:"收益类型",width:140},{default:l(({row:o})=>e[30]||(e[30]=[n(" 商品佣金 ",-1)])),_:1}),t(m,{label:"收益组成",width:240},{default:l(({row:o})=>[n(p(q(o.salesmanProductData,o.profitComposition)),1)]),_:1}),t(m,{label:"所属分组",width:240},{default:l(({row:o})=>[n(p(o.salesman.groupInfo.groupName||"-"),1)]),_:1}),t(m,{label:"收益",width:240},{default:l(({row:o})=>[n(p(s(O)(o.amount)),1)]),_:1}),t(m,{label:"结算方式",width:140},{default:l(({row:o})=>{var z;return[n(p(((z=o.salesmanSettlementData)==null?void 0:z.settlementType)==1?"系统结算":"人工结算"),1)]}),_:1}),t(m,{label:"结算状态",width:140,fixed:"right"},{default:l(({row:o})=>[n(p(o.statusText),1)]),_:1}),t(m,{label:"退款时间",width:150,fixed:"right"},{default:l(({row:o})=>[n(p(o.refundTime||"--"),1)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),s(T)>0?(g(),c("div",qe,[t(s(ae),{page:s(r).page,"onUpdate:page":e[10]||(e[10]=o=>s(r).page=o),size:s(r).size,"onUpdate:size":e[11]||(e[11]=o=>s(r).size=o),total:s(T),onCallback:s(D)},null,8,["page","size","total","onCallback"])])):v("",!0)]),s(M).length>0?(g(),c("div",Be,[a("div",Ae,[t(J,null,{default:l(()=>[a("span",null,[e[31]||(e[31]=n("已选择：",-1)),a("b",null,p(s(M).length),1),e[32]||(e[32]=n(" 项",-1))]),t(f,null,{default:l(()=>e[33]||(e[33]=[n("设置等级",-1)])),_:1,__:[33]}),t(f,null,{default:l(()=>e[34]||(e[34]=[n("分组",-1)])),_:1,__:[34]}),t(f,null,{default:l(()=>e[35]||(e[35]=[n("清退",-1)])),_:1,__:[35]})]),_:1})])])):v("",!0)])])])}}}),it=le(Re,[["__scopeId","data-v-0f277138"]]);export{it as default};

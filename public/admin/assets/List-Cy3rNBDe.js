/* empty css             */import{d as q,as as F,x as $,r as m,o as j,g as p,i as t,t as i,j as s,Q as _,z as l,m as o,L as E,l as v,a7 as Q,k as D,P as M,f as c,h as d,ac as z,av as C,F as G,p as H,_ as J}from"./index-B52YIGC0.js";/* empty css                                                                    */import{P as K}from"./Pagination-C8J7-6Em.js";import{p as r}from"./format-BxqOrW-w.js";import"./index-KjhYqCTY.js";import{g as R}from"./dashboard-CPEWhlXg.js";import{b as W}from"./order-BVunCi_y.js";import{_ as X}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const Y={class:"container"},Z={class:"content_wrapper"},tt={class:"tit-box"},et={class:"tit"},at={class:"balance-box flex-wrap"},lt={class:"label"},ot={class:"title"},st={class:"tooltip-width"},nt={class:"num"},it={class:"label"},dt={class:"title"},rt={class:"num"},ut={class:"label"},pt={class:"title"},ct={class:"num"},_t={class:"lyecs-table-list-warp"},mt={class:"table-container"},vt={key:0},ft={key:1},bt={key:2},gt={key:0},yt={class:"empty-warp"},ht={key:0,class:"empty-bg"},kt={key:0,class:"pagination-con"},St=q({__name:"List",setup(xt){const N=F([{value:-1,label:"全部"},{value:0,label:"待支付"},{value:1,label:"待发货"},{value:2,label:"已发货"},{value:3,label:"已取消"},{value:4,label:"无效"},{value:5,label:"已完成"},{value:-2,label:"已删除"},{value:99,label:"待结算"}]),B=$(),A=m([]),b=m(!0),h=m(!0),g=m(0);m(!0);const u=F({page:1,size:B.get("pageSize"),orderStatus:-1}),y=m({shopMoney:0}),k=async()=>{b.value=!0;try{const n=await R();y.value=n}catch(n){M.error(n.message)}finally{b.value=!1}},L=async()=>{h.value=!0;try{const n=await W({...u});A.value=n.records,g.value=n.total}catch(n){M.error(n.message)}finally{h.value=!1}};j(()=>{k(),L()});const V=n=>{u.orderStatus=n!=99?n:"1,2,5",n==99&&(u.isSettlement=0),L()};return(n,e)=>{const S=c("el-icon"),x=c("el-tooltip"),w=c("el-button"),I=c("router-link"),O=c("el-tab-pane"),P=c("el-tabs"),f=c("el-table-column"),T=c("el-table"),U=Q("loading");return d(),p("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("span",null,i(s(z)()===2?"门店":"店铺")+"余额",1)])]),t("div",at,[t("div",lt,[t("div",ot,[_(" 可用"+i(s(z)()===2?"门店":"店铺")+"余额(元) ",1),l(x,{placement:"bottom",effect:"light"},{content:o(()=>[t("div",st,"可用"+i(s(z)()===2?"门店":"店铺")+"余额",1)]),default:o(()=>[l(S,null,{default:o(()=>[l(s(C))]),_:1})]),_:1}),l(I,{to:{path:"/withdraw/index",query:{type:2}}},{default:o(()=>[l(w,{type:"primary",link:""},{default:o(()=>[...e[4]||(e[4]=[_("提现记录",-1)])]),_:1})]),_:1})]),t("div",nt,i(s(r)(y.value.shopMoney)||0),1)]),t("div",it,[t("div",dt,[e[7]||(e[7]=_(" 待结算(元) ",-1)),l(x,{placement:"bottom",effect:"light"},{content:o(()=>[...e[5]||(e[5]=[t("div",{class:"tooltip-width"},"交易未完成的订单总额，消费者确认收货后将自动转入店铺余额",-1)])]),default:o(()=>[l(S,null,{default:o(()=>[l(s(C))]),_:1})]),_:1}),l(w,{type:"primary",link:"",onClick:e[0]||(e[0]=a=>V(99))},{default:o(()=>[...e[6]||(e[6]=[_("明细",-1)])]),_:1})]),t("div",rt,i(s(r)(y.value.unSettlementMoney)||0),1)]),t("div",ut,[t("div",pt,[e[9]||(e[9]=_(" 不可用余额(元) ",-1)),l(x,{placement:"bottom",effect:"light"},{content:o(()=>[...e[8]||(e[8]=[t("div",{class:"tooltip-width"},"提现中或者退款中的冻结店铺余额",-1)])]),default:o(()=>[l(S,null,{default:o(()=>[l(s(C))]),_:1})]),_:1})]),t("div",ct,i(s(r)(y.value.frozenMoney)||0),1)])]),e[11]||(e[11]=t("div",{class:"tit-box"},[t("div",{class:"tit"},[t("span",null,"最近交易记录")])],-1)),t("div",_t,[l(P,{type:"card",onTabChange:V,modelValue:u.orderStatus,"onUpdate:modelValue":e[1]||(e[1]=a=>u.orderStatus=a)},{default:o(()=>[(d(!0),p(G,null,H(N,a=>(d(),D(O,{label:a.label,name:a.value},null,8,["label","name"]))),256))]),_:1},8,["modelValue"]),t("div",mt,[E((d(),D(T,{data:A.value,loading:b.value,total:g.value,"row-key":"logId"},{empty:o(()=>[t("div",yt,[b.value?v("",!0):(d(),p("div",ht,"暂无数据"))])]),default:o(()=>[l(f,{label:"时间",prop:"addTime",width:"160"}),l(f,{label:"订单编号",prop:"orderSn",width:"160"}),l(f,{label:"金额(元)|明细"},{default:o(({row:a})=>[t("p",null,"订单运费： "+i(s(r)(a.shippingFee)),1),t("p",null,"附加费用： "+i(s(r)(a.serviceFee)),1),a.couponAmount>0?(d(),p("p",vt,"优惠券抵扣： "+i(s(r)(a.couponAmount)),1)):v("",!0),a.discountAmount>0?(d(),p("p",ft,"优惠券折扣： "+i(s(r)(a.discountAmount)),1)):v("",!0),a.pointsAmount>0?(d(),p("p",bt,"积分抵扣： "+i(s(r)(a.pointsAmount)),1)):v("",!0),t("p",null,[_(" 实收金额： "+i(s(r)(a.paidAmount))+" ",1),a.balance>0?(d(),p("span",gt,"(使用余额: "+i(s(r)(a.balance))+")",1)):v("",!0)])]),_:1}),l(f,{label:"状态",prop:"orderStatusName",width:"120"}),l(f,{label:"操作",width:"80"},{default:o(({row:a})=>[l(s(X),{params:{act:"detail",id:a.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+a.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:k},{default:o(()=>[l(w,{size:"small",link:"",type:"primary"},{default:o(()=>[...e[10]||(e[10]=[_(" 查看详情 ",-1)])]),_:1})]),_:1},8,["params","title"])]),_:1})]),_:1},8,["data","loading","total"])),[[U,h.value]]),g.value>0?(d(),p("div",kt,[l(s(K),{page:u.page,"onUpdate:page":e[2]||(e[2]=a=>u.page=a),size:u.size,"onUpdate:size":e[3]||(e[3]=a=>u.size=a),total:g.value,onCallback:k},null,8,["page","size","total"])])):v("",!0)])])])])}}}),Bt=J(St,[["__scopeId","data-v-37f452b8"]]);export{Bt as default};

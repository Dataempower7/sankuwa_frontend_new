import{d as B,x as F,r as _,as as O,o as U,f as i,g as v,h as b,i as s,z as t,m as o,a8 as $,j as m,Q as p,l as h,t as z,ah as K,P as y}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as I}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as R}from"./Pagination-C8J7-6Em.js";import{r as j,d as E,a as M,b as Q}from"./pushLog-B1DCt0c-.js";import{_ as G}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const H={class:"container"},J={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},se={class:"control-container"},oe={class:"simple-form-field"},ae={class:"form-group"},le={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},pe={class:"form-group"},ce={key:0},me={class:"table-container"},ue={class:"empty-warp"},_e={key:0,class:"empty-bg"},fe={key:0,class:"pagination-con"},Ie=B({__name:"List",setup(ge){const L=F(),w=_([]),u=_(!0),f=_(0),c=_([]);_(!1);const n=O({page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),r=async()=>{u.value=!0;try{const l=await M({...n});w.value=l.records,f.value=l.total}catch(l){y.error(l.message)}finally{u.value=!1}};U(()=>{r()});const k=()=>{r()},x=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},C=async l=>{try{const e=await Q(l,{ids:c.value});y.success("操作成功"),r()}catch(e){y.error(e.message)}},P=l=>{c.value=l.map(e=>e.brandId)};return(l,e)=>{const g=i("el-button"),V=i("TigInput"),S=i("el-popconfirm"),A=i("el-space"),D=i("el-form"),d=i("el-table-column"),N=i("el-divider"),T=i("el-table"),q=i("a-spin");return b(),v("div",H,[s("div",J,[s("div",W,[s("div",X,[t(D,{model:n},{default:o(()=>[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[s("div",se,[t(V,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>n.keyword=a),name:"keyword",placeholder:"输入标题",onKeyup:$(k,["enter"])},{append:o(()=>[t(g,{onClick:k},{default:o(()=>[...e[5]||(e[5]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),s("div",oe,[s("div",ae,[s("div",le,[t(m(G),{params:{act:"add"},isDrawer:"",path:"user/pushLog/Info",title:"添加推送",width:"600px",onOkCallback:r},{default:o(()=>[t(g,{type:"primary"},{default:o(()=>[...e[6]||(e[6]=[p("添加推送",-1)])]),_:1})]),_:1})])])]),s("div",ne,[s("div",ie,[s("div",re,[t(S,{title:"您确认要批量撤回所选数据吗？",onConfirm:e[1]||(e[1]=a=>C("recall"))},{reference:o(()=>[t(g,{disabled:c.value.length===0},{default:o(()=>[...e[7]||(e[7]=[p("批量撤回",-1)])]),_:1},8,["disabled"])]),_:1})])])]),s("div",de,[s("div",pe,[t(A,null,{default:o(()=>[t(S,{title:"您确认要批量删除所选数据吗？",onConfirm:e[2]||(e[2]=a=>C("del"))},{reference:o(()=>[t(g,{disabled:c.value.length===0},{default:o(()=>[...e[8]||(e[8]=[p("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),c.value.length>0?(b(),v("span",ce,[e[9]||(e[9]=p(" 已选择：",-1)),s("b",null,z(c.value.length),1),e[10]||(e[10]=p(" 项 ",-1))])):h("",!0)]),_:1})])])])])]),_:1},8,["model"])]),s("div",me,[t(q,{spinning:u.value},{default:o(()=>[t(T,{data:w.value,loading:u.value,total:f.value,"row-key":"messageLogId",onSelectionChange:P,onSortChange:x},{empty:o(()=>[s("div",ue,[u.value?h("",!0):(b(),v("div",_e,"暂无数据"))])]),default:o(()=>[t(d,{type:"selection",width:"32"}),t(d,{label:"标题",prop:"messageTitle"}),t(d,{label:"内容",prop:"messageContent"}),t(d,{label:"链接",prop:"messageLink"}),t(d,{width:100,label:"发送类型",prop:"sendTypeName"}),t(d,{width:100,label:"发送状态",prop:"brandId"},{default:o(({row:a})=>[s("span",{style:K({color:a.isRecall===0?"green":"red"})},z(a.statusName),5)]),_:1}),t(d,{width:160,label:"发送日期",prop:"sendTime"}),t(d,{width:100,fixed:"right",label:"操作"},{default:o(({row:a})=>[t(m(I),{params:{id:a.brandId},requestApi:m(j),onAfterDelete:r},{default:o(()=>[...e[11]||(e[11]=[p("撤回 ",-1)])]),_:1},8,["params","requestApi"]),t(N,{direction:"vertical"}),t(m(I),{params:{id:a.brandId},requestApi:m(E),onAfterDelete:r},{default:o(()=>[...e[12]||(e[12]=[p("删除 ",-1)])]),_:1},8,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(b(),v("div",fe,[t(m(R),{page:n.page,"onUpdate:page":e[3]||(e[3]=a=>n.page=a),size:n.size,"onUpdate:size":e[4]||(e[4]=a=>n.size=a),total:f.value,onCallback:r},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{Ie as default};

import{d as M,x as P,f as n,g as f,h as p,i as s,z as o,m as a,j as e,Q as d,l as c,t as C,q as R,ah as F,k as w}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as S}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as O}from"./Pagination-C8J7-6Em.js";import{g as U,r as $,d as j,b as E}from"./messageLog-Dz4OUNXC.js";import{u as K}from"./useListRequest-CprjeVXp.js";import{_ as Q}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},ee={class:"form-group"},te={class:"control-container"},oe={class:"simple-form-field"},se={class:"form-group"},ae={class:"simple-form-field"},le={class:"form-group"},ne={class:"simple-form-field"},ie={class:"form-group"},re={key:0},de={class:"table-container"},pe={class:"empty-warp"},me={key:0,class:"empty-bg"},ce={key:0,class:"pagination-con"},Se=M({__name:"List",setup(_e){const L=P(),{listData:D,loading:u,total:b,selectedIds:_,filterParams:r,loadData:m,onSearchSubmit:v,onSortChange:z,onSelectChange:A,onBatchAction:I}=K({apiFunction:U,idKey:"messageLogId",defaultParams:{page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",keyword:""}}),y=async h=>{await I(h,E)};return m(),(h,t)=>{const g=n("el-button"),T=n("TigInput"),k=n("el-popconfirm"),x=n("el-space"),V=n("el-form"),i=n("el-table-column"),q=n("el-divider"),B=n("el-table"),N=n("a-spin");return p(),f("div",G,[s("div",H,[s("div",J,[s("div",W,[o(V,{model:e(r),onSubmit:R(e(v),["prevent"])},{default:a(()=>[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[o(T,{modelValue:e(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>e(r).keyword=l),name:"keyword",placeholder:"输入标题",clearable:"",onClear:e(v)},{append:a(()=>[o(g,{onClick:e(v)},{default:a(()=>[...t[5]||(t[5]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),s("div",oe,[s("div",se,[o(e(Q),{params:{act:"add"},isDrawer:"",path:"user/messageLog/Info",title:"发送站内信",width:"560px",onOkCallback:e(m)},{default:a(()=>[o(g,{type:"primary"},{default:a(()=>[...t[6]||(t[6]=[d("发送站内信",-1)])]),_:1})]),_:1},8,["onOkCallback"])])]),s("div",ae,[s("div",le,[o(k,{title:"您确认要批量撤回所选数据吗？",onConfirm:t[1]||(t[1]=l=>y("recall"))},{reference:a(()=>[o(g,{disabled:e(_).length===0},{default:a(()=>[...t[7]||(t[7]=[d("批量撤回",-1)])]),_:1},8,["disabled"])]),_:1})])]),s("div",ne,[s("div",ie,[o(x,null,{default:a(()=>[o(k,{title:"您确认要批量删除所选数据吗？",onConfirm:t[2]||(t[2]=l=>y("del"))},{reference:a(()=>[o(g,{disabled:e(_).length===0},{default:a(()=>[...t[8]||(t[8]=[d("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(_).length>0?(p(),f("span",re,[t[9]||(t[9]=d(" 已选择：",-1)),s("b",null,C(e(_).length),1),t[10]||(t[10]=d(" 项 ",-1))])):c("",!0)]),_:1})])])])])]),_:1},8,["model","onSubmit"])]),s("div",de,[o(N,{spinning:e(u)},{default:a(()=>[o(B,{data:e(D),loading:e(u),total:e(b),"row-key":"messageLogId",onSelectionChange:e(A),onSortChange:e(z)},{empty:a(()=>[s("div",pe,[e(u)?c("",!0):(p(),f("div",me,"暂无数据"))])]),default:a(()=>[o(i,{type:"selection",width:"32"}),o(i,{label:"标题",prop:"messageTitle"}),o(i,{label:"内容",prop:"messageContent"}),o(i,{label:"链接",prop:"messageLink"}),o(i,{width:100,label:"发送类型",prop:"sendTypeName"}),o(i,{width:100,label:"发送状态",prop:"messageType"},{default:a(({row:l})=>[s("span",{style:F({color:l.messageType===0?"green":"red"})},C(l.statusName),5)]),_:1}),o(i,{width:160,label:"发送日期",prop:"sendTime"}),o(i,{width:120,fixed:"right",label:"操作"},{default:a(({row:l})=>[l.isRecall==0?(p(),w(e(S),{key:0,params:{id:l.messageLogId},title:"确认要撤回该条消息吗？",requestApi:e($),onAfterDelete:e(m)},{default:a(()=>[...t[11]||(t[11]=[d("撤回 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])):c("",!0),l.isRecall==0?(p(),w(q,{key:1,direction:"vertical"})):c("",!0),o(e(S),{params:{id:l.messageLogId},requestApi:e(j),onAfterDelete:e(m)},{default:a(()=>[...t[12]||(t[12]=[d("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(b)>0?(p(),f("div",ce,[o(e(O),{page:e(r).page,"onUpdate:page":t[3]||(t[3]=l=>e(r).page=l),size:e(r).size,"onUpdate:size":t[4]||(t[4]=l=>e(r).size=l),total:e(b),onCallback:e(m)},null,8,["page","size","total","onCallback"])])):c("",!0)])])])])}}});export{Se as default};

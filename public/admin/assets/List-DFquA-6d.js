import{a6 as U,d as P,x as R,r as _,as as h,aw as B,o as F,f as r,g as v,h as y,i as l,z as t,m as n,j as b,a8 as L,Q as k,l as x,t as q,P as D,_ as A}from"./index-B52YIGC0.js";import{p as K}from"./format-BxqOrW-w.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    */import{P as j}from"./Pagination-C8J7-6Em.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as O}from"./SelectTimeInterval-BUZ-hmxo.js";/* empty css             */import{f as T}from"./time-EzYK4E-P.js";import{r as Q}from"./export-Ds6vL4MA.js";import"./index-C9ZdVeVx.js";const X=i=>U({url:"panel/statisticsUser/userConsumptionRanking",method:"get",params:i}),G=i=>U({url:"panel/statisticsUser/userConsumptionRanking",method:"get",responseType:"arraybuffer",params:i}),H={class:"container"},J={class:"content_wrapper"},W={class:"filtrate-menu"},Z={class:"empty-warp"},$={key:0,class:"empty-bg"},ee={key:0,class:"pagination-con"},te=P({__name:"List",setup(i){const z=R(),p=_(!1),C=_(),d=_(0),o=h({page:1,size:z.get("pageSize"),keyword:"",startTime:T(B(30,"sub"),"YYYY-MM-DD"),endTime:T(new Date,"YYYY-MM-DD")}),m=async()=>{p.value=!0;try{const a=await X(o);C.value=a.records,d.value=a.total}catch(a){D.error(a.message),console.error(a)}p.value=!1},g=()=>{m()},u=_(!1),S=async()=>{u.value=!0;try{const a=await G({...o,isExport:"1"});u.value=!1,Q(a,"消费排行导出")}catch(a){D.error(a.message)}finally{u.value=!1}},Y=({prop:a,order:e})=>{console.log(a,e),o.sortField=a,o.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",m()},E=()=>{m()};return F(()=>{m()}),(a,e)=>{const c=r("el-form-item"),V=r("TigInput"),w=r("el-button"),I=r("el-form"),f=r("el-table-column"),M=r("el-table"),N=r("a-spin");return y(),v("div",H,[l("div",J,[e[7]||(e[7]=l("div",{class:"notice-warp"},"提示：查询的时间间隔上限默认为一月，如果数据量过大导至查询时间过久或者超时报错，请尝试缩小查询的时间间隔！",-1)),t(I,{model:o},{default:n(()=>[l("div",W,[t(c,{class:"mr-10"},{default:n(()=>[t(b(O),{type:"date","start-date":o.startTime,"onUpdate:startDate":e[0]||(e[0]=s=>o.startTime=s),"end-date":o.endTime,"onUpdate:endDate":e[1]||(e[1]=s=>o.endTime=s)},null,8,["start-date","end-date"])]),_:1}),t(c,{class:"mr-10"},{default:n(()=>[t(V,{modelValue:o.keyword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.keyword=s),placeholder:"输入会员名称或者手机号",onKeyup:L(g,["enter"]),clearable:"",onClear:g},null,8,["modelValue"])]),_:1}),t(c,{class:"mr-10"},{default:n(()=>[t(w,{plain:"",onClick:g},{default:n(()=>[...e[5]||(e[5]=[k("搜索",-1)])]),_:1})]),_:1}),t(c,{class:"mr-10"},{default:n(()=>[t(w,{plain:"",onClick:S,loading:u.value},{default:n(()=>[...e[6]||(e[6]=[k("导出EXCEL",-1)])]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),l("div",null,[t(N,{spinning:p.value},{default:n(()=>[t(M,{data:C.value,total:d.value,"row-key":"productId",onSortChange:Y},{empty:n(()=>[l("div",Z,[p.value?x("",!0):(y(),v("div",$,"暂无数据"))])]),default:n(()=>[t(f,{label:"会员名称",prop:"username"}),t(f,{label:"手机号",prop:"mobile"}),t(f,{label:"订单数",prop:"orderNum",sortable:"custom"}),t(f,{label:"消费总额",prop:"orderAmount",sortable:"custom"},{default:n(({row:s})=>[k(q(b(K)(s.orderAmount)),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),d.value>0?(y(),v("div",ee,[t(b(j),{page:o.page,"onUpdate:page":e[3]||(e[3]=s=>o.page=s),size:o.size,"onUpdate:size":e[4]||(e[4]=s=>o.size=s),total:d.value,onCallback:E},null,8,["page","size","total"])])):x("",!0)])])])}}}),ge=A(te,[["__scopeId","data-v-cc25d1d8"]]);export{ge as default};

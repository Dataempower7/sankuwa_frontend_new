import{a6 as $,d as Z,x as ss,r as _,as as ts,X as es,b as os,o as ls,f as v,g as a,h as l,i as s,l as d,z as r,m as u,a8 as as,F as L,p as z,k as D,j as p,Q as b,t as n,dC as M,n as rs,P as U,_ as ns}from"./index-B52YIGC0.js";/* empty css             *//* empty css                                                                    */import{S as R}from"./SortButton-CPyUGKlg.js";import{P as ds}from"./Pagination-C8J7-6Em.js";import{P as is}from"./ProductCard-8OYszTHR.js";import{r as us}from"./export-Ds6vL4MA.js";import"./index-KjhYqCTY.js";import{p as q}from"./format-BxqOrW-w.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as Y}from"./Tag-DafgHPRr.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as ps}from"./SelectTimeInterval-BUZ-hmxo.js";import{M as cs}from"./MobileCard-qEvTFKQw.js";import{s as ms}from"./promoter-BycjLyU3.js";import{_ as _s}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./time-EzYK4E-P.js";const vs=h=>$({url:"salesman/customerTransaction/list",method:"get",params:h}),fs=h=>$({url:"salesman/customerTransaction/list",method:"get",responseType:"arraybuffer",params:h}),ys={class:"container"},gs={class:"content_wrapper"},bs={class:"lyecs-table-list-warp"},hs={class:"list-table-tool lyecs-search-warp"},ks={class:"advanced-search-warp list-table-tool-row"},ws={class:"simple-form-warp"},Ts={class:"simple-form-field"},xs={class:"form-group"},Ss={class:"control-container"},Cs={class:"simple-form-field"},Is={class:"form-group"},Fs={class:"control-container"},Ns={class:"simple-form-field"},Os={class:"form-group"},Ls={class:"simple-form-warp"},zs={class:"simple-form-field"},Ds={class:"control-container"},Us={class:"list-table-tool-row"},Vs={class:"list-table-tool-col"},Es={class:"table-container"},Ps={class:"custom-table"},Bs={class:"custom-table"},As={class:"data-tr"},Ms={colspan:"6"},Rs={class:"check-box"},qs={class:"check-box"},Ys={class:"displayRow flex flex-align-center flex-justify-between"},$s={class:"displayColumn textR whiteSN widthAuto"},js=["rowspan"],Ks={class:"displayColumn textL"},Qs=["rowspan"],Xs={class:"displayColumn textL"},Gs={key:0},Hs=["rowspan"],Js={class:"displayColumn fz12 textL"},Ws={class:"gray"},Zs={class:"black"},st={class:"gray"},tt={class:"black"},et={class:"gray flex user-address"},ot={class:"black line1 value"},lt=["rowspan"],at={class:"displayColumn textL"},rt=["rowspan"],nt={class:"displayColumn textL"},dt={key:0},it={class:"gray"},ut=["rowspan"],pt=["rowspan"],ct={class:"displayColumn fz14"},mt={class:"gray"},_t={key:0,class:"empty-warp"},vt={key:0,class:"empty-bg"},ft={key:0,class:"pagination-con"},yt=Z({__name:"List",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(h){const V=ss(),F=_([]),w=_(!0),T=_(0),j=_([]),o=ts({page:1,size:V.get("pageSize"),sortField:"addTime",sortOrder:"desc",endTime:"",startTime:"",keyword:"",salesmanId:""}),K=()=>{o.page=1,o.size=V.get("pageSize"),o.sortField="addTime",o.sortOrder="desc",o.keyword="",o.endTime="",o.startTime="",o.salesmanId="",k()},k=async()=>{w.value=!0,j.value=[];try{const i=await vs({...o});if(i.records!==null){const t=i.records.map(c=>({...c}));F.value=t}else F.value=[];T.value=i.total}catch(i){U.error(i.message)}finally{w.value=!1}},x=h;es();const E=os().currentRoute.value.query;_(x.isDialog?x.act:String(E.act)),_(x.isDialog?x.id:Number(E.id)),ls(()=>{k()});const f=()=>{k()},N=_([]),O=_(!1),Q=async i=>{try{if(i){O.value=!0;const c=await ms({nickname:i});c.records.forEach(m=>{var C,I;m.value=m.salesmanId,m.key=m.salesmanId,m.label=((C=m.user)==null?void 0:C.nickname)||((I=m.user)==null?void 0:I.username)||"--"}),N.value=c.records}else N.value=[]}catch(t){U.error(t.message)}finally{O.value=!1}},S=_(!1),X=async()=>{S.value=!0;try{const i=await fs({...o,isExport:"1"});S.value=!1,us(i,"客户成交订单导出")}catch(i){U.error(i.message)}finally{S.value=!1}};return(i,t)=>{const c=v("el-button"),m=v("TigInput"),C=v("el-option"),I=v("el-select"),G=v("el-space"),H=v("el-divider"),J=v("el-tooltip"),W=v("a-spin");return l(),a("div",ys,[s("div",gs,[s("div",bs,[s("div",hs,[s("div",ks,[s("div",ws,[s("div",Ts,[s("div",xs,[t[13]||(t[13]=s("label",{class:"control-label"},[s("span",null,"订单信息：")],-1)),s("div",Ss,[r(m,{modelValue:o.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>o.keyword=e),name:"keyword",placeholder:"订单号/会员名称",onKeyup:as(f,["enter"]),clearable:"",onClear:f},{append:u(()=>[r(c,{onClick:f},{default:u(()=>[...t[12]||(t[12]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),s("div",Cs,[s("div",Is,[t[14]||(t[14]=s("label",{class:"control-label"},[s("span",null,"分销员：")],-1)),s("div",Fs,[r(I,{modelValue:o.salesmanId,"onUpdate:modelValue":t[1]||(t[1]=e=>o.salesmanId=e),filterable:"",remote:"","reserve-keyword":"",placeholder:"输入分销员昵称查询订单","remote-method":Q,onChange:f,loading:O.value},{default:u(()=>[(l(!0),a(L,null,z(N.value,e=>(l(),D(C,{key:e.key,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])])])]),s("div",Ns,[s("div",Os,[t[15]||(t[15]=s("label",{class:"control-label"},[s("span",null,"下单时间：")],-1)),r(p(ps),{"end-date":o.endTime,"onUpdate:endDate":t[2]||(t[2]=e=>o.endTime=e),"start-date":o.startTime,"onUpdate:startDate":t[3]||(t[3]=e=>o.startTime=e),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),s("div",Ls,[s("div",zs,[t[18]||(t[18]=s("label",{class:"control-label"},null,-1)),s("div",Ds,[r(c,{type:"primary",plain:"",onClick:f},{default:u(()=>[...t[16]||(t[16]=[b("搜索",-1)])]),_:1}),r(c,{plain:"",onClick:K},{default:u(()=>[...t[17]||(t[17]=[b("重置",-1)])]),_:1})])])])])])]),s("div",Us,[s("div",Vs,[r(G,null,{default:u(()=>[r(c,{onClick:X,loading:S.value},{default:u(()=>[...t[19]||(t[19]=[b(" 导出 ",-1)])]),_:1},8,["loading"])]),_:1})])]),s("div",Es,[r(W,{spinning:w.value},{default:u(()=>[s("table",Ps,[s("thead",null,[s("tr",null,[s("th",null,[r(R,{sortField:o.sortField,"onUpdate:sortField":t[4]||(t[4]=e=>o.sortField=e),sortOrder:o.sortOrder,"onUpdate:sortOrder":t[5]||(t[5]=e=>o.sortOrder=e),sortName:"salesmanId",text:"订单信息(下单时间排序)",onLoadData:t[6]||(t[6]=e=>f())},null,8,["sortField","sortOrder"])]),t[20]||(t[20]=s("th",null,"所属分销员",-1)),t[21]||(t[21]=s("th",null,"客户名称",-1)),t[22]||(t[22]=s("th",null,"收货人信息",-1)),t[23]||(t[23]=s("th",{style:{"text-align":"start"}},"收货时间",-1)),t[24]||(t[24]=s("th",{style:{"text-align":"start"}},"物流/支付信息",-1)),t[25]||(t[25]=s("th",{style:{"text-align":"start"}},"订单状态",-1)),s("th",null,[r(R,{sortField:o.sortField,"onUpdate:sortField":t[7]||(t[7]=e=>o.sortField=e),sortOrder:o.sortOrder,"onUpdate:sortOrder":t[8]||(t[8]=e=>o.sortOrder=e),sortName:"totalAmount",text:"订单金额",onLoadData:t[9]||(t[9]=e=>f())},null,8,["sortField","sortOrder"])])])])]),(l(!0),a(L,null,z(F.value,e=>(l(),a("table",Bs,[s("thead",null,[s("tr",As,[s("th",Ms,[s("span",Rs,"订单编号："+n(e.orderSn),1),r(H,{direction:"vertical"}),s("span",qs,"下单时间："+n(e.addTime),1),e.orderSource?(l(),D(J,{key:0,content:"订单来自"+e.orderSource+"下单",effect:"light",placement:"top"},{default:u(()=>[r(p(Y),{text:e.orderSource,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):d("",!0),e.isExchangeOrder?(l(),D(p(Y),{key:1,transparent:!0,color:"red",text:"积分兑换"})):d("",!0)])])]),s("tbody",null,[(l(!0),a(L,null,z(e.items,(y,g)=>{var P;return l(),a("tr",null,[s("td",null,[s("div",Ys,[r(p(is),{picThumb:y.picThumb,productId:y.productId,productName:y.productName,productType:y.productType,url:y.url},null,8,["picThumb","productId","productName","productType","url"]),s("div",$s,[s("div",null,n(p(q)(y.price)),1),s("div",null,"× "+n(y.quantity),1)])])]),g==0?(l(),a("td",{key:0,rowspan:e.items.length},[s("div",Ks,[s("div",null,n(e.salesmanName||"--"),1)])],8,js)):d("",!0),g==0?(l(),a("td",{key:1,rowspan:e.items.length},[s("div",Xs,[e.user?(l(),a("div",Gs,[r(p(_s),{params:{act:"detail",id:(P=e.user)==null?void 0:P.userId},isDrawer:"",path:"user/user/Detail",title:"用户信息",width:"800px",onOkCallback:k,showOnOk:!1},{default:u(()=>{var B,A;return[s("a",null,n(((B=e.user)==null?void 0:B.nickname)||((A=e.user)==null?void 0:A.username)||"--"),1)]}),_:2},1032,["params"])])):d("",!0)])],8,Qs)):d("",!0),g==0?(l(),a("td",{key:2,rowspan:e.items.length},[s("div",Js,[s("div",Ws,[t[26]||(t[26]=b(" 收货人： ",-1)),s("span",Zs,n(p(M)(e.consignee,1,1)),1)]),s("div",st,[t[27]||(t[27]=b(" 手机号： ",-1)),s("span",tt,[s("span",null,[r(cs,{mobile:e.mobile},null,8,["mobile"])])])]),s("div",et,[t[28]||(t[28]=s("span",{class:"label"}," 收货地址： ",-1)),s("span",ot,n(p(M)(e.userAddress,16,0)),1)])])],8,Hs)):d("",!0),g==0?(l(),a("td",{key:3,rowspan:e.items.length},[s("div",at,[s("div",null,[s("span",null,n(e.receivedTime||"--"),1)])])],8,lt)):d("",!0),g==0?(l(),a("td",{key:4,rowspan:e.items.length},[s("div",nt,[s("div",null,[s("span",null,n(e.payTypeId===1?"在线支付":e.payTypeId===2?"货到付款":"线下支付"),1)]),e.logisticsName?(l(),a("div",dt,[b(n(e.shippingTypeName)+" ",1),s("span",it,n(""+e.logisticsName),1)])):d("",!0)])],8,rt)):d("",!0),g==0?(l(),a("td",{key:5,rowspan:e.items.length},[s("span",{class:rs({orange:e.orderStatus===0,black:e.orderStatus===1||e.orderStatus===2||e.orderStatus===4,gray:e.orderStatus===3,green:e.orderStatus===5})},n(e.orderStatusName),3)],8,ut)):d("",!0),g==0?(l(),a("td",{key:6,rowspan:e.items.length},[s("div",ct,[s("div",null,n(p(q)(e.totalAmount)),1),s("div",mt,"(含运费："+n(e.shippingFee)+")",1)])],8,pt)):d("",!0)])}),256))])]))),256)),T.value==0?(l(),a("div",_t,[w.value?d("",!0):(l(),a("div",vt,"暂无数据"))])):d("",!0)]),_:1},8,["spinning"])]),T.value>0?(l(),a("div",ft,[r(p(ds),{page:o.page,"onUpdate:page":t[10]||(t[10]=e=>o.page=e),size:o.size,"onUpdate:size":t[11]||(t[11]=e=>o.size=e),total:T.value,onCallback:k},null,8,["page","size","total"])])):d("",!0)])])])}}}),Mt=ns(yt,[["__scopeId","data-v-6ff97f6b"]]);export{Mt as default};

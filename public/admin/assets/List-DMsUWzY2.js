import{a6 as ht,d as Nt,W as St,as as ft,r as vt,o as Tt,au as Pt,g as n,i as t,z as l,m as o,n as Vt,j as v,l as _,F as S,t as r,Q as u,k as b,P as _t,f as p,h as s,p as Yt,av as g,ap as zt,_ as At}from"./index-B52YIGC0.js";import Ct from"./OrderamountStatistics-C9kYQqs4.js";import Et from"./OrderNumberStatistics-DD8vCBPB.js";import{r as Mt}from"./export-Ds6vL4MA.js";import"./index-Bb6yjXMn.js";const Lt=x=>ht({url:"panel/salesStatistics/list",method:"get",params:x}),Ot=x=>ht({url:"panel/salesStatistics/list",method:"get",responseType:"arraybuffer",params:x}),Ut={class:"container"},Bt={class:"content_wrapper"},Ft={class:"filtrate-menu"},qt={class:"main-panel"},It={class:"main-panel-item"},jt={class:"main-panel-item-title"},Qt={class:"flex flex-align-center"},Wt={class:"main-panel-item-value"},Xt={class:"main-panel-item-increase"},Ht={key:0,class:"admin-iconfont red f12 up"},Jt={key:1,class:"admin-iconfont green f12"},Kt={class:"main-panel-item"},Zt={class:"main-panel-item-title"},$t={class:"flex flex-align-center"},ea={class:"main-panel-item-value"},ta={class:"main-panel-item-increase"},aa={key:0,class:"admin-iconfont red f12 up"},sa={key:1,class:"admin-iconfont green f12"},la={class:"main-panel-item"},na={class:"main-panel-item-title"},oa={class:"flex flex-align-center"},ia={class:"main-panel-item-value"},ra={class:"main-panel-item-increase"},da={key:0,class:"admin-iconfont red f12 up"},ua={key:1,class:"admin-iconfont green f12"},ma={key:0,class:"main-panel-item"},ca={class:"main-panel-item-title"},pa={class:"flex flex-align-center"},fa={class:"main-panel-item-value"},va={class:"main-panel-item-increase"},_a={key:0,class:"admin-iconfont red f12 up"},ha={key:1,class:"admin-iconfont green f12"},ya={key:1,class:"main-panel-item"},ga={class:"main-panel-item-title"},xa={class:"flex flex-align-center"},wa={class:"main-panel-item-value"},Da={class:"main-panel-item-increase"},Ra={key:0,class:"admin-iconfont red f12 up"},ba={key:1,class:"admin-iconfont green f12"},ka={class:"main-panel-item"},Ga={class:"main-panel-item-value"},Na={class:"main-panel-item-increase"},Sa={key:0,class:"admin-iconfont red f12 up"},Ta={key:1,class:"admin-iconfont green f12"},Pa={class:"main-panel-item"},Va={class:"main-panel-item-value"},Ya={class:"main-panel-item-increase"},za={key:0,class:"admin-iconfont red f12 up"},Aa={key:1,class:"admin-iconfont green f12"},Ca={class:"main-panel-item"},Ea={class:"main-panel-item-value"},Ma={class:"main-panel-item-increase"},La={key:0,class:"admin-iconfont red f12 up"},Oa={key:1,class:"admin-iconfont green f12"},Ua={class:"main-panel-item"},Ba={class:"main-panel-item-value"},Fa={class:"main-panel-item-increase"},qa={key:0,class:"admin-iconfont red f12 up"},Ia={key:1,class:"admin-iconfont green f12"},ja={class:"chart"},Qa=Nt({__name:"List",setup(x){const k=St(),yt=(i,e)=>{G()},d=ft({statisticType:"1",startEndTime:"",dateType:"1"}),f=ft({1:"",2:""}),gt=[{label:"按年筛选",value:"1"},{label:"按月筛选",value:"2"}],xt=[{text:"本月",value:new Date},{text:"上月",value:()=>{const i=new Date;return i.setTime(i.getTime()-3600*1e3*24*30),i}},{text:"本年一月",value:()=>{const i=new Date;return new Date(i.getFullYear(),0,1)}}],wt=[{text:"本年",value:()=>w(0)},{text:"去年",value:()=>w(1)},{text:"三年前",value:()=>w(3)},{text:"五年前",value:()=>w(5)}],w=i=>{const e=new Date;return new Date(e.getFullYear()-i,e.getMonth(),e.getDate())},a=vt();zt("filterState",a);const G=async()=>{try{d.startEndTime=f[d.dateType];const i=await Lt(d);a.value=i;const{salesStatisticsData:e}=i,m=d.dateType==="1"?"月":"日";a.value.salesStatisticsData.horizontalAxis=e.horizontalAxis.map(N=>N+m)}catch(i){_t.error(i.message),console.error(i)}},T=()=>{G()},D=vt(!1),Dt=async()=>{D.value=!0;try{const i=await Ot({...d,isExport:"1"});D.value=!1,Mt(i,"销售统计导出")}catch(i){_t.error(i.message)}finally{D.value=!1}};return Tt(()=>{const i=Pt(new Date);if(i){const e=i.split("-");for(const m in f)m==="1"&&(f[m]=e[0]),m==="2"&&(f[m]=e[0]+"-"+e[1])}G()}),(i,e)=>{var Y,z,A,C,E,M,L,O,U,B,F,q,I,j,Q,W,X,H,J,K,Z,$,ee,te,ae,se,le,ne,oe,ie,re,de,ue,me,ce,pe,fe,ve,_e,he,ye,ge,xe,we,De,Re,be,ke,Ge,Ne,Se,Te,Pe,Ve,Ye,ze,Ae,Ce,Ee,Me,Le,Oe,Ue,Be,Fe,qe,Ie,je,Qe,We,Xe,He,Je,Ke,Ze,$e,et,tt,at,st,lt,nt,ot,it,rt,dt,ut,mt,ct,pt;const m=p("el-tab-pane"),N=p("el-tabs"),Rt=p("el-option"),bt=p("el-select"),R=p("el-form-item"),P=p("el-date-picker"),V=p("el-button"),kt=p("el-form"),h=p("el-icon"),y=p("el-tooltip");return s(),n("div",Ut,[t("div",Bt,[t("div",null,[l(N,{modelValue:d.statisticType,"onUpdate:modelValue":e[0]||(e[0]=c=>d.statisticType=c),onTabChange:yt},{default:o(()=>[l(m,{label:"订单金额统计",name:"1"}),l(m,{label:"订单数统计",name:"0"})]),_:1},8,["modelValue"]),l(kt,{model:d},{default:o(()=>[t("div",Ft,[l(R,{class:"mr-10"},{default:o(()=>[l(bt,{modelValue:d.dateType,"onUpdate:modelValue":e[1]||(e[1]=c=>d.dateType=c),placeholder:"Select",style:{width:"94.5px"},onChange:T},{default:o(()=>[(s(),n(S,null,Yt(gt,(c,Gt)=>l(Rt,{key:Gt,label:c.label,value:c.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(R,{class:"mr-10"},{default:o(()=>[d.dateType==="2"?(s(),b(P,{key:0,style:{width:"200px"},shortcuts:xt,modelValue:f[2],"onUpdate:modelValue":e[2]||(e[2]=c=>f[2]=c),"value-format":"YYYY-MM",type:"month",editable:!1},null,8,["modelValue"])):_("",!0),d.dateType==="1"?(s(),b(P,{key:1,modelValue:f[1],"onUpdate:modelValue":e[3]||(e[3]=c=>f[1]=c),type:"year","value-format":"YYYY",style:{width:"200px"},editable:!1,shortcuts:wt},null,8,["modelValue"])):_("",!0)]),_:1}),l(R,{class:"mr-10"},{default:o(()=>[l(V,{plain:"",onClick:T},{default:o(()=>[...e[4]||(e[4]=[u("搜索",-1)])]),_:1})]),_:1}),l(R,null,{default:o(()=>[l(V,{plain:"",onClick:Dt,loading:D.value},{default:o(()=>[...e[5]||(e[5]=[u("导出EXCEL",-1)])]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),t("div",qt,[t("ul",{class:Vt({three:v(k)!=="admin"})},[d.statisticType=="1"?(s(),n(S,{key:0},[t("li",It,[t("div",jt,[l(y,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...e[6]||(e[6]=[t("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，订单合计金额减免掉优惠券、满减/满折、会员折扣后成功支付的金额，再扣除掉积分余额，后实际支付的金额（自提以支付成功后计入统计；不含充值订单） ",-1)])]),default:o(()=>[t("div",Qt,[e[7]||(e[7]=t("div",null,"商品支付金额",-1)),l(h,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[l(v(g))]),_:1})])]),_:1})]),t("div",Wt,r(((z=(Y=a.value)==null?void 0:Y.salesData)==null?void 0:z.productPayment)??0),1),t("div",Xt,[e[8]||(e[8]=u(" 环比： ",-1)),t("span",null,r((C=(A=a.value)==null?void 0:A.salesData)==null?void 0:C.productPaymentGrowthRate)+"%",1),((M=(E=a.value)==null?void 0:E.salesData)==null?void 0:M.productPaymentGrowthRate)!=null&&((O=(L=a.value)==null?void 0:L.salesData)==null?void 0:O.productPaymentGrowthRate.toString())!=="--"&&Number((B=(U=a.value)==null?void 0:U.salesData)==null?void 0:B.productPaymentGrowthRate)>0?(s(),n("i",Ht,"")):(s(),n("i",Jt,""))])]),t("li",Kt,[t("div",Zt,[l(y,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...e[9]||(e[9]=[t("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，平台/店铺售后金额（不含充值订单） ",-1)])]),default:o(()=>[t("div",$t,[e[10]||(e[10]=t("div",null,"商品退款金额",-1)),l(h,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[l(v(g))]),_:1})])]),_:1})]),t("div",ea,r(((q=(F=a.value)==null?void 0:F.salesData)==null?void 0:q.productRefund)??0),1),t("div",ta,[e[11]||(e[11]=u(" 环比： ",-1)),t("span",null,r((j=(I=a.value)==null?void 0:I.salesData)==null?void 0:j.productRefundGrowthRate)+"%",1),((W=(Q=a.value)==null?void 0:Q.salesData)==null?void 0:W.productRefundGrowthRate)!=null&&((H=(X=a.value)==null?void 0:X.salesData)==null?void 0:H.productRefundGrowthRate.toString())!=="--"&&Number((K=(J=a.value)==null?void 0:J.salesData)==null?void 0:K.productRefundGrowthRate)>0?(s(),n("i",aa,"")):(s(),n("i",sa,""))])]),t("li",la,[t("div",na,[l(y,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...e[12]||(e[12]=[t("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，平台/店铺销售的营业额，等于实收金额减去售后金额（不含充值订单） ",-1)])]),default:o(()=>[t("div",oa,[e[13]||(e[13]=t("div",null,"营业额",-1)),l(h,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[l(v(g))]),_:1})])]),_:1})]),t("div",ia,r((($=(Z=a.value)==null?void 0:Z.salesData)==null?void 0:$.turnover)??0),1),t("div",ra,[e[14]||(e[14]=u(" 环比： ",-1)),t("span",null,r((te=(ee=a.value)==null?void 0:ee.salesData)==null?void 0:te.turnoverGrowthRate)+"%",1),((se=(ae=a.value)==null?void 0:ae.salesData)==null?void 0:se.turnoverGrowthRate)!=null&&((ne=(le=a.value)==null?void 0:le.salesData)==null?void 0:ne.turnoverGrowthRate.toString())!=="--"&&Number((ie=(oe=a.value)==null?void 0:oe.salesData)==null?void 0:ie.turnoverGrowthRate)>0?(s(),n("i",da,"")):(s(),n("i",ua,""))])]),v(k)==="admin"?(s(),n("li",ma,[t("div",ca,[l(y,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...e[15]||(e[15]=[t("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，平台/店铺充值订单的金额 ",-1)])]),default:o(()=>[t("div",pa,[e[16]||(e[16]=t("div",null,"充值金额",-1)),l(h,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[l(v(g))]),_:1})])]),_:1})]),t("div",fa,r(((de=(re=a.value)==null?void 0:re.salesData)==null?void 0:de.rechargeAmount)??0),1),t("div",va,[e[17]||(e[17]=u(" 环比： ",-1)),t("span",null,r((me=(ue=a.value)==null?void 0:ue.salesData)==null?void 0:me.rechargeAmountGrowthRate)+"%",1),((pe=(ce=a.value)==null?void 0:ce.salesData)==null?void 0:pe.rechargeAmountGrowthRate)!=null&&((ve=(fe=a.value)==null?void 0:fe.salesData)==null?void 0:ve.rechargeAmountGrowthRate.toString())!=="--"&&Number((he=(_e=a.value)==null?void 0:_e.salesData)==null?void 0:he.rechargeAmountGrowthRate)>0?(s(),n("i",_a,"")):(s(),n("i",ha,""))])])):_("",!0),v(k)==="admin"?(s(),n("li",ya,[t("div",ga,[l(y,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...e[18]||(e[18]=[t("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，平台/店铺使用余额支付的金额（不含充值订单） ",-1)])]),default:o(()=>[t("div",xa,[e[19]||(e[19]=t("div",null,"余额支付金额",-1)),l(h,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[l(v(g))]),_:1})])]),_:1})]),t("div",wa,r(((ge=(ye=a.value)==null?void 0:ye.salesData)==null?void 0:ge.balancePayment)??0),1),t("div",Da,[e[20]||(e[20]=u(" 环比： ",-1)),t("span",null,r((we=(xe=a.value)==null?void 0:xe.salesData)==null?void 0:we.balancePaymentGrowthRate)+"%",1),((Re=(De=a.value)==null?void 0:De.salesData)==null?void 0:Re.balancePaymentGrowthRate)!=null&&((ke=(be=a.value)==null?void 0:be.salesData)==null?void 0:ke.balancePaymentGrowthRate.toString())!=="--"&&Number((Ne=(Ge=a.value)==null?void 0:Ge.salesData)==null?void 0:Ne.balancePaymentGrowthRate)>0?(s(),n("i",Ra,"")):(s(),n("i",ba,""))])])):_("",!0)],64)):_("",!0),d.statisticType=="0"?(s(),n(S,{key:1},[t("li",ka,[e[22]||(e[22]=t("div",{class:"main-panel-item-title"}," 支付订单数 ",-1)),t("div",Ga,r(((Te=(Se=a.value)==null?void 0:Se.salesData)==null?void 0:Te.productPaymentNum)??0),1),t("div",Na,[e[21]||(e[21]=u(" 环比： ",-1)),t("span",null,r((Ve=(Pe=a.value)==null?void 0:Pe.salesData)==null?void 0:Ve.productPaymentNumGrowthRate)+"%",1),((ze=(Ye=a.value)==null?void 0:Ye.salesData)==null?void 0:ze.productPaymentNumGrowthRate)!=null&&((Ce=(Ae=a.value)==null?void 0:Ae.salesData)==null?void 0:Ce.productPaymentNumGrowthRate.toString())!=="--"&&Number((Me=(Ee=a.value)==null?void 0:Ee.salesData)==null?void 0:Me.productPaymentNumGrowthRate)>0?(s(),n("i",Sa,"")):(s(),n("i",Ta,""))])]),t("li",Pa,[e[24]||(e[24]=t("div",{class:"main-panel-item-title"}," 退款订单数量 ",-1)),t("div",Va,r(((Oe=(Le=a.value)==null?void 0:Le.salesData)==null?void 0:Oe.productRefundNum)??0),1),t("div",Ya,[e[23]||(e[23]=u(" 环比： ",-1)),t("span",null,r((Be=(Ue=a.value)==null?void 0:Ue.salesData)==null?void 0:Be.rechargeNumGrowthRate)+"%",1),((qe=(Fe=a.value)==null?void 0:Fe.salesData)==null?void 0:qe.rechargeNumGrowthRate)!=null&&((je=(Ie=a.value)==null?void 0:Ie.salesData)==null?void 0:je.rechargeNumGrowthRate.toString())!=="--"&&Number((We=(Qe=a.value)==null?void 0:Qe.salesData)==null?void 0:We.rechargeNumGrowthRate)>0?(s(),n("i",za,"")):(s(),n("i",Aa,""))])]),t("li",Ca,[e[26]||(e[26]=t("div",{class:"main-panel-item-title"}," 充值订单数 ",-1)),t("div",Ea,r(((He=(Xe=a.value)==null?void 0:Xe.salesData)==null?void 0:He.rechargeNum)??0),1),t("div",Ma,[e[25]||(e[25]=u(" 环比： ",-1)),t("span",null,r((Ke=(Je=a.value)==null?void 0:Je.salesData)==null?void 0:Ke.productRefundNumGrowthRate)+"%",1),(($e=(Ze=a.value)==null?void 0:Ze.salesData)==null?void 0:$e.productRefundNumGrowthRate)!=null&&((tt=(et=a.value)==null?void 0:et.salesData)==null?void 0:tt.productRefundNumGrowthRate.toString())!=="--"&&Number((st=(at=a.value)==null?void 0:at.salesData)==null?void 0:st.productRefundNumGrowthRate)>0?(s(),n("i",La,"")):(s(),n("i",Oa,""))])]),t("li",Ua,[e[28]||(e[28]=t("div",{class:"main-panel-item-title"}," 余额支付订单数 ",-1)),t("div",Ba,r(((nt=(lt=a.value)==null?void 0:lt.salesData)==null?void 0:nt.balancePaymentNum)??0),1),t("div",Fa,[e[27]||(e[27]=u(" 环比： ",-1)),t("span",null,r((it=(ot=a.value)==null?void 0:ot.salesData)==null?void 0:it.balancePaymentNumGrowthRate)+"%",1),((dt=(rt=a.value)==null?void 0:rt.salesData)==null?void 0:dt.balancePaymentNumGrowthRate)!=null&&((mt=(ut=a.value)==null?void 0:ut.salesData)==null?void 0:mt.balancePaymentNumGrowthRate.toString())!=="--"&&Number((pt=(ct=a.value)==null?void 0:ct.salesData)==null?void 0:pt.balancePaymentNumGrowthRate)>0?(s(),n("i",qa,"")):(s(),n("i",Ia,""))])])],64)):_("",!0)],2)])]),t("div",ja,[d.statisticType==="1"?(s(),b(Ct,{key:0})):_("",!0),d.statisticType==="0"?(s(),b(Et,{key:1})):_("",!0)])])])}}}),Za=At(Qa,[["__scopeId","data-v-c427214a"]]);export{Za as default};

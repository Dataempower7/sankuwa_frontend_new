import{d as q,x as G,W as M,f as i,g as c,h as r,i as t,z as a,m as s,j as e,Q as _,l as p,t as C,a8 as R,k as h,dM as $,_ as j}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{_ as E}from"./Switch.vue_vue_type_script_setup_true_lang-D-71VfIC.js";/* empty css                                                                    */import{P as H}from"./Pagination-C8J7-6Em.js";import{i as x}from"./format-BxqOrW-w.js";import{g as Q,u as W}from"./user-CUi1-22X.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as J}from"./Tag-DafgHPRr.js";import{M as X}from"./MobileCard-qEvTFKQw.js";import{U as Y}from"./UserCard-eTPFM3_N.js";import{u as Z}from"./useListRequest-CprjeVXp.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const ee={class:"container"},te={class:"content_wrapper"},le={class:"lyecs-table-list-warp"},oe={class:"list-table-tool lyecs-search-warp"},ae={class:"advanced-search-warp list-table-tool-row"},se={class:"simple-form-warp"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},pe={class:"form-group"},me={class:"control-container"},ce={class:"simple-form-field"},ue={class:"form-group"},_e={class:"control-container"},fe={class:"simple-form-field"},be={class:"form-group"},ke={class:"control-container"},ge={class:"simple-form-field"},ve={class:"form-group"},Ce={class:"control-container"},he={class:"simple-form-warp"},ye={class:"simple-form-field"},we={class:"control-container"},Ve={class:"list-table-tool-row"},xe={class:"list-table-tool-col"},Te={key:0},Oe={class:"table-container"},Ue={class:"avatar-info"},Ie={class:"info"},Se={key:1},ze={class:"rank-container"},Ae={class:"text"},Le={key:0,style:{color:"#67c23a"}},De={key:1,style:{color:"#f50"}},Be={key:0,style:{color:"#999999"}},Ne={class:"empty-warp"},Pe={key:0,class:"empty-bg"},Fe={key:0,class:"pagination-con"},Ke=q({__name:"List",setup(qe){const T=G(),O=M(),{listData:U,loading:y,total:w,selectedIds:g,filterParams:n,loadData:u,onSearchSubmit:m,onSortChange:I,onSelectChange:S,resetParams:z}=Z({apiFunction:Q,idKey:"userId",defaultParams:{sortField:"",sortOrder:"",keyword:"",fromTag:"",balance:"",pointsLt:"",pointsGt:"",rankId:0,page:1,size:T.get("pageSize")}});return u(),(Ge,l)=>{const f=i("el-button"),v=i("TigInput"),b=i("el-option"),A=i("el-select"),L=i("el-space"),D=i("el-form"),d=i("el-table-column"),B=i("el-avatar"),N=i("el-image"),V=i("el-divider"),P=i("el-table"),F=i("a-spin");return r(),c("div",ee,[t("div",te,[t("div",le,[t("div",oe,[a(D,{model:e(n),onKeyup:R(e(m),["enter"])},{default:s(()=>[t("div",ae,[t("div",se,[t("div",ne,[t("div",ie,[l[8]||(l[8]=t("label",{class:"control-label"},[t("span",null,"用户信息：")],-1)),t("div",re,[a(v,{modelValue:e(n).keyword,"onUpdate:modelValue":l[0]||(l[0]=o=>e(n).keyword=o),name:"keyword",placeholder:"输入会员名称/手机号/邮箱",clearable:"",onClear:e(m)},{append:s(()=>[a(f,{onClick:e(m)},{default:s(()=>[...l[7]||(l[7]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),t("div",de,[t("div",pe,[l[9]||(l[9]=t("label",{class:"control-label"},[t("span",null,"用户筛选：")],-1)),t("div",me,[a(A,{modelValue:e(n).fromTag,"onUpdate:modelValue":l[1]||(l[1]=o=>e(n).fromTag=o),clearable:"",onChange:e(m)},{default:s(()=>[a(b,{value:1,label:"微信公众号"}),a(b,{value:2,label:"微信小程序"}),a(b,{value:3,label:"H5"}),a(b,{value:4,label:"PC"}),a(b,{value:5,label:"APP"})]),_:1},8,["modelValue","onChange"])])])]),t("div",ce,[t("div",ue,[l[10]||(l[10]=t("label",{class:"control-label"},[t("span",null,"余额大于：")],-1)),t("div",_e,[a(v,{type:"decimal",modelValue:e(n).balance,"onUpdate:modelValue":l[2]||(l[2]=o=>e(n).balance=o),clearable:"",onClear:e(m)},null,8,["modelValue","onClear"])])])]),t("div",fe,[t("div",be,[l[11]||(l[11]=t("label",{class:"control-label"},[t("span",null,"积分大于：")],-1)),t("div",ke,[a(v,{type:"integer",modelValue:e(n).pointsGt,"onUpdate:modelValue":l[3]||(l[3]=o=>e(n).pointsGt=o),clearable:"",onClear:e(m)},null,8,["modelValue","onClear"])])])]),t("div",ge,[t("div",ve,[l[12]||(l[12]=t("label",{class:"control-label"},[t("span",null,"积分小于：")],-1)),t("div",Ce,[a(v,{type:"integer",modelValue:e(n).pointsLt,"onUpdate:modelValue":l[4]||(l[4]=o=>e(n).pointsLt=o),clearable:"",onClear:e(m)},null,8,["modelValue","onClear"])])])]),t("div",he,[t("div",ye,[l[15]||(l[15]=t("label",{class:"control-label"},null,-1)),t("div",we,[a(f,{type:"primary",plain:"",onClick:e(m)},{default:s(()=>[...l[13]||(l[13]=[_("搜索",-1)])]),_:1},8,["onClick"]),a(f,{plain:"",onClick:e(z)},{default:s(()=>[...l[14]||(l[14]=[_("重置",-1)])]),_:1},8,["onClick"])])])])])]),t("div",Ve,[t("div",xe,[a(L,null,{default:s(()=>[a(e(k),{params:{act:"add"},isDrawer:"",path:"user/user/Info",title:"添加会员",width:"560px",onOkCallback:e(u)},{default:s(()=>[a(f,{type:"primary"},{default:s(()=>[...l[16]||(l[16]=[_("添加会员",-1)])]),_:1})]),_:1},8,["onOkCallback"]),a(e(k),{params:{act:"setRank",ids:e(g)},isDrawer:"",path:"user/user/BatchRank",title:"批量修改会员等级",width:"600px",onOkCallback:e(u)},{default:s(()=>[a(f,{disabled:e(g).length===0},{default:s(()=>[...l[17]||(l[17]=[_("批量修改会员等级",-1)])]),_:1},8,["disabled"])]),_:1},8,["params","onOkCallback"]),e(g).length>0?(r(),c("span",Te,[l[18]||(l[18]=_(" 已选择：",-1)),t("b",null,C(e(g).length),1),l[19]||(l[19]=_(" 项 ",-1))])):p("",!0)]),_:1})])])]),_:1},8,["model","onKeyup"])]),t("div",Oe,[a(F,{spinning:e(y)},{default:s(()=>[a(P,{data:e(U),loading:e(y),total:e(w),"row-key":"userId",onSelectionChange:e(S),onSortChange:e(I)},{empty:s(()=>[t("div",Ne,[e(y)?p("",!0):(r(),c("div",Pe,"暂无数据"))])]),default:s(()=>[a(d,{type:"selection",width:"32"}),a(d,{width:200,label:"会员名称",prop:"username",sortable:"custom"},{default:s(({row:o})=>[t("div",Ue,[a(B,{size:30,src:e(x)(o.avatar)},null,8,["src"]),t("div",Ie,[o.username!=o.mobile?(r(),h(Y,{key:0,user:o.username,isCompanyAuth:o.isCompanyAuth},null,8,["user","isCompanyAuth"])):p("",!0),a(X,{mobile:o.mobile},null,8,["mobile"]),o.fromTagName?(r(),c("div",Se,[a(e(J),{color:o.fromTag===2||o.fromTag===5?"#31c19e":"#1890FF",text:o.fromTagName,transparent:!1,style:{"margin-left":"0"}},null,8,["color","text"])])):p("",!0)])])]),_:1}),a(d,{width:140,label:"会员等级",prop:"rankName"},{default:s(({row:o})=>[t("div",ze,[o.rankLogo?(r(),h(N,{key:0,src:e(x)(o.rankLogo),class:"image",fit:"contain"},null,8,["src"])):p("",!0),t("div",Ae,C(o.rankName),1)])]),_:1}),e($)()?(r(),h(d,{key:0,width:140,label:"是否认证",prop:"isCompanyAuth"},{default:s(({row:o})=>[t("div",null,[o.isCompanyAuth?(r(),c("div",Le,"已认证")):(r(),c("div",De,"未认证"))])]),_:1})):p("",!0),e(O)=="admin"?(r(),h(d,{key:1,width:140,label:"是否启用",prop:"status"},{default:s(({row:o})=>[a(e(E),{checked:o.status,"onUpdate:checked":K=>o.status=K,params:{id:o.userId,field:"status"},requestApi:e(W)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1})):p("",!0),a(d,{label:"余额",prop:"balance",sortable:"custom"},{default:s(({row:o})=>[t("ul",null,[t("li",null,C(o.balance),1),o.frozenBalance>0?(r(),c("li",Be,"(冻结："+C(o.frozenBalance)+")",1)):p("",!0)])]),_:1}),a(d,{width:130,label:"消费积分",prop:"points",sortable:"custom"}),a(d,{width:140,label:"累计消费次数",prop:"orderCount",sortable:"custom"}),a(d,{width:140,label:"累计消费金额",prop:"orderAmount",sortable:"custom"}),a(d,{width:160,label:"注册日期",prop:"regTime",sortable:"custom"}),a(d,{width:200,fixed:"right",label:"操作"},{default:s(({row:o})=>[a(e(k),{params:{act:"detail",id:o.userId},isDrawer:"",path:"user/user/Detail",title:"会员管理",width:"800px",onOkCallback:e(u),onCallback:e(u),showClose:!1,showOnOk:!1},{default:s(()=>[...l[20]||(l[20]=[t("a",{class:"btn-link"},"查看",-1)])]),_:1},8,["params","onOkCallback","onCallback"]),a(V,{direction:"vertical"}),a(e(k),{params:{act:"user",id:o.userId},showOnOk:!1,isDrawer:"",path:"order/order/List",title:o.username+" - 查看订单",width:"1200px"},{default:s(()=>[...l[21]||(l[21]=[t("a",{class:"btn-link"},"查看订单",-1)])]),_:1},8,["params","title"]),a(V,{direction:"vertical"}),a(e(k),{params:{id:o.userId},isDrawer:"",path:"user/user/AccountLog",title:"会员"+o.username+"的账目明细",width:"800px",onOkCallback:e(u)},{default:s(()=>[...l[22]||(l[22]=[t("a",{class:"btn-link"},"账目明细",-1)])]),_:1},8,["params","title","onOkCallback"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(w)>0?(r(),c("div",Fe,[a(e(H),{page:e(n).page,"onUpdate:page":l[5]||(l[5]=o=>e(n).page=o),size:e(n).size,"onUpdate:size":l[6]||(l[6]=o=>e(n).size=o),total:e(w),onCallback:e(u)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])])}}}),at=j(Ke,[["__scopeId","data-v-e0670afb"]]);export{at as default};

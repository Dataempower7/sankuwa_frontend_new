import{d as O,x as B,r as L,f as k,g as h,h as o,i as l,z as n,m as s,j as a,a8 as N,Q as q,l as d,k as r,t as $,F as j,P as y,_ as E}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{_ as f}from"./Switch.vue_vue_type_script_setup_true_lang-D-71VfIC.js";/* empty css                                                                    */import{P as Q}from"./Pagination-C8J7-6Em.js";import{g as R,u,m as G,w as H}from"./messageType-N7L8DQYX.js";import{P as J}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-CRFq-JzZ.js";import{u as X}from"./useListRequest-CprjeVXp.js";import{_ as Y}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import{M as A}from"./index-C9ZdVeVx.js";const Z={class:"container"},w={class:"content_wrapper"},ee={class:"lyecs-form-table"},ae={class:"table-action"},te={class:"table-container"},se={class:"empty-warp"},ne={key:0,class:"empty-bg"},le={key:0,class:"pagination-con"},ie=O({__name:"List",setup(oe){const I=B(),{listData:W,loading:b,total:v,filterParams:m,loadData:_,onSearchSubmit:C,onSortChange:x,onSelectChange:P}=X({apiFunction:R,idKey:"messageId",defaultParams:{sortField:"",sortOrder:"",keyword:"",sendType:1,page:1,size:I.get("pageSize")}});_();const g=L(1),S=c=>{m.sendType=c,_()},V=async()=>{A.confirm({title:"您确认要生成小程序消息模板吗？",onOk:async()=>{try{const c=await G();y.success("操作成功"),_()}catch(c){y.error(c.message)}finally{}}})},T=async()=>{A.confirm({title:"您确认要生成公众号模板消息吗？",onOk:async()=>{try{const c=await H();y.success("操作成功"),_()}catch(c){y.error(c.message)}finally{}}})};return(c,t)=>{const U=k("el-tab-pane"),M=k("el-button"),z=k("TigInput"),D=k("el-tabs"),p=k("el-table-column"),F=k("el-table"),K=k("a-spin");return o(),h("div",Z,[l("div",w,[l("div",ee,[t[10]||(t[10]=l("div",{class:"notice-warp"},[l("strong",null," 模板行业选择"),l("p",null,"主营行业：根据您的主营行业选择适合的服务类目"),l("p",null,"副营行业：商业服务 -> 软件/建站/技术开发"),l("strong",null," 生成小程序消息模板"),l("p",null,"请先添加服务类目《商业服务->软件/建站/技术开发》，否则模板导入不成功，点击会自动删除原有的小程序模板并生成新的模板！"),l("strong",null," 生成公众号模板消息"),l("p",null,"请先添加服务类目《商业服务->软件/建站/技术开发》，否则模板导入不成功，点击会自动删除原有的公众号模板并生成新的模板！")],-1)),n(D,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),class:"lyecs-tabs","tab-position":"top",onTabChange:S},{default:s(()=>[n(U,{label:"发送给用户",name:1}),n(U,{label:"发送给商家",name:2}),l("div",ae,[n(z,{modelValue:a(m).keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>a(m).keyword=e),placeholder:"输入关键字",onKeyup:N(a(C),["enter"]),clearable:"",onClear:a(C)},{append:s(()=>[n(M,{onClick:a(C)},{default:s(()=>[...t[6]||(t[6]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"]),n(M,{plain:"",onClick:t[1]||(t[1]=e=>V())},{default:s(()=>[...t[7]||(t[7]=[q("生成小程序消息模板",-1)])]),_:1}),n(M,{plain:"",onClick:t[2]||(t[2]=e=>T())},{default:s(()=>[...t[8]||(t[8]=[q("生成公众号模板消息",-1)])]),_:1})])]),_:1},8,["modelValue"]),l("div",te,[n(K,{spinning:a(b)},{default:s(()=>[n(F,{data:a(W),loading:a(b),total:a(v),"row-key":"messageId",onSelectionChange:a(P),onSortChange:a(x)},{empty:s(()=>[l("div",se,[a(b)?d("",!0):(o(),h("div",ne,"暂无数据"))])]),default:s(()=>[n(p,{label:"消息类型",prop:"name"},{default:s(({row:e})=>[n(a(J),{"org-value":e.name,"onUpdate:orgValue":i=>e.name=i,params:{id:e.messageId,field:"name"},requestApi:a(u),label:"消息类型",type:"input"},{default:s(()=>[l("div",null,$(e.name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),n(p,{label:"消息描述",prop:"describe"}),g.value==1?(o(),r(p,{key:0,label:"邮件",width:"100"},{default:s(({row:e})=>[e.isMail>-1?(o(),r(a(f),{key:0,checked:e.isMail,"onUpdate:checked":i=>e.isMail=i,params:{id:e.messageId,field:"isMail"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1})):d("",!0),g.value==2?(o(),h(j,{key:1},[n(p,{label:"钉钉",width:"100"},{default:s(({row:e})=>[e.isDing>-1?(o(),r(a(f),{key:0,checked:e.isDing,"onUpdate:checked":i=>e.isDing=i,params:{id:e.messageId,field:"isDing"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1}),n(p,{label:"企业微信",width:"100"},{default:s(({row:e})=>[e.isWxWork>-1?(o(),r(a(f),{key:0,checked:e.isWxWork,"onUpdate:checked":i=>e.isWxWork=i,params:{id:e.messageId,field:"isWxWork"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1})],64)):d("",!0),g.value==1?(o(),r(p,{key:2,label:"站内信",width:"100"},{default:s(({row:e})=>[e.isMessage>-1?(o(),r(a(f),{key:0,checked:e.isMessage,"onUpdate:checked":i=>e.isMessage=i,params:{id:e.messageId,field:"isMessage"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1})):d("",!0),n(p,{label:"短信",width:"100"},{default:s(({row:e})=>[e.isMsg>-1?(o(),r(a(f),{key:0,checked:e.isMsg,"onUpdate:checked":i=>e.isMsg=i,params:{id:e.messageId,field:"isMsg"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1}),g.value==1?(o(),r(p,{key:3,label:"公众号",width:"100"},{default:s(({row:e})=>[e.isWechat>-1?(o(),r(a(f),{key:0,checked:e.isWechat,"onUpdate:checked":i=>e.isWechat=i,params:{id:e.messageId,field:"isWechat"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1})):d("",!0),g.value==1?(o(),r(p,{key:4,label:"小程序",width:"100"},{default:s(({row:e})=>[e.isMiniProgram>-1?(o(),r(a(f),{key:0,checked:e.isMiniProgram,"onUpdate:checked":i=>e.isMiniProgram=i,params:{id:e.messageId,field:"isMiniProgram"},requestApi:a(u)},null,8,["checked","onUpdate:checked","params","requestApi"])):d("",!0)]),_:1})):d("",!0),n(p,{width:100,fixed:"right",label:"操作"},{default:s(({row:e})=>[n(a(Y),{params:{act:"detail",id:e.messageId},isDrawer:"",path:"setting/config/messageType/Info",title:e.name+"消息编辑",width:"700px",onOkCallback:a(_)},{default:s(()=>[...t[9]||(t[9]=[l("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","title","onOkCallback"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),a(v)>0?(o(),h("div",le,[n(a(Q),{page:a(m).page,"onUpdate:page":t[4]||(t[4]=e=>a(m).page=e),size:a(m).size,"onUpdate:size":t[5]||(t[5]=e=>a(m).size=e),total:a(v),onCallback:a(_)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}}),ye=E(ie,[["__scopeId","data-v-cf3b07aa"]]);export{ye as default};

import{a6 as D,d as U,x as P,r as g,as as B,aw as L,o as q,g as v,i as l,z as a,m as n,l as h,j as i,P as x,f as r,h as b,a8 as A,Q as S,t as w,_ as G}from"./index-B52YIGC0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{u as K,i as R,p as j}from"./format-BxqOrW-w.js";/* empty css                                                                    */import{P as O}from"./Pagination-C8J7-6Em.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as Q}from"./SelectTimeInterval-BUZ-hmxo.js";/* empty css             */import{f as C}from"./time-EzYK4E-P.js";import{r as X}from"./export-Ds6vL4MA.js";import"./index-C9ZdVeVx.js";const H=d=>D({url:"panel/salesStatistics/salesRanking",method:"get",params:d}),J=d=>D({url:"panel/salesStatistics/salesRanking",method:"get",responseType:"arraybuffer",params:d}),W={class:"container"},Z={class:"content_wrapper"},$={class:"filtrate-menu"},tt={class:"table-container"},et={class:"flex"},at={key:0,class:"span-pic"},ot=["href"],st=["src"],nt={class:"span-product-con"},lt={class:"span-product-name"},rt={class:"empty-warp"},it={key:0,class:"empty-bg"},dt={key:0,class:"pagination-con"},pt=U({__name:"List",setup(d){const z=P(),p=g(!1),k=g(),c=g(0),o=B({page:1,size:z.get("pageSize"),keyword:"",startTime:C(L(30,"sub"),"YYYY-MM-DD"),endTime:C(new Date,"YYYY-MM-DD")}),m=async()=>{p.value=!0;try{const s=await H(o);k.value=s.records,c.value=s.total}catch(s){x.error(s.message),console.error(s)}p.value=!1},y=()=>{m()},u=g(!1),Y=async()=>{u.value=!0;try{const s=await J({...o,isExport:"1"});u.value=!1,X(s,"销售排行导出")}catch(s){x.error(s.message)}finally{u.value=!1}},E=({prop:s,order:t})=>{console.log(s,t),o.sortField=s,o.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",m()},N=()=>{m()};return q(()=>{m()}),(s,t)=>{const _=r("el-form-item"),V=r("TigInput"),T=r("el-button"),F=r("el-form"),f=r("el-table-column"),I=r("el-table"),M=r("a-spin");return b(),v("div",W,[l("div",Z,[t[7]||(t[7]=l("div",{class:"notice-warp"},"提示：查询的时间间隔上限默认为一月，如果数据量过大导至查询时间过久或者超时报错，请尝试缩小查询的时间间隔！",-1)),a(F,{model:o},{default:n(()=>[l("div",$,[a(_,{class:"mr-10"},{default:n(()=>[a(i(Q),{type:"date","start-date":o.startTime,"onUpdate:startDate":t[0]||(t[0]=e=>o.startTime=e),"end-date":o.endTime,"onUpdate:endDate":t[1]||(t[1]=e=>o.endTime=e)},null,8,["start-date","end-date"])]),_:1}),a(_,{class:"mr-10"},{default:n(()=>[a(V,{width:"200px",modelValue:o.keyword,"onUpdate:modelValue":t[2]||(t[2]=e=>o.keyword=e),placeholder:"输入商品名称或者商品编号",onKeyup:A(y,["enter"]),clearable:"",onClear:y},null,8,["modelValue"])]),_:1}),a(_,{class:"mr-10"},{default:n(()=>[a(T,{plain:"",onClick:y},{default:n(()=>[...t[5]||(t[5]=[S("搜索",-1)])]),_:1})]),_:1}),a(_,{class:"mr-10"},{default:n(()=>[a(T,{plain:"",onClick:Y,loading:u.value},{default:n(()=>[...t[6]||(t[6]=[S("导出EXCEL",-1)])]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),l("div",tt,[a(M,{spinning:p.value},{default:n(()=>[a(I,{data:k.value,total:c.value,"row-key":"productId",onSortChange:E},{empty:n(()=>[l("div",rt,[p.value?h("",!0):(b(),v("div",it,"暂无数据"))])]),default:n(()=>[a(f,{label:"商品名称",prop:"productName"},{default:n(({row:e})=>[l("div",et,[e.picThumb?(b(),v("div",at,[l("a",{href:i(K)({path:"product",sn:e.productSn}),target:"_blank"},[l("img",{src:i(R)(e.picThumb),height:"50",width:"50"},null,8,st)],8,ot)])):h("",!0),l("div",nt,[l("div",lt,w(e.productName),1)])])]),_:1}),a(f,{label:"商品编号",prop:"productSn"}),a(f,{label:"总销量",prop:"totalSalesNum",sortable:"custom"}),a(f,{label:"总销售额",prop:"totalSalesAmount",sortable:"custom"},{default:n(({row:e})=>[S(w(i(j)(e.totalSalesAmount)),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),c.value>0?(b(),v("div",dt,[a(i(O),{page:o.page,"onUpdate:page":t[3]||(t[3]=e=>o.page=e),size:o.size,"onUpdate:size":t[4]||(t[4]=e=>o.size=e),total:c.value,onCallback:N},null,8,["page","size","total"])])):h("",!0)])])])}}}),wt=G(pt,[["__scopeId","data-v-dd63aba4"]]);export{wt as default};

import{d as ne,x as de,r as x,f as _,h as l,z as a,e as c,l as s,k as d,i as o,a1 as ie,L as m,j as p,t as k,al as re,K as pe,g as n,_ as ue}from"./index-BLXOA87U.js";/* empty css             */import"./index-DpgvsnVO.js";import{P}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-Bx-dDInM.js";import{_ as ce}from"./Switch.vue_vue_type_script_setup_true_lang-D9gOYX51.js";import{D}from"./DeleteRecord-D6PcywRa.js";/* empty css                                                                    */import{P as me}from"./Pagination-w0YHSLYy.js";import{u as R,i as _e}from"./format-DdZABYp4.js";import{u as h,r as fe,c as ve,g as ke,b as be,a as ge}from"./product-CsYu5zzV.js";import{S as ye}from"./SelectBrand-SbthwkIY.js";import{_ as he}from"./SelectCategory.vue_vue_type_script_setup_true_lang-CYLUeo0H.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-BfFy9xcT.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as Ce}from"./SelectShop.vue_vue_type_script_setup_true_lang-DlIv1RgD.js";import Se from"./ProductStockPop-DkbLMzKv.js";import{i as V,b as Ie}from"./version-hjn5tnxG.js";import{u as Ae}from"./useListRequest-qe4Wn36b.js";import{_ as O}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";import"./brand-CrKtj3RC.js";import"./category-C1lvuGmx.js";import"./category-Bd8w-lZR.js";import"./time-DX2Q3n6c.js";import"./shop-CAVes-5Z.js";const xe={class:"container"},Oe={class:"content_wrapper"},qe={class:"lyecs-table-list-warp"},Pe={class:"list-table-tool lyecs-search-warp"},De={class:"advanced-search-warp list-table-tool-row"},Ve={class:"simple-form-warp"},we={class:"simple-form-field"},Te={class:"form-group"},Ue={class:"control-container"},Ne={key:0,class:"simple-form-field"},ze={class:"form-group"},$e={class:"control-container"},Be={class:"simple-form-field"},Fe={class:"form-group"},Re={class:"control-container"},Ke={class:"simple-form-field"},Le={class:"form-group"},Ee={class:"control-container"},We={class:"simple-form-field"},je={class:"form-group"},He={class:"control-container"},Me={class:"simple-form-warp"},Ge={class:"simple-form-field"},Je={class:"control-container"},Qe={class:"list-table-tool-row"},Xe={class:"list-table-tool-col"},Ye={key:7},Ze={class:"table-container"},et={class:"flex"},tt={key:0,class:"span-pic"},ot=["href"],lt=["src"],st={class:"span-product-con"},at={class:"span-product-name",style:{"word-break":"break-all"}},nt={key:0,class:"span-product-brand"},dt={class:"span-con"},it={key:1,class:"span-product-brand"},rt={class:"span-con green"},pt={key:2,class:"span-product-brand"},ut={class:"span-con green"},ct={key:3,class:"span-product-brand"},mt={class:"span-con green"},_t={key:4},ft={class:"span-con"},vt={class:"span-con"},kt={class:"status-switch"},bt={key:0},gt=["title"],yt=["title"],ht={key:0},Ct={key:1},St={class:"flex flex-align-center"},It=["href"],At={class:"empty-warp"},xt={key:0,class:"empty-bg"},Ot={key:0,class:"pagination-con"},qt=ne({__name:"List",setup(Pt){const K=de(),z=x(0),S=x(localStorage.getItem("adminType")),i=x(1),{listData:L,loading:w,total:T,selectedIds:y,filterParams:r,loadData:f,onSearchSubmit:C,onSortChange:E,onSelectChange:W,onBatchAction:j,resetParams:H}=Ae({apiFunction:ge,idKey:"productId",defaultParams:{page:1,size:K.get("pageSize"),sortField:"",sortOrder:"",keyword:"",introType:"",isDelete:0,searchShop:0,shopId:"",categoryId:"",brandId:"",productStatus:1,checkStatus:1}});f();const M=u=>{i.value=u,r.productStatus=u>=1&&u<=3?1:u>=4&&u<=6?0:void 0,r.checkStatus=u>=1&&u<=4?1:u===5?0:u===6?2:void 0,r.shopId=u===2?0:"",r.isDelete=u===7?1:0,r.searchShop=u===3?1:0,r.page=1,Object.keys(r).forEach(e=>{r[e]===void 0&&delete r[e]}),f()},U=x([{label:"出售中的商品",value:1,isShow:!0},{label:"自营商品",value:2,isShow:S.value==="admin"&&V()},{label:"店铺商品",value:3,isShow:S.value==="admin"&&V()},{label:"已下架商品",value:4,isShow:!0},{label:"商品回收站",value:7,isShow:!0},{label:"待审核商品",value:5,count:0,isShow:S.value==="admin"&&V()},{label:"审核失败商品",value:6,isShow:S.value==="shop"}]),$=x(),G=u=>{$.value.SelectShopChange(u),C()};(async()=>{try{const u=await ke();z.value=u,U.value=U.value.map(e=>(e.value===5&&(e.count=z.value||0),e))}catch(u){pe.error(u.message)}})();const I=async u=>{await j(u,be)};return(u,e)=>{const J=c("TigTabs"),v=c("el-button"),Q=c("TigInput"),N=c("el-option"),X=c("el-select"),Y=c("router-link"),A=c("el-popconfirm"),B=c("el-space"),Z=c("el-form"),b=c("el-table-column"),ee=c("el-icon"),te=c("el-tooltip"),q=c("el-divider"),F=c("el-dropdown-item"),oe=c("el-dropdown-menu"),le=c("el-dropdown"),se=c("el-table"),ae=c("a-spin");return n(),_("div",xe,[l("div",Oe,[l("div",qe,[a(J,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),tabs:U.value,onOnTabChange:M},null,8,["modelValue","tabs"]),l("div",Pe,[a(Z,{model:o(r),name:"form"},{default:s(()=>[l("div",De,[l("div",Ve,[l("div",we,[l("div",Te,[e[15]||(e[15]=l("label",{class:"control-label"},[l("span",null,"商品名称：")],-1)),l("div",Ue,[a(Q,{modelValue:o(r).keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>o(r).keyword=t),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:ie(o(C),["enter"]),clearable:"",onClear:o(C)},{append:s(()=>[a(v,{onClick:o(C)},{default:s(()=>e[14]||(e[14]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[14]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),i.value!==2&&S.value!="shop"&&o(V)()?(n(),_("div",Ne,[l("div",ze,[e[16]||(e[16]=l("label",{class:"control-label"},[l("span",null,"店铺：")],-1)),l("div",$e,[a(o(Ce),{shopId:o(r).shopId,"onUpdate:shopId":e[2]||(e[2]=t=>o(r).shopId=t),onOnChange:G},null,8,["shopId"])])])])):d("",!0),l("div",Be,[l("div",Fe,[e[17]||(e[17]=l("label",{class:"control-label"},[l("span",null,"分类：")],-1)),l("div",Re,[a(o(he),{ref_key:"selectCategoryRef",ref:$,categoryId:o(r).categoryId,"onUpdate:categoryId":e[3]||(e[3]=t=>o(r).categoryId=t)},null,8,["categoryId"])])])]),l("div",Ke,[l("div",Le,[e[18]||(e[18]=l("label",{class:"control-label"},[l("span",null,"品牌：")],-1)),l("div",Ee,[a(o(ye),{brandId:o(r).brandId,"onUpdate:brandId":e[4]||(e[4]=t=>o(r).brandId=t),onOnChange:o(C)},null,8,["brandId","onOnChange"])])])]),l("div",We,[l("div",je,[e[19]||(e[19]=l("label",{class:"control-label"},[l("span",null,"类型 ：")],-1)),l("div",He,[a(X,{modelValue:o(r).introType,"onUpdate:modelValue":e[5]||(e[5]=t=>o(r).introType=t),clearable:"",onChange:o(C)},{default:s(()=>[a(N,{label:"精品",value:"isBest"}),a(N,{label:"热销",value:"isHot"}),a(N,{label:"新品",value:"isNew"})]),_:1},8,["modelValue","onChange"])])])])]),l("div",Me,[l("div",Ge,[e[22]||(e[22]=l("label",{class:"control-label"},null,-1)),l("div",Je,[a(v,{type:"primary",plain:"",onClick:o(C)},{default:s(()=>e[20]||(e[20]=[m("搜索",-1)])),_:1,__:[20]},8,["onClick"]),a(v,{plain:"",onClick:o(H)},{default:s(()=>e[21]||(e[21]=[m("重置",-1)])),_:1,__:[21]},8,["onClick"])])])])]),l("div",Qe,[l("div",Xe,[a(B,null,{default:s(()=>[a(o(O),{params:{act:"add"},isDrawer:"",path:"product/product/Info",title:"添加商品",width:"950px",onOkCallback:o(f)},{default:s(()=>[a(v,{type:"primary"},{default:s(()=>e[23]||(e[23]=[m("添加商品",-1)])),_:1,__:[23]})]),_:1},8,["onOkCallback"]),o(Ie)()&&S.value==="admin"?(n(),p(Y,{key:0,to:{path:"/setting/translationContent/list",query:{type:"product"}}},{default:s(()=>[a(v,null,{default:s(()=>e[24]||(e[24]=[m("批量翻译商品",-1)])),_:1,__:[24]})]),_:1})):d("",!0),i.value==4||i.value==1?(n(),p(A,{key:1,title:"您确认要批量移入回收站吗？",onConfirm:e[6]||(e[6]=t=>I("recycle"))},{reference:s(()=>[a(v,{disabled:o(y).length===0},{default:s(()=>e[25]||(e[25]=[m("批量移入回收站",-1)])),_:1,__:[25]},8,["disabled"])]),_:1})):d("",!0),i.value==7?(n(),p(A,{key:2,title:"您确认要批量还原吗？",onConfirm:e[7]||(e[7]=t=>I("restore"))},{reference:s(()=>[a(v,{disabled:o(y).length===0},{default:s(()=>e[26]||(e[26]=[m("批量还原",-1)])),_:1,__:[26]},8,["disabled"])]),_:1})):d("",!0),i.value==7?(n(),p(A,{key:3,title:"您确认要批量删除吗？",onConfirm:e[8]||(e[8]=t=>I("del"))},{reference:s(()=>[a(v,{disabled:o(y).length===0},{default:s(()=>e[27]||(e[27]=[m("批量删除",-1)])),_:1,__:[27]},8,["disabled"])]),_:1})):d("",!0),i.value==4?(n(),p(A,{key:4,title:"您确认要批量上架吗？",onConfirm:e[9]||(e[9]=t=>I("up"))},{reference:s(()=>[a(v,{disabled:o(y).length===0},{default:s(()=>e[28]||(e[28]=[m("批量上架",-1)])),_:1,__:[28]},8,["disabled"])]),_:1})):d("",!0),i.value==1?(n(),p(A,{key:5,title:"您确认要批量下架吗？",onConfirm:e[10]||(e[10]=t=>I("down"))},{reference:s(()=>[a(v,{disabled:o(y).length===0},{default:s(()=>e[29]||(e[29]=[m("批量下架",-1)])),_:1,__:[29]},8,["disabled"])]),_:1})):d("",!0),i.value==5?(n(),p(A,{key:6,title:"您确认要批量通过审核吗？",onConfirm:e[11]||(e[11]=t=>I("audit"))},{reference:s(()=>[a(v,{disabled:o(y).length===0},{default:s(()=>e[30]||(e[30]=[m("批量通过审核",-1)])),_:1,__:[30]},8,["disabled"])]),_:1})):d("",!0),o(y).length>0?(n(),_("span",Ye,[e[31]||(e[31]=m(" 已选择：",-1)),l("b",null,k(o(y).length),1),e[32]||(e[32]=m(" 项 ",-1))])):d("",!0)]),_:1})])])]),_:1},8,["model"])]),l("div",Ze,[a(ae,{spinning:o(w)},{default:s(()=>[a(se,{data:o(L),total:o(T),"row-key":"productId",onSelectionChange:o(W),onSortChange:o(E)},{empty:s(()=>[l("div",At,[o(w)?d("",!0):(n(),_("div",xt,"暂无数据"))])]),default:s(()=>[a(b,{type:"selection",width:"32"}),a(b,{label:"商品名称",prop:"productId",sortable:"custom","min-width":320},{default:s(({row:t})=>[l("div",et,[t.picThumb?(n(),_("div",tt,[l("a",{href:o(R)({path:"product",sn:t.productSn}),target:"_blank"},[l("img",{src:o(_e)(t.picThumb),height:"68",width:"68",alt:""},null,8,lt)],8,ot)])):d("",!0),l("div",st,[l("div",at,[a(o(P),{max:100,"org-value":t.productName,"onUpdate:orgValue":g=>t.productName=g,params:{id:t.productId,field:"productName"},requestApi:o(h),label:"商品名称",type:"textarea"},{default:s(()=>[l("div",null,k(t.productName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),t.brandName?(n(),_("p",nt,[e[33]||(e[33]=l("span",{class:"span-tit"},"商品：",-1)),l("span",dt,k(t.brandName),1)])):d("",!0),t.shopSimple?(n(),_("p",it,[e[34]||(e[34]=l("span",{class:"span-tit"},"店铺：",-1)),l("span",rt,k(t.shopSimple.shopTitle),1)])):d("",!0),t.shop?(n(),_("p",pt,[e[35]||(e[35]=l("span",{class:"span-tit"},"店铺：",-1)),l("span",ut,k(t.shop.shopTitle),1)])):d("",!0),t.suppliersName?(n(),_("p",ct,[e[36]||(e[36]=l("span",{class:"span-tit"},"供应商：",-1)),l("span",mt,k(t.suppliersName),1)])):d("",!0),t.type===2?(n(),_("p",_t,e[37]||(e[37]=[l("span",{class:"span-con green"},"【虚拟商品】",-1)]))):d("",!0)])])]),_:1}),a(b,{width:200,label:"商品信息"},{default:s(({row:t})=>[l("div",null,[l("div",null,[e[38]||(e[38]=l("span",{class:"span-tit"},"编码：",-1)),l("div",ft,[a(o(P),{"org-value":t.productSn,"onUpdate:orgValue":g=>t.productSn=g,params:{id:t.productId,field:"productSn"},requestApi:o(h),label:"货号",max:20},{default:s(()=>[l("div",null,k(t.productSn||"--"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),l("div",null,[e[39]||(e[39]=l("span",{class:"span-tit"},"售价：",-1)),l("div",vt,[a(o(P),{extra:"请输入商品价格",isPrice:"","org-value":t.productPrice,"onUpdate:orgValue":g=>t.productPrice=g,params:{id:t.productId,field:"productPrice"},requestApi:o(h),label:"售价",type:"decimal"},{default:s(()=>[l("div",null,k(t.productPrice||0),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])])])]),_:1}),i.value!=7&&i.value!=5&&i.value!=6?(n(),p(b,{key:0,width:100,label:"是否上架"},{default:s(({row:t})=>[l("div",kt,[t.checkStatus==1?(n(),_("div",bt,[a(o(ce),{checked:t.productStatus,"onUpdate:checked":g=>t.productStatus=g,params:{id:t.productId,field:"productStatus"},requestApi:o(h)},null,8,["checked","onUpdate:checked","params","requestApi"])])):d("",!0)])]),_:1})):d("",!0),i.value===5||i.value===6?(n(),p(b,{key:1,width:100,label:"审核状态"},{default:s(({row:t})=>[t.checkStatus===2?(n(),_("span",{key:0,class:"red tips-hover",title:t.checkReason},e[40]||(e[40]=[m("审核失败 ",-1),l("i",{class:"ico-font"},"",-1)]),8,gt)):d("",!0),t.checkStatus===0?(n(),_("span",{key:1,class:"tips-hover gray",title:t.checkReason},"审核中",8,yt)):d("",!0),e[41]||(e[41]=l("br",null,null,-1))]),_:1})):d("",!0),i.value===6?(n(),p(b,{key:2,width:120,label:"失败原因","show-overflow-tooltip":""},{default:s(({row:t})=>[m(k(t.checkReason),1)]),_:1})):d("",!0),i.value!=7?(n(),p(b,{key:3,width:100,label:"库存",prop:"productStock",sortable:"custom"},{default:s(({row:t})=>[t.productExist?(n(),_("a",ht,k(t.productStock),1)):(n(),_("div",Ct,[o(w)?d("",!0):(n(),p(Se,{key:0,params:{id:t.productId,productInfo:t},requestApi:o(h),onCallback:o(f)},{default:s(()=>[l("div",null,k(t.productStock),1)]),_:2},1032,["params","requestApi","onCallback"]))]))]),_:1})):d("",!0),i.value!=7?(n(),p(b,{key:4,width:110,label:"排序",prop:"sortOrder",sortable:"custom"},{header:s(()=>[a(te,{class:"box-item",effect:"light",placement:"top","show-after":"300"},{content:s(()=>e[42]||(e[42]=[l("div",{style:{width:"100px",padding:"5px 10px"}},"排序数值越小，用户端展示越靠前",-1)])),default:s(()=>[l("div",St,[e[43]||(e[43]=l("div",null,"排序",-1)),a(ee,{style:{"margin-left":"5px"},size:"14",color:"#999"},{default:s(()=>[a(o(re))]),_:1})])]),_:1})]),default:s(({row:t})=>[a(o(P),{"org-value":t.sortOrder,"onUpdate:orgValue":g=>t.sortOrder=g,params:{id:t.productId,field:"sortOrder"},requestApi:o(h),label:"排序",type:"integer"},{default:s(()=>[l("div",null,k(t.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):d("",!0),a(b,{width:150,fixed:"right",label:"操作"},{default:s(({row:t})=>[a(B,{size:0},{default:s(()=>[i.value==5&&t.checkStatus===0?(n(),p(o(O),{key:0,maskClose:!1,params:{act:"detail",id:t.productId,examine:1},showClose:!1,showOnOk:!1,isDrawer:"",path:"product/product/Info",title:"商品详情",width:"900px",onOkCallback:o(f)},{default:s(()=>e[44]||(e[44]=[l("a",{class:"btn-link"},"详情",-1)])),_:2,__:[44]},1032,["params","onOkCallback"])):d("",!0),i.value==5&&t.checkStatus===0?(n(),p(q,{key:1,direction:"vertical"})):d("",!0),i.value==6&&t.checkStatus===2?(n(),p(o(O),{key:2,maskClose:!1,params:{act:"again",id:t.productId},dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"修改商品（重新审核）",width:"600px",onOkCallback:o(f)},{default:s(()=>e[45]||(e[45]=[l("a",{class:"btn-link"},"重新审核",-1)])),_:2,__:[45]},1032,["params","onOkCallback"])):d("",!0),i.value==5&&t.checkStatus===0?(n(),p(o(O),{key:3,maskClose:!1,params:{act:"detail",id:t.productId},dialogClass:"noPadding",isDrawer:"",path:"product/product/Examine",title:"商品审核",width:"600px",onOkCallback:o(f)},{default:s(()=>e[46]||(e[46]=[l("a",{class:"btn-link"},"去处理",-1)])),_:2,__:[46]},1032,["params","onOkCallback"])):d("",!0),i.value!=7&&i.value!=5&&i.value!=6?(n(),p(o(O),{key:4,maskClose:!1,params:{act:"detail",id:t.productId,shopId:t.shopId||0},isDrawer:"",path:"product/product/Info",title:"编辑商品",width:"950px",onOkCallback:o(f)},{default:s(()=>e[47]||(e[47]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[47]},1032,["params","onOkCallback"])):d("",!0),i.value!=7?(n(),p(q,{key:5,direction:"vertical"})):d("",!0),i.value!=7&&i.value!=5&&i.value!=6?(n(),_("a",{key:6,class:"btn-link",href:o(R)({path:"product",sn:t.productSn}),target:"_blank"},"查看",8,It)):d("",!0),i.value!=7&&i.value!=5&&i.value!=6?(n(),p(q,{key:7,direction:"vertical"})):d("",!0),i.value===7?(n(),p(o(D),{key:8,params:{id:t.productId,field:"isDelete",val:0},requestApi:o(h),title:"确定还原该商品吗？",onAfterDelete:o(f)},{default:s(()=>e[48]||(e[48]=[m(" 还原 ",-1)])),_:2,__:[48]},1032,["params","requestApi","onAfterDelete"])):d("",!0),i.value===7?(n(),p(q,{key:9,direction:"vertical"})):d("",!0),i.value===7?(n(),p(o(D),{key:10,params:{id:t.productId,field:"del",val:0},requestApi:o(h),title:"确定彻底删除该商品吗？",onAfterDelete:o(f)},{default:s(()=>e[49]||(e[49]=[m(" 删除 ",-1)])),_:2,__:[49]},1032,["params","requestApi","onAfterDelete"])):d("",!0),i.value!=7?(n(),p(le,{key:11,trigger:"hover","hide-on-click":!1},{dropdown:s(()=>[a(oe,null,{default:s(()=>[a(o(D),{params:{id:t.productId,isDelete:1},requestApi:o(fe),title:"确定把该商品移入回收站吗？",onAfterDelete:o(f)},{default:s(()=>[a(F,null,{default:s(()=>[a(v,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>e[50]||(e[50]=[m("移入回收站",-1)])),_:1,__:[50]})]),_:1})]),_:2},1032,["params","requestApi","onAfterDelete"]),a(o(D),{params:{productId:t.productId},requestApi:o(ve),title:"确定复制该商品吗？",onAfterDelete:o(f)},{default:s(()=>[a(F,null,{default:s(()=>[a(v,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>e[51]||(e[51]=[m("复制",-1)])),_:1,__:[51]})]),_:1})]),_:2},1032,["params","requestApi","onAfterDelete"])]),_:2},1024)]),default:s(()=>[e[52]||(e[52]=l("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2,__:[52]},1024)):d("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),o(T)>0?(n(),_("div",Ot,[a(o(me),{page:o(r).page,"onUpdate:page":e[12]||(e[12]=t=>o(r).page=t),size:o(r).size,"onUpdate:size":e[13]||(e[13]=t=>o(r).size=t),total:o(T),onCallback:o(f)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}}),lo=ue(qt,[["__scopeId","data-v-a428c5eb"]]);export{lo as default};

import{d as W,r as O,b as U,x as X,o as Y,an as Z,f as r,g as d,h as i,i as l,z as o,j as e,m as s,a8 as x,Q as f,l as p,t as h,k as D,ax as ee,_ as te}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as ae}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as oe}from"./Pagination-C8J7-6Em.js";import{_ as le}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{a as se,f as ne}from"./shop-CBisV8Of.js";import{S as V}from"./StatusDot-DuKP0Xmc.js";import{u as ie}from"./useListRequest-CprjeVXp.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./format-BxqOrW-w.js";const re={class:"container"},de={class:"content_wrapper"},ce={class:"container"},pe={class:"lyecs-table-list-warp"},ue={class:"list-table-tool lyecs-search-warp"},me={class:"advanced-search-warp list-table-tool-row"},_e={class:"simple-form-warp"},fe={class:"simple-form-field"},he={class:"form-group"},ke={class:"control-container"},be={class:"simple-form-field"},ye={class:"form-group"},ge={class:"control-container"},ve={class:"simple-form-field"},Ce={class:"form-group"},we={class:"control-container"},Se={class:"simple-form-warp"},Oe={class:"simple-form-field"},xe={class:"control-container"},De={class:"list-table-tool-row mt20"},Ve={class:"list-table-tool-col"},Ie={class:"table-container"},Te={key:0},ze={key:0},Ae={key:1},Ue={key:0,class:"btn-link green"},Ke={key:1,class:"btn-link grey"},Ne={key:3,style:{color:"red"}},Pe={key:4,style:{color:"green"}},Be={key:0},Le={key:1},qe={class:"empty-warp"},Me={key:0,class:"empty-bg"},Fe={key:0,class:"pagination-con"},Re=W({__name:"List",setup($e){const K=O([{label:"全部",value:"",isShow:!0},{label:"开业",value:1,isShow:!0},{label:"停业",value:4,isShow:!0},{label:"打烊",value:10,isShow:!0}]),b=U().currentRoute.value.query,N=X(),{listData:P,loading:v,total:C,filterParams:n,loadData:c,onSearchSubmit:u,onSortChange:B,onSelectChange:L}=ie({apiFunction:se,idKey:"shopId",defaultParams:{shopType:2,sortField:"",sortOrder:"",keyword:"",account:b.account||"",mainAccount:"",status:"",page:1,size:N.get("pageSize")}}),q=()=>{n.page=1,n.status="",n.keyword="",n.account="",n.mainAccount="",c()};c(),U().replace({query:{}});const M=g=>{n.status=g,n.page=1,c()},F=()=>{w(),c()},w=()=>{let g=window.location.href,a=new URL(g);a.search="",window.history.replaceState({},document.title,a.toString())},I=O(),y=O(0);Y(()=>{b.id&&Z.confirm(`为[${b.companyName||"--"}]立即创建门店?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{y.value=Number(b.id),I.value.show()}).catch(()=>{y.value=0,w()})});const R=()=>{y.value=0,w()};return(g,a)=>{const $=r("TigTabs"),m=r("el-button"),S=r("TigInput"),T=r("el-space"),_=r("el-table-column"),j=r("el-divider"),E=r("el-icon"),z=r("el-dropdown-item"),G=r("el-dropdown-menu"),Q=r("el-dropdown"),H=r("el-table"),J=r("a-spin");return i(),d("div",re,[l("div",de,[l("div",ce,[l("div",pe,[o($,{modelValue:e(n).status,"onUpdate:modelValue":a[0]||(a[0]=t=>e(n).status=t),tabs:K.value,onOnTabChange:M},null,8,["modelValue","tabs"]),l("div",ue,[l("div",me,[l("div",_e,[l("div",fe,[l("div",he,[a[7]||(a[7]=l("label",{class:"control-label"},[l("span",null,"门店名称：")],-1)),l("div",ke,[o(S,{modelValue:e(n).keyword,"onUpdate:modelValue":a[1]||(a[1]=t=>e(n).keyword=t),name:"keyword",placeholder:"输入门店名称",onKeyup:x(e(u),["enter"]),clearable:"",onClear:e(u)},{append:s(()=>[o(m,{onClick:e(u)},{default:s(()=>[...a[6]||(a[6]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),l("div",be,[l("div",ye,[a[8]||(a[8]=l("label",{class:"control-label"},[l("span",null,"关联账号：")],-1)),l("div",ge,[o(S,{modelValue:e(n).account,"onUpdate:modelValue":a[2]||(a[2]=t=>e(n).account=t),name:"account",placeholder:"输入关联账号名称",onKeyup:x(e(u),["enter"]),clearable:"",onClear:e(u)},null,8,["modelValue","onKeyup","onClear"])])])]),l("div",ve,[l("div",Ce,[a[9]||(a[9]=l("label",{class:"control-label"},[l("span",null,"主账号：")],-1)),l("div",we,[o(S,{modelValue:e(n).mainAccount,"onUpdate:modelValue":a[3]||(a[3]=t=>e(n).mainAccount=t),name:"mainAccount",placeholder:"输入主账号名称",onKeyup:x(e(u),["enter"]),clearable:"",onClear:e(u)},null,8,["modelValue","onKeyup","onClear"])])])]),l("div",Se,[l("div",Oe,[a[12]||(a[12]=l("label",{class:"control-label"},null,-1)),l("div",xe,[o(m,{type:"primary",plain:"",onClick:e(u)},{default:s(()=>[...a[10]||(a[10]=[f("搜索",-1)])]),_:1},8,["onClick"]),o(m,{plain:"",onClick:q},{default:s(()=>[...a[11]||(a[11]=[f("重置",-1)])]),_:1})])])])])]),l("div",De,[l("div",Ve,[o(T,null,{default:s(()=>[o(e(k),{ref_key:"dialogForm",ref:I,params:{act:"add",id:y.value},isDrawer:"",path:"store/adminPages/store/Info",title:"新增门店",width:"950px",onCloseCallback:R,onOkCallback:F},{default:s(()=>[o(m,{type:"primary"},{default:s(()=>[...a[13]||(a[13]=[f("新增门店",-1)])]),_:1})]),_:1},8,["params"])]),_:1})])])]),l("div",Ie,[o(J,{spinning:e(v)},{default:s(()=>[o(H,{data:e(P),loading:e(v),total:e(C),"row-key":"shopId",onSelectionChange:e(L),onSortChange:e(B)},{empty:s(()=>[l("div",qe,[e(v)?p("",!0):(i(),d("div",Me,"暂无数据"))])]),default:s(()=>[o(_,{label:"门店名称"},{default:s(({row:t})=>[f(h(t.shopTitle||"--"),1)]),_:1}),o(_,{label:"门店LOGO"},{default:s(({row:t})=>[o(e(le),{src:t.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(_,{label:"商户名称",width:200},{default:s(({row:t})=>{var A;return[t.merchant?(i(),d("div",Te,[t.merchant.type==2?(i(),d("span",ze,h(((A=t.merchant.merchantData)==null?void 0:A.merchantName)||"--"),1)):p("",!0),t.merchant.type==1?(i(),d("span",Ae,h(t.merchant.corporateName||"--"),1)):p("",!0),o(e(k),{params:{act:"detail",id:t.merchant.merchantId},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:e(c)},{default:s(()=>[t.merchant.status==1?(i(),d("a",Ue,"(已认证)")):(i(),d("a",Ke,"(未认证)"))]),_:2},1032,["params","onOkCallback"])])):p("",!0)]}),_:1}),o(_,{label:"门店状态",sortable:"custom"},{default:s(({row:t})=>[t.status==10?(i(),D(V,{key:0,color:"red",flicker:!0})):p("",!0),t.status==4?(i(),D(V,{key:1,color:"red",flicker:!0})):p("",!0),t.status==1?(i(),D(V,{key:2,color:"green",flicker:!0})):p("",!0),t.status===10||t.status===4?(i(),d("span",Ne,h(t.statusText),1)):t.status===1?(i(),d("span",Pe,h(t.statusText),1)):p("",!0)]),_:1}),o(_,{label:"主账号",align:"center"},{default:s(({row:t})=>[t.merchant&&t.merchant.admin?(i(),d("div",Be,[o(e(k),{params:{id:t.shopId,type:"store"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:e(c),showClose:!1,showOnOk:!1},{default:s(()=>[l("a",null,h(t.merchant.admin.username||"--"),1)]),_:2},1032,["params","onOkCallback"])])):(i(),d("div",Le,"--"))]),_:1}),o(_,{width:100,fixed:"right",label:"操作"},{default:s(({row:t})=>[o(T,{size:0},{default:s(()=>[o(e(k),{params:{act:"detail",id:t.shopId},isDrawer:"",path:"store/adminPages/store/Info",title:"编辑门店",width:"950px",onOkCallback:e(c)},{default:s(()=>[...a[14]||(a[14]=[l("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"]),o(j,{direction:"vertical"}),o(Q,null,{dropdown:s(()=>[o(G,null,{default:s(()=>[o(z,null,{default:s(()=>[o(e(k),{params:{id:t.shopId,type:"store"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:e(c),showClose:!1,showOnOk:!1},{default:s(()=>[o(m,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[...a[15]||(a[15]=[f("主账号管理",-1)])]),_:1})]),_:1},8,["params","onOkCallback"])]),_:2},1024),o(e(ae),{params:{id:t.shopId},title:"删除后门店信息将无法恢复，请确认是否删除该门店？",requestApi:e(ne),onAfterDelete:e(c)},{default:s(()=>[o(z,null,{default:s(()=>[o(m,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[...a[16]||(a[16]=[f("删除",-1)])]),_:1})]),_:1})]),_:1},8,["params","requestApi","onAfterDelete"])]),_:2},1024)]),default:s(()=>[o(E,{class:"btn-link",size:"12"},{default:s(()=>[o(e(ee))]),_:1})]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(C)>0?(i(),d("div",Fe,[o(e(oe),{page:e(n).page,"onUpdate:page":a[4]||(a[4]=t=>e(n).page=t),size:e(n).size,"onUpdate:size":a[5]||(a[5]=t=>e(n).size=t),total:e(C),onCallback:e(c)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])])])}}}),ot=te(Re,[["__scopeId","data-v-e250c377"]]);export{ot as default};

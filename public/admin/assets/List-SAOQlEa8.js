import{d as ae,r as b,x as se,as as le,o as ne,f as n,g as f,h as u,i as a,z as o,m as s,a8 as re,j as v,Q as i,l as y,t as h,k as E,ae as ie,F as $,p as ce,dF as de,P as c,an as pe}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{P as ue}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-CRFq-JzZ.js";import{D as me}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as _e}from"./Pagination-C8J7-6Em.js";import{b as L}from"./format-BxqOrW-w.js";import{u as fe,d as ve,a as ye,i as ge,g as be,b as ke,c as N}from"./mobileDecorate-DdVOYq1U.js";import he from"./OtherPage-DivzQEcT.js";import{u as Ie}from"./decorate-CJWC5VAs.js";import{_ as Ce}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./Bar-BPZ1aUM4.js";import"./ImageCard-CAZjCxRl.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./time-EzYK4E-P.js";/* empty css                                                                  *//* empty css                                                                              */import"./SelectLink-BttPowUZ.js";/* empty css                                                                     */import"./SelectColor.vue_vue_type_script_setup_true_lang-C0gzgyIL.js";import"./decorateDiscrete-9ZAAaA_1.js";const we={VITE_BASE_DIR:"admin"},Te={class:"container"},De={class:"content_wrapper"},xe={class:"lyecs-table-list-warp"},Se={class:"list-table-tool lyecs-search-warp"},$e={class:"advanced-search-warp list-table-tool-row"},Ve={class:"simple-form-warp"},Be={class:"simple-form-field"},ze={class:"form-group"},Fe={class:"control-container"},Pe={class:"simple-form-field"},Ue={class:"form-group"},Ae={class:"simple-form-field"},Ee={class:"form-group"},Le={class:"simple-form-field"},Ne={class:"form-group"},He={key:0},Oe={class:"table-container"},qe={style:{position:"relative"}},Re={class:"flex flex-wrap",style:{gap:"10px",cursor:"pointer"}},Ke=["onClick"],Me=["onClick"],je=["onClick"],Qe=["onClick"],Ge={class:"empty-warp"},Je={key:0,class:"empty-bg"},We={key:0,class:"pagination-con"},ht=ae({__name:"List",props:{decorateType:{type:Number,default:1}},setup(V){const{setDecorateId:H,setLocaleId:O,setIsDefault:q,resetDecorateInfo:R}=Ie(),I=V,B=b(1),K=se(),z=b(),m=b(!0),C=b(0),k=b([]);b(!1);const d=le({page:1,decorateType:I.decorateType,size:K.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),M=async l=>{m.value=!0;try{const e=await ye({decorateId:l});de(`${window.location.protocol}//${window.location.host.split(":")[0]}${e.apiUrl}`),c.success("分享链接已经复制到剪贴板, 导入时可直接粘贴使用")}catch(e){c.error(e.message)}finally{m.value=!1}},j=()=>{pe.prompt("请把分享链接粘贴在此处","导入装修链接",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:l})=>{Q(l)})},Q=async l=>{m.value=!0;try{const e=decodeURIComponent(l),_=await ge({url:e});c.success("操作成功"),p()}catch(e){c.error(e.message)}finally{m.value=!1}},p=async()=>{m.value=!0;try{const l=await be({...d});z.value=l.records,C.value=l.total}catch(l){c.error(l.message)}finally{m.value=!1}};ne(()=>{p()});const F=()=>{p()},G=({prop:l,order:e})=>{d.sortField=l,d.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",p()},J=async l=>{try{const e=await ke(l,{ids:k.value});c.success("操作成功"),p()}catch(e){c.error(e.message)}finally{}},W=l=>{k.value=l.map(e=>e.decorateId)},X=async l=>{try{const e=await N("setHome",{id:l.decorateId});c.success("操作成功"),p()}catch(e){c.error(e.message)}finally{}},Y=async l=>{try{const e=await N("copy",{id:l.decorateId});c.success("操作成功"),p()}catch(e){c.error(e.message)}finally{}},{VITE_BASE_DIR:P}=we,T=(l,e,_,D,x)=>{R(),H(e||_||0),O(D),q(x),l===1?window.open(`${L(P)}/decorate/index?id=${_}`,"_blank"):window.open(`${L(P)}/decorate/pc?id=${_}`,"_blank")};return(l,e)=>{const _=n("el-button"),D=n("TigInput"),x=n("el-popconfirm"),U=n("el-space"),Z=n("el-form"),g=n("el-table-column"),S=n("el-tag"),w=n("el-divider"),ee=n("el-table"),te=n("a-spin"),A=n("el-tab-pane"),oe=n("el-tabs");return u(),f("div",Te,[a("div",De,[o(oe,{modelValue:B.value,"onUpdate:modelValue":e[4]||(e[4]=t=>B.value=t),class:"demo-tabs"},{default:s(()=>[o(A,{label:"店铺页面",name:1},{default:s(()=>[a("div",xe,[a("div",Se,[o(Z,{model:d},{default:s(()=>[a("div",$e,[a("div",Ve,[a("div",Be,[a("div",ze,[a("div",Fe,[o(D,{modelValue:d.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>d.keyword=t),name:"keyword",placeholder:"输入页面名称",onKeyup:re(F,["enter"])},{append:s(()=>[o(_,{onClick:F},{default:s(()=>[...e[5]||(e[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),a("div",Pe,[a("div",Ue,[o(v(Ce),{isDrawer:"",onOkCallback:p,title:"添加页面",width:"600px",path:"decorate/mobileDecorate/Info",params:{act:"add",decorateType:V.decorateType}},{default:s(()=>[o(_,{type:"primary"},{default:s(()=>[...e[6]||(e[6]=[i("添加页面",-1)])]),_:1})]),_:1},8,["params"])])]),a("div",Ae,[a("div",Ee,[o(_,{type:"success",onClick:j},{default:s(()=>[...e[7]||(e[7]=[i("导入装修链接",-1)])]),_:1})])]),a("div",Le,[a("div",Ne,[o(U,null,{default:s(()=>[o(x,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>J("del"))},{reference:s(()=>[o(_,{disabled:k.value.length===0},{default:s(()=>[...e[8]||(e[8]=[i("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),k.value.length>0?(u(),f("span",He,[e[9]||(e[9]=i(" 已选择：",-1)),a("b",null,h(k.value.length),1),e[10]||(e[10]=i(" 项 ",-1))])):y("",!0)]),_:1})])])])])]),_:1},8,["model"])]),a("div",Oe,[o(te,{spinning:m.value},{default:s(()=>[o(ee,{data:z.value,"row-key":"decorateId",onSelectionChange:W,total:C.value,onSortChange:G,loading:m.value},{empty:s(()=>[a("div",Ge,[m.value?y("",!0):(u(),f("div",Je,"暂无数据"))])]),default:s(()=>[o(g,{type:"selection",width:"32"}),o(g,{label:"页面名称",prop:"decorateId",sortable:"custom",width:300},{default:s(({row:t})=>[a("div",qe,[o(U,null,{default:s(()=>[o(v(ue),{label:"页面名称",type:"textarea",requestApi:v(fe),"org-value":t.decorateTitle,"onUpdate:orgValue":r=>t.decorateTitle=r,params:{id:t.decorateId,field:"decorateTitle"},max:50},{default:s(()=>[a("div",null,h(t.decorateTitle),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:2},1024)]),t.isHome===1?(u(),E(S,{key:0,type:"success",hit:!1,effect:"light",size:"small","disable-transitions":""},{default:s(()=>[...e[11]||(e[11]=[i("首页",-1)])]),_:1})):y("",!0)]),_:1}),o(g,{label:"发布状态",prop:"status",sortable:"custom",width:150},{default:s(({row:t})=>[i(h(t.status==1?"已发布":"未发布"),1)]),_:1}),v(ie)()?(u(),E(g,{key:0,label:"页面语言",prop:"children",width:200},{default:s(({row:t})=>[a("div",Re,[a("div",null,[o(S,{type:"primary",effect:"plain",onClick:r=>T(I.decorateType,0,t.decorateId,0,!0)},{default:s(()=>[...e[12]||(e[12]=[i("默认语言",-1)])]),_:1},8,["onClick"])]),(u(!0),f($,null,ce(t.children,r=>(u(),f("div",{key:r.decorateId},[o(S,{type:"primary",effect:"plain",onClick:Xe=>T(I.decorateType,t.decorateId,r.decorateId,r.localeId,!1)},{default:s(()=>[i(h(r.language),1)]),_:2},1032,["onClick"])]))),128))])]),_:1})):y("",!0),o(g,{label:"更新时间",prop:"updateTime",sortable:"custom"},{default:s(({row:t})=>[i(h(t.updateTime),1)]),_:1}),o(g,{label:"操作",fixed:"right",width:220},{default:s(({row:t})=>[a("a",{class:"btn-link",onClick:r=>T(I.decorateType,0,t.decorateId,0,!0)},"编辑",8,Ke),o(w,{direction:"vertical"}),t.isHome==0&&t.status==1?(u(),f($,{key:0},[a("a",{class:"btn-link",onClick:r=>X(t)},"设为首页",8,Me),o(w,{direction:"vertical"})],64)):y("",!0),a("a",{class:"btn-link",onClick:r=>Y(t)},"复制",8,je),t.isHome==0?(u(),f($,{key:1},[o(w,{direction:"vertical"}),o(v(me),{onAfterDelete:p,requestApi:v(ve),params:{id:t.decorateId}},{default:s(()=>[...e[13]||(e[13]=[i("删除",-1)])]),_:1},8,["requestApi","params"])],64)):y("",!0),o(w,{direction:"vertical"}),a("a",{class:"btn-link",onClick:r=>M(t.decorateId)},"分享",8,Qe)]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),C.value>0?(u(),f("div",We,[o(v(_e),{page:d.page,"onUpdate:page":e[2]||(e[2]=t=>d.page=t),size:d.size,"onUpdate:size":e[3]||(e[3]=t=>d.size=t),total:C.value,onCallback:p},null,8,["page","size","total"])])):y("",!0)])])]),_:1}),o(A,{label:"其他模块",name:2},{default:s(()=>[o(he)]),_:1})]),_:1},8,["modelValue"])])])}}});export{ht as default};

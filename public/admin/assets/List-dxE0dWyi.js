import{d as Q,x as Y,b as G,r as H,Y as J,o as W,f as r,g as u,h as p,i as t,z as a,m as s,j as e,a8 as X,F as D,p as x,Q as _,l as b,t as v,k as Z}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as ee}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as le}from"./Pagination-C8J7-6Em.js";import{g as te,d as oe,b as ae}from"./feedback-DekIC3ab.js";import{u as se}from"./useListRequest-CprjeVXp.js";import{_ as z}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const ne={class:"container"},ie={class:"content_wrapper"},re={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},ue={class:"simple-form-warp"},ce={class:"simple-form-field"},me={class:"form-group"},_e={class:"control-container"},fe={class:"simple-form-field"},be={class:"form-group"},ve={class:"control-container"},ye={class:"simple-form-field"},ge={class:"form-group"},ke={class:"control-container"},he={class:"simple-form-warp"},Ce={class:"simple-form-field"},we={class:"control-container"},Se={class:"list-table-tool-row"},Ve={class:"list-table-tool-col"},Ne={class:"simple-form-field"},De={class:"form-group"},xe={key:0},ze={class:"table-container"},Ae={key:1,style:{color:"#999"}},Ie={key:2,style:{color:"#999"}},Fe={class:"empty-warp"},Te={key:0,class:"empty-bg"},Be={key:0,class:"pagination-con"},Qe=Q({__name:"List",setup(Oe){const A=[{label:"建议",value:0},{label:"投诉",value:1},{label:"商品",value:2},{label:"其他",value:3},{label:"店铺投诉",value:4},{label:"订单问题",value:5},{label:"订单咨询",value:6}],I=[{label:"待回复",value:0},{label:"已回复",value:1},{label:"无效",value:2}],F=Y(),d=G().currentRoute.value.query,y=H([]),{listData:T,loading:k,total:h,selectedIds:C,filterParams:n,loadData:f,onSearchSubmit:c,onSortChange:B,onSelectChange:O,onBatchAction:q,resetParams:P}=se({apiFunction:te,idKey:"id",defaultParams:{sortField:"",sortOrder:"",keyword:"",type:"",status:"",page:1,size:F.get("pageSize")}});J(n,i=>{i.type||(y.value=[])});const U=i=>{n.type=i.join(","),f()},K=async i=>{await q(i,ae)};return W(()=>{if(d&&d.type){let i;typeof d.type=="string"?i=d.type.split(",").map(Number):Array.isArray(d.type)?i=d.type.map(Number):i=[],y.value=i}d&&d.status&&(n.status=Number(d.status)),f()}),(i,l)=>{const g=r("el-button"),L=r("TigInput"),w=r("el-option"),S=r("el-select"),R=r("el-popconfirm"),V=r("el-space"),j=r("el-form"),m=r("el-table-column"),$=r("el-divider"),E=r("el-table"),M=r("a-spin");return p(),u("div",ne,[t("div",ie,[t("div",re,[t("div",de,[a(j,{model:e(n)},{default:s(()=>[t("div",pe,[t("div",ue,[t("div",ce,[t("div",me,[l[7]||(l[7]=t("label",{class:"control-label"},[t("span",null,"留言内容：")],-1)),t("div",_e,[a(L,{modelValue:e(n).keyword,"onUpdate:modelValue":l[0]||(l[0]=o=>e(n).keyword=o),name:"keyword",placeholder:"输入留言内容",onKeyup:X(e(c),["enter"]),clearable:"",onClear:e(c)},{append:s(()=>[a(g,{onClick:e(c)},{default:s(()=>[...l[6]||(l[6]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),t("div",fe,[t("div",be,[l[8]||(l[8]=t("label",{class:"control-label"},[t("span",null,"留言类型：")],-1)),t("div",ve,[a(S,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=o=>y.value=o),multiple:"",clearable:"",placeholder:"请选择",onClear:e(c),onChange:U},{default:s(()=>[(p(),u(D,null,x(A,o=>a(w,{label:o.label,value:o.value,key:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onClear"])])])]),t("div",ye,[t("div",ge,[l[9]||(l[9]=t("label",{class:"control-label"},[t("span",null,"回复状态：")],-1)),t("div",ke,[a(S,{modelValue:e(n).status,"onUpdate:modelValue":l[2]||(l[2]=o=>e(n).status=o),clearable:"",placeholder:"请选择",onClear:e(c),onChange:e(c)},{default:s(()=>[(p(),u(D,null,x(I,o=>a(w,{label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onClear","onChange"])])])]),t("div",he,[t("div",Ce,[l[12]||(l[12]=t("label",{class:"control-label"},null,-1)),t("div",we,[a(g,{type:"primary",plain:"",onClick:e(c)},{default:s(()=>[...l[10]||(l[10]=[_("搜索",-1)])]),_:1},8,["onClick"]),a(g,{plain:"",onClick:e(P)},{default:s(()=>[...l[11]||(l[11]=[_("重置",-1)])]),_:1},8,["onClick"])])])])])]),t("div",Se,[t("div",Ve,[a(V,null,{default:s(()=>[t("div",Ne,[t("div",De,[a(V,null,{default:s(()=>[a(R,{title:"您确认要批量删除所选数据吗？",onConfirm:l[3]||(l[3]=o=>K("del"))},{reference:s(()=>[a(g,{disabled:e(C).length===0},{default:s(()=>[...l[13]||(l[13]=[_("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(C).length>0?(p(),u("span",xe,[l[14]||(l[14]=_(" 已选择：",-1)),t("b",null,v(e(C).length),1),l[15]||(l[15]=_(" 项 ",-1))])):b("",!0)]),_:1})])])]),_:1})])])]),_:1},8,["model"])]),t("div",ze,[a(M,{spinning:e(k)},{default:s(()=>[a(E,{data:e(T),loading:e(k),total:e(h),"row-key":"id",onSelectionChange:e(O),onSortChange:e(B)},{empty:s(()=>[t("div",Fe,[e(k)?b("",!0):(p(),u("div",Te,"暂无数据"))])]),default:s(()=>[a(m,{type:"selection",width:"32"}),a(m,{width:120,label:"会员名称",prop:"username"}),a(m,{label:"类型",prop:"typeName"},{default:s(({row:o})=>{var N;return[t("p",null,v(o.typeName),1),o.orderSn?(p(),Z(e(z),{key:0,params:{act:"detail",id:o.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+o.orderSn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:e(f)},{default:s(()=>[t("a",null,v(o.orderSn),1)]),_:2},1032,["params","title","onCallback"])):b("",!0),o.shopId&&o.store?(p(),u("div",Ae,v(o.store.storeTitle),1)):b("",!0),o.productId>0?(p(),u("div",Ie,v(((N=o.product)==null?void 0:N.productName)||"--"),1)):b("",!0)]}),_:1}),a(m,{label:"留言内容",prop:"content"},{default:s(({row:o})=>[_(v(o.content),1)]),_:1}),a(m,{width:160,label:"留言时间",prop:"addTime"}),a(m,{width:80,label:"回复",prop:"statusName"}),a(m,{width:150,fixed:"right",label:"操作"},{default:s(({row:o})=>[a(e(z),{params:{act:"detail",id:o.id},isDrawer:"",path:"user/feedback/Info",title:"回复会员留言",width:"560px",onOkCallback:e(f)},{default:s(()=>[...l[16]||(l[16]=[t("a",{class:"btn-link"},"回复",-1)])]),_:1},8,["params","onOkCallback"]),a($,{direction:"vertical"}),a(e(ee),{params:{id:o.id},requestApi:e(oe),onAfterDelete:e(f)},{default:s(()=>[...l[17]||(l[17]=[_("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(h)>0?(p(),u("div",Be,[a(e(le),{page:e(n).page,"onUpdate:page":l[4]||(l[4]=o=>e(n).page=o),size:e(n).size,"onUpdate:size":l[5]||(l[5]=o=>e(n).size=o),total:e(h),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):b("",!0)])])])])}}});export{Qe as default};

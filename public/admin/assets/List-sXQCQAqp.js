import{d as G,b as A,x as H,r as x,o as J,f as l,g as r,h as i,i as o,l as d,z as s,m as n,j as e,a8 as W,Q as u,t as v,k as _,C as N,n as X,_ as Y}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as Z}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as ee}from"./Pagination-C8J7-6Em.js";import{i as te,r as ae}from"./format-BxqOrW-w.js";import{g as oe,d as se,b as ne}from"./adminUser-Irb9OB0N.js";import{M as ie}from"./MobileCard-qEvTFKQw.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as le}from"./Tag-DafgHPRr.js";import{u as re}from"./useListRequest-CprjeVXp.js";import{_ as U}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const de={class:"container"},pe={class:"content_wrapper"},me={class:"lyecs-table-list-warp"},ce={class:"list-table-tool lyecs-search-warp"},ue={class:"list-table-tool-row"},_e={class:"simple-form-warp"},fe={class:"simple-form-field"},ve={class:"form-group"},ge={class:"control-container"},ye={key:0,class:"simple-form-field"},be={class:"form-group"},ke={class:"simple-form-field"},he={class:"form-group"},Ce={key:0},Se={class:"table-container"},Ie={class:"avatar-username"},ze={key:0},De={key:0},xe={key:1},we=["onClick"],Te={class:"empty-warp"},Ae={key:0,class:"empty-bg"},Ne={key:0,class:"pagination-con"},Ue=G({__name:"List",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(B){const V=A(),q=H(),{listData:K,loading:b,total:k,selectedIds:h,filterParams:m,loadData:f,onSearchSubmit:C,onSortChange:O,onSelectChange:P,onBatchAction:F}=re({apiFunction:oe,idKey:"adminId",defaultParams:{page:1,size:q.get("pageSize"),sortField:"",sortOrder:"",keyword:"",adminUserType:"admin"}}),L=async y=>{await F(y,ne)},p=x("admin"),R=y=>{V.push("/authority/admin_log/list?userId="+y)},g=B,w=A().currentRoute.value.query,S=x(g.isDialog?g.act:String(w.act)),I=x(g.isDialog?g.id:Number(w.id)||"");return J(()=>{S.value&&(m.suppliersId=I.value),f()}),(y,a)=>{const z=l("el-button"),M=l("TigInput"),$=l("el-popconfirm"),j=l("el-space"),c=l("el-table-column"),D=l("el-avatar"),T=l("el-divider"),E=l("el-table"),Q=l("a-spin");return i(),r("div",de,[o("div",pe,[o("div",me,[o("div",ce,[o("div",ue,[o("div",_e,[o("div",fe,[o("div",ve,[o("div",ge,[s(M,{modelValue:e(m).keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>e(m).keyword=t),name:"keyword",placeholder:"输入管理员名称",onKeyup:W(e(C),["enter"]),clearable:"",onClear:e(C)},{append:n(()=>[s(z,{onClick:e(C)},{default:n(()=>[...a[4]||(a[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),p.value=="admin"?(i(),r("div",ye,[o("div",be,[s(e(U),{params:{act:"add",type:S.value?S.value:"",suppliersId:I.value?I.value:0,adminType:p.value},isDrawer:"",path:"authority/adminUser/Info",title:"添加管理员",width:"700px",onOkCallback:e(f)},{default:n(()=>[s(z,{type:"primary"},{default:n(()=>[...a[5]||(a[5]=[u("添加管理员",-1)])]),_:1})]),_:1},8,["params","onOkCallback"])])])):d("",!0),o("div",ke,[o("div",he,[s(j,null,{default:n(()=>[s($,{title:"您确认要批量删除所选数据吗？",onConfirm:a[1]||(a[1]=t=>L("del"))},{reference:n(()=>[s(z,{disabled:e(h).length===0},{default:n(()=>[...a[6]||(a[6]=[u("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(h).length>0?(i(),r("span",Ce,[a[7]||(a[7]=u(" 已选择：",-1)),o("b",null,v(e(h).length),1),a[8]||(a[8]=u(" 项 ",-1))])):d("",!0)]),_:1})])])])])]),o("div",Se,[s(Q,{spinning:e(b)},{default:n(()=>[s(E,{data:e(K),loading:e(b),total:e(k),"row-key":"adminId",onSelectionChange:e(P),onSortChange:e(O)},{empty:n(()=>[o("div",Te,[e(b)?d("",!0):(i(),r("div",Ae,"暂无数据"))])]),default:n(()=>[s(c,{type:"selection",width:"32"}),s(c,{width:"200",label:p.value=="vendor"?"供应商":"管理员名称",prop:"username"},{default:n(({row:t})=>[o("div",Ie,[e(N)(String(t.avatar))=="one"?(i(),_(D,{key:0,size:30,src:e(te)(t.avatar)},null,8,["src"])):e(N)(String(t.avatar))=="def"?(i(),_(D,{key:1,size:30,src:e(ae)(t.avatar)},null,8,["src"])):(i(),_(D,{key:2,size:30,src:""})),o("div",null,[o("div",null,v(t.username),1),p.value=="shop"&&t.isAdmin==1?(i(),r("div",ze,[s(e(le),{transparent:!0,text:"店铺管理员"})])):d("",!0)])])]),_:1},8,["label"]),p.value=="admin"?(i(),_(c,{key:0,label:"权限组",prop:"roleName"},{default:n(({row:t})=>[o("span",{class:X(t.roleName?"green":"gray")},v(t.roleName||"-"),3)]),_:1})):d("",!0),s(c,{label:"邮箱",prop:"email"},{default:n(({row:t})=>[o("span",null,v(t.email||"-"),1)]),_:1}),s(c,{label:"电话",prop:"mobile"},{default:n(({row:t})=>[t.mobile?(i(),r("span",De,[s(ie,{mobile:t.mobile},null,8,["mobile"])])):(i(),r("span",xe,"--"))]),_:1}),s(c,{label:"添加时间",prop:"addTime"},{default:n(({row:t})=>[u(v(t.addTime||"--"),1)]),_:1}),s(c,{width:150,fixed:"right",label:"操作"},{default:n(({row:t})=>[s(e(U),{params:{act:"detail",id:t.adminId,adminType:p.value},isDrawer:"",path:"authority/adminUser/Info",title:p.value=="shop"?"编辑员工":"编辑管理员",width:"700px",onOkCallback:e(f)},{default:n(()=>[...a[9]||(a[9]=[o("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","title","onOkCallback"]),o("template",null,[s(T,{direction:"vertical"}),p.value=="admin"?(i(),r("a",{key:0,class:"btn-link",onClick:Be=>R(t.adminId)},"日志",8,we)):d("",!0)]),t.adminId!=1?(i(),_(T,{key:0,direction:"vertical"})):d("",!0),t.adminId!=1?(i(),_(e(Z),{key:1,params:{id:t.adminId},requestApi:e(se),onAfterDelete:e(f)},{default:n(()=>[...a[10]||(a[10]=[u("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])):d("",!0)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(k)>0?(i(),r("div",Ne,[s(e(ee),{page:e(m).page,"onUpdate:page":a[2]||(a[2]=t=>e(m).page=t),size:e(m).size,"onUpdate:size":a[3]||(a[3]=t=>e(m).size=t),total:e(k),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}}),Je=Y(Ue,[["__scopeId","data-v-112c568c"]]);export{Je as default};

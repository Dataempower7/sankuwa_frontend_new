import{a6 as I,d as H,x as J,r as x,g as y,i as o,z as n,m as s,j as a,l as w,P as F,f as u,h as d,Q as i,F as U,p as z,k as b,a8 as X,t as c,aw as D}from"./index-B52YIGC0.js";/* empty css             *//* empty css                                                                    */import{P as Z}from"./Pagination-C8J7-6Em.js";import{g as ee}from"./statementDownload-XgKTVaBc.js";import{u as te}from"./useListRequest-CprjeVXp.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as oe}from"./SelectTimeInterval-BUZ-hmxo.js";import{f as m}from"./time-EzYK4E-P.js";import{r as ae}from"./export-Ds6vL4MA.js";const le=f=>I({url:"finance/statement/getStatementList",method:"get",params:f}),ne=f=>I({url:"finance/statement/exportStatement",method:"get",responseType:"arraybuffer",params:f}),se={class:"container"},re={class:"content_wrapper"},ie={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},ue={class:"simple-form-warp"},me={class:"simple-form-field"},ce={class:"form-group"},fe={class:"control-container"},_e={class:"simple-form-field"},ge={class:"form-group"},ye={class:"simple-form-field"},ve={class:"form-group"},be={class:"simple-form-field"},De={class:"form-group"},Te={class:"control-container"},Ye={class:"simple-form-field"},Ce={class:"form-group"},Se={class:"control-container"},we={class:"simple-form-field"},he={class:"form-group"},Ve={class:"control-container"},Me={class:"simple-form-field mr10"},ke={class:"form-group"},Ne={class:"control-container"},xe={class:"simple-form-warp"},Ue={class:"simple-form-field"},ze={class:"control-container"},Pe={class:"list-table-tool-row"},Be={class:"list-table-tool-col"},Fe={class:"table-container"},Ie={class:"empty-warp"},Le={key:0,class:"empty-bg"},Ee={key:0,class:"pagination-con"},et=H({__name:"List",props:{source:{type:String,default:"shop"},startDateTime:{type:String,default:""},endDateTime:{type:String,default:""}},setup(f){const h=f,L=J(),V=x(-1),{listData:E,loading:T,total:M,filterParams:l,loadData:k,onSearchSubmit:_,onSortChange:K,onSelectChange:q,resetParams:R}=te({apiFunction:le,idKey:"invoiceId",defaultParams:{page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",keyword:"",startDateTime:h.startDateTime,endDateTime:h.endDateTime,timeType:1,accountType:0,type:0,paymentType:"",recordSn:"",source:h.source}},["accountType"]),Y=x({}),P=async()=>{try{const r=await ee();Y.value=r,l.accountType=r.accountType[0].code,await k()}catch(r){F.error(r.message)}finally{T.value=!1}};P();const B=r=>{if(r===-1){V.value=r;return}l.startDateTime=m(new Date,"YYYY-MM-DD"),r===0&&(l.endDateTime=m(new Date,"YYYY-MM-DD")),r===1&&(l.startDateTime=m(D(1,"sub"),"YYYY-MM-DD"),l.endDateTime=m(D(1,"sub"),"YYYY-MM-DD")),r===2&&(l.startDateTime=m(D(7,"sub"),"YYYY-MM-DD"),l.endDateTime=m(new Date,"YYYY-MM-DD")),r===3&&(l.startDateTime=m(D(30,"sub"),"YYYY-MM-DD"),l.endDateTime=m(new Date,"YYYY-MM-DD")),r===4&&(l.startDateTime=m(D(180,"sub"),"YYYY-MM-DD"),l.endDateTime=m(new Date,"YYYY-MM-DD")),k()},C=x(!1),j=async()=>{C.value=!0;try{const r=await ne(l);C.value=!1,ae(r,"导出报表")}catch(r){F.error(r.message)}finally{C.value=!1}},O=async()=>{await P(),R()};return(r,e)=>{const g=u("el-option"),S=u("el-select"),v=u("el-radio-button"),Q=u("el-radio-group"),W=u("TigInput"),N=u("el-button"),$=u("el-form"),p=u("el-table-column"),A=u("el-table"),G=u("a-spin");return d(),y("div",se,[o("div",re,[o("div",ie,[o("div",de,[n($,{model:a(l)},{default:s(()=>[o("div",pe,[o("div",ue,[o("div",me,[o("div",ce,[e[11]||(e[11]=o("label",{class:"control-label"},[o("span",null,"账单时间：")],-1)),o("div",fe,[n(S,{clearable:"",placeholder:"请选择状态",modelValue:a(l).timeType,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).timeType=t),onChange:a(_)},{default:s(()=>[n(g,{value:1,label:"入账时间"}),n(g,{value:2,label:"下单时间"})]),_:1},8,["modelValue","onChange"])])])]),o("div",_e,[o("div",ge,[e[12]||(e[12]=o("label",{class:"control-label"},[o("span",null,"筛选时间：")],-1)),n(a(oe),{type:"date","start-date":a(l).startDateTime,"onUpdate:startDate":e[1]||(e[1]=t=>a(l).startDateTime=t),"end-date":a(l).endDateTime,"onUpdate:endDate":e[2]||(e[2]=t=>a(l).endDateTime=t),onCallback:e[3]||(e[3]=t=>B(-1))},null,8,["start-date","end-date"])])]),o("div",ye,[o("div",ve,[n(Q,{class:"itemWidth",modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=t=>V.value=t),onChange:B},{default:s(()=>[n(v,{value:0},{default:s(()=>[...e[13]||(e[13]=[i("今天",-1)])]),_:1}),n(v,{value:1},{default:s(()=>[...e[14]||(e[14]=[i("昨天",-1)])]),_:1}),n(v,{value:2},{default:s(()=>[...e[15]||(e[15]=[i("近7天",-1)])]),_:1}),n(v,{value:3},{default:s(()=>[...e[16]||(e[16]=[i("近30天",-1)])]),_:1}),n(v,{value:4},{default:s(()=>[...e[17]||(e[17]=[i("近半年",-1)])]),_:1})]),_:1},8,["modelValue"])])]),o("div",be,[o("div",De,[e[18]||(e[18]=o("label",{class:"control-label"},[o("span",null,"入账类型：")],-1)),o("div",Te,[n(S,{clearable:"",placeholder:"请选择入账类型",modelValue:a(l).accountType,"onUpdate:modelValue":e[5]||(e[5]=t=>a(l).accountType=t),onChange:a(_)},{default:s(()=>[(d(!0),y(U,null,z(Y.value.accountType,t=>(d(),b(g,{value:t.code,label:t.description},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),o("div",Ye,[o("div",Ce,[e[19]||(e[19]=o("label",{class:"control-label"},[o("span",null,"类型：")],-1)),o("div",Se,[n(S,{clearable:"",placeholder:"请选择类型",modelValue:a(l).type,"onUpdate:modelValue":e[6]||(e[6]=t=>a(l).type=t),onChange:a(_)},{default:s(()=>[n(g,{value:0,label:"全部"}),(d(!0),y(U,null,z(Y.value.statementType,t=>(d(),b(g,{value:t.code,label:t.description},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),o("div",we,[o("div",he,[e[20]||(e[20]=o("label",{class:"control-label"},[o("span",null,"支付方式：")],-1)),o("div",Ve,[n(S,{clearable:"",placeholder:"请选择支付方式：",modelValue:a(l).paymentType,"onUpdate:modelValue":e[7]||(e[7]=t=>a(l).paymentType=t),onChange:a(_)},{default:s(()=>[(d(!0),y(U,null,z(Y.value.payMethodType,t=>(d(),b(g,{value:t.code,label:t.description},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),o("div",Me,[o("div",ke,[e[21]||(e[21]=o("label",{class:"control-label"},[o("span",null,"单号：")],-1)),o("div",Ne,[n(W,{modelValue:a(l).recordSn,"onUpdate:modelValue":e[8]||(e[8]=t=>a(l).recordSn=t),name:"orderSn",placeholder:"请输入单号",onKeyup:X(a(_),["enter"]),clearable:"",onClear:a(_)},null,8,["modelValue","onKeyup","onClear"])])])]),o("div",xe,[o("div",Ue,[e[24]||(e[24]=o("label",{class:"control-label"},null,-1)),o("div",ze,[n(N,{type:"primary",plain:"",onClick:a(_)},{default:s(()=>[...e[22]||(e[22]=[i("搜索",-1)])]),_:1},8,["onClick"]),n(N,{plain:"",onClick:O},{default:s(()=>[...e[23]||(e[23]=[i("重置",-1)])]),_:1})])])])])]),o("div",Pe,[o("div",Be,[n(N,{type:"primary",onClick:j,loading:C.value},{default:s(()=>[...e[25]||(e[25]=[i("导出报表",-1)])]),_:1},8,["loading"])])])]),_:1},8,["model"])]),o("div",Fe,[n(G,{spinning:a(T)},{default:s(()=>[n(A,{data:a(E),loading:a(T),total:a(M),"row-key":"invoiceId",onSelectionChange:a(q),onSortChange:a(K)},{empty:s(()=>[o("div",Ie,[a(T)?w("",!0):(d(),y("div",Le,"暂无数据"))])]),default:s(()=>[n(p,{type:"selection",width:"32"}),n(p,{label:"类型",prop:"typeName"},{default:s(({row:t})=>[i(c(t.typeName||"--"),1)]),_:1}),n(p,{label:"入账时间",prop:"settlementTime"},{default:s(({row:t})=>[i(c(t.settlementTime||"--"),1)]),_:1}),f.source==="shop"?(d(),b(p,{key:0,label:"名称",prop:"shopName"},{default:s(({row:t})=>[i(c(t.shopName||"--"),1)]),_:1})):w("",!0),f.source==="vendor"?(d(),b(p,{key:1,label:"名称",prop:"vendorName"},{default:s(({row:t})=>[i(c(t.vendorName||"--"),1)]),_:1})):w("",!0),n(p,{label:"业务单号",prop:"recordSn"},{default:s(({row:t})=>[i(c(t.recordSn||"--"),1)]),_:1}),n(p,{label:"入账类型",prop:"accountTypeName"},{default:s(({row:t})=>[i(c(t.accountTypeName||"--"),1)]),_:1}),n(p,{label:"金额（元）",prop:"amount"},{default:s(({row:t})=>[i(c(t.amount||"--"),1)]),_:1}),n(p,{label:"余额（元）",prop:"accountBalance"},{default:s(({row:t})=>[i(c(t.accountBalance||"--"),1)]),_:1}),n(p,{label:"支付方式",prop:"paymentType"},{default:s(({row:t})=>[i(c(t.paymentType||"--"),1)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),a(M)>0?(d(),y("div",Ee,[n(a(Z),{page:a(l).page,"onUpdate:page":e[9]||(e[9]=t=>a(l).page=t),size:a(l).size,"onUpdate:size":e[10]||(e[10]=t=>a(l).size=t),total:a(M),onCallback:a(k)},null,8,["page","size","total","onCallback"])])):w("",!0)])])])])}}});export{et as _};

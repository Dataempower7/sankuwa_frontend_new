/* empty css             */import"./index-KjhYqCTY.js";import{d as U,u as B,X as D,x as _,ab as h,r as P,o as F,ed as N,P as y,f,g as S,h as m,z as l,m as a,i as o,l as g,Q as i,t as k,j as r,ae as p,k as O,ah as V,ee as G,_ as z}from"./index-B52YIGC0.js";import{d as j}from"./format-BxqOrW-w.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const q={class:"container"},Q={class:"content_wrapper"},X={key:0,class:"web-content"},$={class:"wechat-config"},H={class:"flex flex-align-center",style:{gap:"10px"}},J={class:"secret-txt line1",style:{"max-width":"380px"}},K={class:"flex flex-align-center",style:{gap:"10px"}},Y={class:"secret-txt line1",style:{"max-width":"380px"}},Z={key:0,class:"content_wrapper"},ee={class:"flex flex-align-center",style:{gap:"10px"}},le={key:1,class:"content_wrapper"},te={class:"flex flex-align-center",style:{gap:"10px"}},ae={key:2,class:"content_wrapper"},oe={class:"content_wrapper"},se={class:"selected-action"},ie=U({__name:"LoginSetting",setup(ne){const{themeInfo:R}=B();D(),_();const c=h(),C=P(!1),t=P({openEmailRegister:void 0,isOpenMobileAreaCode:void 0,usernamePrefix:"",openWechatRegister:void 0,openWechatPcLogin:void 0,wechatRegisterBindPhone:void 0,openWechatOauth:void 0,googleLoginOn:void 0,googleClientId:"",googleClientSecret:"",facebookLoginOn:void 0,facebookClientId:"",facebookClientSecret:"",wechatAppId:"",wechatAppSecret:"",wechatServerUrl:"",wechatServerToken:"",wechatServerSecret:""}),T=u=>{t.value.openWechatRegister=u,t.value.wechatRegisterBindPhone=u},E=u=>{t.value.wechatRegisterBindPhone=u};F(async()=>{await L()});const W=P(!0),L=async()=>{try{const u=await N();Object.assign(t.value,j(u))}catch(u){y.error(u.message)}finally{W.value=!1}},I=async()=>{await c.value.validate(),C.value=!0;try{const u=await G(t.value);y.success("修改成功")}catch(u){y.error(u.message)}finally{C.value=!1}};return(u,e)=>{const d=f("el-radio"),v=f("el-radio-group"),n=f("el-form-item"),x=f("TigInput"),b=f("el-button"),A=f("el-form"),M=f("a-spin");return m(),S("div",q,[l(M,{spinning:W.value},{default:a(()=>[l(A,{ref_key:"formRef",ref:c,model:t.value,"label-width":"160px",style:{display:"flex",gap:"12px","flex-direction":"column"}},{default:a(()=>[o("div",Q,[e[35]||(e[35]=o("div",{class:"title"},"微信登录",-1)),l(n,{label:"开启公众号授权登录",prop:"openWechatOauth",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.openWechatOauth,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.openWechatOauth=s),class:"itemWidth",onChange:T},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[17]||(e[17]=[i("是",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[18]||(e[18]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue"]),e[19]||(e[19]=o("div",{class:"extra"},"此项设置控制是否开启微信注册及注册绑定手机，若为否将不支持开启微信注册及注册绑定手机",-1))]),_:1}),t.value.openWechatOauth==1?(m(),S("div",X,[l(n,{label:"",prop:""},{default:a(()=>[o("div",$,[l(A,{model:t.value,"label-width":"130px"},{default:a(()=>[l(n,{label:"微信APPID",prop:"wechatAppId"},{default:a(()=>[o("div",null,[l(x,{classType:"tig-form-input",modelValue:t.value.wechatAppId,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.wechatAppId=s),placeholder:"请输入微信APPID"},null,8,["modelValue"]),e[20]||(e[20]=o("div",{class:"extra"},"请从微信公众号后台获取，链接：https://mp.weixin.qq.com",-1))])]),_:1}),l(n,{label:"微信AppSecret",prop:"wechatAppSecret"},{default:a(()=>[o("div",null,[o("div",H,[o("div",J,k(t.value.wechatAppSecret),1),l(r(w),{maskClose:!1,isDrawer:!1,params:{title:"微信AppSecret",content:t.value.wechatAppSecret},path:"setting/config/src/EditSecret",title:"微信AppSecret",width:"600px",onOkCallback:e[2]||(e[2]=s=>t.value.wechatAppSecret=s)},{default:a(()=>[l(b,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>[...e[21]||(e[21]=[i(" 编辑 ",-1)])]),_:1})]),_:1},8,["params"])]),e[22]||(e[22]=o("div",{class:"extra"},"请从微信公众号后台获取，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的微信AppSecret",-1))])]),_:1}),l(n,{label:"微信服务器Token",prop:"wechatServerToken"},{default:a(()=>[o("div",null,[l(x,{classType:"tig-form-input",modelValue:t.value.wechatServerToken,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.wechatServerToken=s),placeholder:"请输入微信服务器Token"},null,8,["modelValue"]),e[23]||(e[23]=o("div",{class:"extra"},"请从微信公众号后台获取",-1))])]),_:1}),l(n,{label:"微信服务器Secret",prop:"wechatServerSecret"},{default:a(()=>[o("div",null,[o("div",K,[o("div",Y,k(t.value.wechatServerSecret),1),l(r(w),{maskClose:!1,isDrawer:!1,params:{title:"微信服务器Secret",content:t.value.wechatServerSecret},path:"setting/config/src/EditSecret",title:"微信服务器Secret",width:"600px",onOkCallback:e[4]||(e[4]=s=>t.value.wechatServerSecret=s)},{default:a(()=>[l(b,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>[...e[24]||(e[24]=[i(" 编辑 ",-1)])]),_:1})]),_:1},8,["params"])]),e[25]||(e[25]=o("div",{class:"extra"}," 请从微信公众号后台获取，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的微信服务器Secret ",-1))])]),_:1})]),_:1},8,["model"])])]),_:1})])):g("",!0),l(n,{label:"PC微信扫码登录",prop:"openWechatPcLogin",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.openWechatPcLogin,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.openWechatPcLogin=s),class:"itemWidth",onChange:E,disabled:t.value.openWechatOauth==0},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[26]||(e[26]=[i("是",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[27]||(e[27]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),e[28]||(e[28]=o("div",{class:"extra"},"如果选是，PC端将显示微信扫码登录。",-1))]),_:1}),l(n,{label:"是否需要绑定手机号",prop:"wechatRegisterBindPhone",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.wechatRegisterBindPhone,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.wechatRegisterBindPhone=s),class:"itemWidth",disabled:t.value.openWechatOauth==0||t.value.openWechatPcLogin==0},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[29]||(e[29]=[i("是",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[30]||(e[30]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),e[31]||(e[31]=o("div",{class:"extra"}," 如果选是在微信登录时需绑定手机号方可注册，便于全站统一账号；若选择否，则不需要绑定手机，直接注册但不利于账号管理 ",-1))]),_:1}),l(n,{label:"微信小程序快捷登录",prop:"openWechatRegister",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.openWechatRegister,"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.openWechatRegister=s),class:"itemWidth",disabled:t.value.openWechatOauth==0},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[32]||(e[32]=[i("是",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[33]||(e[33]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),e[34]||(e[34]=o("div",{class:"extra"},"如果选是，小程序端将显示一键登录",-1))]),_:1})]),r(p)()?(m(),S("div",Z,[e[42]||(e[42]=o("div",{class:"title"},"Facebook登录",-1)),l(n,{label:"是否开启Facebook登录",prop:"facebookLoginOn",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.facebookLoginOn,"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.facebookLoginOn=s),class:"itemWidth",disabled:!r(p)()},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[36]||(e[36]=[i("是",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[37]||(e[37]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),e[38]||(e[38]=o("div",{class:"extra"},"如果选是，登录页面显示Facebook登录快捷入口，如需开通设置，请购买跨境版授权。",-1))]),_:1}),l(n,{label:"应用APP ID",prop:"facebookClientId"},{default:a(()=>[o("div",null,[l(x,{classType:"tig-form-input",modelValue:t.value.facebookClientId,"onUpdate:modelValue":e[9]||(e[9]=s=>t.value.facebookClientId=s),disabled:t.value.facebookLoginOn==0||!r(p)()},null,8,["modelValue","disabled"]),e[39]||(e[39]=o("div",{class:"extra"},"需开通Facebook开发者平台，创建APP应用（未开通Tigshop APP商城可忽略）。",-1))])]),_:1}),l(n,{label:"应用APP SECRET",prop:"facebookClientSecret"},{default:a(()=>[o("div",null,[o("div",ee,[o("div",{class:"secret-txt line1",style:V({maxWidth:t.value.facebookLoginOn!==0||r(p)()?"380px":"450px"})},k(t.value.facebookClientSecret),5),t.value.facebookLoginOn!==0||r(p)()?(m(),O(r(w),{key:0,maskClose:!1,isDrawer:!1,params:{title:"应用APP SECRET",content:t.value.facebookClientSecret},path:"setting/config/src/EditSecret",title:"应用APP SECRET",width:"600px",onOkCallback:e[10]||(e[10]=s=>t.value.facebookClientSecret=s)},{default:a(()=>[l(b,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>[...e[40]||(e[40]=[i(" 编辑 ",-1)])]),_:1})]),_:1},8,["params"])):g("",!0)]),e[41]||(e[41]=o("div",{class:"extra"},"编辑完成后，点击下方提交按钮确认修改，请确保填写正确的应用APP SECRET",-1))])]),_:1})])):g("",!0),r(p)()?(m(),S("div",le,[e[49]||(e[49]=o("div",{class:"title"},"Google登录",-1)),l(n,{label:"是否开启Google登录",prop:"googleLoginOn",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.googleLoginOn,"onUpdate:modelValue":e[11]||(e[11]=s=>t.value.googleLoginOn=s),class:"itemWidth",disabled:!r(p)()},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[43]||(e[43]=[i("是",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[44]||(e[44]=[i("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),e[45]||(e[45]=o("div",{class:"extra"},"如果选是，登录页面将显示Google登录快捷入口。如需开通设置，请购买跨境版授权。",-1))]),_:1}),l(n,{label:"应用APP ID",prop:"googleClientId"},{default:a(()=>[o("div",null,[l(x,{classType:"tig-form-input",modelValue:t.value.googleClientId,"onUpdate:modelValue":e[12]||(e[12]=s=>t.value.googleClientId=s),disabled:t.value.googleLoginOn==0||!r(p)()},null,8,["modelValue","disabled"]),e[46]||(e[46]=o("div",{class:"extra"},"需开通Google开发者平台，创建APP应用（未开通Tigshop APP商城可忽略）。",-1))])]),_:1}),l(n,{label:"应用APP SECRET",prop:"googleClientSecret"},{default:a(()=>[o("div",null,[o("div",te,[o("div",{class:"secret-txt line1",style:V({maxWidth:t.value.googleLoginOn!==0||r(p)()?"380px":"450px"})},k(t.value.googleClientSecret),5),t.value.googleLoginOn!==0||r(p)()?(m(),O(r(w),{key:0,maskClose:!1,isDrawer:!1,params:{title:"应用APP SECRET",content:t.value.googleClientSecret},path:"setting/config/src/EditSecret",title:"应用APP SECRET",width:"600px",onOkCallback:e[13]||(e[13]=s=>t.value.googleClientSecret=s)},{default:a(()=>[l(b,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>[...e[47]||(e[47]=[i(" 编辑 ",-1)])]),_:1})]),_:1},8,["params"])):g("",!0)]),e[48]||(e[48]=o("div",{class:"extra"},"编辑完成后，点击下方提交按钮确认修改，请确保填写正确的应用APP SECRET",-1))])]),_:1})])):g("",!0),r(p)()?(m(),S("div",ae,[e[53]||(e[53]=o("div",{class:"title"},"邮箱登录",-1)),l(n,{label:"是否开启邮箱注册",prop:"openEmailRegister",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.openEmailRegister,"onUpdate:modelValue":e[14]||(e[14]=s=>t.value.openEmailRegister=s),class:"itemWidth"},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[50]||(e[50]=[i("开启",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[51]||(e[51]=[i("关闭",-1)])]),_:1})]),_:1},8,["modelValue"]),e[52]||(e[52]=o("div",{class:"extra"},"开启邮箱注册后，账号登录时可使用邮箱。",-1))]),_:1})])):g("",!0),o("div",oe,[e[58]||(e[58]=o("div",{class:"title"},"基础设置",-1)),l(n,{label:"手机是否选择区号",prop:"isOpenMobileAreaCode",class:"WidthMax"},{default:a(()=>[l(v,{modelValue:t.value.isOpenMobileAreaCode,"onUpdate:modelValue":e[15]||(e[15]=s=>t.value.isOpenMobileAreaCode=s),class:"itemWidth"},{default:a(()=>[l(d,{value:1},{default:a(()=>[...e[54]||(e[54]=[i("开启",-1)])]),_:1}),l(d,{value:0},{default:a(()=>[...e[55]||(e[55]=[i("关闭",-1)])]),_:1})]),_:1},8,["modelValue"]),e[56]||(e[56]=o("div",{class:"extra"},"如果开启则会将区号存入数据库，请谨慎选择（开启后不建议关闭）。",-1))]),_:1}),l(n,{label:"用户名前缀",prop:"usernamePrefix "},{default:a(()=>[o("div",null,[l(x,{classType:"tig-form-input",modelValue:t.value.usernamePrefix,"onUpdate:modelValue":e[16]||(e[16]=s=>t.value.usernamePrefix=s),placeholder:"可不填"},null,8,["modelValue"]),e[57]||(e[57]=o("div",{class:"extra"},"仅用在自动注册生成username时有效，参考格式：Tigshop_",-1))])]),_:1})])]),_:1},8,["model"]),e[60]||(e[60]=o("div",{style:{height:"20px"}},null,-1)),o("div",{class:"selected-action-warp selected-warp-left",style:V({left:r(R).layout!=="topMenu"?"369px":"270px"})},[o("div",se,[l(b,{loading:C.value,class:"form-submit-btn",size:"large",type:"primary",onClick:I},{default:a(()=>[...e[59]||(e[59]=[i("提 交",-1)])]),_:1},8,["loading"])])],4)]),_:1},8,["spinning"])])}}}),me=z(ie,[["__scopeId","data-v-ac330c0c"]]);export{me as default};

/* empty css             */import{a6 as w,d as F,u as B,r,ab as z,Y as R,o as U,f as n,g as _,h as i,i as p,l as E,z as o,m as s,F as h,p as O,k as q,j as I,ah as P,Q,P as v,_ as Y}from"./index-B52YIGC0.js";import{_ as $}from"./Editor.vue_vue_type_style_index_0_lang-ChPMQjFJ.js";import{d as A}from"./format-BxqOrW-w.js";import"./index.esm-CBYqueH9.js";import"./index-KjhYqCTY.js";import"./index-C9ZdVeVx.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const D=()=>w({url:"setting/mailTemplates/list",method:"get"}),G=b=>w({url:"setting/mailTemplates/update",method:"post",data:b}),H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},W={class:"selected-action"},X=F({__name:"MailTemplate",emits:["submitCallback","update:confirmLoading","close"],setup(b,{expose:T,emit:S}){const{themeInfo:k}=B(),u=S,C=r(!1),c=r(!0),g=z(),t=r({templateName:"",templateId:""}),m=r([]),V=async()=>{var a;try{const e=await D();Object.assign(m.value,A(e)),m.value&&((a=m.value)==null?void 0:a.length)>0&&(t.value.templateId=m.value[0].templateId)}catch(e){v.error(e.message)}finally{c.value=!1}};R(()=>t.value.templateId,a=>{const e=m.value.find(d=>d.templateId==a);e&&Object.assign(t.value,e)}),U(()=>{V()});const y=async()=>{await g.value.validate();try{u("update:confirmLoading",!0);const a=await G({id:t.value.templateId,...t.value});u("submitCallback",a),v.success("修改成功")}catch(a){v.error(a.message)}finally{u("update:confirmLoading",!1)}};return T({onFormSubmit:()=>{y()}}),(a,e)=>{const d=n("el-option"),x=n("el-select"),f=n("el-form-item"),N=n("TigInput"),j=n("el-form"),L=n("a-spin"),M=n("el-button");return i(),_(h,null,[p("div",H,[p("div",J,[p("div",K,[o(L,{spinning:c.value},{default:s(()=>[o(j,{ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:s(()=>[o(f,{label:"邮件模板",prop:"selTemplate"},{default:s(()=>[o(x,{modelValue:t.value.templateId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.templateId=l),style:{width:"100%"}},{default:s(()=>[(i(!0),_(h,null,O(m.value,l=>(i(),q(d,{key:l.templateId,label:l.templateName,value:l.templateId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"邮件主题",prop:"templateSubject"},{default:s(()=>[o(N,{width:"100%",modelValue:t.value.templateSubject,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.templateSubject=l),type:"text"},null,8,["modelValue"])]),_:1}),o(f,{label:"邮件内容",prop:"templateContent"},{default:s(()=>[o(I($),{html:t.value.templateContent,"onUpdate:html":e[2]||(e[2]=l=>t.value.templateContent=l)},null,8,["html"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])])]),c.value?E("",!0):(i(),_("div",{key:0,class:"selected-action-warp selected-warp-left",style:P({left:I(k).layout!=="topMenu"?"369px":"270px"})},[p("div",W,[o(M,{loading:C.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:s(()=>[...e[3]||(e[3]=[Q("提 交",-1)])]),_:1},8,["loading"])])],4))],64)}}}),re=Y(X,[["__scopeId","data-v-463106a5"]]);export{re as default};

/* empty css             */import{s as w,d as F,r,a2 as B,S as z,o as R,f as _,h as i,k as U,z as o,l as s,e as n,F as h,m as E,j as O,i as I,a6 as q,L as K,K as v,g as p,_ as $}from"./index-BLXOA87U.js";import{_ as A}from"./Editor.vue_vue_type_style_index_0_lang-DAwN4rRQ.js";import{c as D}from"./format-DdZABYp4.js";import{u as G}from"./theme-BlP4l20S.js";import"./index.esm-BvrkUkzo.js";import"./index-DpgvsnVO.js";import"./index-B16C4gX_.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";const H=()=>w({url:"setting/mailTemplates/list",method:"get"}),J=g=>w({url:"setting/mailTemplates/update",method:"post",data:g}),P={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},X={class:"selected-action"},Y=F({__name:"MailTemplate",emits:["submitCallback","update:confirmLoading","close"],setup(g,{expose:S,emit:T}){const{themeInfo:k}=G(),u=T,C=r(!1),c=r(!0),b=B(),t=r({templateName:"",templateId:""}),m=r([]),V=async()=>{var a;try{const e=await H();Object.assign(m.value,D(e)),m.value&&((a=m.value)==null?void 0:a.length)>0&&(t.value.templateId=m.value[0].templateId)}catch(e){v.error(e.message)}finally{c.value=!1}};z(()=>t.value.templateId,a=>{const e=m.value.find(d=>d.templateId==a);e&&Object.assign(t.value,e)}),R(()=>{V()});const y=async()=>{await b.value.validate();try{u("update:confirmLoading",!0);const a=await J({id:t.value.templateId,...t.value});u("submitCallback",a),v.success("修改成功")}catch(a){v.error(a.message)}finally{u("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{y()}}),(a,e)=>{const d=n("el-option"),x=n("el-select"),f=n("el-form-item"),L=n("TigInput"),N=n("el-form"),j=n("a-spin"),M=n("el-button");return p(),_(h,null,[i("div",P,[i("div",Q,[i("div",W,[o(j,{spinning:c.value},{default:s(()=>[o(N,{ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:s(()=>[o(f,{label:"邮件模板",prop:"selTemplate"},{default:s(()=>[o(x,{modelValue:t.value.templateId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.templateId=l),style:{width:"100%"}},{default:s(()=>[(p(!0),_(h,null,E(m.value,l=>(p(),O(d,{key:l.templateId,label:l.templateName,value:l.templateId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"邮件主题",prop:"templateSubject"},{default:s(()=>[o(L,{width:"100%",modelValue:t.value.templateSubject,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.templateSubject=l),type:"text"},null,8,["modelValue"])]),_:1}),o(f,{label:"邮件内容",prop:"templateContent"},{default:s(()=>[o(I(A),{html:t.value.templateContent,"onUpdate:html":e[2]||(e[2]=l=>t.value.templateContent=l)},null,8,["html"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])])]),c.value?U("",!0):(p(),_("div",{key:0,class:"selected-action-warp selected-warp-left",style:q({left:I(k).layout!=="topMenu"?"370px":"270px"})},[i("div",X,[o(M,{loading:C.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:s(()=>e[3]||(e[3]=[K("提 交",-1)])),_:1,__:[3]},8,["loading"])])],4))],64)}}}),ie=$(Y,[["__scopeId","data-v-0545738d"]]);export{ie as default};

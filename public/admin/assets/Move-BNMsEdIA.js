import{d as w,r as l,as as S,o as B,f as u,g as V,h as _,k as h,l as x,m as i,z as o,L,j,Q as D,O as N,a6 as A,P as v}from"./index-B52YIGC0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  */import{S as F}from"./SelectArticleCategory-pFW3LdpQ.js";/* empty css                                                                     *//* empty css             */import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./articleCategory-CNnOMiMc.js";/* empty css                                                                              */const I=w({__name:"Move",props:{ids:{type:Array,default:()=>[]},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:g,emit:k}){const c=l(!0),m=C,p=l(),a=S({ids:m.ids,targetCat:[]}),r=k;B(async()=>{c.value=!1});const y=async n=>{n&&await n.validate((e,s)=>{e&&(r("update:confirmLoading",!0),new Promise((f,b)=>{A({url:"content/article/batch",method:"post",data:{ids:m.ids.join(","),type:"moveCat",...a}}).then(t=>{setTimeout(()=>{r("update:confirmLoading",!1)},600),v.success("操作成功"),r("submitCallback",t)}).catch(t=>{v.error(t.message),r("submitCallback",t)})}))})},d=l();return g({onFormSubmit:()=>{d.value.$el.click()}}),(n,e)=>{const s=u("el-form-item"),f=u("el-button"),b=u("el-form");return _(),V("div",null,[c.value?x("",!0):(_(),h(b,{key:0,ref_key:"formRef",ref:p,model:a,"label-width":"auto"},{default:i(()=>[o(s),o(s,{label:"转移至",prop:"targetCat"},{default:i(()=>[o(j(F),{"min-width":"100%",modelValue:a.targetCat,"onUpdate:modelValue":e[0]||(e[0]=t=>a.targetCat=t)},null,8,["modelValue"])]),_:1}),L(o(s,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[o(f,{ref_key:"submitBtn",ref:d,class:"form-submit-btn",type:"primary",onClick:e[1]||(e[1]=t=>y(p.value))},{default:i(()=>[...e[2]||(e[2]=[D("提交 ",-1)])]),_:1},512)]),_:1},512),[[N,!m.isDialog]])]),_:1},8,["model"]))])}}});export{I as default};

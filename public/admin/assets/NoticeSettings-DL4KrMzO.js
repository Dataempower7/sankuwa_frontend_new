/* empty css             */import"./index-KjhYqCTY.js";import{d as I,u as P,X as k,r as y,ab as E,o as K,ef as _,P as v,f as m,g as B,h as A,i as o,z as l,m as t,Q as u,t as F,j as b,ah as G,F as R,eg as z,_ as H}from"./index-B52YIGC0.js";import{s as Q}from"./mail-gJcKEEt7.js";import{d as W}from"./format-BxqOrW-w.js";import{_ as j}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const D={class:"container"},L={class:"content_wrapper"},O={class:"flex flex-align-center",style:{gap:"10px"}},q={class:"secret-txt line1",style:{"max-width":"380px"}},X={class:"content_wrapper"},$={class:"selected-action"},J=I({__name:"NoticeSettings",setup(Y){const{themeInfo:x}=P();k();const V=y(1),T=E(),p=y(!1),s=y({smsKeyId:"",smsKeySecret:"",smsSignName:"",smsShopMobile:"",serviceEmail:"",mailService:void 0,smtpSsl:void 0,mailCharset:void 0});K(async()=>{await U()});const S=y(!0),U=async()=>{try{const d=await _();Object.assign(s.value,W(d))}catch(d){v.error(d.message)}finally{S.value=!1}},M=async()=>{p.value=!0;try{const d=await z(s.value);v.success("修改成功")}catch(d){v.error(d.message)}finally{p.value=!1}},w=async()=>{p.value=!0;try{const d=await Q({testMailAddress:s.value.testMailAddress});v.success("操作成功")}catch(d){v.error(d.message)}finally{p.value=!1}};return(d,e)=>{const r=m("el-radio"),f=m("el-radio-group"),i=m("el-form-item"),n=m("TigInput"),g=m("el-button"),C=m("el-form"),N=m("a-spin");return A(),B(R,null,[o("div",D,[l(N,{spinning:S.value},{default:t(()=>[l(C,{ref_key:"formRef",ref:T,model:s.value,"label-width":"140px"},{default:t(()=>[o("div",L,[e[21]||(e[21]=o("div",{class:"title"},"短信设置",-1)),l(i,{label:"服务商",required:""},{default:t(()=>[o("div",null,[l(f,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),class:"itemWidth"},{default:t(()=>[l(r,{value:1},{default:t(()=>[...e[15]||(e[15]=[u("阿里云",-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),l(i,{label:"短信帐户用户名",prop:"smsKeyId"},{default:t(()=>[o("div",null,[l(n,{classType:"tig-form-input",modelValue:s.value.smsKeyId,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.smsKeyId=a)},null,8,["modelValue"]),e[16]||(e[16]=o("div",{class:"extra"},"您所申请的短信服务用户名，不填则表示不开通",-1))])]),_:1}),l(i,{label:"短信帐户密码",prop:"smsKeySecret"},{default:t(()=>[o("div",null,[o("div",O,[o("div",q,F(s.value.smsKeySecret),1),l(b(j),{maskClose:!1,isDrawer:!1,params:{title:"短信帐户密码",content:s.value.smsKeySecret},path:"setting/config/src/EditSecret",title:"短信帐户密码",width:"600px",onOkCallback:e[2]||(e[2]=a=>s.value.smsKeySecret=a)},{default:t(()=>[l(g,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:t(()=>[...e[17]||(e[17]=[u(" 编辑 ",-1)])]),_:1})]),_:1},8,["params"])]),e[18]||(e[18]=o("div",{class:"extra"},"您所申请的短信服务密码，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的短信帐户密码",-1))])]),_:1}),l(i,{label:"短信签名",prop:"smsSignName"},{default:t(()=>[o("div",null,[l(n,{classType:"tig-form-input",modelValue:s.value.smsSignName,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.smsSignName=a)},null,8,["modelValue"]),e[19]||(e[19]=o("div",{class:"extra"},"阿里短信这里填短信签名，其它的根据具体短信接口填写",-1))])]),_:1}),l(i,{label:"商家短信号码",prop:"smsShopMobile"},{default:t(()=>[o("div",null,[l(n,{classType:"tig-form-input",type:"integer",modelValue:s.value.smsShopMobile,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.smsShopMobile=a)},null,8,["modelValue"]),e[20]||(e[20]=o("div",{class:"extra"},"用于接收会员订单等信息",-1))])]),_:1})]),o("div",X,[e[35]||(e[35]=o("div",{class:"title"},"邮件通知",-1)),e[36]||(e[36]=o("div",{class:"notice-warp"},[o("p",null,"提示：推荐使用QQ的域名邮箱（免费），设置流程请看Tigshop教程，另外请确保服务器防火墙未拦截邮箱发送，且对应的端口开放。")],-1)),l(i,{label:"邮件服务",prop:"mailService"},{default:t(()=>[l(f,{modelValue:s.value.mailService,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.mailService=a),class:"itemWidth"},{default:t(()=>[l(r,{value:0},{default:t(()=>[...e[22]||(e[22]=[u("本地邮件服务器",-1)])]),_:1}),l(r,{value:1},{default:t(()=>[...e[23]||(e[23]=[u("SMTP服务",-1)])]),_:1})]),_:1},8,["modelValue"]),e[24]||(e[24]=o("div",{class:"extra"},"如果您选择了采用服务器内置的 Mail 服务，您不需要填写下面的内容。",-1))]),_:1}),l(i,{label:"是否加密连接(SSL)",prop:"smtpSsl"},{default:t(()=>[l(f,{modelValue:s.value.smtpSsl,"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.smtpSsl=a),class:"itemWidth"},{default:t(()=>[l(r,{value:1},{default:t(()=>[...e[25]||(e[25]=[u("是",-1)])]),_:1}),l(r,{value:0},{default:t(()=>[...e[26]||(e[26]=[u("否",-1)])]),_:1})]),_:1},8,["modelValue"]),e[27]||(e[27]=o("div",{class:"extra"},"SMTP一般要求加密",-1))]),_:1}),l(i,{label:"发送邮件服务器地址(SMTP)",prop:"smtpHost"},{default:t(()=>[o("div",null,[l(n,{classType:"tig-form-input",modelValue:s.value.smtpHost,"onUpdate:modelValue":e[7]||(e[7]=a=>s.value.smtpHost=a),type:"text"},null,8,["modelValue"]),e[28]||(e[28]=o("div",{class:"extra"},"邮件服务器主机地址。如果本机可以发送邮件则设置为localhost",-1))])]),_:1}),l(i,{label:"服务器端口",prop:"smtpPort"},{default:t(()=>[l(n,{classType:"tig-form-input",TigInput:"",type:"integer",modelValue:s.value.smtpPort,"onUpdate:modelValue":e[8]||(e[8]=a=>s.value.smtpPort=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"邮件发送帐号",prop:"smtpUser"},{default:t(()=>[o("div",null,[l(n,{classType:"tig-form-input",modelValue:s.value.smtpUser,"onUpdate:modelValue":e[9]||(e[9]=a=>s.value.smtpUser=a),type:"text"},null,8,["modelValue"]),e[29]||(e[29]=o("div",{class:"extra"},"发送邮件所需的认证帐号，如果没有就为空着",-1))])]),_:1}),l(i,{label:"帐号密码",prop:"smtpPass"},{default:t(()=>[l(n,{classType:"tig-form-input",modelValue:s.value.smtpPass,"onUpdate:modelValue":e[10]||(e[10]=a=>s.value.smtpPass=a),type:"password"},null,8,["modelValue"])]),_:1}),l(i,{label:"邮件回复地址",prop:"smtpMail"},{default:t(()=>[l(n,{classType:"tig-form-input",modelValue:s.value.smtpMail,"onUpdate:modelValue":e[11]||(e[11]=a=>s.value.smtpMail=a),type:"text"},null,8,["modelValue"])]),_:1}),l(i,{label:"邮件编码",prop:"mailCharset"},{default:t(()=>[l(f,{modelValue:s.value.mailCharset,"onUpdate:modelValue":e[12]||(e[12]=a=>s.value.mailCharset=a)},{default:t(()=>[l(r,{label:"UTF8"},{default:t(()=>[...e[30]||(e[30]=[u("国际编码(UTF8)",-1)])]),_:1}),l(r,{label:"GB2312"},{default:t(()=>[...e[31]||(e[31]=[u("简体中文(GB2312)",-1)])]),_:1}),l(r,{label:"BIG5"},{default:t(()=>[...e[32]||(e[32]=[u("繁体中文(BIG5)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"测试邮件地址",prop:"testMailAddress"},{default:t(()=>[l(n,{classType:"tig-form-input",modelValue:s.value.testMailAddress,"onUpdate:modelValue":e[13]||(e[13]=a=>s.value.testMailAddress=a),type:"text"},{append:t(()=>[l(g,{loading:p.value,onClick:w},{default:t(()=>[...e[33]||(e[33]=[u("发送测试邮件 ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"客服收件地址",prop:"serviceEmail"},{default:t(()=>[o("div",null,[l(n,{classType:"tig-form-input",modelValue:s.value.serviceEmail,"onUpdate:modelValue":e[14]||(e[14]=a=>s.value.serviceEmail=a)},null,8,["modelValue"]),e[34]||(e[34]=o("div",{class:"extra"},"该客服邮件地址可用于接收下面所设置的通知",-1))])]),_:1})])]),_:1},8,["model"]),e[37]||(e[37]=o("div",{style:{height:"20px"}},null,-1))]),_:1},8,["spinning"])]),o("div",{class:"selected-action-warp selected-warp-left",style:G({left:b(x).layout!=="topMenu"?"369px":"270px"})},[o("div",$,[l(g,{loading:p.value,class:"form-submit-btn",size:"large",type:"primary",onClick:M},{default:t(()=>[...e[38]||(e[38]=[u("提 交",-1)])]),_:1},8,["loading"])])],4)],64)}}}),ae=H(J,[["__scopeId","data-v-91a65ff6"]]);export{ae as default};

import{d as Q,r as b,x as G,as as C,o as H,c as J,f as v,g as r,h as o,i as e,l as n,z as a,m as u,a8 as W,F as O,p as T,k as m,j as i,Q as h,t as d,E as X,dC as U,n as Z,P as tt,_ as et}from"./index-B52YIGC0.js";/* empty css             *//* empty css                                                                    */import{S as V}from"./SortButton-CPyUGKlg.js";import{P as st}from"./Pagination-C8J7-6Em.js";import{P as lt}from"./ProductCard-8OYszTHR.js";import{b as ot}from"./bindShop-C4HDB3WM.js";import"./index-KjhYqCTY.js";import{p as L}from"./format-BxqOrW-w.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as I}from"./Tag-DafgHPRr.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";/* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as at}from"./SelectTimeInterval-BUZ-hmxo.js";import{M as rt}from"./MobileCard-qEvTFKQw.js";import nt from"./SignTag-DUbb66q5.js";import{_ as dt}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";import"./time-EzYK4E-P.js";const it={class:"container"},ut={class:"content_wrapper"},pt={class:"lyecs-table-list-warp"},ct={class:"list-table-tool lyecs-search-warp"},vt={class:"advanced-search-warp list-table-tool-row"},mt={class:"simple-form-warp"},_t={class:"simple-form-field"},ft={class:"form-group"},gt={class:"control-container"},bt={class:"simple-form-field"},yt={class:"form-group"},ht={class:"control-container"},kt={class:"simple-form-field"},wt={class:"form-group"},St={class:"simple-form-warp"},xt={class:"simple-form-field"},Ct={class:"control-container"},It={class:"table-container"},Dt={class:"custom-table"},Ot={class:"custom-table"},Tt={class:"data-tr"},Ft={colspan:"6"},Nt={class:"check-box"},zt={class:"check-box"},Ut={class:"displayRow flex flex-align-center flex-justify-between"},Vt={class:"displayColumn textR whiteSN widthAuto"},Lt=["rowspan"],Pt=["rowspan"],Bt={class:"displayColumn textR fz14"},At={class:"gray"},Mt=["rowspan"],Rt={class:"displayColumn textL"},Yt=["rowspan"],Et={class:"displayColumn fz12 textL"},$t={class:"gray"},jt={class:"black"},Kt={class:"gray"},qt={class:"black"},Qt={class:"gray user-address"},Gt={class:"black line1 value"},Ht=["rowspan"],Jt={class:"displayColumn textL"},Wt={key:0},Xt={class:"gray"},Zt=["rowspan"],te={key:0,class:"empty-warp"},ee={key:0,class:"empty-bg"},se={key:0,class:"pagination-con"},le=Q({__name:"Order",props:{shopId:{type:Number,default:0}},setup(P){b(localStorage.getItem("adminType"));const F=G(),B=C([{value:-1,label:"全部",isShow:!0},{value:0,label:"待支付",isShow:!0},{value:1,label:"待发货",isShow:!0},{value:2,label:"已发货",isShow:!0},{value:3,label:"已取消",isShow:!0},{value:4,label:"无效",isShow:!0},{value:5,label:"已完成",isShow:!0},{value:-2,label:"已删除",isShow:!0}]);C([{value:0,label:"待发货"},{value:1,label:"已发货"},{value:2,label:"已收货"},{value:3,label:"配送中"},{value:4,label:"配送失败"}]),C([{value:0,label:"未付款"},{value:1,label:"支付中"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"}]);const A=p=>{l.orderStatus=p,l.page=1,_.value=[],y()},M=P,k=b([]),w=b(!0),S=b(0),_=b([]),R=b(!1),l=C({page:1,size:F.get("pageSize"),sortField:"orderId",sortOrder:"desc",keyword:"",orderStatus:-1,endDate:"",startDate:"",shopId:M.shopId}),Y=()=>{l.page=1,l.size=F.get("pageSize"),l.sortField="orderId",l.sortOrder="desc",l.keyword="",l.orderStatus=-1,l.endDate="",l.startDate=""},y=async()=>{w.value=!0,_.value=[];try{const p=await ot({...l});k.value=p.records,S.value=p.total}catch(p){tt.error(p.message)}finally{w.value=!1}};H(()=>{y()});const f=()=>{y()};return J(()=>{var p,s;return R.value=_.value.length>0&&((p=_.value)==null?void 0:p.length)===((s=k.value)==null?void 0:s.length),_.value.length>0&&_.value.length<k.value.length}),(p,s)=>{const D=v("el-button"),E=v("TigInput"),$=v("el-option"),j=v("el-select"),x=v("el-tooltip"),K=v("el-divider"),q=v("a-spin");return o(),r("div",it,[e("div",ut,[e("div",pt,[e("div",ct,[e("div",vt,[e("div",mt,[e("div",_t,[e("div",ft,[s[13]||(s[13]=e("label",{class:"control-label"},[e("span",null,"订单信息：")],-1)),e("div",gt,[a(E,{modelValue:l.keyword,"onUpdate:modelValue":s[0]||(s[0]=t=>l.keyword=t),name:"keyword",placeholder:"订单号/收货人姓名",onKeyup:W(f,["enter"]),clearable:"",onClear:f},{append:u(()=>[a(D,{onClick:f},{default:u(()=>[...s[12]||(s[12]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),e("div",bt,[e("div",yt,[s[14]||(s[14]=e("label",{class:"control-label"},[e("span",null,"订单状态：")],-1)),e("div",ht,[a(j,{modelValue:l.orderStatus,"onUpdate:modelValue":s[1]||(s[1]=t=>l.orderStatus=t),clearable:"",onChange:A},{default:u(()=>[(o(!0),r(O,null,T(B,t=>(o(),m($,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),e("div",kt,[e("div",wt,[s[15]||(s[15]=e("label",{class:"control-label"},[e("span",null,"下单时间：")],-1)),a(i(at),{"end-date":l.endDate,"onUpdate:endDate":s[2]||(s[2]=t=>l.endDate=t),"start-date":l.startDate,"onUpdate:startDate":s[3]||(s[3]=t=>l.startDate=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),e("div",St,[e("div",xt,[s[18]||(s[18]=e("label",{class:"control-label"},null,-1)),e("div",Ct,[a(D,{type:"primary",plain:"",onClick:f},{default:u(()=>[...s[16]||(s[16]=[h("搜索",-1)])]),_:1}),a(D,{plain:"",onClick:Y},{default:u(()=>[...s[17]||(s[17]=[h("重置",-1)])]),_:1})])])])])])]),e("div",It,[a(q,{spinning:w.value},{default:u(()=>[e("table",Dt,[e("thead",null,[e("tr",null,[e("th",null,[a(V,{sortField:l.sortField,"onUpdate:sortField":s[4]||(s[4]=t=>l.sortField=t),sortOrder:l.sortOrder,"onUpdate:sortOrder":s[5]||(s[5]=t=>l.sortOrder=t),sortName:"orderId",text:"订单信息(下单时间排序)",onLoadData:s[6]||(s[6]=t=>f())},null,8,["sortField","sortOrder"])]),e("th",null,d(i(X)()?"所属门店":"所属店铺"),1),e("th",null,[a(V,{sortField:l.sortField,"onUpdate:sortField":s[7]||(s[7]=t=>l.sortField=t),sortOrder:l.sortOrder,"onUpdate:sortOrder":s[8]||(s[8]=t=>l.sortOrder=t),sortName:"totalAmount",text:"订单金额",onLoadData:s[9]||(s[9]=t=>f())},null,8,["sortField","sortOrder"])]),s[19]||(s[19]=e("th",null,"会员名称",-1)),s[20]||(s[20]=e("th",null,"收货人信息",-1)),s[21]||(s[21]=e("th",{style:{"text-align":"start"}},"物流/支付信息",-1)),s[22]||(s[22]=e("th",{style:{"text-align":"start"}},"订单状态",-1))])])]),(o(!0),r(O,null,T(k.value,t=>(o(),r("table",Ot,[e("thead",null,[e("tr",Tt,[e("th",Ft,[t.mark?(o(),m(x,{key:0,disabled:!t.adminNote,content:t.adminNote,effect:"light",placement:"top"},{default:u(()=>[a(nt,{class:"check-box tag",value:t.mark},null,8,["value"])]),_:2},1032,["disabled","content"])):n("",!0),e("span",Nt,"订单编号："+d(t.orderSn),1),a(K,{direction:"vertical"}),e("span",zt,"下单时间："+d(t.addTime),1),t.parentOrderId>0?(o(),m(i(dt),{key:1,params:{act:"parentDetail",id:t.orderId,isParent:!0},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:y},{default:u(()=>[t.parentOrderId>0?(o(),m(x,{key:0,content:"该订单已拆分，点击可查看父订单",effect:"light",placement:"top"},{default:u(()=>[a(i(I),{text:"子订单"})]),_:1})):n("",!0)]),_:2},1032,["params","title"])):n("",!0),t.shopId>0?(o(),m(x,{key:2,content:"订单来自店铺："+t.shop.shopTitle,effect:"light",placement:"top"},{default:u(()=>[a(i(I),{transparent:!1,text:"店铺"})]),_:1},8,["content"])):n("",!0),t.orderSource?(o(),m(x,{key:3,content:"订单来自"+t.orderSource+"下单",effect:"light",placement:"top"},{default:u(()=>[a(i(I),{text:t.orderSource,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):n("",!0),t.isExchangeOrder?(o(),m(i(I),{key:4,transparent:!0,color:"red",text:"积分兑换"})):n("",!0)])])]),e("tbody",null,[(o(!0),r(O,null,T(t.items,(c,g)=>{var N,z;return o(),r("tr",null,[e("td",null,[e("div",Ut,[a(i(lt),{picThumb:c.picThumb,productId:c.productId,productName:c.productName,productType:c.productType,url:c.url,skuData:c.skuData},null,8,["picThumb","productId","productName","productType","url","skuData"]),e("div",Vt,[e("div",null,d(i(L)(c.price)),1),e("div",null,"× "+d(c.quantity),1)])])]),g==0?(o(),r("td",{key:0,rowspan:t.items.length},[...s[23]||(s[23]=[e("div",{class:"displayColumn textR fz14"}," 店铺名称 ",-1)])],8,Lt)):n("",!0),g==0?(o(),r("td",{key:1,rowspan:t.items.length},[e("div",Bt,[e("div",null,d(i(L)(t.totalAmount)),1),e("div",At,"(含运费："+d(t.shippingFee)+")",1)])],8,Pt)):n("",!0),g==0?(o(),r("td",{key:2,rowspan:t.items.length},[e("div",Rt,[e("div",null,[e("a",null,d(((N=t.user)==null?void 0:N.nickname)||((z=t.user)==null?void 0:z.username)||"--"),1)])])],8,Mt)):n("",!0),g==0?(o(),r("td",{key:3,rowspan:t.items.length},[e("div",Et,[e("div",$t,[s[24]||(s[24]=h(" 收货人： ",-1)),e("span",jt,d(i(U)(t.consignee,1,1)),1)]),e("div",Kt,[s[25]||(s[25]=h(" 手机号： ",-1)),e("span",qt,[e("span",null,[a(rt,{mobile:t.mobile},null,8,["mobile"])])])]),e("div",Qt,[s[26]||(s[26]=e("span",{class:"label"}," 收货地址： ",-1)),e("span",Gt,d(i(U)(t.userAddress,16,0)),1)])])],8,Yt)):n("",!0),g==0?(o(),r("td",{key:4,rowspan:t.items.length},[e("div",Jt,[e("div",null,[e("span",null,d(t.payTypeId===1?"在线支付":t.payTypeId===2?"货到付款":"线下支付"),1)]),t.logisticsName?(o(),r("div",Wt,[h(d(t.shippingTypeName)+" ",1),e("span",Xt,d(""+t.logisticsName),1)])):n("",!0)])],8,Ht)):n("",!0),g==0?(o(),r("td",{key:5,rowspan:t.items.length},[e("span",{class:Z({orange:t.orderStatus===0,black:t.orderStatus===1||t.orderStatus===2||t.orderStatus===4,gray:t.orderStatus===3,green:t.orderStatus===5})},d(t.orderStatusName),3)],8,Zt)):n("",!0)])}),256))])]))),256)),S.value==0?(o(),r("div",te,[w.value?n("",!0):(o(),r("div",ee,"暂无数据"))])):n("",!0)]),_:1},8,["spinning"])]),S.value>0?(o(),r("div",se,[a(i(st),{page:l.page,"onUpdate:page":s[10]||(s[10]=t=>l.page=t),size:l.size,"onUpdate:size":s[11]||(s[11]=t=>l.size=t),total:S.value,onCallback:y},null,8,["page","size","total"])])):n("",!0)])])])}}}),Ie=et(le,[["__scopeId","data-v-9ba972bf"]]);export{Ie as default};

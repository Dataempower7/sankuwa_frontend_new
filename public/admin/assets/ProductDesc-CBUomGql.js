import{B as N}from"./BusinessData-Dbgv1FCM.js";import{B as j}from"./BusinessImg-B_fZOjqm.js";import"./index-KjhYqCTY.js";import{_ as D}from"./Editor.vue_vue_type_style_index_0_lang-ChPMQjFJ.js";import{d as H}from"./vuedraggable.umd-BauR0rTv.js";import{i as g}from"./format-BxqOrW-w.js";import{_ as b}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import{M as P}from"./index-C9ZdVeVx.js";import{d as E,r as y,o as z,c as L,f as S,k as q,h as o,m as r,i as s,g as c,l as f,z as d,j as n,Q as w,_ as F}from"./index-B52YIGC0.js";import"./currencyManagement-DNysi_dA.js";/* empty css                                                                    */import"./index.esm-CBYqueH9.js";const Q={class:"goods-info-edit-row",style:{width:"100%"}},G={key:0,class:"goods-info-edit-warp"},J={class:"goods-info-edit-act flex"},K={class:"goods-info-edit-con"},R={class:"info-edit-list-item",draggable:"false",style:{}},W={key:0,class:"edit-list-item-img"},X={class:"lyecs-dialogImage",draggable:"false"},Y=["src"],Z={key:1,class:"edit-list-item-img"},ee={class:"lyecs-dialogImage",draggable:"false"},te=["src"],se={key:2,class:"edit-list-item-text"},le=["onClick"],ie=["onClick"],ae=["innerHTML"],oe={key:2,class:"goods-detail-preview-warp"},de={key:0,class:"extra"},ne=E({__name:"ProductDesc",props:{descArr:{type:[Object,Array],default:[]},disabled:{type:Boolean,default:!1},productType:{type:Number,default:1},label:{type:String,default:"商品详情"}},emits:["update:descArr"],setup(p,{emit:x}){const l=y(p.descArr||[]),m=y(!1),a=y({html:""}),u=y(0),C=x;z(()=>{C("update:descArr",l)});const V=t=>{for(let e in t)l.value.push({pic:t[e].picUrl,type:"pic"})},k=(t,e)=>{l.value[u.value]={pic:t[0].picUrl,type:"pic"}},T=t=>{l.value.splice(t,1)},B=(t,e)=>{l.value[u.value]={cover:t[0].videoCover,type:"video"}},M=t=>{console.log(t)},_=L(()=>{let t=[];for(let e in l.value)l.value[e].type=="pic"?t.push('<div class="desc-pic-item"><img src="'+g(l.value[e].pic)+'"></div>'):l.value[e].type=="video"?t.push(`
                <div class="desc-video-item" @click="${M(l.value[e])}">
                    <div class="desc-video-item-wrap">
                        <i class="iconfont-admin icon-shipin"></i>
                    </div>
                    <img src="${g(l.value[e].cover)}">
                </div>
            `):t.push(l.value[e].html);return t.join("<div data-division=1></div>")}),A=()=>{m.value=!0,a.value.html=""},O=t=>{a.value.html=l.value[t].html,u.value=t+1,m.value=!0},U=t=>{l.value.splice(t,1)},$=()=>{u.value>0?l.value[u.value-1]={html:a.value.html,type:"text"}:l.value.push({html:a.value.html,type:"text"}),u.value=0,m.value=!1};return(t,e)=>{const I=S("el-form-item");return o(),q(I,{label:p.label,rules:[{required:p.productType==4}]},{default:r(()=>[s("div",Q,[p.disabled?f("",!0):(o(),c("div",G,[s("div",J,[d(n(b),{type:"gallery",class:"item-bg",onOkCallback:V,params:{isMultiple:!0}},{default:r(()=>[...e[6]||(e[6]=[s("a",{class:"add-item info-pic-add"},[s("i",{class:"iconfont icon-tianjiatupian"}),w("添加图片")],-1)])]),_:1}),s("a",{class:"add-item info-text-add",onClick:A},[...e[7]||(e[7]=[s("i",{class:"iconfont icon-wenben",style:{"font-size":"14px"}},null,-1),w("添加文本",-1)])]),e[8]||(e[8]=s("span",null,"点击按钮添加图片或者文本，您还可以通过拖拽进行排序",-1))]),s("div",K,[d(n(H),{class:"info-edit-con-list","item-key":"",list:l.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:r(({element:i,index:v})=>[s("div",R,[i.type=="pic"?(o(),c("div",W,[d(j,{modelValue:i.pic,"onUpdate:modelValue":h=>i.pic=h,picThumb:i.pic,dataType:7,onDelete:T,style:{width:"100px",height:"100px"},edit:!1,data:{index:v},onEdit:k},{default:r(()=>[s("a",X,[s("img",{src:n(g)(i.pic),draggable:"false"},null,8,Y)])]),_:2},1032,["modelValue","onUpdate:modelValue","picThumb","data"]),d(n(b),{type:"gallery",class:"item-bg",onOkCallback:k,params:{isMultiple:!1},data:{index:v}},{default:r(()=>[...e[9]||(e[9]=[s("div",{class:"btn-edit"},"修改",-1)])]),_:1},8,["data"])])):f("",!0),i.type=="video"?(o(),c("div",Z,[s("a",ee,[s("img",{src:n(g)(i.cover),draggable:"false"},null,8,te)]),d(n(b),{type:"galleryVideo",class:"item-bg",onOkCallback:B,params:{isMultiple:!1},data:{index:v}},{default:r(()=>[...e[10]||(e[10]=[s("div",{class:"btn-edit"},"修改",-1)])]),_:1},8,["data"])])):f("",!0),i.type=="text"?(o(),c("div",se,[e[11]||(e[11]=s("p",null,[s("i",{class:"iconfont icon-1fuwenben"})],-1)),e[12]||(e[12]=s("p",null,"文本",-1)),s("div",{class:"btn-edit",onClick:h=>O(v)},"修改",8,le)])):f("",!0),s("i",{class:"btn-del iconfont icon-cha",onClick:h=>U(v)},null,8,ie)])]),_:1},8,["list"])]),d(n(P),{open:m.value,"onUpdate:open":e[4]||(e[4]=i=>m.value=i),title:"添加文本",onOk:e[5]||(e[5]=i=>$()),destroyOnClose:!0,width:800},{default:r(()=>[d(n(D),{html:a.value.html,"onUpdate:html":e[2]||(e[2]=i=>a.value.html=i),height:"300px"},null,8,["html"]),d(N,{modelValue:a.value.html,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.html=i),dataType:9,type:"editor"},null,8,["modelValue"])]),_:1},8,["open"])])),_.value?(o(),c("div",{key:1,class:"goods-detail-preview-warp",innerHTML:_.value},null,8,ae)):(o(),c("div",oe,[...e[13]||(e[13]=[s("div",{class:"preview-warp"},"商品描述预览区域",-1)])]))]),p.productType==4?(o(),c("div",de,"此处填写内容，将在商品付费后展示")):f("",!0)]),_:1},8,["label","rules"])}}}),we=F(ne,[["__scopeId","data-v-8c965801"]]);export{we as default};

import{d as w,aq as C,r as U,ar as M,f as m,g as G,h as f,z as s,l as b,m as c,i as o,j as v,dA as P,Q as h,t as S,P as x,_ as B}from"./index-B52YIGC0.js";import"./index-KjhYqCTY.js";import{d as j}from"./vuedraggable.umd-BauR0rTv.js";import{g as D}from"./productGroup-DmZc4IJt.js";import{_ as N}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./buyShowProductGroupSelect.vue_vue_type_style_index_0_scoped_8e785396_lang-D9c7S773.js";const E={class:"dec-goods-group-item"},A={class:"dec-edit-group"},L={class:"dec-edit-group-con"},O={class:"dec-input-group","dynamic-class":".image-ad-title-d"},$={class:"dec-edit-group"},q={class:"dec-edit-group-con"},z={class:"dec-input-group","dynamic-class":".image-ad-title-d"},F={class:"dec-edit-group"},Q={class:"dec-edit-group-con"},H={key:0},J={class:"dec-edit-group"},K={class:"dec-edit-group-con"},R={class:"dec-input-group"},W={class:"dec-edit-group"},X={class:"dec-edit-group-con"},Y={class:"dec-input-group"},Z=["onClick"],oo={key:0,class:"gallery-list-warp"},eo={class:"dec-pic-group"},to={class:"dec-pic-add-con"},so=w({__name:"ProductGroupSelect",props:C({productIds:{type:Boolean,default:!1},type:{type:String,default:"goods"},isMultiple:{type:Boolean,default:!1}},{productGroups:{default:[]},productGroupsModifiers:{}}),emits:["update:productGroups"],setup(n){const V=n,_=U([]),u=M(n,"productGroups"),I=async l=>{y(l.ids)},y=async(l,e=-1,g=6)=>{try{const d=await D({productGroupIds:l.join(","),size:g,page:1});if(e===-1){let r=[];d.records.forEach(i=>{var p;let t={productGroupId:i.productGroupId,productGroupName:i.productGroupName,title:i.productGroupName,subTitle:"",menuTitle:i.productGroupName,productNumType:"number",productNum:((p=i.productIds)==null?void 0:p.length)||6,bannerPic:{},bannerLink:{link:{},title:""}};r.push(t)}),u.value=[...u.value,...r]}else u.value[e].productGroupId=d.records[0].productGroupId,u.value[e].productGroupName=d.records[0].productGroupName,u.value[e].menuTitle=d.records[0].productGroupName;_.value=u.value.map(r=>r.productGroupId)}catch(d){x.error(d.message)}},k=l=>{u.value.splice(l,1),_.value.splice(l,1)},T=l=>{y(l.ids,l.index)};return(l,e)=>{const g=m("el-button"),d=m("el-input"),r=m("el-radio"),i=m("el-radio-group");return f(),G("div",null,[s(v(j),{class:"dec-goods-group-list","item-key":"productGroupId",list:u.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:c(({element:t,index:p})=>[o("div",E,[o("div",A,[e[2]||(e[2]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"商品来源")],-1)),o("div",L,[o("div",O,[s(v(N),{isDrawer:"",onOkCallback:T,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selectedIds:[t.productGroupId],index:p,isMultiple:V.isMultiple},style:{width:"100%"}},{default:c(()=>[s(g,{type:"primary",link:"",icon:v(P)},{default:c(()=>[h(S(t.productGroupName),1)]),_:2},1032,["icon"])]),_:2},1032,["params"])])])]),o("div",$,[e[3]||(e[3]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"菜单名称")],-1)),o("div",q,[o("div",z,[s(d,{modelValue:t.menuTitle,"onUpdate:modelValue":a=>t.menuTitle=a,placeholder:"请输入菜单名称"},null,8,["modelValue","onUpdate:modelValue"])])])]),o("div",F,[e[5]||(e[5]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"商品个数"),o("div",{class:"value"})],-1)),o("div",Q,[s(i,{class:"dec-radio-group",modelValue:t.productNumType,"onUpdate:modelValue":a=>t.productNumType=a},{default:c(()=>[s(r,{value:"number"},{default:c(()=>[s(d,{style:{width:"90px"},type:"number",modelValue:t.productNum,"onUpdate:modelValue":a=>t.productNum=a,placeholder:"请输入商品数量"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(r,{value:"all"},{default:c(()=>[...e[4]||(e[4]=[h("全部",-1)])]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),n.type==="productGroup"?(f(),G("div",H,[o("div",J,[e[6]||(e[6]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"主标题")],-1)),o("div",K,[o("div",R,[s(d,{modelValue:t.title,"onUpdate:modelValue":a=>t.title=a,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])]),o("div",W,[e[7]||(e[7]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"副标题")],-1)),o("div",X,[o("div",Y,[s(d,{modelValue:t.subTitle,"onUpdate:modelValue":a=>t.subTitle=a,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])])])):b("",!0),o("div",{class:"del-item",onClick:a=>k(p)},[...e[8]||(e[8]=[o("i",{class:"ico-decorate icon-dec-cha"},null,-1)])],8,Z)])]),_:1},8,["list"]),n.isMultiple||u.value.length<1?(f(),G("div",oo,[o("div",eo,[o("div",to,[s(v(N),{isDrawer:"",onOkCallback:I,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selectedIds:_.value,isMultiple:V.isMultiple},style:{width:"100%"}},{default:c(()=>[...e[9]||(e[9]=[o("a",{class:"dec-pic-add-btn"},[o("i",{class:"ico-decorate icon-dec-jia"}),h("添加商品分组")],-1)])]),_:1},8,["params"])])])])):b("",!0)])}}}),po=B(so,[["__scopeId","data-v-f6c53adb"]]);export{po as P};

import"./index-KjhYqCTY.js";import{d as f}from"./vuedraggable.umd-BauR0rTv.js";import{u as h,i as v}from"./format-BxqOrW-w.js";import{a as _}from"./product-hE35r0Q_.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import{d as S,aq as P,r as p,ar as b,o as x,g as I,h as M,z as n,j as r,m as d,i as t,P as C}from"./index-B52YIGC0.js";const L={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},N={class:"dec-goods-group-item-con"},y={class:"item-goods-con"},j=["href","title"],w=["src"],B=["onClick"],q=S({__name:"ProductInfoSelect",props:P({isMultiple:{type:Boolean,default:!1},maxSelection:{type:Number,default:0}},{productList:{},productListModifiers:{}}),emits:["update:productList"],setup(a){p(null);const i=a,l=p([]),e=b(a,"productList");x(()=>{});const m=async c=>{try{const o=await _({ids:c.join(","),size:100,page:1});console.log(o.records),o.records.forEach(s=>{let u={productId:s.productId,productSn:s.productSn,productName:s.productName,productDesc:s.productDesc,productPrice:s.productPrice,marketPrice:s.marketPrice,picThumb:s.picThumb}}),e.value.push(...o.records),console.log(e.value)}catch(o){C.error(o.message)}},g=c=>{e.value.splice(c,1),l.value=e.value.filter(o=>o.productId!==0).map(o=>o.productId)};return(c,o)=>(M(),I("div",null,[n(r(f),{class:"dec-goods-group-list","item-key":"prodcutId",list:e.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:o[0]||(o[0]=()=>{}),onEnd:o[1]||(o[1]=()=>{})},{item:d(({element:s,index:u})=>[t("div",L,[t("div",N,[t("div",y,[t("a",{href:r(h)({path:"product",sn:s.productSn}),target:"_blank",title:s.productName},[t("img",{class:"item-goods-img",src:r(v)(s.picThumb)},null,8,w)],8,j)]),t("div",{class:"del-item",onClick:D=>g(u)},[...o[2]||(o[2]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)])],8,B)])])]),footer:d(()=>[n(r(k),{isDrawer:"",onOkCallback:m,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selectedIds:l.value,isMultiple:i.isMultiple,maxSelection:i.maxSelection}},{default:d(()=>[...o[3]||(o[3]=[t("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[t("div",{class:"dec-goods-group-item-con"},[t("div",{class:"item-goods-con"},[t("a",{href:"javascript:;"},[t("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])]),_:1},8,["params"])]),_:1},8,["list"])]))}});export{q as _};

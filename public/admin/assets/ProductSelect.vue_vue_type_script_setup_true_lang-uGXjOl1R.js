import"./index-KjhYqCTY.js";import{d as _}from"./vuedraggable.umd-BauR0rTv.js";import{u as M,i as k}from"./format-BxqOrW-w.js";import{d as y,aq as C,r,a5 as x,ar as b,o as j,a6 as B,g as L,h as S,z as m,j as d,m as u,i as s}from"./index-B52YIGC0.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const A={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},E={class:"dec-goods-group-item-con"},I={class:"item-goods-con"},N=["href","title"],q=["src"],z=["onClick"],T=y({__name:"ProductSelect",props:C({ids:{type:Array,default:[]},productList:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1}},{ids:{default:[]},idsModifiers:{}}),emits:["update:ids"],setup(n){r(null);const i=n,{isMultiple:F}=x(i),a=r(i.productList),t=b(n,"ids"),g=()=>{t.value=a.value.map(e=>e.productId)};j(async()=>{t.value&&p()});const l=r(0);function p(){t.value.length>0?B({url:"product/product/list",method:"get",params:{ids:t.value.join(","),size:100,page:1}}).then(e=>{a.value=e.records,l.value=e.total}):(a.value=[],l.value=0)}const v=e=>{console.log(t.value),i.isMultiple==!1&&(t.value=[]);for(let o in e)t.value.push(e[o]);l.value=t.value.length,p()},f=e=>{t.value.splice(e,1),a.value.splice(e,1)};return(e,o)=>(S(),L("div",null,[m(d(_),{class:"dec-goods-group-list","item-key":"prodcutId",list:a.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:o[0]||(o[0]=()=>{}),onEnd:g},{item:u(({element:c,index:h})=>[s("div",A,[s("div",E,[s("div",I,[s("a",{href:d(M)({path:"product",sn:c.productSn}),target:"_blank",title:c.productName},[s("img",{class:"item-goods-img",src:d(k)(c.picThumb)},null,8,q)],8,N)]),s("div",{class:"del-item",onClick:P=>f(h)},[...o[1]||(o[1]=[s("i",{class:"ico-decorate icon-dec-cha"},null,-1)])],8,z)])])]),footer:u(()=>[m(d(w),{isDrawer:"",onOkCallback:v,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selectedIds:t.value,isMultiple:i.isMultiple}},{default:u(()=>[...o[2]||(o[2]=[s("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[s("div",{class:"dec-goods-group-item-con"},[s("div",{class:"item-goods-con"},[s("a",{href:"javascript:;"},[s("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])]),_:1},8,["params"])]),_:1},8,["list"])]))}});export{T as _};

/* empty css             */import{d as F,H as p,r as v,c as q,w as B,g as _,h as f,t as T,x as N,as as O,o as H,f as r,i as a,z as e,m as l,Q as S,l as x,j as m,F as U,p as E,P as R,_ as W}from"./index-B52YIGC0.js";import{D as z}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as $}from"./Pagination-C8J7-6Em.js";import{i as G}from"./format-BxqOrW-w.js";import{d as J}from"./brand-CyfpB5Ly.js";import{t as K,a as X}from"./conversation-BgR-gwnn.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import{r as Y}from"./zh-cn-kq_pLf4V.js";import{S as Z}from"./StatusDot-DuKP0Xmc.js";const ee=F({__name:"RelativeTime",props:{time:{type:String,default:""}},setup(k){p.extend(Y),p.locale("zh-cn");const g=k,b=v(p()),h=q(()=>p(g.time).from(b.value));return B(d=>{const n=p().diff(p(g.time),"second");let t;n<60?t=1e4:n<3600?t=6e4:n<86400?t=6e5:n<604800?t=36e5:t=864e5;const i=setInterval(()=>{b.value=p()},t);d(()=>clearInterval(i))}),(d,n)=>(f(),_("span",null,T(h.value),1))}}),te={class:"container"},se={class:"content_wrapper"},ae={class:"lyecs-table-list-warp",style:{"margin-bottom":"0"}},oe={class:"list-table-tool lyecs-search-warp"},le={class:"advanced-search-warp list-table-tool-row"},ne={class:"simple-form-warp"},re={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container"},ce={class:"simple-form-field"},pe={class:"table-container"},me={class:"kehu"},ue={class:"title"},_e={class:"message-list"},fe={class:"item"},ve={class:"empty-warp"},ge={key:0,class:"empty-bg"},be={key:0,class:"pagination-con"},he=F({__name:"QueueList",setup(k,{expose:g}){const b=N(),h=v([]),d=v(!0),n=v(0);v([]);const t=O({page:1,size:b.get("pageSize"),sortField:"",sortOrder:"",keyword:"",firstWord:"",userFrom:""}),i=async()=>{d.value=!0;try{const c=await X({...t});h.value=c.records,n.value=c.total}catch(c){R.error(c.message)}finally{d.value=!1}};H(()=>{i()});const C=()=>{i()},I=({prop:c,order:s})=>{t.sortField=c,t.sortOrder=s=="ascending"?"asc":s=="descending"?"desc":"",i()};return g({loadFilter:i}),(c,s)=>{const w=r("el-option"),L=r("el-select"),V=r("el-button"),A=r("el-form"),D=r("el-avatar"),u=r("el-table-column"),M=r("sapn"),P=r("el-divider"),Q=r("el-table"),j=r("a-spin");return f(),_("div",te,[a("div",se,[a("div",ae,[a("div",oe,[e(A,{model:t},{default:l(()=>[a("div",le,[a("div",ne,[a("div",re,[a("div",ie,[s[3]||(s[3]=a("label",{class:"control-label"},[a("span",null,"咨询来源：")],-1)),a("div",de,[e(L,{modelValue:t.userFrom,"onUpdate:modelValue":s[0]||(s[0]=o=>t.userFrom=o),clearable:""},{default:l(()=>[e(w,{value:"",label:"全部"}),e(w,{value:"pc",label:"pc"}),e(w,{value:"h5",label:"h5"})]),_:1},8,["modelValue"])])])]),a("div",ce,[e(V,{type:"primary",onClick:C},{default:l(()=>[...s[4]||(s[4]=[S("搜索",-1)])]),_:1})])])])]),_:1},8,["model"])]),a("div",pe,[e(j,{spinning:d.value},{default:l(()=>[e(Q,{data:h.value,loading:d.value,total:n.value,"row-key":"brandId",onSortChange:I},{empty:l(()=>[a("div",ve,[d.value?x("",!0):(f(),_("div",ge,"暂无数据"))])]),default:l(()=>[e(u,{label:"客户",prop:"brandId"},{default:l(({row:o})=>{var y;return[a("div",me,[e(D,{class:"av",src:m(G)(o.user.avatar)},null,8,["src"]),a("div",ue,T((y=o.user)==null?void 0:y.nickname),1)])]}),_:1}),e(u,{label:"最新两条消息"},{default:l(({row:o})=>[a("div",_e,[(f(!0),_(U,null,E(o.userLastTwoMessage.slice(0,2),y=>(f(),_("div",fe,[e(Z,{color:"#44bb00",flicker:!1}),e(M,{innerHTML:y.content.content},null,8,["innerHTML"])]))),256))])]),_:1}),e(u,{prop:"addTime",width:160,label:"进入排队时间"}),e(u,{width:100,label:"排队时长",sortable:"custom"},{default:l(({row:o})=>[e(m(ee),{time:o.addTime},null,8,["time"])]),_:1}),e(u,{width:100,label:"咨询来源",prop:"userFrom",sortable:"custom"}),e(u,{width:120,fixed:"right",label:"操作"},{default:l(({row:o})=>[e(m(z),{title:"您确定要接入会话吗？",message:"接入成功",params:{conversationId:o.id},requestApi:m(K),onAfterDelete:i},{default:l(()=>[...s[5]||(s[5]=[S("接入会话",-1)])]),_:1},8,["params","requestApi"]),e(P,{direction:"vertical"}),e(m(z),{params:{id:o.id},requestApi:m(J),onAfterDelete:i},{default:l(()=>[...s[6]||(s[6]=[S("删除",-1)])]),_:1},8,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),n.value>0?(f(),_("div",be,[e(m($),{page:t.page,"onUpdate:page":s[1]||(s[1]=o=>t.page=o),size:t.size,"onUpdate:size":s[2]||(s[2]=o=>t.size=o),total:n.value,onCallback:i},null,8,["page","size","total"])])):x("",!0)])])])])}}}),ye=W(he,[["__scopeId","data-v-f49c65d7"]]),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{ye as Q,ee as _,Ae as a};

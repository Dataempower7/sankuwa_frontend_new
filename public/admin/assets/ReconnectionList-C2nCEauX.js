import{a6 as A,d as z,aq as w,ar as V,c as B,g as v,h as l,i as e,n as D,_ as F,v as O,r as _,as as P,o as R,f as d,z as n,m as h,Q as $,F as j,p as J,k as y,j as b,C as Q,t as S,P as G}from"./index-B52YIGC0.js";import{r as H,i as K}from"./format-BxqOrW-w.js";import{S as W}from"./StatusDot-DuKP0Xmc.js";const X=c=>A({prefix:"/im",url:"servant/servant/transferList",method:"get",params:c}),Y=z({__name:"CheckIcon",props:{selected:{},selectedModifiers:{}},emits:w(["update:selected","selected-change"],["update:selected"]),setup(c,{emit:m}){const u=V(c,"selected"),p=m,t=()=>{p("selected-change",!u.value)},r=B(()=>u.value);return(k,i)=>(l(),v("div",{onClick:t,class:"box-warp"},[e("div",{class:D(["check-icon iconfont-admin icon-gou",{selected:r.value}])},null,2)]))}}),Z=F(Y,[["__scopeId","data-v-d8d21d85"]]),ee={class:"container"},se={class:"lyecs-table-list-warp",style:{"margin-bottom":"0"}},te={class:"list-table-tool lyecs-search-warp"},ae={class:"advanced-search-warp list-table-tool-row",style:{"margin-bottom":"-20px"}},oe={class:"simple-form-warp"},ne={class:"simple-form-field"},le={class:"form-group"},ce={class:"control-container"},re={class:"simple-form-field"},ie={class:"table-container"},de={class:"table-list"},ue=["onClick"],_e={class:"zent-badge"},ve={class:"servant-select-dialog-m_item-content_3qFlV"},me={class:"servant-select-dialog-m_item-name_1Cf5B"},pe={class:"servant-select-dialog-m_item-count_2JOT0"},fe={class:"zenticon-check-circle"},ge=z({__name:"ReconnectionList",props:w({conversation_id:{type:Number,default:0}},{servantId:{},servantIdModifiers:{}}),emits:["update:servantId"],setup(c,{expose:m}){const u=B(()=>O().userInfo),p=V(c,"servantId"),t=_([]),r=_(!0),k=_(0),i=P({page:1,size:9999,username:""}),f=async()=>{r.value=!0;try{const s=await X({...i});t.value=s.records,t.value.forEach(a=>{a.selected=!1}),k.value=s.total,L()}catch(s){G.error(s.message)}finally{r.value=!1}};function L(){const s=t.value.find(a=>a.user.adminId===u.value.adminId);if(s){const a=t.value.indexOf(s);t.value.splice(a,1),t.value.unshift(s)}return t.value}R(()=>{f()});const M=()=>{f()},N=_(0),T=s=>{if(s!=0){let a=t.value[s].selected;t.value.forEach((g,I)=>{g.selected=!1}),N.value=s,t.value[s].selected=!a,p.value=t.value[s].servantId}};return m({loadFilter:f}),(s,a)=>{const g=d("TigInput"),I=d("el-button"),U=d("el-form"),x=d("el-avatar"),q=d("a-spin");return l(),v("div",ee,[e("div",se,[e("div",te,[n(U,{model:i},{default:h(()=>[e("div",ae,[e("div",oe,[e("div",ne,[e("div",le,[a[1]||(a[1]=e("label",{class:"control-label"},[e("span",null,"搜索客服：")],-1)),e("div",ce,[n(g,{modelValue:i.username,"onUpdate:modelValue":a[0]||(a[0]=o=>i.username=o)},null,8,["modelValue"])])])]),e("div",re,[n(I,{type:"primary",onClick:M},{default:h(()=>[...a[2]||(a[2]=[$("搜索",-1)])]),_:1})])])])]),_:1},8,["model"])]),e("div",ie,[n(q,{spinning:r.value},{default:h(()=>[e("div",de,[(l(!0),v(j,null,J(t.value,(o,E)=>(l(),v("div",{onClick:C=>T(E),class:"table-item"},[e("div",_e,[b(Q)(String(String(o.user.avatar)))=="def"?(l(),y(x,{key:0,class:"zent-avatar-image",src:b(H)(o.user.avatar)},null,8,["src"])):(l(),y(x,{key:1,class:"zent-avatar-image",src:b(K)(o.user.avatar)},null,8,["src"])),n(W,{flicker:o.status==1,size:10,color:o.status==1?"#3ebd00":o.status==2?"#f44444":"#d0d0d0",class:"dot"},null,8,["flicker","color"])]),e("div",ve,[e("div",me,S(o.user.username),1),e("div",pe," 当前接待人数："+S(o.conversationNum),1)]),e("div",fe,[n(Z,{selected:o.selected,"onUpdate:selected":C=>o.selected=C},null,8,["selected","onUpdate:selected"])])],8,ue))),256))])]),_:1},8,["spinning"])])])])}}}),Ie=F(ge,[["__scopeId","data-v-e31b4eb4"]]);export{Ie as default};

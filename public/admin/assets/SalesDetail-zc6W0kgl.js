import{d as ke,r as x,as as Ge,aw as Re,o as Ne,s as Te,y as Fe,f as y,g as n,h as l,i as e,z as s,m as o,j as p,Q as c,av as _,t as r,F as Ve,P as Ye,_ as Oe}from"./index-B52YIGC0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css                                                                     */import{S as Me}from"./SelectTimeInterval-BUZ-hmxo.js";/* empty css             */import{f as De}from"./time-EzYK4E-P.js";import{i as Se}from"./index-Bb6yjXMn.js";import{g as Qe}from"./statisticsSale-CnQQ7lJ1.js";import"./index-C9ZdVeVx.js";const Be={class:"filtrate-menu"},Ee={class:"main-panel"},Le={class:"main-panel-item"},Pe={class:"main-panel-item-title"},Ue={class:"flex flex-align-center"},Ie={class:"main-panel-item-value"},je={class:"main-panel-item-increase"},qe={key:0,class:"admin-iconfont red f12 up"},We={key:1,class:"admin-iconfont green f12"},He={class:"main-panel-item"},Je={class:"main-panel-item-title"},Ke={class:"flex flex-align-center"},Xe={class:"main-panel-item-value"},Ze={class:"main-panel-item-increase"},$e={key:0,class:"admin-iconfont red f12 up"},Ce={key:1,class:"admin-iconfont green f12"},et={class:"main-panel-item"},tt={class:"main-panel-item-title"},at={class:"flex flex-align-center"},st={class:"main-panel-item-value"},ot={class:"main-panel-item-increase"},it={key:0,class:"admin-iconfont red f12 up"},nt={key:1,class:"admin-iconfont green f12"},lt={class:"main-panel-item"},rt={class:"main-panel-item-title"},dt={class:"flex flex-align-center"},mt={class:"main-panel-item-value"},pt={class:"main-panel-item-increase"},ct={key:0,class:"admin-iconfont red f12 up"},ut={key:1,class:"admin-iconfont green f12"},ft={class:"main-panel-item"},vt={class:"main-panel-item-title"},_t={class:"flex flex-align-center"},gt={class:"main-panel-item-value"},xt={class:"main-panel-item-increase"},yt={key:0,class:"admin-iconfont red f12 up"},ht={key:1,class:"admin-iconfont green f12"},wt={class:"main-panel-item"},bt={class:"main-panel-item-title"},Dt={class:"flex flex-align-center"},St={class:"main-panel-item-value"},zt={class:"main-panel-item-increase"},At={key:0,class:"admin-iconfont red f12 up"},kt={key:1,class:"admin-iconfont green f12"},Gt={class:"chart-menu"},Rt=ke({__name:"SalesDetail",setup(Nt){const z=x(),A=x();let i,d;const g=x({title:{text:"金额明细",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["支付金额","退款金额"],left:"center",bottom:"bottom"},xAxis:{type:"category",data:[]},yAxis:[{type:"value",name:"金额",nameTextStyle:{color:"#7cb5ec"},nameGap:20,axisLabel:{color:"#7cb5ec",formatter:"{value} 元"}}],series:[{name:"支付金额",data:[],type:"line",smooth:!0,lineStyle:{color:"#64a9ff"},color:"#5CA5FF",emphasis:{scale:!1},tooltip:{valueFormatter:function(m){return m+"元"}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(92, 165, 255,0.50)"},{offset:1,color:"rgba(92, 165, 255,0.00)"}],global:!1}}},{name:"退款金额",data:[],type:"line",smooth:!0,lineStyle:{color:"rgba(0, 190, 189,0.50)"},color:"rgba(0, 190, 189,0.50)",emphasis:{scale:!1},tooltip:{valueFormatter:function(m){return m+"元"}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(0, 190, 189,0.50)"},{offset:1,color:"rgba(0, 190, 189,0.00)"}],global:!1}}}]}),h=x({title:{text:"商品明细",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["商品浏览量"],left:"center",bottom:"bottom"},xAxis:{type:"category",data:[]},yAxis:[{type:"value",name:"浏览量",nameTextStyle:{color:"#64a9ff"},nameGap:20,axisLabel:{color:"#64a9ff",formatter:"{value} 次"},min:"10"}],series:[{name:"商品浏览量",type:"bar",barWidth:"50%",showBackground:!1,backgroundStyle:{color:"rgba(0, 127, 255,0.1)"},itemStyle:{color:{x:0,y:0,x2:0,y2:1,type:"linear",global:!1,colorStops:[{offset:0,color:"#007FFF"},{offset:1,color:"#539FE5"}]}},data:[]}]}),k=()=>{i==null||i.resize(),d==null||d.resize()},ze=()=>{i=Se(z.value),i.setOption(g.value),d=Se(A.value),d.setOption(h.value),window.addEventListener("resize",k)},u=Ge({startTime:De(Re(30,"sub"),"YYYY-MM-DD"),endTime:De(new Date,"YYYY-MM-DD")}),a=x(),G=async()=>{try{const m=await Qe(u);a.value=m;const{horizontalAxis:t,longitudinalAxisPaymentAmount:w,longitudinalAxisProductView:b,longitudinalAxisRefundAmount:D}=m.salesStatisticsData;g.value.xAxis.data=t,g.value.series[0].data=w,g.value.series[1].data=D,i==null||i.setOption(g.value),h.value.xAxis.data=t,h.value.series[0].data=b,d==null||d.setOption(h.value)}catch(m){Ye.error(m.message),console.error(m)}},Ae=()=>{G()};return Ne(()=>{Te(()=>{ze()}),window.onresize=()=>{i==null||i.resize(),d==null||d.resize()},G()}),Fe(()=>{i==null||i.dispose(),window.removeEventListener("resize",k)}),(m,t)=>{var R,N,T,F,V,Y,O,M,Q,B,E,L,P,U,I,j,q,W,H,J,K,X,Z,$,C,ee,te,ae,se,oe,ie,ne,le,re,de,me,pe,ce,ue,fe,ve,_e,ge,xe,ye,he,we,be;const w=y("el-form-item"),b=y("el-button"),D=y("el-form"),f=y("el-icon"),v=y("el-tooltip");return l(),n(Ve,null,[e("div",null,[s(D,{model:u,inline:""},{default:o(()=>[e("div",Be,[s(w,{class:"mr-10"},{default:o(()=>[s(p(Me),{type:"date","start-date":u.startTime,"onUpdate:startDate":t[0]||(t[0]=S=>u.startTime=S),"end-date":u.endTime,"onUpdate:endDate":t[1]||(t[1]=S=>u.endTime=S)},null,8,["start-date","end-date"])]),_:1}),s(w,null,{default:o(()=>[s(b,{plain:"",onClick:Ae},{default:o(()=>[...t[2]||(t[2]=[c("搜索",-1)])]),_:1})]),_:1})])]),_:1},8,["model"]),e("div",Ee,[e("ul",null,[e("li",Le,[e("div",Pe,[s(v,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...t[3]||(t[3]=[e("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，商城页面被浏览的次数。每打开一个页面或每刷新一次页面都记录1次 （按访问时间） ",-1)])]),default:o(()=>[e("div",Ue,[t[4]||(t[4]=e("div",null,"商品浏览量",-1)),s(f,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[s(p(_))]),_:1})])]),_:1})]),e("div",Ie,r(((N=(R=a.value)==null?void 0:R.salesData)==null?void 0:N.productView)??0),1),e("div",je,[t[5]||(t[5]=c(" 环比： ",-1)),e("span",null,r((F=(T=a.value)==null?void 0:T.salesData)==null?void 0:F.productViewGrowthRate)+" %",1),((Y=(V=a.value)==null?void 0:V.salesData)==null?void 0:Y.productViewGrowthRate.toString())!=="--"&&Number((M=(O=a.value)==null?void 0:O.salesData)==null?void 0:M.productViewGrowthRate)>0?(l(),n("i",qe,"")):(l(),n("i",We,""))])]),e("li",He,[e("div",Je,[s(v,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...t[6]||(t[6]=[e("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}},"根据筛选时间，在商城中访问客户数量",-1)])]),default:o(()=>[e("div",Ke,[t[7]||(t[7]=e("div",null,"访客数",-1)),s(f,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[s(p(_))]),_:1})])]),_:1})]),e("div",Xe,r(((B=(Q=a.value)==null?void 0:Q.salesData)==null?void 0:B.productVisitor)??0),1),e("div",Ze,[t[8]||(t[8]=c(" 环比： ",-1)),e("span",null,r((L=(E=a.value)==null?void 0:E.salesData)==null?void 0:L.productVisitorGrowthRate)+" %",1),((U=(P=a.value)==null?void 0:P.salesData)==null?void 0:U.productVisitorGrowthRate.toString())!=="--"&&Number((j=(I=a.value)==null?void 0:I.salesData)==null?void 0:j.productVisitorGrowthRate)>0?(l(),n("i",$e,"")):(l(),n("i",Ce,""))])]),e("li",et,[e("div",tt,[s(v,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...t[9]||(t[9]=[e("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}},"根据筛选时间，平台/店铺销售的商品件数",-1)])]),default:o(()=>[e("div",at,[t[10]||(t[10]=e("div",null,"下单件数",-1)),s(f,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[s(p(_))]),_:1})])]),_:1})]),e("div",st,r(((W=(q=a.value)==null?void 0:q.salesData)==null?void 0:W.orderNum)??0),1),e("div",ot,[t[11]||(t[11]=c(" 环比： ",-1)),e("span",null,r((J=(H=a.value)==null?void 0:H.salesData)==null?void 0:J.orderNumGrowthRate)+" %",1),((X=(K=a.value)==null?void 0:K.salesData)==null?void 0:X.orderNumGrowthRate.toString())!=="--"&&Number(($=(Z=a.value)==null?void 0:Z.salesData)==null?void 0:$.orderNumGrowthRate)>0?(l(),n("i",it,"")):(l(),n("i",nt,""))])]),e("li",lt,[e("div",rt,[s(v,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...t[12]||(t[12]=[e("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，订单合计金额减免掉优惠券、满减/满折、会员折扣后成功支付的金额，再扣除掉积分余额，后实际支付的金额（自提以支付成功后计入统计；不含充值订单） ",-1)])]),default:o(()=>[e("div",dt,[t[13]||(t[13]=e("div",null,"实付金额",-1)),s(f,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[s(p(_))]),_:1})])]),_:1})]),e("div",mt,r(((ee=(C=a.value)==null?void 0:C.salesData)==null?void 0:ee.paymentAmount)??0),1),e("div",pt,[t[14]||(t[14]=c(" 环比： ",-1)),e("span",null,r((ae=(te=a.value)==null?void 0:te.salesData)==null?void 0:ae.paymentAmountGrowthRate)+" %",1),((oe=(se=a.value)==null?void 0:se.salesData)==null?void 0:oe.paymentAmountGrowthRate.toString())!=="--"&&Number((ne=(ie=a.value)==null?void 0:ie.salesData)==null?void 0:ne.paymentAmountGrowthRate)>0?(l(),n("i",ct,"")):(l(),n("i",ut,""))])]),e("li",ft,[e("div",vt,[s(v,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...t[15]||(t[15]=[e("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，平台/店铺售后金额（不含充值订单） ",-1)])]),default:o(()=>[e("div",_t,[t[16]||(t[16]=e("div",null,"退款金额",-1)),s(f,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[s(p(_))]),_:1})])]),_:1})]),e("div",gt,r(((re=(le=a.value)==null?void 0:le.salesData)==null?void 0:re.refundAmount)??0),1),e("div",xt,[t[17]||(t[17]=c(" 环比： ",-1)),e("span",null,r((me=(de=a.value)==null?void 0:de.salesData)==null?void 0:me.refundAmountGrowthRate)+" %",1),((ce=(pe=a.value)==null?void 0:pe.salesData)==null?void 0:ce.refundAmountGrowthRate.toString())!=="--"&&Number((fe=(ue=a.value)==null?void 0:ue.salesData)==null?void 0:fe.refundAmountGrowthRate)>0?(l(),n("i",yt,"")):(l(),n("i",ht,""))])]),e("li",wt,[e("div",bt,[s(v,{class:"box-item",effect:"light",placement:"top","show-after":"300",trigger:"hover"},{content:o(()=>[...t[18]||(t[18]=[e("div",{style:{width:"300px",padding:"10px","line-height":"24px","font-size":"14px"}}," 根据筛选时间，平台/店铺售后商品件数（不含充值订单） ",-1)])]),default:o(()=>[e("div",Dt,[t[19]||(t[19]=e("div",null,"退款件数",-1)),s(f,{style:{"margin-left":"5px"},size:"14",color:"#969799"},{default:o(()=>[s(p(_))]),_:1})])]),_:1})]),e("div",St,r(((_e=(ve=a.value)==null?void 0:ve.salesData)==null?void 0:_e.refundQuantity)??0),1),e("div",zt,[t[20]||(t[20]=c(" 环比： ",-1)),e("span",null,r((xe=(ge=a.value)==null?void 0:ge.salesData)==null?void 0:xe.refundQuantityGrowthRate)+" %",1),((he=(ye=a.value)==null?void 0:ye.salesData)==null?void 0:he.refundQuantityGrowthRate.toString())!=="--"&&Number((be=(we=a.value)==null?void 0:we.salesData)==null?void 0:be.refundQuantityGrowthRate)>0?(l(),n("i",At,"")):(l(),n("i",kt,""))])])])])]),e("div",Gt,[e("div",{class:"chart-menu-item",ref_key:"SalesDetailRef",ref:z},null,512),e("div",{class:"chart-menu-item",ref_key:"NumberProductViewsRef",ref:A},null,512)])],64)}}}),jt=Oe(Rt,[["__scopeId","data-v-829b8854"]]);export{jt as default};

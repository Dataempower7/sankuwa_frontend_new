import{d as C,r as u,o as I,f as p,g as n,h as a,i as e,z as m,m as F,a8 as L,F as h,p as g,j as S,t as c,P as _,_ as R}from"./index-B52YIGC0.js";import{w as V}from"./order-BVunCi_y.js";import{i as T,p as B}from"./format-BxqOrW-w.js";const N={class:"container"},E={class:"form-row"},K={class:"input-row"},O={class:"order-list"},$={class:"order-item"},j={class:"order-product"},q={class:"info"},z={class:"image"},D={class:"info-text"},M={class:"name"},P={class:"sn"},Q={class:"num"},U={class:"price"},A=C({__name:"ScanCode",emits:["submitCallback","update:confirmLoading","close"],setup(G,{expose:x,emit:w}){const f=w,r=u(),t=u(""),v=u([]),l=async()=>{try{if(f("update:confirmLoading",!0),t.value){const o=await V({pickupSn:t.value});o&&v.value.unshift(o)}else return _.error("请输入核销码/订单号");_.success("核销成功")}catch(o){_.error(o.message)}finally{t.value="",f("update:confirmLoading",!1)}};return I(()=>{setTimeout(()=>{r.value&&r.value.$refs.inputRef&&r.value.$refs.inputRef.focus()},100)}),x({onFormSubmit:()=>{l()}}),(o,s)=>{const k=p("SvgIcon"),y=p("TigInput"),b=p("el-image");return a(),n("div",N,[e("div",E,[e("div",K,[m(y,{ref_key:"pickupSnInputRef",ref:r,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=d=>t.value=d),width:"400px",placeholder:"请输入核销码/订单号或扫码核销",onKeyup:L(l,["enter"]),clearable:""},{prefix:F(()=>[m(k,{name:"product-QRcode",width:"20",height:"20"})]),_:1},8,["modelValue"]),e("div",{class:"btn",onClick:l},"核销(Enter)")]),s[2]||(s[2]=e("div",{class:"tips"},"提示：支持扫码枪设置带回车自动核销",-1)),e("div",O,[(a(!0),n(h,null,g(v.value,d=>(a(),n("div",$,[(a(!0),n(h,null,g(d.items,i=>(a(),n("div",j,[e("div",q,[e("div",z,[m(b,{style:{width:"50px",height:"50px"},src:S(T)(i.picThumb),fit:"cover"},null,8,["src"])]),e("div",D,[e("div",M,c(i.productName),1),e("div",P," 订单编号："+c(i.orderSn),1)])]),e("div",Q,"x"+c(i.quantity),1),e("div",U,c(S(B)(i.price)),1),s[1]||(s[1]=e("div",{class:"status"},"已核销",-1))]))),256))]))),256))])])])}}}),Y=R(A,[["__scopeId","data-v-934f6e88"]]);export{Y as default};

import{d as E,r as f,x as K,as as j,db as G,o as L,f as i,g as h,h as S,i as t,z as o,l as w,m as a,a8 as M,Q as k,t as O,j as Q,P as q,s as H,_ as J}from"./index-B52YIGC0.js";/* empty css             *//* empty css                                                                    */import{P as W}from"./Pagination-C8J7-6Em.js";import{g as X}from"./groupon-BtcEMuW-.js";const Y={class:"container",style:{position:"relative",height:"100%"}},Z={class:"content_wrapper"},$={class:"",style:{display:"flex","flex-direction":"column",width:"100%",height:"100%",position:"absolute"}},ee={class:"list-table-tool lyecs-search-warp",style:{flex:"0"}},te={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},le={class:"simple-form-field"},se={class:"form-group"},ae={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},ce={class:"simple-form-warp"},pe={class:"simple-form-field"},de={class:"control-container"},ue={style:{"padding-right":"15px","box-sizing":"border-box"}},me={class:"empty-warp"},_e={key:0,class:"empty-bg"},fe={key:0,class:"pagination-con",style:{"flex-shrink":"0"}},ge=E({__name:"SelectActivity",props:{selectedItems:{type:Array,default:[]},groupType:{type:Number,default:0}},emits:["submitCallback"],setup(C,{expose:T,emit:I}){const g=C,N=I,v=f([]),d=f(!0),m=f(0),V=K(),b=f([]),s=j({page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:"",groupType:g.groupType,status:1}),c=G("tableRef"),z=()=>{H(()=>{g.selectedItems.length>0&&c.value&&(c.value.clearSelection(),b.value.forEach(l=>{var r;g.selectedItems.some(y=>y.grouponPromotionId===l.grouponPromotionId)&&((r=c.value)==null||r.toggleRowSelection(l,!0))}))})},_=async()=>{d.value=!0;try{const l=await X({...s});b.value=l.records,m.value=l.total,z()}catch(l){q.error(l.message)}finally{d.value=!1}};L(()=>{_()});const u=()=>{_()},P=()=>{s.grouponName="",s.status=1,_()},R=l=>{var e;if(l.length>1){let r=l.shift();(e=c==null?void 0:c.value)==null||e.toggleRowSelection(r,!1),v.value=l}else v.value=l};return T({onFormSubmit:()=>{N("submitCallback",v.value)}}),(l,e)=>{const r=i("el-button"),y=i("TigInput"),x=i("el-option"),F=i("el-select"),U=i("el-form"),p=i("el-table-column"),A=i("el-table"),B=i("a-spin"),D=i("perfect-scrollbar");return S(),h("div",Y,[t("div",Z,[t("div",$,[t("div",ee,[o(U,{model:s,name:"form"},{default:a(()=>[t("div",te,[t("div",oe,[t("div",le,[t("div",se,[e[5]||(e[5]=t("label",{class:"control-label"},[t("span",null,"活动名称：")],-1)),t("div",ae,[o(y,{modelValue:s.grouponName,"onUpdate:modelValue":e[0]||(e[0]=n=>s.grouponName=n),name:"grouponName",placeholder:"输入活动名称",onKeyup:M(u,["enter"]),clearable:"",onClear:u},{append:a(()=>[o(r,{onClick:u},{default:a(()=>[...e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])])])]),t("div",ne,[t("div",ie,[e[6]||(e[6]=t("label",{class:"control-label"},[t("span",null,"活动状态：")],-1)),t("div",re,[o(F,{modelValue:s.status,"onUpdate:modelValue":e[1]||(e[1]=n=>s.status=n),placeholder:"请选择活动状态",onChange:u},{default:a(()=>[o(x,{label:"活动进行中",value:1}),o(x,{label:"活动未开始",value:3})]),_:1},8,["modelValue"])])])]),t("div",ce,[t("div",pe,[e[9]||(e[9]=t("label",{class:"control-label"},null,-1)),t("div",de,[o(r,{type:"primary",plain:"",onClick:u},{default:a(()=>[...e[7]||(e[7]=[k("搜索",-1)])]),_:1}),o(r,{plain:"",onClick:P},{default:a(()=>[...e[8]||(e[8]=[k("重置",-1)])]),_:1})])])])])])]),_:1},8,["model"])]),o(D,{class:"table-container",style:{flex:"1"}},{default:a(()=>[o(B,{spinning:d.value},{default:a(()=>[t("div",ue,[o(A,{ref_key:"tableRef",ref:c,class:"result-table hide-checkbox",data:b.value,loading:d.value,total:m.value,"row-key":"grouponPromotionId",onSelectionChange:R},{empty:a(()=>[t("div",me,[d.value?w("",!0):(S(),h("div",_e,"暂无数据"))])]),default:a(()=>[o(p,{type:"selection",width:"32"}),o(p,{label:"活动名称",prop:"name",width:150}),o(p,{label:"起始日期",prop:"startTimeStr"}),o(p,{label:"截止日期",prop:"endTimeStr"}),o(p,{label:"拼团类型"},{default:a(({row:n})=>[k(O(n.groupType==1?"普通团":n.groupType==2?"阶梯团":"--"),1)]),_:1}),o(p,{label:"状态",prop:"statusName"})]),_:1},8,["data","loading","total"])])]),_:1},8,["spinning"])]),_:1}),m.value>0?(S(),h("div",fe,[o(Q(W),{page:s.page,"onUpdate:page":e[2]||(e[2]=n=>s.page=n),size:s.size,"onUpdate:size":e[3]||(e[3]=n=>s.size=n),total:m.value,onCallback:_,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):w("",!0)])])])}}}),xe=J(ge,[["__scopeId","data-v-43c43535"]]);export{xe as default};

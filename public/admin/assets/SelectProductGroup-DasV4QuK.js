/* empty css             */import{d as E,r as f,x as U,as as j,o as A,f as r,g as v,h as S,i,z as o,l as w,m as c,Q as I,n as O,t as D,j as L,s as Q,P as q,_ as H}from"./index-B52YIGC0.js";/* empty css                                                                    */import{P as J}from"./Pagination-C8J7-6Em.js";import{g as K}from"./productGroup-DmZc4IJt.js";const W={class:"container",style:{position:"relative",height:"100%"}},X={class:"content_wrapper"},Y={class:"",style:{display:"flex","flex-direction":"column",width:"100%",height:"100%",position:"absolute"}},Z={class:"list-table-tool lyecs-search-warp",style:{flex:"0"}},$={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},ee={class:"list-table-tool-col"},te={style:{"padding-right":"15px","box-sizing":"border-box"}},oe={class:"empty-warp"},le={key:0,class:"empty-bg"},se={key:0,class:"pagination-con",style:{"flex-shrink":"0"}},ae=E({__name:"SelectProductGroup",props:{selectedIds:{type:Array,default:[]},modelValue:{type:Object,default:{}},isMultiple:{type:Boolean,default:!0},index:{type:Number,default:0},buyShowSelectedIds:{type:Array,default:[]}},emits:["submitCallback","okType","update:modelValue"],setup(x,{expose:C,emit:z}){const s=x,p=z;p("okType",!1);const d=f([]),m=f(!0),_=f(0),G=U(),b=f([]),a=j({page:1,size:G.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),y=async()=>{var l;m.value=!0;try{const e=await K({...a});if(b.value=e.records,_.value=e.total,s.buyShowSelectedIds&&s.buyShowSelectedIds.length>0){const n=(l=s.buyShowSelectedIds)==null?void 0:l.map(t=>(t==null?void 0:t.productGroupId)||t);Q(()=>{b.value.forEach(t=>{n.includes(t.productGroupId)&&g.value.toggleRowSelection(t,!0)})})}}catch(e){q.error(e.message)}finally{m.value=!1}};A(()=>{y()});const k=()=>{y()},g=f(),V=l=>{if(s.isMultiple){let e=[];l.forEach(n=>{e.push(n.productGroupId)}),d.value=e,p("okType",d.value.length>0)}},T=(l,e)=>{if(!s.isMultiple){if(g.value.clearSelection(),l.length==0){d.value=[];return}g.value.toggleRowSelection(e,!0),d.value.length=0,d.value.push(e.productGroupId),p("okType",d.value.length>0)}p("update:modelValue",e)},P=(l,e)=>{var n,t;return(n=s.buyShowSelectedIds)!=null&&n.length?!0:!((t=s.selectedIds)!=null&&t.includes(l.productGroupId))};return C({onFormSubmit:()=>{p("submitCallback",{ids:d.value,index:s.index})}}),(l,e)=>{const n=r("TigInput"),t=r("el-button"),N=r("el-space"),F=r("el-form"),h=r("el-table-column"),M=r("el-table"),R=r("a-spin"),B=r("perfect-scrollbar");return S(),v("div",W,[i("div",X,[i("div",Y,[i("div",Z,[o(F,{model:a,name:"form",onFinish:k},{default:c(()=>[i("div",$,[i("div",ee,[o(N,null,{default:c(()=>[o(n,{modelValue:a.keyword,"onUpdate:modelValue":e[0]||(e[0]=u=>a.keyword=u),placeholder:"商品分组名称"},null,8,["modelValue"]),o(t,{onClick:k},{default:c(()=>[...e[3]||(e[3]=[I("搜索",-1)])]),_:1})]),_:1})]),e[4]||(e[4]=i("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),o(B,{class:"table-container",style:{flex:"1"}},{default:c(()=>[o(R,{spinning:m.value},{default:c(()=>[i("div",te,[o(M,{ref_key:"tableRef",ref:g,class:O([x.isMultiple?"":"hide-checkbox","result-table"]),data:b.value,loading:m.value,total:_.value,"row-key":"productGroupId",onSelect:T,onSelectionChange:V},{empty:c(()=>[i("div",oe,[m.value?w("",!0):(S(),v("div",le,"暂无数据"))])]),default:c(()=>[o(h,{selectable:P,type:"selection",width:"32"}),o(h,{label:"分组名称",prop:"productGroupName"}),o(h,{label:"分组商品数量",prop:"productIds",align:"center"},{default:c(({row:u})=>[I(D(u.productIds.length)+"个 ",1)]),_:1})]),_:1},8,["class","data","loading","total"])])]),_:1},8,["spinning"])]),_:1}),_.value>0?(S(),v("div",se,[o(L(J),{page:a.page,"onUpdate:page":e[1]||(e[1]=u=>a.page=u),size:a.size,"onUpdate:size":e[2]||(e[2]=u=>a.size=u),total:_.value,onCallback:y,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):w("",!0)])])])}}}),pe=H(ae,[["__scopeId","data-v-87debf71"]]);export{pe as default};

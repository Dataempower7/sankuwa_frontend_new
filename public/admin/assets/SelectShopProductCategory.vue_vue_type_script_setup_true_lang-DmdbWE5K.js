import{u as C,c as P}from"./shopProductCategory-DyQBhq8U.js";import{d as N,aq as S,ar as y,r,o as k,P as I,k as M,h as x,j as L,dx as V}from"./index-B52YIGC0.js";const T=N({__name:"SelectShopProductCategory",props:S({multiple:{type:Boolean,default:!1},categoryList:{type:Array,default:()=>[]}},{categoryId:{},categoryIdModifiers:{},categoryName:{},categoryNameModifiers:{}}),emits:["update:categoryId","update:categoryName"],setup(c){const o=c,t=y(c,"categoryId"),u=y(c,"categoryName"),i={label:"categoryName",value:"categoryId",children:"children",multiple:o.multiple,checkStrictly:!0},s=C(),l=r([]),n=r(!1),g=r(!1);r(!1),k(()=>{o.categoryList.length>1?l.value=o.categoryList:d()});const d=async()=>{if(g.value!==!0){if(n.value=!0,s.shopProductCategoryTree!==null){l.value=s.shopProductCategoryTree;return}try{const e=await P();l.value=e,s.shopProductCategoryTree=e}catch(e){I.error(e.message)}finally{n.value=!1,g.value=!0}}},p=r(),f=e=>{if(o.multiple==!0)t.value=e==null?void 0:e.map(a=>a[a.length-1]);else{const a=p.value.getCheckedNodes();u.value=a[0]?a[0].text:"",console.log(e?e[e.length-1]:0),t.value=e?e[e.length-1]:0}},m=e=>{e&&d()},h=()=>{o.multiple==!0?t.value=[]:(t.value=0,u.value="")};return(e,a)=>(x(),M(L(V),{ref_key:"cascaderRef",ref:p,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=v=>t.value=v),options:l.value,props:i,class:"cascader",clearable:"",placeholder:"选择分类",onChange:f,onClear:h,onVisibleChange:m},null,8,["modelValue","options"]))}});export{T as _};

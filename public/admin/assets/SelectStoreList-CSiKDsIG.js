/* empty css             */import{d as U,x as E,r as p,as as Q,o as q,f as d,g as _,h as n,i,z as o,m as l,l as u,n as G,Q as w,t as h,k as S,j as H,P as J,_ as K}from"./index-B52YIGC0.js";/* empty css                                                                    */import{P as W}from"./Pagination-C8J7-6Em.js";import{a as X}from"./shop-CBisV8Of.js";import{S as I}from"./StatusDot-DuKP0Xmc.js";const Y={class:"container"},Z={class:"content_wrapper"},$={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"list-table-tool-row"},se={class:"list-table-tool-col"},oe={class:"table-container"},ae={key:0},le={key:3,style:{color:"red"}},ne={key:4,style:{color:"green"}},ie={class:"empty-warp"},ce={key:0,class:"empty-bg"},re={key:0,class:"pagination-con"},de=U({__name:"SelectStoreList",props:{selectedIds:{type:Array,default:[]},shopInfo:{type:Object,default:{}},isMultiple:{type:Boolean,default:!0}},emits:["submitCallback","okType"],setup(C,{expose:T,emit:V}){const m=C,x=V,M=E(),z=p([]),f=p(!0),g=p(0),c=p([]),b=p(m.shopInfo),a=Q({shopType:2,page:1,size:M.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),v=async()=>{f.value=!0;try{const s=await X({...a});z.value=s.records,g.value=s.total}catch(s){J.error(s.message)}finally{f.value=!1}};q(()=>{v()});const N=()=>{v()},R=({prop:s,order:t})=>{a.sortField=s,a.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",v()},k=p(),B=s=>{m.isMultiple&&s.forEach(t=>{const r=new Set(c.value);r.add(t.shopId),c.value=Array.from(r)})},F=(s,t)=>{if(!m.isMultiple){if(k.value.clearSelection(),s.length==0){c.value=[],b.value={};return}k.value.toggleRowSelection(t,!0),c.value.length=0,c.value.push(t.shopId),b.value=t}},j=(s,t)=>{var r;return!((r=m.selectedIds)!=null&&r.includes(s.shopId))};return T({onFormSubmit:()=>{if(m.isMultiple)x("submitCallback",c);else{let s={shopId:c.value[0],shopInfo:[b.value]};x("submitCallback",s)}}}),(s,t)=>{const r=d("el-button"),P=d("TigInput"),A=d("el-space"),D=d("el-form"),y=d("el-table-column"),L=d("el-table"),O=d("a-spin");return n(),_("div",Y,[i("div",Z,[i("div",$,[i("div",ee,[o(D,{model:a},{default:l(()=>[i("div",te,[i("div",se,[o(A,null,{default:l(()=>[o(P,{modelValue:a.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>a.keyword=e),name:"keyword",placeholder:"输入门店名称"},{append:l(()=>[o(r,{onClick:N},{default:l(()=>[...t[3]||(t[3]=[i("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),i("div",oe,[o(O,{spinning:f.value},{default:l(()=>[o(L,{ref_key:"tableRef",ref:k,class:G(C.isMultiple?"":"hide-checkbox"),data:z.value,loading:f.value,total:g.value,"row-key":"shopId",onSelect:F,onSelectionChange:B,onSortChange:R},{empty:l(()=>[i("div",ie,[f.value?u("",!0):(n(),_("div",ce,"暂无数据"))])]),default:l(()=>[o(y,{selectable:j,type:"selection",width:"32"}),o(y,{label:"门店名称"},{default:l(({row:e})=>[w(h(e.shopTitle||"--"),1)]),_:1}),o(y,{label:"门店地址"},{default:l(({row:e})=>[e.shopRegionNames?(n(),_("span",ae,h(e.shopRegionNames.join("")),1)):u("",!0),w(" "+h(e.shopDetailedAddress||"--"),1)]),_:1}),o(y,{label:"门店状态",width:"100"},{default:l(({row:e})=>[e.status==10?(n(),S(I,{key:0,color:"red",flicker:!0})):u("",!0),e.status==4?(n(),S(I,{key:1,color:"red",flicker:!0})):u("",!0),e.status==1?(n(),S(I,{key:2,color:"green",flicker:!0})):u("",!0),e.status===10||e.status===4?(n(),_("span",le,h(e.statusText),1)):e.status===1?(n(),_("span",ne,h(e.statusText),1)):u("",!0)]),_:1})]),_:1},8,["class","data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(n(),_("div",re,[o(H(W),{page:a.page,"onUpdate:page":t[1]||(t[1]=e=>a.page=e),size:a.size,"onUpdate:size":t[2]||(t[2]=e=>a.size=e),total:g.value,onCallback:v},null,8,["page","size","total"])])):u("",!0)])])])])}}}),ve=K(de,[["__scopeId","data-v-01f52352"]]);export{ve as default};

import{d as E,b as I,x as Q,r as N,o as G,f as i,g as d,h as n,i as o,z as s,m as l,j as e,a8 as H,Q as u,l as c,t as g,k as _,C as U,ac as J,n as W,_ as X}from"./index-B52YIGC0.js";/* empty css             */import"./index-KjhYqCTY.js";import{D as Y}from"./DeleteRecord-BTXBpwL2.js";/* empty css                                                                    */import{P as Z}from"./Pagination-C8J7-6Em.js";import{i as ee,r as te}from"./format-BxqOrW-w.js";import{a as ae,c as oe,e as se}from"./adminUser-Irb9OB0N.js";import{M as le}from"./MobileCard-qEvTFKQw.js";import"./Verify.vue_vue_type_style_index_0_lang-BAuPCCIW.js";import"./zh-cn-kq_pLf4V.js";import{T as ne}from"./Tag-DafgHPRr.js";import{u as ie}from"./useListRequest-CprjeVXp.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const re={class:"container"},de={class:"content_wrapper"},pe={class:"lyecs-table-list-warp"},ce={class:"list-table-tool lyecs-search-warp"},me={class:"list-table-tool-row"},ue={class:"simple-form-warp"},_e={class:"simple-form-field"},fe={class:"form-group"},ge={class:"control-container"},ve={class:"simple-form-field"},ye={class:"form-group"},be={class:"simple-form-field"},he={class:"form-group"},ke={key:0},Ce={class:"table-container"},Se={class:"avatar-username"},xe={key:0},ze={key:1,class:"gray"},De={class:"empty-warp"},we={key:0,class:"empty-bg"},Ie={key:0,class:"pagination-con"},Ne=E({__name:"ShopList",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(B){I();const V=Q(),{listData:T,loading:v,total:y,selectedIds:b,filterParams:r,loadData:m,onSearchSubmit:h,onSortChange:q,onSelectChange:O,onBatchAction:F}=ie({apiFunction:ae,idKey:"id",defaultParams:{page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}}),K=async D=>{await F(D,se)},f=B,z=I().currentRoute.value.query,k=N(f.isDialog?f.act:String(z.act)),C=N(f.isDialog?f.id:Number(z.id));return G(()=>{k.value&&(r.suppliersId=C.value),m()}),(D,a)=>{const S=i("el-button"),L=i("TigInput"),P=i("el-popconfirm"),R=i("el-space"),p=i("el-table-column"),x=i("el-avatar"),M=i("el-divider"),$=i("el-table"),j=i("a-spin");return n(),d("div",re,[o("div",de,[o("div",pe,[o("div",ce,[o("div",me,[o("div",ue,[o("div",_e,[o("div",fe,[o("div",ge,[s(L,{modelValue:e(r).keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>e(r).keyword=t),name:"keyword",placeholder:"输入员工名称",onKeyup:H(e(h),["enter"]),clearable:"",onClear:e(h)},{append:l(()=>[s(S,{onClick:e(h)},{default:l(()=>[...a[4]||(a[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),o("div",ve,[o("div",ye,[s(e(A),{params:{act:"add",type:k.value?k.value:"",suppliersId:C.value?C.value:0},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"添加员工",width:"800px",onOkCallback:e(m)},{default:l(()=>[s(S,{type:"primary"},{default:l(()=>[...a[5]||(a[5]=[u("添加员工",-1)])]),_:1})]),_:1},8,["params","onOkCallback"])])]),o("div",be,[o("div",he,[s(R,null,{default:l(()=>[s(P,{title:"您确认要批量删除所选数据吗？",onConfirm:a[1]||(a[1]=t=>K("del"))},{reference:l(()=>[s(S,{disabled:e(b).length===0},{default:l(()=>[...a[6]||(a[6]=[u("批量删除",-1)])]),_:1},8,["disabled"])]),_:1}),e(b).length>0?(n(),d("span",ke,[a[7]||(a[7]=u(" 已选择：",-1)),o("b",null,g(e(b).length),1),a[8]||(a[8]=u(" 项 ",-1))])):c("",!0)]),_:1})])])])])]),o("div",Ce,[s(j,{spinning:e(v)},{default:l(()=>[s($,{data:e(T),loading:e(v),total:e(y),"row-key":"id",onSelectionChange:e(O),onSortChange:e(q)},{empty:l(()=>[o("div",De,[e(v)?c("",!0):(n(),d("div",we,"暂无数据"))])]),default:l(()=>[s(p,{type:"selection",width:"32"}),s(p,{width:"200",label:"员工名称",prop:"username"},{default:l(({row:t})=>[o("div",Se,[e(U)(String(t.avatar))=="one"?(n(),_(x,{key:0,size:30,src:e(ee)(t.avatar)},null,8,["src"])):e(U)(String(t.avatar))=="def"?(n(),_(x,{key:1,size:30,src:e(te)(t.avatar)},null,8,["src"])):(n(),_(x,{key:2,size:30,src:""})),o("div",null,[o("div",null,g(t.username||"-"),1),t.isAdmin==1?(n(),d("div",xe,[s(e(ne),{transparent:!0,text:e(J)()===1?"店铺管理员":"门店管理员"},null,8,["text"])])):c("",!0)])])]),_:1}),s(p,{label:"权限组",prop:"roleName"},{default:l(({row:t})=>[t.role?(n(),d("span",{key:0,class:W(t.role.roleName?"green":"gray")},g(t.role.roleName||"-"),3)):(n(),d("span",ze,"自定义权限"))]),_:1}),s(p,{label:"邮箱",prop:"email"},{default:l(({row:t})=>[o("span",null,g(t.email||"-"),1)]),_:1}),s(p,{label:"手机号",prop:"mobile"},{default:l(({row:t})=>{var w;return[o("span",null,[s(le,{mobile:(w=t.adminUser)==null?void 0:w.mobile},null,8,["mobile"])])]}),_:1}),s(p,{width:150,fixed:"right",label:"操作"},{default:l(({row:t})=>[s(e(A),{params:{act:"detail",id:t.id},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"编辑员工",width:"800px",onOkCallback:e(m)},{default:l(()=>[...a[9]||(a[9]=[o("a",{class:"btn-link"},"编辑",-1)])]),_:1},8,["params","onOkCallback"]),t.adminId!=1?(n(),_(M,{key:0,direction:"vertical"})):c("",!0),t.adminId!=1?(n(),_(e(Y),{key:1,params:{id:t.id},requestApi:e(oe),onAfterDelete:e(m)},{default:l(()=>[...a[10]||(a[10]=[u("删除 ",-1)])]),_:1},8,["params","requestApi","onAfterDelete"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(y)>0?(n(),d("div",Ie,[s(e(Z),{page:e(r).page,"onUpdate:page":a[2]||(a[2]=t=>e(r).page=t),size:e(r).size,"onUpdate:size":a[3]||(a[3]=t=>e(r).size=t),total:e(y),onCallback:e(m)},null,8,["page","size","total","onCallback"])])):c("",!0)])])])])}}}),Ee=X(Ne,[["__scopeId","data-v-c2790083"]]);export{Ee as default};

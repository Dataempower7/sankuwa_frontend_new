/* empty css             */import{d as D,u as N,X as q,x as B,ab as E,r as y,o as F,P as b,f as d,g as _,h as m,z as l,m as a,i as o,Q as u,k as x,l as p,j as v,ah as G,_ as M}from"./index-B52YIGC0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-1fz1RqDZ.js";import"./index-KjhYqCTY.js";import{d as j}from"./format-BxqOrW-w.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as z}from"./SelectLink-BttPowUZ.js";/* empty css                                                                     */import{F as L}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BGZZHoO-.js";import{F as O}from"./FormAddGalleryVideo-0HIZtwZ5.js";import{g as P,u as J}from"./decorateDiscrete-9ZAAaA_1.js";import"./time-EzYK4E-P.js";import"./index-C9ZdVeVx.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./vuedraggable.umd-BauR0rTv.js";import"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import"./BusinessImg-B_fZOjqm.js";import"./currencyManagement-DNysi_dA.js";/* empty css                                                                    */const K="/admin/assets/autoReturnGoods-ySKEpP1g.png",Q={class:"container"},X={class:"content_wrapper"},H={key:2,class:"extra mt10"},Y={key:3,class:"extra mt10"},Z={class:"flex"},$={class:"selected-action"},h=D({__name:"SplashAd",setup(ee){const{themeInfo:w}=N();q(),B();const V=E(),f=y(!1),t=y({state:void 0,materialType:void 0,materialImg:"",materialVideo:"",maxWaitTime:void 0,redirectType:void 0,redirectUrl:""});F(async()=>{await S()});const T=y(!0),S=async()=>{try{const i=await P({decorateSn:"openAdvertising"});i!==null?Object.assign(t.value,j(i.data)):t.value={state:0}}catch(i){b.error(i.message)}finally{T.value=!1}},k=(i,e,s)=>{if(!e||JSON.stringify(e)=="{}"){s(new Error("请选择跳转链接"));return}else s()},U=async()=>{await V.value.validate();try{f.value=!0;const i=await J({decorateSn:"openAdvertising",data:t.value});b.success("提交成功")}catch(i){b.error(i.message)}finally{f.value=!1}};return(i,e)=>{const s=d("el-radio"),g=d("el-radio-group"),n=d("el-form-item"),I=d("el-popover"),R=d("TigInput"),W=d("el-form"),A=d("el-button"),C=d("a-spin");return m(),_("div",Q,[l(C,{spinning:T.value},{default:a(()=>[l(W,{ref_key:"formRef",ref:V,model:t.value,"label-width":"170px",style:{display:"flex",gap:"12px","flex-direction":"column"}},{default:a(()=>[o("div",X,[e[20]||(e[20]=o("div",{class:"title"},"开屏广告",-1)),l(n,{label:"开屏广告",prop:"state"},{default:a(()=>[o("div",null,[o("div",null,[l(g,{modelValue:t.value.state,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.state=r),class:"itemWidth"},{default:a(()=>[l(s,{value:1},{default:a(()=>[...e[7]||(e[7]=[u("开启",-1)])]),_:1}),l(s,{value:0},{default:a(()=>[...e[8]||(e[8]=[u("关闭",-1)])]),_:1})]),_:1},8,["modelValue"])]),e[9]||(e[9]=o("div",{class:"extra"},"该功能仅支持微信小程序，开启进入商城首页时，出现一段品牌图片/视频，等待播放后进入。",-1))])]),_:1}),l(n,{label:"添加素材",prop:"autoReturnGoods"},{default:a(()=>[o("div",null,[o("div",null,[l(g,{modelValue:t.value.materialType,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.materialType=r),class:"itemWidth",disabled:t.value.state==0},{default:a(()=>[l(s,{value:0},{default:a(()=>[...e[10]||(e[10]=[u("图片",-1)])]),_:1}),l(s,{value:1},{default:a(()=>[...e[11]||(e[11]=[u("视频",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),t.value.materialType==0?(m(),x(n,{key:0,label:"",prop:"materialImg",rules:[{required:!0,message:"请上传图片"}]},{default:a(()=>[l(v(L),{photo:t.value.materialImg,"onUpdate:photo":e[2]||(e[2]=r=>t.value.materialImg=r),disabled:t.value.state==0},null,8,["photo","disabled"])]),_:1})):p("",!0),t.value.materialType==1?(m(),x(n,{key:1,label:"",prop:"materialVideo",rules:[{required:!0,message:"请上传视频"}]},{default:a(()=>[l(v(O),{video:t.value.materialVideo,"onUpdate:video":e[3]||(e[3]=r=>t.value.materialVideo=r),disabled:t.value.state==0},null,8,["video","disabled"])]),_:1})):p("",!0),t.value.materialType==0?(m(),_("div",H,[e[14]||(e[14]=u(" 建议尺寸1080*1920，格式jpg/png/gif, 单张图片文件大小限制5M以内 ",-1)),l(I,{width:400,placement:"right-end",trigger:"click"},{reference:a(()=>[...e[12]||(e[12]=[o("a",null,"查看示例",-1)])]),default:a(()=>[...e[13]||(e[13]=[o("img",{src:K,style:{width:"380px"}},null,-1)])]),_:1})])):p("",!0),t.value.materialType==1?(m(),_("div",Y,"格式mp4, 单个视频文件大小限制5M以内")):p("",!0)])]),_:1}),l(n,{label:"最大等待时长",prop:"maxWaitTime",rules:[{required:!0,validator:(r,c)=>c&&c>0,message:"请输入大于0的整数"}]},{default:a(()=>[o("div",null,[o("div",Z,[e[15]||(e[15]=o("p",{class:"mr10"},"播放",-1)),l(R,{type:"integer",modelValue:t.value.maxWaitTime,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.maxWaitTime=r),width:"80px",disabled:t.value.state==0},null,8,["modelValue","disabled"]),e[16]||(e[16]=o("p",{class:"ml10"},"秒后自动进入商城首页",-1))]),e[17]||(e[17]=o("div",{class:"extra"},"自定义等待时长生效，需更新小程序至3.97.1版本以上",-1))])]),_:1},8,["rules"]),l(n,{label:"跳转",prop:"redirectType"},{default:a(()=>[o("div",null,[o("div",null,[l(g,{modelValue:t.value.redirectType,"onUpdate:modelValue":e[5]||(e[5]=r=>t.value.redirectType=r),class:"itemWidth",disabled:t.value.state==0},{default:a(()=>[l(s,{value:0},{default:a(()=>[...e[18]||(e[18]=[u("不跳转",-1)])]),_:1}),l(s,{value:1},{default:a(()=>[...e[19]||(e[19]=[u("整体跳转",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),t.value.redirectType==1?(m(),x(n,{key:0,label:"",prop:"redirectUrl",rules:[{required:!0,validator:k}]},{default:a(()=>[l(v(z),{modelValue:t.value.redirectUrl,"onUpdate:modelValue":e[6]||(e[6]=r=>t.value.redirectUrl=r),decorateType:"mobile",disabled:t.value.state==0},null,8,["modelValue","disabled"])]),_:1},8,["rules"])):p("",!0)])]),_:1})])]),_:1},8,["model"]),e[22]||(e[22]=o("div",{style:{height:"20px"}},null,-1)),o("div",{class:"selected-action-warp selected-warp-left",style:G({left:v(w).layout!=="topMenu"?"369px":"270px"})},[o("div",$,[l(A,{loading:f.value,class:"form-submit-btn",size:"large",type:"primary",onClick:U},{default:a(()=>[...e[21]||(e[21]=[u("提 交",-1)])]),_:1},8,["loading"])])],4)]),_:1},8,["spinning"])])}}}),ce=M(h,[["__scopeId","data-v-39f78b78"]]);export{ce as default};

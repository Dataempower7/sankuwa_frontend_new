import{d as L,r as u,b as O,ab as R,o as V,P as f,f as r,g as p,h as n,i as _,k as P,l as j,z as a,m as s,L as M,j as h,F as U,p as z,t as k,Q as A,O as E,_ as Q}from"./index-B52YIGC0.js";import{d as G,o as H}from"./order-BVunCi_y.js";/* empty css                                                                    */import{P as J}from"./ProductCard-8OYszTHR.js";import{p as K}from"./format-BxqOrW-w.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},Z={key:1},$=L({__name:"StockUp",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,params:{type:Object,default:()=>({}),required:!0}},emits:["submitCallback","update:confirmLoading","close"],setup(v,{expose:D,emit:S}){const l=S,o=v,c=u(!0),b=O().currentRoute.value.query,x=u(o.isDialog?o.act:String(b.act)),N=u(o.isDialog?o.id:Number(b.id)),C=R(),d=u({items:[],shippingMethod:1,shippingTypeId:1});V(()=>{T()});const T=async()=>{try{c.value=!0;const e=await G(x.value,{id:N.value});Object.assign(d.value,e)}catch(e){f.error(e.message),l("close")}finally{c.value=!1}},y=async()=>{try{let e={};l("update:confirmLoading",!0),console.log(o.params,"props.params"),e=await H(o.params),l("submitCallback",e),f.success("操作成功")}catch(e){f.error(e.message)}finally{l("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{y()}}),(e,g)=>{const m=r("el-table-column"),w=r("el-table"),B=r("el-button"),I=r("el-form-item"),q=r("el-form"),F=r("a-spin");return n(),p("div",W,[_("div",X,[_("div",Y,[c.value?j("",!0):(n(),P(q,{key:0,ref_key:"formRef",ref:C,model:d.value,"label-width":"auto"},{default:s(()=>[a(w,{data:d.value.items,style:{width:"100%"}},{default:s(()=>[a(m,{label:"商品名称",prop:"productId"},{default:s(({row:t})=>[a(h(J),{picThumb:t.picThumb,productId:t.productId,productName:t.productName,productType:t.productType,skuData:t.skuData,url:t.url},null,8,["picThumb","productId","productName","productType","skuData","url"])]),_:1}),a(m,{label:"附加规格",prop:"extraSkuData",width:200},{default:s(({row:t})=>[t.extraSkuData&&t.extraSkuData.length>0?(n(!0),p(U,{key:0},z(t.extraSkuData,i=>(n(),p("div",{class:"extraskudata",key:i},k(i.attrName+i.attrValue+h(K)(i.totalAttrPrice)),1))),128)):(n(),p("div",Z,"无附加规格"))]),_:1}),a(m,{label:"数量",prop:"quantity",width:100},{default:s(({row:t})=>[_("div",null,"x"+k(t.quantity),1)]),_:1})]),_:1},8,["data"]),M(a(I,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[a(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:s(()=>[...g[0]||(g[0]=[A("提交 ",-1)])]),_:1},512)]),_:1},512),[[E,!o.isDialog]])]),_:1},8,["model"])),a(F,{spinning:c.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}}),nt=Q($,[["__scopeId","data-v-91b3f534"]]);export{nt as default};

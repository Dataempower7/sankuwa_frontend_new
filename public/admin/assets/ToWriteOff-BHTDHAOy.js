import{d as L,r as s,b as V,ab as q,o as P,P as f,f as r,g as p,h as l,i as _,k as j,l as M,z as a,m as o,L as W,j as v,F as z,p as A,t as k,Q as E,O as Q,_ as G}from"./index-B52YIGC0.js";import{d as H,c as J}from"./order-BVunCi_y.js";/* empty css                                                                    */import{P as K}from"./ProductCard-8OYszTHR.js";import{p as U}from"./format-BxqOrW-w.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-form-table"},$={key:1},tt=L({__name:"ToWriteOff",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:D,emit:S}){const c=S,n=x;s();const i=s(!0),b=V().currentRoute.value.query,N=s(n.isDialog?n.act:String(b.act)),y=s(n.isDialog?n.id:Number(b.id)),T=q(),d=s({items:[],shippingMethod:1,shippingTypeId:1});P(()=>{C()});const C=async()=>{try{i.value=!0;const e=await H(N.value,{id:y.value});Object.assign(d.value,e)}catch(e){f.error(e.message),c("close")}finally{i.value=!1}},O=s(""),g=async()=>{try{c("update:confirmLoading",!0);const e=await J("confirmReceipt",{id:y.value});c("submitCallback",e),f.success("操作成功")}catch(e){f.error(e.message),O.value=""}finally{c("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{g()}}),(e,h)=>{const m=r("el-table-column"),w=r("el-table"),B=r("el-button"),I=r("el-form-item"),R=r("el-form"),F=r("a-spin");return l(),p("div",X,[_("div",Y,[_("div",Z,[i.value?M("",!0):(l(),j(R,{key:0,ref_key:"formRef",ref:T,model:d.value,"label-width":"auto"},{default:o(()=>[a(w,{data:d.value.items,style:{width:"100%"}},{default:o(()=>[a(m,{label:"商品名称",prop:"productId"},{default:o(({row:t})=>[a(v(K),{picThumb:t.picThumb,productId:t.productId,productName:t.productName,productType:t.productType,skuData:t.skuData,url:t.url},null,8,["picThumb","productId","productName","productType","skuData","url"])]),_:1}),a(m,{label:"附加规格",prop:"extraSkuData",width:200},{default:o(({row:t})=>[t.extraSkuData&&t.extraSkuData.length>0?(l(!0),p(z,{key:0},A(t.extraSkuData,u=>(l(),p("div",{class:"extraskudata",key:u},k(u.attrName+u.attrValue+v(U)(u.totalAttrPrice)),1))),128)):(l(),p("div",$,"无附加规格"))]),_:1}),a(m,{label:"数量",prop:"quantity",width:100},{default:o(({row:t})=>[_("div",null,"x"+k(t.quantity),1)]),_:1})]),_:1},8,["data"]),W(a(I,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:o(()=>[...h[0]||(h[0]=[E("提交 ",-1)])]),_:1},512)]),_:1},512),[[Q,!n.isDialog]])]),_:1},8,["model"])),a(F,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}}),lt=G(tt,[["__scopeId","data-v-8530adbc"]]);export{lt as default};

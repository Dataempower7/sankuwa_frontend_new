/* empty css             */import{d as F,x as I,ah as L,f as c,F as f,h as o,z as t,e as d,l as s,m as N,j as v,G as T,k as g,cD as B,i as e,t as k,L as O,g as i,_ as P}from"./index-BLXOA87U.js";/* empty css                                                                    */import{P as V}from"./Pagination-w0YHSLYy.js";import{p as R}from"./format-DdZABYp4.js";import"./index-DpgvsnVO.js";import{b as U}from"./order-na2xscMr.js";import{u as j}from"./useListRequest-qe4Wn36b.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-6GHo9HCV.js";import"./index-B16C4gX_.js";const A={class:"lyecs-table-list-warp"},E={class:"table-container"},G={class:"empty-warp"},K={key:0,class:"empty-bg"},$={key:0,class:"pagination-con"},H=F({__name:"TransactionRecord",setup(J){const w=I(),u=L([{value:-1,label:"全部"},{value:0,label:"待支付"},{value:1,label:"待发货"},{value:2,label:"已发货"},{value:3,label:"已取消"},{value:4,label:"无效"},{value:5,label:"已完成"},{value:-2,label:"已删除"},{value:99,label:"待结算"}]),{listData:S,loading:m,total:_,filterParams:r,loadData:p}=j({apiFunction:U,idKey:"articleId",defaultParams:{page:1,size:w.get("pageSize"),sortField:"",sortOrder:"",orderStatus:-1,isSettlement:0}});p();const h=b=>{u[b].value!=99?r.orderStatus=u[b].value:(r.orderStatus=-1,r.isSettlement=0),p()};return(b,l)=>{const y=d("el-tab-pane"),C=d("el-tabs"),n=d("el-table-column"),z=d("el-button"),x=d("el-table"),D=B("loading");return i(),c(f,null,[l[3]||(l[3]=o("div",{class:"tit-box"},[o("div",{class:"tit"},[o("span",null,"最近交易记录")])],-1)),o("div",A,[t(C,{type:"card",onTabChange:h},{default:s(()=>[(i(!0),c(f,null,N(u,a=>(i(),v(y,{label:a.label},null,8,["label"]))),256))]),_:1}),o("div",E,[T((i(),v(x,{data:e(S),loading:e(m),total:e(_),"row-key":"logId"},{empty:s(()=>[o("div",G,[e(m)?g("",!0):(i(),c("div",K,"暂无数据"))])]),default:s(()=>[t(n,{label:"时间",prop:"addTime",width:"160"}),t(n,{label:"购买用户",width:"160"},{default:s(({row:a})=>[o("span",null,k(a.user.username),1)]),_:1}),t(n,{label:"订单编号",prop:"orderSn",width:"160"}),t(n,{label:"金额(元)|明细"},{default:s(({row:a})=>[o("span",null,"总金额: "+k(e(R)(a.totalAmount)||0),1)]),_:1}),t(n,{label:"状态",prop:"orderStatusName",width:"120"}),t(n,{label:"操作",width:"80"},{default:s(({row:a})=>[t(e(q),{params:{act:"detail",id:a.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+a.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:e(p)},{default:s(()=>[t(z,{size:"small",link:"",type:"primary"},{default:s(()=>l[2]||(l[2]=[O(" 查看详情 ",-1)])),_:1,__:[2]})]),_:2},1032,["params","title","onCallback"])]),_:1})]),_:1},8,["data","loading","total"])),[[D,e(m)]]),e(_)>0?(i(),c("div",$,[t(e(V),{page:e(r).page,"onUpdate:page":l[0]||(l[0]=a=>e(r).page=a),size:e(r).size,"onUpdate:size":l[1]||(l[1]=a=>e(r).size=a),total:e(_),onCallback:e(p)},null,8,["page","size","total","onCallback"])])):g("",!0)])])],64)}}}),oe=P(H,[["__scopeId","data-v-3207a9bf"]]);export{oe as default};

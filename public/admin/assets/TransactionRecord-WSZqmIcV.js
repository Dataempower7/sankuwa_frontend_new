/* empty css             */import{d as F,x as I,as as L,f as d,a7 as N,g as m,h as i,i as s,z as l,m as r,F as f,p as T,k as g,L as B,l as v,j as e,t as S,Q as O,_ as P}from"./index-B52YIGC0.js";/* empty css                                                                    */import{P as V}from"./Pagination-C8J7-6Em.js";import{p as R}from"./format-BxqOrW-w.js";import"./index-KjhYqCTY.js";import{b as U}from"./order-BVunCi_y.js";import{u as j}from"./useListRequest-CprjeVXp.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";import"./index-C9ZdVeVx.js";const A={class:"lyecs-table-list-warp"},E={class:"table-container"},K={class:"empty-warp"},Q={key:0,class:"empty-bg"},$={key:0,class:"pagination-con"},G=F({__name:"TransactionRecord",setup(H){const y=I(),p=L([{value:"-1",label:"全部"},{value:"0,1,2",label:"进行中"},{value:"99",label:"待结算"},{value:"88",label:"退款"},{value:"5",label:"交易成功"},{value:"3,4,-2",label:"交易关闭"}]),{listData:k,loading:_,total:b,filterParams:a,loadData:u}=j({apiFunction:U,idKey:"orderId",defaultParams:{page:1,size:y.get("pageSize"),sortField:"",sortOrder:"",orderStatus:-1,isSettlement:0,payStatus:""}});u();const w=c=>{a.payStatus="",p[c].value=="99"?(a.isSettlement=0,a.orderStatus=-1):p[c].value=="88"?(a.isSettlement=0,a.orderStatus=-1,a.payStatus=3):a.orderStatus=p[c].value,u()};return(c,o)=>{const h=d("el-tab-pane"),C=d("el-tabs"),n=d("el-table-column"),z=d("el-button"),x=d("el-table"),D=N("loading");return i(),m(f,null,[o[3]||(o[3]=s("div",{class:"tit-box"},[s("div",{class:"tit"},[s("span",null,"最近交易记录")])],-1)),s("div",A,[l(C,{type:"card",onTabChange:w},{default:r(()=>[(i(!0),m(f,null,T(p,t=>(i(),g(h,{label:t.label},null,8,["label"]))),256))]),_:1}),s("div",E,[B((i(),g(x,{data:e(k),loading:e(_),total:e(b),"row-key":"logId"},{empty:r(()=>[s("div",K,[e(_)?v("",!0):(i(),m("div",Q,"暂无数据"))])]),default:r(()=>[l(n,{label:"时间",prop:"addTime",width:"200"}),l(n,{label:"购买用户",width:"160"},{default:r(({row:t})=>[s("span",null,S(t.user.username),1)]),_:1}),l(n,{label:"订单编号",prop:"orderSn",width:"180"}),l(n,{label:"金额(元)|明细"},{default:r(({row:t})=>[s("span",null,"总金额: "+S(e(R)(t.totalAmount)||0),1)]),_:1}),l(n,{label:"状态",prop:"orderStatusName",width:"150"}),l(n,{label:"操作",width:"80"},{default:r(({row:t})=>[l(e(q),{params:{act:"detail",id:t.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:e(u)},{default:r(()=>[l(z,{size:"small",link:"",type:"primary"},{default:r(()=>[...o[2]||(o[2]=[O(" 查看详情 ",-1)])]),_:1})]),_:1},8,["params","title","onCallback"])]),_:1})]),_:1},8,["data","loading","total"])),[[D,e(_)]]),e(b)>0?(i(),m("div",$,[l(e(V),{page:e(a).page,"onUpdate:page":o[0]||(o[0]=t=>e(a).page=t),size:e(a).size,"onUpdate:size":o[1]||(o[1]=t=>e(a).size=t),total:e(b),onCallback:e(u)},null,8,["page","size","total","onCallback"])])):v("",!0)])])],64)}}}),oe=P(G,[["__scopeId","data-v-e385b57c"]]);export{oe as default};

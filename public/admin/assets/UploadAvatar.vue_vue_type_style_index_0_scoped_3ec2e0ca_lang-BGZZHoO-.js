import{d as j,aq as B,r as x,a5 as S,ar as $,f as A,g as p,h as t,l as n,i as a,j as e,n as M,k as u,bq as F,m as d,ae as U,z as y,aY as z,dw as D,L as E,O as G,P as q,_ as P}from"./index-B52YIGC0.js";import"./index-KjhYqCTY.js";import{d as R}from"./vuedraggable.umd-BauR0rTv.js";import{_ as h}from"./Image.vue_vue_type_script_setup_true_lang-B8qXJKJq.js";import{i as v}from"./format-BxqOrW-w.js";import{B as w}from"./BusinessImg-B_fZOjqm.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CT6mpwCc.js";const L={class:"gallery-pic"},Y={class:"item-img add-photo-btn"},H={key:0,class:"item-action"},J={key:1,class:"gallery-list-warp"},K={class:"item","data-id":"img.imgId"},Q={class:"img flex flex-justify-center"},W={class:"lyecs-dialogImage"},X={key:1,class:"lyecs-dialogImage"},Z=["onClick"],ee={key:0},ae={class:"item gallery-add-item add-gallery-photo-btn",draggable:"false"},te=j({__name:"FormAddGallery",props:B({photo:{type:String,default:""},photos:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:Number,default:1},pageType:{type:String,default:""},dataType:{type:Number,default:0},maxCount:{type:Number}},{photos:{type:Array,default:[]},photosModifiers:{}}),emits:B(["update:photo","update:photos"],["update:photos"]),setup(i,{emit:N}){x(null);const c=i,{photo:s,isMultiple:b,disabled:f}=S(c),g=$(i,"photos"),_=N,m=r=>{var l;if(c.maxCount&&((l=g.value)==null?void 0:l.length)+r.length>c.maxCount){q.error(`图片数量不能超过${c.maxCount}张`);return}if(b.value){let T=g.value||[];_("update:photos",T.concat(r))}else _("update:photo",r[0].picUrl)},V=r=>{g.value.splice(r,1)},C=()=>{_("update:photo","")};return x(!1),x(""),(r,l)=>{const T=A("el-icon");return t(),p("div",L,[!e(b)&&i.type==1?(t(),p("div",{key:0,class:M("gallery-pic-select "+(e(s)?"have_image":""))},[a("div",Y,[i.pageType=="overseas"&&e(s)?(t(),u(w,{key:0,modelValue:e(s),"onUpdate:modelValue":l[0]||(l[0]=o=>F(s)?s.value=o:null),picThumb:e(s),dataType:i.dataType,onEdit:m,onDelete:C},{default:d(()=>[e(s)?(t(),u(e(h),{key:0,class:"gallery-img",src:e(v)(e(s))},null,8,["src"])):n("",!0)]),_:1},8,["modelValue","picThumb","dataType"])):n("",!0),i.pageType!=="overseas"&&e(s)?(t(),u(e(h),{key:1,class:"gallery-img",src:e(v)(e(s))},null,8,["src"])):n("",!0),e(s)?n("",!0):(t(),u(e(k),{key:2,type:"gallery",class:"item-bg",onOkCallback:m,params:{isMultiple:c.isMultiple}},{default:d(()=>[...l[3]||(l[3]=[a("div",{class:"flex",style:{"flex-direction":"column",height:"80px",width:"80px","align-items":"center","justify-content":"center","line-height":"22px"}},[a("i",{class:"iconfont icon-tianjiatupian"}),a("span",null,"添加图片")],-1)])]),_:1},8,["params"])),e(s)&&!e(f)?(t(),p("p",{key:3,class:M(["remove-btn",{left:e(U)()}])},[a("i",{onClick:C,class:"iconfont icon-cha"})],2)):n("",!0)]),e(s)&&i.type==1&&!e(f)?(t(),p("div",H,[y(e(k),{type:"gallery",class:"item item-edit",onOkCallback:m,params:{isMultiple:c.isMultiple}},{default:d(()=>[...l[4]||(l[4]=[a("span",{class:"iconfont icon-bianji1"},null,-1)])]),_:1},8,["params"]),a("span",{onClick:C,class:"item item-remove iconfont icon-shanchu"})])):n("",!0)],2)):n("",!0),a("div",null,[i.type==2?(t(),u(e(k),{key:0,type:"gallery",onOkCallback:m,params:{isMultiple:c.isMultiple}},{default:d(()=>[a("div",null,[z(r.$slots,"default",{},void 0,!0)])]),_:3},8,["params"])):n("",!0)]),e(b)?(t(),p("div",J,[a("div",null,[y(e(R),{class:"gallery-list-ul","item-key":"picId",list:g.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:l[1]||(l[1]=()=>{}),onEnd:l[2]||(l[2]=()=>{})},{item:d(({element:o,index:O})=>[a("div",K,[a("div",Q,[i.pageType=="product"?(t(),u(w,{key:0,modelValue:o.picUrl,"onUpdate:modelValue":I=>o.picUrl=I,picThumb:o.picThumb,dataId:o.picId,dataType:7,onEdit:m,onDelete:V},{default:d(()=>[a("a",W,[y(e(h),{class:"gallery-img",big:o.picUrl,src:e(v)(o.picThumb)},null,8,["big","src"])])]),_:2},1032,["modelValue","onUpdate:modelValue","picThumb","dataId"])):(t(),p("a",X,[y(e(h),{class:"gallery-img",big:o.picUrl,src:e(v)(o.picThumb)},null,8,["big","src"])])),E(a("i",{onClick:I=>V(O),class:M(["btn-del iconfont icon-cha",{overseas:e(U)()}])},null,10,Z),[[G,!e(f)]])])])]),footer:d(()=>[e(f)?(t(),p("div",ee)):(t(),u(e(k),{key:1,type:"gallery",class:"",onOkCallback:m,params:{isMultiple:c.isMultiple}},{default:d(()=>[a("div",ae,[y(T,{size:"25"},{default:d(()=>[y(e(D))]),_:1})])]),_:1},8,["params"]))]),_:1},8,["list"])])])):n("",!0)])}}}),re=P(te,[["__scopeId","data-v-1df3498c"]]);export{re as F};

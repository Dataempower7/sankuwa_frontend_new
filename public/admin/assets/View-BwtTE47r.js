import{g as S,a as v}from"./time-EzYK4E-P.js";import{i as b}from"./format-BxqOrW-w.js";import{m as w,f as C,d as P,a as _,o as k}from"./index-DLTpLwVu.js";import{a as x}from"./product-hE35r0Q_.js";import N from"./View-CcLxZXJW.js";import{d as $,ar as D,r as y,w as I,c as z,g as d,h as r,i as o,ah as l,t as c,z as L,j as g,F as B,p as F,l as n,_ as G}from"./index-B52YIGC0.js";/* empty css                                                             *//* empty css                                                             */import"./lodash-DLXBIuYo.js";const W={class:"main"},j={class:"mk-top"},M={class:"countdown"},R={class:"item-box"},V={class:"item"},E={key:0,class:"goods-info"},K={key:1,class:"price-box",style:"color: rgb(255, 255, 255); font-weight: 700; font-family: inherit"},O={class:"price"},J=$({__name:"View",props:{module:{},moduleModifiers:{}},emits:["update:module"],setup(f){const e=D(f,"module"),h=y({productSource:"products",productGroups:[],productList:[{productId:0,productSn:"",productName:"零食",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/17316338156QyBKObq7Wuw7KCqKa.jpg"},{productId:0,productSn:"",productName:"饼干",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/1731633815i7FmGX6OEWOBsQ3DUh.jpg"},{productId:0,productSn:"",productName:"茶叶",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/1731633815zoFfIRIsE4yJ0a5LJn.jpg"},{productId:0,productSn:"",productName:"干货",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/1731633815UdOFkntVJP4GXu9KsW.jpg"}]||[],moduleColorStyle:"orange",prodcutTitles:[],moduleTitle:{title:"天天特价",subTitle:"每日精选",countdownTitle:"距结束",countdownType:"dailyCycle",dailyTime:[v(new Date,8),v(new Date,20)],specifyTime:S(3)},picScale:"1:1",picFillType:"cover",productWidth:25,productRadius:6,showProductName:1,productNameSize:14,productNameWeight:400,showProductPrice:1,priceWeight:400,showSellingPoints:1,moduleColor:{titleColor:"#ffffff",subTitleColor:"#ffffff",countdownColor:"#ffffff",countdownTitleColor:"#72B76C",productNameColor:"#555555",sellingPointsColor:"#FB6D08"},moduleStyle:_,contentStyle:P});w(e.value,h.value);const m=y([]),p=async a=>{try{const s=await x(a);m.value=[...k(e.value.productList),...s.records]}catch(s){console.error(s)}};I(()=>{if(e.value.productSource){const a={};if(e.value.productSource==="products")a.ids=e.value.productList.map(s=>s.productId).join(","),p(a);else if(e.value.productGroups[0]){const{productGroupId:s,productNum:i,productNumType:u}=e.value.productGroups[0];a.productGroupId=s,a.size=u==="number"?i:100,p(a)}else m.value=[]}});const t=z(()=>C(e.value.moduleStyle??{},e.value.contentStyle??{},e.value.subTitle??{})),T={"3:2":"calc(100% / 3 * 2)","1:1":"calc(100% / 1 * 1)","3:4":"calc(100% / 3 * 4)","16:9":"calc(100% / 16 * 9)"};return(a,s)=>(r(),d("div",{class:"module-ad-con",style:l(t.value.moduleStyle.boxPaddingBottom+t.value.moduleStyle.boxPaddingTop+t.value.moduleStyle.boxPaddingBottom+t.value.moduleStyle.boxPadding+t.value.moduleStyle.backgroundSize+t.value.moduleStyle.backgroundImage)},[o("div",{class:"module-ad-content main",style:l(t.value.moduleContentStyle.backgroundImage+t.value.moduleContentStyle.backgroundSize+t.value.moduleContentStyle.boxRadius+t.value.moduleContentStyle.boxShadow+t.value.moduleContentStyle.innerPadding+`border-radius: ${e.value.contentStyle.boxRadius}px`)},[o("div",W,[o("div",j,[o("div",null,[o("span",{class:"mk-title",style:l(`color: ${e.value.moduleColor.titleColor}`)},c(e.value.moduleTitle.title),5),o("span",{class:"mk-small-title",style:l(`color: ${e.value.moduleColor.subTitleColor}`)},c(e.value.moduleTitle.subTitle),5)]),o("div",{class:"mk-countdown",style:l(`--color: ${e.value.moduleColor.countdownColor}`)},[o("span",{class:"text",style:l(`color: ${e.value.moduleColor.countdownTitleColor}`)},c(new Date().getTime()>Number(e.value.moduleTitle.dailyTime[0])?e.value.moduleTitle.countdownTitle:"距开始"),5),o("div",M,[L(g(N),{countdownType:e.value.moduleTitle.countdownType,"value-style":{color:e.value.moduleColor.countdownColor,"font-size":"12px",display:"block",height:"20px","line-height":"20px"},format:"HH:mm:ss",dailyTime:e.value.moduleTitle.dailyTime,specifyTime:e.value.moduleTitle.specifyTime},null,8,["countdownType","value-style","dailyTime","specifyTime"])])],4)]),o("div",{class:"lists",style:l(`border-radius: ${e.value.contentStyle.boxRadius}px`)},[o("div",R,[(r(!0),d(B,null,F(m.value,(i,u)=>(r(),d("div",{key:u,style:l(`width: ${e.value.productWidth}%; flex-wrap: nowrap; flex-shrink: 0`)},[o("div",V,[o("div",{class:"img",style:l(`width: 100%;
                                    padding-top: ${T[e.value.picScale]};
                                    background-size: ${e.value.picFillType};
                                    border-radius: ${e.value.productRadius}px;
                                    background-image: url(${g(b)(i.picThumb)});`)},null,4),e.value.prodcutTitles.length>0?(r(),d("div",E,[e.value.showProductName?(r(),d("div",{key:0,class:"tit",style:l(`padding-bottom: 0px; font-size: ${e.value.productNameSize}px; font-weight: ${e.value.productNameWeight}; color:${e.value.moduleColor.productNameColor}`)},c(e.value.prodcutTitles[u]&&e.value.prodcutTitles[u][`title${u+1}`]),5)):n("",!0),e.value.showProductPrice?(r(),d("div",K,[o("div",O,"￥"+c(i.productPrice),1)])):n("",!0),e.value.showSellingPoints?(r(),d("div",{key:2,class:"desc",style:l(`color: ${e.value.moduleColor.sellingPointsColor}`)},c(e.value.prodcutTitles[u]&&e.value.prodcutTitles[u][`sellingPoints${u+1}`]),5)):n("",!0)])):n("",!0)])],4))),128))])],4)])],4)],4))}}),te=G(J,[["__scopeId","data-v-3db5f3a8"]]);export{te as default};

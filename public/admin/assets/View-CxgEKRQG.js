import{d as M,r as p,c as g,S as k,e as b,f as A,g as V,G as E,aO as I,k as $,J as B,z as F,_ as N}from"./index-BLXOA87U.js";/* empty css                                                             */const R={class:"countdown-box"},z=M({__name:"View",props:{countdownType:{default:"dailyCycle"},valueStyle:{default:()=>({})},dailyTime:{default:()=>[]},specifyTime:{default:0},format:{default:"HH:mm:ss"}},emits:["change","finish"],setup(h,{expose:S,emit:D}){const t=h,u=D,c=p(null),v=g(()=>{if(t.countdownType==="specifyTime")return t.specifyTime;if(t.countdownType==="dailyCycle"){const e=H(),n=Date.now();return Array.isArray(t.dailyTime)&&n<e.dailyStartTime?e.dailyStartTime:e.dailyEndTime}return 0}),H=()=>{const e=new Date,n=new Date(e);n.setDate(e.getDate()+1);let s=0,o=0;if(typeof t.dailyTime=="number"){const a=new Date(t.dailyTime).getHours(),i=new Date(t.dailyTime).getMinutes(),r=new Date(t.dailyTime).getSeconds();o=new Date(e.setHours(a,i,r,0)).getTime(),o<=Date.now()&&(o=new Date(n.setHours(a,i,r,0)).getTime())}else if(Array.isArray(t.dailyTime)&&t.dailyTime.length>=2){const a=new Date(t.dailyTime[0]),i=new Date(t.dailyTime[1]),r=a.getHours(),m=a.getMinutes(),f=a.getSeconds(),y=i.getHours(),w=i.getMinutes(),T=i.getSeconds();s=new Date(e.setHours(r,m,f,0)).getTime(),o=new Date(e.setHours(y,w,T,0)).getTime(),s<=Date.now()&&(s=new Date(n.setHours(r,m,f,0)).getTime()),o<=Date.now()&&(o=new Date(n.setHours(y,w,T,0)).getTime())}return{dailyStartTime:s,dailyEndTime:o}},l=p(0),d=g(()=>{const e=Math.floor(l.value/1e3),n=Math.floor(e/(24*60*60)),s=Math.floor(e%(24*60*60)/(60*60)),o=Math.floor(e%(60*60)/60),a=e%60;return{days:n.toString().padStart(2,"0"),hours:s.toString().padStart(2,"0"),minutes:o.toString().padStart(2,"0"),seconds:a.toString().padStart(2,"0")}}),_=e=>{l.value=e,u("change",e)},C=()=>{u("finish")};return k(()=>[t.countdownType,t.dailyTime,t.specifyTime],()=>{},{deep:!0}),S({countdownRef:c}),(e,n)=>{const s=b("el-countdown");return V(),A("div",R,[E(F(s,{ref_key:"countdownRef",ref:c,onChange:_,onFinish:C,"value-style":e.valueStyle,format:e.format,value:v.value},null,8,["value-style","format","value"]),[[B,!e.$slots.default]]),e.$slots.default?I(e.$slots,"default",{key:0,days:d.value.days,hours:d.value.hours,minutes:d.value.minutes,seconds:d.value.seconds},void 0,!0):$("",!0)])}}}),O=N(z,[["__scopeId","data-v-b19b9a05"]]);export{O as default};

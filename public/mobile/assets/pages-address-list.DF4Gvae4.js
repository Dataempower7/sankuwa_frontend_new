import{d as a,L as e,Y as s,n as t,am as l,Q as d,S as o,an as n,r as i,p as r,ao as u,c,w as g,C as m,F as p,ap as f,aq as _,b as h,e as v,a as y,i as b,J as k,K as x,P as j,G as V,h as C,t as w,ar as I,a2 as D,k as L,ag as $,R,X as T,ac as U,as as z,ad as G,_ as K}from"./index-BZxHr1FI.js";import{_ as S,a as X}from"./uni-swipe-action.B_W9HPBU.js";import{_ as Y}from"./empty-box.vue_vue_type_script_setup_true_lang.DDT9sx90.js";import{_ as q}from"./loading-box.D3Y7A2lC.js";import{T as F,a as J}from"./tig-layout.DTz8E-sj.js";import{T as M}from"./tig-fixed-placeholder.BDsbIjoZ.js";import{_ as N}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.CErZUb08.js";import{g as O,d as P,s as Q}from"./address.CA-6xUbG.js";import{u as A}from"./useList.cF42RyDa.js";import"./product.BH5dMQls.js";const B=K(a({__name:"list",setup(a){const{t:K}=e(),B=s({page:1,size:10}),{getList:E,data:H,isLoadMore:W,isLoading:Z}=A(O,{params:B,path:{dataKey:"records"},immediate:!0,manageData:a=>{var e;sa.value=null==(e=a.find(a=>1===a.isSelected))?void 0:e.addressId}});t(()=>{const a=l();"pages/order/check"===(a.length>1?a[a.length-2].route:"")?d("link",!0):o("link"),n("refreshData",()=>{B.page=1,H.value=[],E()})});const aa=async a=>{try{await P({id:a}),R({title:K("删除成功"),icon:"none"}),B.page=1,H.value=[],E()}catch(e){console.error(e)}},ea=()=>{T({url:"/pages/address/editRegion"})},sa=i(),ta=a=>{la()},la=async()=>{U({title:K("切换中")});const a=l();try{if(await Q({id:sa.value}),B.page=1,H.value=[],a.length>1){if("pages/order/check"===a[a.length-2].route)return z()}E()}catch(e){console.error(e),R({title:e.message,icon:"none"})}finally{G()}};return r(()=>{u("refreshData")}),(a,e)=>{const s=m(p("up-radio"),f),t=b,l=m(p("uni-swipe-action-item"),S),d=m(p("uni-swipe-action"),X),o=m(p("up-radio-group"),_),n=m(p("empty-box"),Y),i=m(p("loading-box"),q),r=L,u=m(p("tig-button"),J),R=m(p("tig-fixed-placeholder"),M),U=m(p("tig-loadingpage"),N),z=m(p("tig-layout"),F);return h(),c(z,{title:"收货地址"},{default:g(()=>[v(t,{class:"address-list"},{default:g(()=>[v(o,{modelValue:sa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>sa.value=a),placement:"column",onChange:ta},{default:g(()=>[v(d,null,{default:g(()=>[(h(!0),k(x,null,j(V(H),e=>(h(),c(t,{key:e.addressId,class:"address-item"},{default:g(()=>[v(l,{threshold:0},{right:g(()=>[v(t,{class:"address-del",onClick:a=>{return s=e.addressId,console.log("handleDel",s),void $({title:K("提示"),content:K("确定删除吗？"),success:async a=>{a.confirm&&aa(s)}});var s}},{default:g(()=>[C(w(a.$t("删除")),1)]),_:2},1032,["onClick"])]),default:g(()=>[v(t,{class:"address-item-content"},{default:g(()=>[v(t,{class:"address-item-left flex-center"},{default:g(()=>[v(s,{"active-color":"var(--general)",name:e.addressId},null,8,["name"])]),_:2},1024),v(t,{class:"address-item-middle"},{default:g(()=>[v(t,{class:"user-info"},{default:g(()=>[v(t,{class:"name"},{default:g(()=>[C(w(e.consignee),1)]),_:2},1024),v(t,{class:"phone"},{default:g(()=>[C(w(V(I)(e.mobile))+" ",1),1===e.isDefault?(h(),c(t,{key:0,class:"tag"},{default:g(()=>[C(w(a.$t("默认")),1)]),_:1})):y("",!0)]),_:2},1024)]),_:2},1024),v(t,{class:"address line1"},{default:g(()=>[C(w(e.regionName)+" "+w(e.address),1)]),_:2},1024)]),_:2},1024),v(t,{class:"address-item-right flex-center",onClick:a=>{return s=e.addressId,void T({url:"/pages/address/editRegion?id="+s});var s}},{default:g(()=>[v(t,{class:"iconfont icon-bianji"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),V(W)||V(Z)||0!==V(H).length?y("",!0):(h(),c(n,{key:0,background:"transparent",mode:"list",text:"暂无地址！"})),v(i,{modelValue:V(W),"onUpdate:modelValue":e[1]||(e[1]=a=>D(W)?W.value=a:null),page:B.page,length:V(H).length},null,8,["modelValue","page","length"]),v(R,{"background-color":"#fff"},{default:g(()=>[v(t,{class:"btn-box"},{default:g(()=>[v(u,{class:"btn",onClick:ea},{default:g(()=>[v(r,{class:"iconfont icon-dizhi"}),C(" "+w(a.$t("添加新地址")),1)]),_:1})]),_:1})]),_:1}),v(U,{modelValue:V(Z),"onUpdate:modelValue":e[2]||(e[2]=a=>D(Z)?Z.value=a:null)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-d901b49a"]]);export{B as default};

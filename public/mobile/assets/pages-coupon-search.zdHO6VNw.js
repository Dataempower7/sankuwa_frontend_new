import{d as a,r as s,l as e,L as l,c,w as t,i as u,B as o,bk as n,E as r,o as h,g as i,a as d,f as p,t as v,N as _,h as f,I as m,J as y,O as k,P as x,ar as S,at as b,R as g,_ as C}from"./index-DDAlCzEE.js";const H=C(a({__name:"search",setup(a){const C=s(""),H=()=>{C.value?(w.value.unshift(C.value),w.value=[...new Set(w.value)],w.value.length>10&&w.value.splice(10,w.value.length-10),x("couponSearchHistory",w.value),S({success:()=>{b("coupon-search-return",C.value)}})):S({success:()=>{b("coupon-search-return","")}})},w=s([]);e(a=>{l("couponSearchHistory")&&(w.value=l("couponSearchHistory"))});const V=()=>{w.value=[],g("couponSearchHistory")};return(a,s)=>{const e=o(r("up-search"),n),l=f,x=u;return h(),c(x,{class:"coupon-search"},{default:t(()=>[i(e,{modelValue:C.value,"onUpdate:modelValue":s[0]||(s[0]=a=>C.value=a),shape:"square","action-text":a.$t("取消"),onSearch:H,onCustom:H},null,8,["modelValue","action-text"]),w.value.length?(h(),c(x,{key:0,class:"search_init_box"},{default:t(()=>[i(x,{class:"search_history_box"},{default:t(()=>[i(x,{class:"title"},{default:t(()=>[p(v(a.$t("搜索历史"))+" ",1),i(x,{class:"clear_history",onClick:_(V,["stop"])},{default:t(()=>[i(l,{class:"iconfont-h5 icon-shanchu"})]),_:1})]),_:1}),i(x,{class:"list acea-row"},{default:t(()=>[(h(!0),m(y,null,k(w.value,(a,s)=>(h(),c(x,{key:s,class:"item",onClick:s=>(a=>{S({success:()=>{b("coupon-search-return",a)}})})(a)},{default:t(()=>[p(v(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})):d("",!0)]),_:1})}}}),[["__scopeId","data-v-a9bb9de0"]]);export{H as default};

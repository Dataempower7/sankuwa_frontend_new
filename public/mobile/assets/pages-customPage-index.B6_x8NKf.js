import{d as a,l as e,r as s,n as t,q as l,s as o,v as i,x as r,z as u,A as n,c,w as m,B as p,C as d,F as v,E as y,b as _,e as f,i as g,f as j,G as x,H as h,J as b,a as w,K as T,_ as k}from"./index-BZxHr1FI.js";import{_ as I}from"./tig-back-top.vue_vue_type_script_setup_true_lang.YtcOxsPs.js";import{u as L,T as z}from"./tig-layout.DTz8E-sj.js";import{g as F,a as G}from"./home.CvZhmv3n.js";import{u as C,m as H}from"./index.DW-rifyO.js";import{m as J}from"./masonry.B_l69Lra.js";import"./tig-image.CzXKqALH.js";import"./index.D3BfwkNA.js";import"./format-price.BrXrBVy6.js";import"./currency.Dn5A4d7X.js";import"./tig-fixed-placeholder.BDsbIjoZ.js";import"./tig-countdown.vue_vue_type_script_setup_true_lang.GPPLpHfs.js";import"./specification.C71VpZ8P.js";import"./uni-icons.DMMn2oBg.js";import"./uni-number-box.DKxM8QIH.js";import"./product.BH5dMQls.js";import"./tig-lazy-image.BPOhG_XX.js";import"./activityCard.DE1HAQr9.js";import"./dayjs.min.BETqfnlQ.js";const K=k(a({__name:"index",setup(a){const{scrollTop:k}=L(),K=e(),q=s(0),A=s(!1),B=s([]),E=s(0),M=s(1),N=s(!1),O=s(!0),P=s([]),Q=a=>{E.value=a,0!==E.value&&(M.value=1,N.value=!1,P.value=[],R())},R=async()=>{O.value=!0;try{const a=await F({categoryId:E.value,page:M.value});a.records&&a.records.length>0?(P.value=[...P.value,...a.records],N.value=!1):N.value=!0}catch(a){console.error(a)}finally{O.value=!1}},S=async a=>{A.value=!0;try{const e=await G(a);B.value=e.moduleList,q.value=1,p()}catch(e){console.error(e)}finally{A.value=!1}};t(a=>{a&&a.id&&S(a.id),U.reset()});const U=C();return l(()=>{E.value=0,U.reset(),S()}),o(()=>{E.value>0&&!A.value&&!N.value&&(M.value++,R())}),i(()=>{k.value>0&&setTimeout(()=>{r({scrollTop:k.value,duration:0})},50)}),u(a=>({title:K.baseInfo.shopTitle})),n(()=>({title:K.baseInfo.shopTitle})),(a,e)=>{const s=j,t=g,l=d(v("up-empty"),y),o=d(v("tig-back-top"),I),i=d(v("tig-layout"),z);return _(),c(i,null,{default:m(()=>[f(t,null,{default:m(()=>[A.value?(_(),c(t,{key:0,class:"index_empty"},{default:m(()=>[f(s,{"lazy-load":"",src:x(h)("common/index_empty.png"),mode:"widthFix"},null,8,["src"])]),_:1})):(_(),c(t,{key:1,class:"index"},{default:m(()=>[f(t,{class:"decorate-page-window"},{default:m(()=>[f(H,{modules:B.value,"scroll-top":x(k),onLoadGoodsList:Q},null,8,["modules","scroll-top"]),E.value>0&&P.value.length>0?(_(),b(T,{key:0},[f(J,{"commodity-list":P.value},null,8,["commodity-list"]),O.value||0!==P.value.length?w("",!0):(_(),c(t,{key:0,class:"empty-box"},{default:m(()=>[f(l,{icon:x(h)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))],64)):w("",!0)]),_:1})]),_:1})),f(o,{"scroll-top":x(k)},null,8,["scroll-top"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-e63d53e8"]]);export{K as default};

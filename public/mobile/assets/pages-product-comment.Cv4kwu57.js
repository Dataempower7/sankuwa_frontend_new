import{d as a,K as l,r as e,l as s,q as t,m as u,be as n,c as o,w as c,aa as i,Q as r,ab as d,B as f,E as m,o as v,g as _,a as g,i as p,I as y,J as b,O as k,b as x,F as h,ac as j,h as w,f as z,t as T,G as C,b4 as F,_ as I}from"./index-DDAlCzEE.js";import{_ as J}from"./uni-rate.BQoRzpW4.js";import{_ as q}from"./tig-layout.Dp_86RM-.js";import{b as B}from"./product.CwGVjSIm.js";import"./uni-icons.piUs7f0e.js";const E=I(a({__name:"comment",setup(a){const{t:I}=l(),E=e(!1),G=e([]),H=e(1),K=e(10),L=e(0),M=e(!1),O=async()=>{H.value>1&&(M.value=!0),i({title:I("加载中")});try{const a=await B(P.value,{type:1,size:K.value,page:H.value});G.value=[...G.value,...a.records],L.value=a.total}catch(a){r({title:a.message,icon:"none"})}finally{M.value=!1,d()}},P=e("");return s(a=>{if(a){const{id:l}=a;l&&(P.value=l,O())}}),t(()=>{H.value<Math.ceil(L.value/K.value)&&(H.value++,O())}),u(()=>{n()}),(a,l)=>{const e=x,s=p,t=w,u=f(m("uni-rate"),J),n=f(m("tig-layout"),q);return v(),o(n,{title:"商品评价"},{default:c(()=>[_(s,{class:"product-comment-card"},{default:c(()=>[(v(!0),y(b,null,k(G.value,(a,l)=>(v(),o(s,{key:l,class:"comment-item"},{default:c(()=>[_(s,{class:"user-info flex justify-between align-center"},{default:c(()=>[_(s,{class:"user-name flex align-center"},{default:c(()=>[_(s,{class:"head_logo"},{default:c(()=>[_(e,{src:h(j)((null==a?void 0:a.avatar)||"")},null,8,["src"])]),_:2},1024),_(s,null,{default:c(()=>[_(t,null,{default:c(()=>[z(T(a.username),1)]),_:2},1024),_(u,{value:a.commentRank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])]),_:2},1024)]),_:2},1024),_(s,{class:"time"},{default:c(()=>[z(T(a.addTime),1)]),_:2},1024)]),_:2},1024),_(s,{class:"tags flex-wrap"},{default:c(()=>[(v(!0),y(b,null,k(a.commentTag,(a,l)=>(v(),o(s,{key:l,class:"tag"},{default:c(()=>[z(T(a),1)]),_:2},1024))),128))]),_:2},1024),_(s,{class:"user-content"},{default:c(()=>[z(T(a.content),1)]),_:2},1024),_(s,{class:"user-imgs flex-wrap align-center"},{default:c(()=>[(v(!0),y(b,null,k(a.showPics,(a,l)=>(v(),o(e,{key:l,mode:"aspectFit",src:h(j)(a.picThumb),onClick:l=>{return e=h(j)((null==a?void 0:a.picUrl)||""),void F({urls:[e]});var e}},null,8,["src","onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1}),H.value>1?(v(),o(s,{key:0,class:"loading-box"},{default:c(()=>[E.value?(v(),o(s,{key:0,class:"bottomLoading"},{default:c(()=>[_(e,{"lazy-load":"",class:"loading",src:h(C)("common/loading.gif")},null,8,["src"])]),_:1})):g("",!0)]),_:1})):g("",!0),_(s,{class:"loading-box"},{default:c(()=>[G.value.length<1?(v(),o(s,{key:0},{default:c(()=>[z(T(a.$t("暂无评价")),1)]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-73476e91"]]);export{E as default};

import{d as a,L as l,r as e,n as s,s as t,p as u,bf as n,c,w as o,ac as i,R as r,ad as d,C as f,F as m,b as v,e as _,a as g,i as p,J as y,K as b,P as k,f as x,G as h,ae as j,k as w,h as T,t as z,H as C,b5 as R,_ as F}from"./index-BZxHr1FI.js";import{_ as G}from"./uni-rate.DTPubwzy.js";import{T as L}from"./tig-layout.DTz8E-sj.js";import{c as P}from"./product.BH5dMQls.js";import"./uni-icons.DMMn2oBg.js";const H=F(a({__name:"comment",setup(a){const{t:F}=l(),H=e(!1),I=e([]),J=e(1),K=e(10),M=e(0),U=e(!1),$=async()=>{J.value>1&&(U.value=!0),i({title:F("加载中")});try{const a=await P(q.value,{type:1,size:K.value,page:J.value});I.value=[...I.value,...a.records],M.value=a.total}catch(a){r({title:a.message,icon:"none"})}finally{U.value=!1,d()}},q=e("");return s(a=>{if(a){const{id:l}=a;l&&(q.value=l,$())}}),t(()=>{J.value<Math.ceil(M.value/K.value)&&(J.value++,$())}),u(()=>{n()}),(a,l)=>{const e=x,s=p,t=w,u=f(m("uni-rate"),G),n=f(m("tig-layout"),L);return v(),c(n,{title:"商品评价"},{default:o(()=>[_(s,{class:"product-comment-card"},{default:o(()=>[(v(!0),y(b,null,k(I.value,(a,l)=>(v(),c(s,{key:l,class:"comment-item"},{default:o(()=>[_(s,{class:"user-info flex justify-between align-center"},{default:o(()=>[_(s,{class:"user-name flex align-center"},{default:o(()=>[_(s,{class:"head_logo"},{default:o(()=>[_(e,{src:h(j)((null==a?void 0:a.avatar)||"")},null,8,["src"])]),_:2},1024),_(s,null,{default:o(()=>[_(t,null,{default:o(()=>[T(z(a.username),1)]),_:2},1024),_(u,{value:a.commentRank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])]),_:2},1024)]),_:2},1024),_(s,{class:"time"},{default:o(()=>[T(z(a.addTime),1)]),_:2},1024)]),_:2},1024),_(s,{class:"tags flex-wrap"},{default:o(()=>[(v(!0),y(b,null,k(a.commentTag,(a,l)=>(v(),c(s,{key:l,class:"tag"},{default:o(()=>[T(z(a),1)]),_:2},1024))),128))]),_:2},1024),_(s,{class:"user-content"},{default:o(()=>[T(z(a.content),1)]),_:2},1024),_(s,{class:"user-imgs flex-wrap align-center"},{default:o(()=>[(v(!0),y(b,null,k(a.showPics,(a,l)=>(v(),c(e,{key:l,mode:"aspectFit",src:h(j)(a.picThumb),onClick:l=>{return e=h(j)((null==a?void 0:a.picUrl)||""),void R({urls:[e]});var e}},null,8,["src","onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1}),J.value>1?(v(),c(s,{key:0,class:"loading-box"},{default:o(()=>[H.value?(v(),c(s,{key:0,class:"bottomLoading"},{default:o(()=>[_(e,{"lazy-load":"",class:"loading",src:h(C)("common/loading.gif")},null,8,["src"])]),_:1})):g("",!0)]),_:1})):g("",!0),_(s,{class:"loading-box"},{default:o(()=>[I.value.length<1?(v(),c(s,{key:0},{default:o(()=>[T(z(a.$t("暂无评价")),1)]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-23fd9c50"]]);export{H as default};

import{c as e,T as a,_ as t}from"./tig-layout.DTz8E-sj.js";import{a4 as l,d as c,a5 as s,r as o,C as r,F as u,c as n,b as i,i as d,w as p,e as m,a as y,O as f,k as g,h as _,t as v,J as h,Z as I,P as k,K as C,a6 as b,X as w,_ as x,a7 as S,a8 as j,W as N,L as $,m as L,V as M,a9 as U,Y as z,E as T,G as P,H as V,j as B,aa as K,l as R,ab as W,n as D}from"./index-BZxHr1FI.js";import{_ as H}from"./tig-image.CzXKqALH.js";import{m as A}from"./masonry.B_l69Lra.js";import{g as E}from"./home.CvZhmv3n.js";import{u as F}from"./useList.cF42RyDa.js";import{T as G}from"./tig-lazy-image.BPOhG_XX.js";import{_ as J}from"./format-price.BrXrBVy6.js";import{s as O}from"./specification.C71VpZ8P.js";import"./activityCard.DE1HAQr9.js";import"./dayjs.min.BETqfnlQ.js";import"./product.BH5dMQls.js";import"./currency.Dn5A4d7X.js";import"./uni-icons.DMMn2oBg.js";import"./uni-number-box.DKxM8QIH.js";const q=e=>l({url:"category/category/list?id="+e,method:"get",cancelPrevious:!0,requestKey:"categoryList"}),Q=x(c({__name:"styleOneCate",props:{catId:{type:Number,default:0},catIdModifiers:{}},emits:["update:catId"],setup(t){const c=s(t,"catId"),x=o([]),S=o([]),j=o([]),N=o(!1),$=o(!0),L=o(0),M=()=>{w({url:"/pages/search/index"})},U=(e,a)=>{c.value=e,a&&(S.value=a.children)};return(async()=>{N.value=!0;try{const e=await l({url:"category/category/all",method:"get"});x.value=e||[]}catch(e){console.error(e)}})(),(async()=>{try{const e=await l({url:"category/category/hot",method:"get"});j.value=e||[],$.value=!1}catch(e){console.error(e)}})(),(t,l)=>{const s=r(u("tig-navbar"),e),o=d,w=g,z=r(u("tig-image"),H),T=b,P=r(u("tig-layout"),a);return i(),n(o,null,{default:p(()=>[m(P,null,{default:p(()=>[m(s,{"show-left":!1,title:"产品分类"}),$.value||!N.value?(i(),n(o,{key:0,class:"page-loading"},{default:p(()=>[m(o,{class:"ico"})]),_:1})):y("",!0),N.value?(i(),n(o,{key:1,class:"pageMain"},{default:p(()=>[0==L.value?(i(),n(o,{key:0,class:"productSort"},{default:p(()=>[m(o,{class:"header acea-row row-center-wrapper"},{default:p(()=>[m(o,{class:"acea-row row-between-wrapper input",onClick:f(M,["stop"])},{default:p(()=>[m(w,{class:"iconfont-h5 icon-sousuo"}),m(o,{class:"txt"},{default:p(()=>[_(v(t.$t("点击搜索商品信息")),1)]),_:1})]),_:1})]),_:1}),m(o,{class:"aside"},{default:p(()=>[m(o,{class:I("item acea-row row-center-wrapper "+(0==c.value?"on":"")),onClick:l[0]||(l[0]=e=>U(0))},{default:p(()=>[m(w,null,{default:p(()=>[_(v(t.$t("推荐")),1)]),_:1})]),_:1},8,["class"]),(i(!0),h(C,null,k(x.value,(e,a)=>(i(),n(o,{key:a,class:I("item acea-row row-center-wrapper "+(c.value==e.categoryId?"on":"")),"data-cat_id":e.categoryId,onClick:a=>U(e.categoryId,e)},{default:p(()=>[e.catShortName?(i(),n(w,{key:0},{default:p(()=>[_(v(e.catShortName),1)]),_:2},1024)):(i(),n(w,{key:1},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024))]),_:2},1032,["class","data-cat_id","onClick"]))),128))]),_:1}),m(o,{class:"conter"},{default:p(()=>[$.value?y("",!0):(i(),h(C,{key:0},[0==c.value?(i(),n(o,{key:0,class:"listw"},{default:p(()=>[m(o,{class:"title acea-row row-center-wrapper"},{default:p(()=>[m(o,{class:"name"},{default:p(()=>[_(v(t.$t("热门分类")),1)]),_:1})]),_:1}),m(o,{class:"list acea-row"},{default:p(()=>[(i(!0),h(C,null,k(j.value,(e,a)=>(i(),n(T,{key:a,"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p(()=>[m(o,{class:"picture"},{default:p(()=>[m(z,{src:e.categoryPic,mode:"aspectFill"},null,8,["src"])]),_:2},1024),m(o,{class:"name line1"},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024)]),_:2},1032,["url"]))),128))]),_:1})]),_:1})):y("",!0),c.value>0?(i(!0),h(C,{key:1},k(S.value,(e,a)=>(i(),n(o,{id:"b"+a,key:a,class:"listw"},{default:p(()=>[m(o,{class:"title acea-row row-center-wrapper"},{default:p(()=>[m(T,{"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p(()=>[m(o,{class:"name"},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024)]),_:2},1032,["url"])]),_:2},1024),m(o,{class:"list acea-row"},{default:p(()=>[(i(!0),h(C,null,k(e.children,(e,a)=>(i(),n(T,{key:a,"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p(()=>[e.categoryPic?(i(),n(o,{key:0,class:"picture"},{default:p(()=>[m(z,{src:e.categoryPic},null,8,["src"])]),_:2},1024)):y("",!0),m(o,{class:"name line1"},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024)]),_:2},1032,["url"]))),128))]),_:2},1024)]),_:2},1032,["id"]))),128)):y("",!0)],64))]),_:1})]),_:1})):y("",!0)]),_:1})):y("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-2f8e92c6"]]),X=x(c({__name:"search",props:{placeholder:{type:String,default:"搜索商品"},needMenu:{type:Boolean,default:!1}},emits:["menu","search"],setup:(e,{emit:a})=>(a,t)=>{const l=g,c=d;return i(),n(c,{class:"search-box"},{default:p(()=>[e.needMenu?(i(),n(c,{key:0,class:"btn-box",onClick:t[0]||(t[0]=e=>a.$emit("menu"))},{default:p(()=>[m(l,{class:"iconfont-h5 icon-shouye"})]),_:1})):y("",!0),m(c,{class:"search-content",onClick:t[1]||(t[1]=e=>a.$emit("search"))},{default:p(()=>[m(l,{class:"iconfont-h5 icon-sousuo1"}),m(l,{class:"placeholder-text"},{default:p(()=>[_(v(a.$t(e.placeholder)),1)]),_:1})]),_:1})]),_:1})}}),[["__scopeId","data-v-28caa3a7"]]),Y=x(c({__name:"menu",props:{currentCateId:{},currentCateIdModifiers:{}},emits:S(["change"],["update:currentCateId"]),setup(e,{emit:a}){const t=s(e,"currentCateId"),l=a,c=j([]);(async()=>{try{const e=await q(0);c.value=e,t.value=e[0].categoryId}catch(e){console.error(e)}})();return(e,a)=>{const s=d,o=N;return i(),n(s,{class:"menu-content"},{default:p(()=>[m(o,{"scroll-y":"true",class:"menu-scroll"},{default:p(()=>[(i(!0),h(C,null,k(c.value,(e,a)=>(i(),n(s,{key:e.categoryId,class:I(["menu-item",{active:t.value===e.categoryId}]),onClick:a=>{var c;(c=e.categoryId)!==t.value&&(t.value=c,l("change",c))}},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})}}}),[["__scopeId","data-v-b316dbf5"]]),Z=x(c({__name:"selectCate",props:S({currentCateId:{type:Number},type:{type:String,default:""}},{subCurrentCateId:{default:0},subCurrentCateIdModifiers:{},menuList:{default:[]},menuListModifiers:{}}),emits:S(["change"],["update:subCurrentCateId","update:menuList"]),setup(e,{emit:a}){const{t:l}=$(),c=e,f=a,b=s(e,"subCurrentCateId"),w=o(0),x=s(e,"menuList"),S=e=>{e!==b.value&&(b.value=e,f("change"))},j=e=>{w.value=e.detail.scrollLeft},U=()=>{x.value.length&&(T.value=!0)},z=L(()=>{var e;return null==(e=x.value.find(e=>e.categoryId===b.value))?void 0:e.categoryName});M(()=>c.currentCateId,async e=>{e&&e>0&&await(async e=>{try{const a=await q(e);x.value=[{categoryId:0,categoryName:l("全部商品")},...a],f("change"),w.value=0}catch(a){console.error(a)}})(e)});const T=o(!1);return(a,l)=>{const c=d,s=N,o=g,f=r(u("tig-popup"),t);return i(),n(c,{class:I(["cate-box",{main:"main"===e.type}])},{default:p(()=>[m(s,{"scroll-x":!0,class:"cate-scroll","scroll-with-animation":!0,"scroll-left":w.value,onScroll:j},{default:p(()=>[(i(!0),h(C,null,k(x.value,a=>(i(),h(C,{key:a.categoryId},[a.categoryName?(i(),n(c,{key:0,class:"cate-item",onClick:e=>S(a.categoryId)},{default:p(()=>[m(c,{class:I(["item-text",{active:a.categoryId===b.value,main:"main"===e.type}])},{default:p(()=>[_(v(a.categoryName),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"])):y("",!0)],64))),128))]),_:1},8,["scroll-left"]),m(c,{class:"cate-btn",onClick:U},{default:p(()=>[m(o,{class:I(["iconfont-h5 icon-xiajiantou",{"icon-xiajiantou1-copy":"main"===e.type}])},null,8,["class"])]),_:1}),m(f,{show:T.value,"onUpdate:show":l[1]||(l[1]=e=>T.value=e),position:"top","z-index":999,"show-close":!1,"background-color":"#fff"},{default:p(()=>[m(c,{class:"cate-popup"},{default:p(()=>[m(c,{class:"cate-popup-title"},{default:p(()=>[_(v(z.value),1)]),_:1}),m(c,{class:"cate-popup-list-box"},{default:p(()=>[m(c,{class:"cate-popup-list"},{default:p(()=>[(i(!0),h(C,null,k(x.value,a=>(i(),n(c,{key:a.categoryId,class:"list-item popup-item",onClick:e=>S(a.categoryId)},{default:p(()=>[m(c,{class:I(["item-text popup-text line1",{active:a.categoryId===b.value,main:"main"===e.type}])},{default:p(()=>[_(v(a.categoryName),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),m(c,{class:"cate-popup-close",onClick:l[0]||(l[0]=e=>T.value=!1)},{default:p(()=>[_(v(a.$t("点击收起")),1),m(o,{class:"iconfont-h5 icon-xiajiantou1-copy"})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1},8,["class"])}}}),[["__scopeId","data-v-876f74d1"]]),ee=x(c({__name:"styleTwoCate",props:{height:{type:[Number,String],default:0}},setup(a){U(e=>({eee353dc:x.value}));const t=o(0),l=o(0),c=o([]),s=a,f=z({categoryId:0,page:1,size:10}),{data:g,getList:_,reachBottom:v,isLoading:h,total:I}=F(E,{params:f,path:{dataKey:"records"},needReachBottom:!1}),k=()=>{g.value=[],f.page=1,0===l.value?f.categoryId=t.value:f.categoryId=l.value,_()},C=()=>{l.value=0,g.value=[],c.value=[],f.page=1},b=()=>{B({url:"/pages/index/index",success:function(){}})},w=()=>{B({url:"/pages/search/index"})},x=L(()=>`calc(${s.height} - 90rpx)`);return(a,s)=>{const o=r(u("tig-navbar"),e),f=d,_=N,x=r(u("up-empty"),T);return i(),n(f,null,{default:p(()=>[m(o,{title:"产品分类","show-left":!1}),m(X,{needMenu:!0,onMenu:b,onSearch:w}),m(f,{class:"scroll-box"},{default:p(()=>[m(f,{class:"content-box"},{default:p(()=>[m(f,{class:"side"},{default:p(()=>[m(Y,{"current-cate-id":t.value,"onUpdate:currentCateId":s[0]||(s[0]=e=>t.value=e),onChange:C},null,8,["current-cate-id"])]),_:1}),m(f,{class:"list-box"},{default:p(()=>[m(Z,{"menu-list":c.value,"onUpdate:menuList":s[1]||(s[1]=e=>c.value=e),"sub-current-cate-id":l.value,"onUpdate:subCurrentCateId":s[2]||(s[2]=e=>l.value=e),"current-cate-id":t.value,onChange:k},null,8,["menu-list","sub-current-cate-id","current-cate-id"]),m(f,{class:"list-content"},{default:p(()=>[!P(h)&&P(I)>0?(i(),n(_,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:P(v)},{default:p(()=>[m(A,{"commodity-list":P(g)},null,8,["commodity-list"])]),_:1},8,["onScrolltolower"])):y("",!0),P(h)||0!==P(I)?y("",!0):(i(),n(f,{key:1,class:"empty-box"},{default:p(()=>[m(x,{icon:P(V)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5eb97ebb"]]),ae=x(c({__name:"styleThreeCate",props:{height:{type:[Number,String],default:0}},setup(a){U(e=>({"33295db8":ee.value}));const t=o(0),l=o(0),c=o([]),s=a,f=z({categoryId:0,page:1,size:10}),{data:I,getList:b,reachBottom:w,isLoading:x,total:S}=F(E,{params:f,path:{dataKey:"records"},needReachBottom:!1}),j=()=>{I.value=[],f.page=1,0===l.value?f.categoryId=t.value:f.categoryId=l.value,b()},$=()=>{l.value=0,I.value=[],c.value=[],f.page=1},M=()=>{B({url:"/pages/index/index"})},R=()=>{B({url:"/pages/search/index"})},W=e=>{B({url:`/pages/product/index?id=${e}`})},D=o(0),H=o(),A=o({}),q=()=>{H.value.handleShowPopup(),A.value.isCheck=!1},Q=()=>{D.value=0},ee=L(()=>`calc(${s.height} - 90rpx)`);return(a,s)=>{const o=r(u("tig-navbar"),e),f=d,b=r(u("tig-lazy-image"),G),L=r(u("format-price"),J),U=r(u("up-loading-icon"),K),z=g,B=N,E=r(u("up-empty"),T);return i(),n(f,null,{default:p(()=>[m(o,{title:"产品分类","show-left":!1}),m(X,{needMenu:!0,onMenu:M,onSearch:R}),m(f,{class:"scroll-box"},{default:p(()=>[m(f,{class:"content-box"},{default:p(()=>[m(f,{class:"side"},{default:p(()=>[m(Y,{"current-cate-id":t.value,"onUpdate:currentCateId":s[0]||(s[0]=e=>t.value=e),onChange:$},null,8,["current-cate-id"])]),_:1}),m(f,{class:"list-box"},{default:p(()=>[m(Z,{"menu-list":c.value,"onUpdate:menuList":s[1]||(s[1]=e=>c.value=e),"sub-current-cate-id":l.value,"onUpdate:subCurrentCateId":s[2]||(s[2]=e=>l.value=e),type:"main","current-cate-id":t.value,onChange:j},null,8,["menu-list","sub-current-cate-id","current-cate-id"]),m(f,{class:"list-content"},{default:p(()=>[!P(x)&&P(S)>0?(i(),n(B,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:P(w)},{default:p(()=>[m(f,{class:"product-list"},{default:p(()=>[(i(!0),h(C,null,k(P(I),e=>(i(),n(f,{key:e.productId,class:"product-item"},{default:p(()=>[m(f,{class:"item-left",onClick:a=>W(e.productId)},{default:p(()=>[m(b,{src:e.picUrl},null,8,["src"]),0==e.productStock||0==e.productStatus?(i(),n(f,{key:0,class:"product-status-box"},{default:p(()=>[m(f,{class:"outsale"},{default:p(()=>[_(v(a.$t(0==e.productStock?"已售罄":"已下架")),1)]),_:2},1024)]),_:2},1024)):y("",!0)]),_:2},1032,["onClick"]),m(f,{class:"item-right"},{default:p(()=>[m(f,{class:"item-right-title line2",onClick:a=>W(e.productId)},{default:p(()=>[_(v(e.productName),1)]),_:2},1032,["onClick"]),m(f,{class:"item-right-price"},{default:p(()=>[m(L,{"decimals-style":{fontSize:"24rpx",fontWeight:"bold"},"currency-style":{fontSize:"23rpx",fontWeight:"bold"},"font-style":{fontSize:"32rpx"},"price-data":e.productPrice},null,8,["price-data"])]),_:2},1024),m(f,{class:"buy_icon"},{default:p(()=>[m(f,{class:"buy_btn",onClick:a=>(e=>{e.isCheck||(D.value=e.productId,e.isCheck=!0,A.value=e)})(e)},{default:p(()=>[e.isCheck?(i(),n(U,{key:0,mode:"circle"})):(i(),n(z,{key:1,class:"iconfont-h5 icon-gouwuche3 buy_btn_icon"}))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["onScrolltolower"])):y("",!0),P(x)||0!==P(S)?y("",!0):(i(),n(f,{key:1,class:"empty-box"},{default:p(()=>[m(E,{icon:P(V)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),m(O,{ref_key:"specificationRef",ref:H,modelValue:D.value,"onUpdate:modelValue":s[3]||(s[3]=e=>D.value=e),onAddCardSucceed:s[4]||(s[4]=()=>{}),onLoadEnd:q,onClose:Q},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-f7a537c5"]]),te=x(c({__name:"index",setup(e){const t=R(),l=W(),c=o(0);D(e=>{e&&e.categoryId&&(c.value=e.categoryId)});const s=L(()=>`calc(${t.windowInfo.screenHeight}px - var(${l.currentActiveValue>-1?"--tabbar-height":"--safe-bottom"}) - var(--nav-height))`);return(e,l)=>{const o=r(u("tig-layout"),a);return i(),n(o,null,{default:p(()=>[1===P(t).categoryDecorateType?(i(),n(Q,{key:0,"cat-id":c.value,"onUpdate:catId":l[0]||(l[0]=e=>c.value=e)},null,8,["cat-id"])):y("",!0),2===P(t).categoryDecorateType?(i(),n(ee,{key:1,height:s.value},null,8,["height"])):y("",!0),3===P(t).categoryDecorateType?(i(),n(ae,{key:2,height:s.value},null,8,["height"])):y("",!0)]),_:1})}}}),[["__scopeId","data-v-47cfc7ed"]]);export{te as default};

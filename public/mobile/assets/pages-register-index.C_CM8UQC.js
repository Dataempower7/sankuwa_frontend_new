import{a4 as e,d as l,l as a,r as o,L as t,m as s,a8 as i,v as r,M as d,T as u,ai as n,c,w as p,C as m,F as b,b as f,e as v,i as h,h as g,t as y,G as _,J as k,K as x,aj as C,a as V,ak as $,O as w,k as U,R as j,a3 as z,j as M,_ as A}from"./index-BZxHr1FI.js";import{_ as T}from"./uni-easyinput.DHFPvsdC.js";import{_ as q,a as S}from"./uni-forms.QWcIXEX3.js";import{_ as R}from"./tig-mobile-areacode.D-ev-Dkx.js";import{T as F,a as O,d as D}from"./tig-layout.DTz8E-sj.js";import{V as I}from"./index.DfptdAaC.js";import{u as E}from"./useResetState.t1vLCAhg.js";import"./uni-icons.DMMn2oBg.js";const G=A(l({__name:"index",setup(l){const A=a(),G=o("86"),[Z]=E({mobile:"",mobileCode:"",password:"",registType:"",email:"",emailCode:""}),{t:J}=t(),K=o(!1),L=o(""),W=o(!1),B=s(()=>"email"===Z.value.registType?!(Z.value.email&&Z.value.emailCode&&Z.value.password&&L.value):!(Z.value.mobile&&Z.value.mobileCode&&Z.value.password&&L.value)),H={mobile:{rules:[{required:!0,errorMessage:J("请输入手机号")},{validateFunction:(e,l,a,o)=>l?/^(?=.*\D).+$/.test(l)?o(J("格式错误，请输入正确的手机号码")):void o():o(J("手机号不能为空"))}]},mobileCode:{rules:[{required:!0,errorMessage:J("请输入验证码")},{validateFunction:(e,l,a,o)=>l?6!=l.length?o(J("请输入6位验证码")):void o():o(J("验证码不能为空"))}]},password:{rules:[{required:!0,errorMessage:J("请输入密码")},{validateFunction:(e,l,a,o)=>l?l.length>20||l.length<6?o(J("密码应为6-20位字符")):/\s/.test(l)?o(J("密码中不允许有空格")):/^\d+$/.test(l)?o(J("密码不能全为数字")):/^(?=.*[\d\W]).+$/.test(l)?/^(?=.*[a-zA-Z0-9]).+$/.test(l)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(l)?void o():o(J("密码不能全为相同字符或数字")):o(J("密码不能全为符号")):o(J("密码不能全为字母")):o(J("密码不能为空"))}]}},N=i(),P=async()=>{N.value.validate().then(async()=>{try{W.value=!0;const l=d("bindSalesmanId"),a={...Z.value};l&&(a.salesmanId=l),Z.value.mobile&&(a.mobile=A.isOpenMobileAreaCode?G.value+Z.value.mobile:Z.value.mobile),await(l=>e({url:"user/regist/registAct",method:"post",data:l}))(a),j({title:J("注册成功"),duration:1500,icon:"none"}),setTimeout(()=>{z({url:"/pages/login/index"})},1e3)}catch(l){Z.value.emailCode="",Z.value.mobileCode="",j({title:l.message,duration:1500,icon:"none"})}finally{W.value=!1}}).catch(e=>{console.error("表单错误信息：",e)})};r(()=>{d("token")&&u({url:"/pages/index/index"}),n(()=>{N.value.setRules(H)})});const Q=e=>{j({title:e,duration:1500,icon:"none"})},X=e=>{e&&M({url:e})};return(e,l)=>{const a=h,o=m(b("uni-easyinput"),T),t=m(b("uni-forms-item"),q),s=m(b("tig-mobile-areacode"),R),i=m(b("uni-forms"),S),r=m(b("tig-button"),O),d=m(b("tig-checkbox"),D),u=U,n=m(b("tig-layout"),F);return f(),c(n,{title:"注册"},{default:p(()=>[v(a,{class:"register-container"},{default:p(()=>[v(a,{class:"register-warp"},{default:p(()=>[v(a,{class:"h1_tit"},{default:p(()=>[g(y(e.$t("会员注册")),1)]),_:1})]),_:1}),v(a,{class:"profile-edit-content"},{default:p(()=>[v(i,{ref_key:"formRef",ref:N,"model-value":_(Z),rules:H,"label-align":"right"},{default:p(()=>["email"===_(Z).registType?(f(),k(x,{key:0},[v(t,{label:"",name:"email"},{default:p(()=>[v(a,{class:"input mobileareacode-box"},{default:p(()=>[v(o,{modelValue:_(Z).email,"onUpdate:modelValue":l[0]||(l[0]=e=>_(Z).email=e),"input-border":!1,focus:"",class:"uni-input item-input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入邮箱"),"primary-color":"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),v(t,{label:"",name:"emailCode"},{default:p(()=>[v(a,{class:"item-one"},{default:p(()=>[v(o,{modelValue:_(Z).emailCode,"onUpdate:modelValue":l[1]||(l[1]=e=>_(Z).emailCode=e),"input-border":!1,class:"uni-input item-input input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("邮箱验证码"),"primary-color":"rgb(192, 196, 204)",style:{width:"400rpx"}},null,8,["modelValue","placeholder"]),v(I,{"is-checked":K.value,"onUpdate:isChecked":l[2]||(l[2]=e=>K.value=e),"verify-token-data":L.value,"onUpdate:verifyTokenData":l[3]||(l[3]=e=>L.value=e),style:{height:"65rpx"},email:_(Z).email,"request-api":_(C),onMobileErrorCallback:Q},null,8,["is-checked","verify-token-data","email","request-api"])]),_:1})]),_:1})],64)):(f(),k(x,{key:1},[v(t,{label:"",name:"mobile"},{default:p(()=>[v(a,{class:"input mobileareacode-box"},{default:p(()=>[_(A).isOpenMobileAreaCode?(f(),c(s,{key:0,modelValue:G.value,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e),"label-style":{fontSize:"28rpx"},"name-style":{fontSize:"24rpx",padding:"0 2rpx 0 10rpx"},"box-style":{paddingRight:"0"},"icon-style":{fontSize:"22rpx"}},null,8,["modelValue"])):V("",!0),v(o,{modelValue:_(Z).mobile,"onUpdate:modelValue":l[5]||(l[5]=e=>_(Z).mobile=e),"input-border":!1,class:"uni-input item-input",focus:"","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入手机号"),"primary-color":"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),v(t,{label:"",name:"mobileCode"},{default:p(()=>[v(a,{class:"item-one"},{default:p(()=>[v(o,{modelValue:_(Z).mobileCode,"onUpdate:modelValue":l[6]||(l[6]=e=>_(Z).mobileCode=e),"input-border":!1,class:"uni-input item-input input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("手机验证码"),"primary-color":"rgb(192, 196, 204)",style:{width:"400rpx"}},null,8,["modelValue","placeholder"]),v(I,{"is-checked":K.value,"onUpdate:isChecked":l[7]||(l[7]=e=>K.value=e),"verify-token-data":L.value,"onUpdate:verifyTokenData":l[8]||(l[8]=e=>L.value=e),style:{height:"65rpx"},mobile:_(A).isOpenMobileAreaCode?G.value+_(Z).mobile:_(Z).mobile,"request-api":_($),onMobileErrorCallback:Q},null,8,["is-checked","verify-token-data","mobile","request-api"])]),_:1})]),_:1})],64)),v(t,{label:"",name:"password"},{default:p(()=>[v(a,{class:"input"},{default:p(()=>[v(o,{modelValue:_(Z).password,"onUpdate:modelValue":l[9]||(l[9]=e=>_(Z).password=e),clearable:!1,"input-border":!1,trim:!0,type:"password",class:"uni-input item-input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入密码"),"primary-color":"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),v(t,{label:"",name:""},{default:p(()=>[v(a,{class:"btn"},{default:p(()=>[v(a,{class:"btn-text",onClick:l[10]||(l[10]=w(e=>X("/pages/login/index"),["stop"]))},{default:p(()=>[v(a,null,{default:p(()=>[g(y(e.$t("已有账号？")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),v(a,{class:"form-con"},{default:p(()=>[v(r,{disabled:B.value,loading:W.value,class:"btn2-css3",onClick:P},{default:p(()=>[g(y(e.$t("注 册")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),v(a,{class:"agreement-btn"},{default:p(()=>[v(d,{checked:K.value,"onUpdate:checked":l[11]||(l[11]=e=>K.value=e)},null,8,["checked"]),v(u,{onClick:l[12]||(l[12]=e=>K.value=!K.value)},{default:p(()=>[g(y(e.$t("我已阅读并同意")),1)]),_:1}),v(u,{class:"agreement-text special-color",onClick:l[13]||(l[13]=w(e=>X("/pages/register/agreement"),["stop"]))},{default:p(()=>[g(y(e.$t("《注册协议》")),1)]),_:1}),v(u,{class:"special-color",onClick:l[14]||(l[14]=w(e=>X("/pages/login/mallAgreement?articleSn=fwxy"),["stop"]))},{default:p(()=>[g("《"+y(e.$t("服务协议"))+"》",1)]),_:1}),v(u,{class:"special-color",onClick:l[15]||(l[15]=w(e=>X("/pages/login/mallAgreement?articleSn=ysxy"),["stop"]))},{default:p(()=>[g("《"+y(e.$t("隐私协议"))+"》",1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-0df57223"]]);export{G as default};

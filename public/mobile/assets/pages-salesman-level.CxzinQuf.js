import{d as e,r as a,m as l,n as s,c as t,w as u,ac as n,ad as o,C as c,F as i,a9 as v,H as d,bK as r,b as f,e as m,i as _,a as y,f as h,G as p,h as I,t as A,J as g,K as k,I as B,Z as U,P as $,_ as R}from"./index-BZxHr1FI.js";import{_ as w}from"./tig-image.CzXKqALH.js";import{T as G}from"./tig-layout.DTz8E-sj.js";import{a as b,g as j}from"./salesmanCenter.B-2VCQBE.js";import{u as x}from"./useCurrency.293Veihs.js";import"./currency.Dn5A4d7X.js";const C=R(e({__name:"level",setup(e){v(e=>({"63512f7d":z.value,"5413fa5c":H.value}));const{currencyName:R}=x(),C=a({}),N=a([]),P=a({}),K=a({}),M=a({}),F=e=>{var a;return null==(a=N.value[e-1])?void 0:a.rate},S=(e,a)=>{let l=a.condition.salesAmount.value,s=a.condition.salesInviteUsers.value,t=a.condition.selfBuyAmount.value,u={totalPerc:0,salesAmountInfo:{salesAmountReach:!1,salesAmountGap:""},salesInviteUsersInfo:{salesInviteUsersReach:!1,salesInviteUsersGap:""},selfBuyAmountInfo:{selfBuyAmountReach:!1,selfBuyAmountGap:""}},n=0,o=e.allSum-l,c=e.allUserCount-s,i=e.selfBuySum-t;return o>=0&&(u.salesAmountInfo.salesAmountReach=!0,n+=1),c>=0&&(u.salesInviteUsersInfo.salesInviteUsersReach=!0,n+=1),i>=0&&(u.selfBuyAmountInfo.selfBuyAmountReach=!0,n+=1),u.totalPerc=(n/3*100).toFixed(2),u.salesAmountInfo.salesAmountGap=Math.abs(o),u.salesInviteUsersInfo.salesInviteUsersGap=Math.abs(c),u.selfBuyAmountInfo.selfBuyAmountGap=Math.abs(i),u},z=l(()=>`url(${d("salesman/viprankbg.png")})`),H=l(()=>`url(${d("salesman/tuiguang.png")})`);return s(()=>{(async()=>{n({title:"加载中"});try{const e=await b();C.value=e}catch(e){console.error(e)}finally{o()}})(),(async()=>{try{const e=await j();P.value=e,N.value=e.salesmanConfig.level,K.value=P.value.salesmanConfig.level[P.value.level],M.value=S(P.value.order,K.value)}catch(e){console.error(e)}})()}),(e,a)=>{const l=c(i("tig-image"),w),s=h,n=_,o=c(i("up-icon"),r),v=c(i("tig-layout"),G);return f(),t(v,{"need-safe-top":!0},{default:u(()=>[m(n,{class:"level"},{default:u(()=>[m(n,{class:"level-dashboard"},{default:u(()=>[m(n,{class:"container"},{default:u(()=>[m(n,{class:"header"},{default:u(()=>[C.value.avatar?(f(),t(l,{key:0,class:"avatar",src:C.value.avatar},null,8,["src"])):(f(),t(s,{key:1,src:p(d)("salesman/avatar.png"),class:"avatar"},null,8,["src"])),m(n,{class:"level-name"},{default:u(()=>[I(A(P.value.levelName),1)]),_:1})]),_:1}),m(n,{class:"level-stepper"},{default:u(()=>[m(n,{class:"level-stepper-wrap less"},{default:u(()=>[K.value.name?(f(),g(k,{key:0},[m(n,{class:"level-stepper-wrap__point active reach"},{default:u(()=>[m(n,{class:"inner-text"},{default:u(()=>[I(A(P.value.levelName),1)]),_:1})]),_:1}),m(n,{class:"level-stepper-wrap__line"},{default:u(()=>[m(n,{class:"line-inner progress",style:B(`width: ${M.value.totalPerc}%;`)},null,8,["style"])]),_:1}),m(n,{class:"level-stepper-wrap__point"},{default:u(()=>[m(n,{class:"inner-text"},{default:u(()=>[I(A(K.value.name),1)]),_:1})]),_:1})],64)):y("",!0)]),_:1})]),_:1})]),_:1}),F(P.value.level)>0?(f(),t(n,{key:0,class:"rights-and-interests"},{default:u(()=>[m(n,{class:"item"},{default:u(()=>[m(n,{class:"title-icon tui"}),m(n,null,{default:u(()=>[m(n,null,{default:u(()=>[I(A(F(P.value.level))+"%",1)]),_:1}),m(n,null,{default:u(()=>[I(A(e.$t("推广佣金比")),1)]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),m(n,{class:"level-dashboard__rate-text"},{default:u(()=>[m(o,{name:"info-circle",color:"#999",size:"12"}),I(" "+A(e.$t("部分商品的佣金比例可能因商家设置而有所不同，请以商品中所显示的为准")),1)]),_:1})]),_:1}),K.value?(f(),t(n,{key:0,class:"level-schedule"},{default:u(()=>[m(n,{class:"title"},{default:u(()=>[I(A(e.$t("满足以下规则可升级为"))+A(K.value.name),1)]),_:1}),m(n,{class:"level-schedule__status"},{default:u(()=>{var a,l,s;return[(null==(a=P.value.condition)?void 0:a.salesAmount.checked)?(f(),t(n,{key:0,class:"level-schedule-item"},{default:u(()=>[m(n,{class:"tag-wrap"},{default:u(()=>[m(n,{class:U(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":M.value.salesAmountInfo.salesAmountReach}])},{default:u(()=>[I(A(e.$t(M.value.salesAmountInfo.salesAmountReach?"已达标":"未达标")),1)]),_:1},8,["class"])]),_:1}),m(n,{class:"tag-desc"},{default:u(()=>{var a;return[I(A(e.$t("推广金额达"))+" "+A((null==(a=K.value.condition)?void 0:a.salesAmount.value)+p(R))+" ",1),!1===M.value.salesAmountInfo.salesAmountReach?(f(),g(k,{key:0},[I(" (还差"),m(n,{class:"level-schedule-item__left"},{default:u(()=>[I(A(M.value.salesAmountInfo.salesAmountGap),1)]),_:1}),I(" "+A(p(R))+") ",1)],64)):y("",!0)]}),_:1})]),_:1})):y("",!0),(null==(l=K.value.condition)?void 0:l.salesInviteUsers.checked)?(f(),t(n,{key:1,class:"level-schedule-item"},{default:u(()=>[m(n,{class:"tag-wrap"},{default:u(()=>[m(n,{class:U(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":M.value.salesInviteUsersInfo.salesInviteUsersReach}])},{default:u(()=>[I(A(M.value.salesInviteUsersInfo.salesInviteUsersReach?"已达标":"未达标"),1)]),_:1},8,["class"])]),_:1}),m(n,{class:"tag-desc"},{default:u(()=>{var e;return[I("累计客户数达 "+A(null==(e=K.value.condition)?void 0:e.salesInviteUsers.value)+" 人 ",1),!1===M.value.salesInviteUsersInfo.salesInviteUsersReach?(f(),g(k,{key:0},[I(" (还差"),m(n,{class:"level-schedule-item__left"},{default:u(()=>[I(A(M.value.salesInviteUsersInfo.salesInviteUsersGap),1)]),_:1}),I(" 人) ")],64)):y("",!0)]}),_:1})]),_:1})):y("",!0),(null==(s=K.value.condition)?void 0:s.selfBuyAmount.checked)?(f(),t(n,{key:2,class:"level-schedule-item"},{default:u(()=>[m(n,{class:"tag-wrap"},{default:u(()=>[m(n,{class:U(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":M.value.selfBuyAmountInfo.selfBuyAmountReach}])},{default:u(()=>[I(A(M.value.selfBuyAmountInfo.selfBuyAmountReach?"已达标":"未达标"),1)]),_:1},8,["class"])]),_:1}),m(n,{class:"tag-desc"},{default:u(()=>{var a;return[I(A(e.$t("自购金额达"))+" "+A((null==(a=K.value.condition)?void 0:a.selfBuyAmount.value)+p(R))+" ",1),!1===M.value.selfBuyAmountInfo.selfBuyAmountReach?(f(),g(k,{key:0},[I(" ("+A(e.$t("还差")),1),m(n,{class:"level-schedule-item__left"},{default:u(()=>[I(A(M.value.selfBuyAmountInfo.selfBuyAmountGap),1)]),_:1}),I(" "+A(p(R))+") ",1)],64)):y("",!0)]}),_:1})]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),N.value?(f(),t(n,{key:1,class:"level-rules"},{default:u(()=>[(f(!0),g(k,null,$(N.value,a=>(f(),t(n,{key:a.id,class:"rules-item"},{default:u(()=>[m(n,{class:"label"},{default:u(()=>[I(A(a.name),1)]),_:2},1024),m(n,{class:"desc"},{default:u(()=>[m(n,{class:"desc-item"},{default:u(()=>[m(n,{class:"desc-item__title"},{default:u(()=>[I(A(e.$t("规则介绍")),1)]),_:1}),a.condition.salesAmount.checked?(f(),t(n,{key:0},{default:u(()=>[I(A(a.condition.salesAmount.title+"满"||e.$t("推广金额满"))+" "+A(a.condition.salesAmount.value)+" "+A(a.condition.salesAmount.unit||p(R)),1)]),_:2},1024)):y("",!0),a.condition.salesInviteUsers.checked?(f(),t(n,{key:1},{default:u(()=>[I(A(a.condition.salesInviteUsers.title+"满"||e.$t("发展客户数满"))+" "+A(a.condition.salesInviteUsers.value)+" "+A(a.condition.salesInviteUsers.unit||e.$t("人")),1)]),_:2},1024)):y("",!0),a.condition.selfBuyAmount.checked?(f(),t(n,{key:2},{default:u(()=>[I(A(a.condition.selfBuyAmount.title+"满"||e.$t("自购金额满"))+" "+A(a.condition.selfBuyAmount.value)+" "+A(a.condition.selfBuyAmount.unit||p(R)),1)]),_:2},1024)):y("",!0)]),_:2},1024),m(n,{class:"desc-item"},{default:u(()=>[m(n,{class:"desc-item__title"},{default:u(()=>[I(A(e.$t("权益介绍")),1)]),_:1}),m(n,null,{default:u(()=>[I(A(e.$t("推广佣金比为"))+A(a.rate)+"%",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):y("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-85fb0d39"]]);export{C as default};

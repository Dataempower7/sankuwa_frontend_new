import{d as a,L as e,l as s,az as l,Y as t,r,n as c,s as i,c as o,w as u,C as n,F as d,a9 as m,G as p,b as f,e as v,a as _,i as h,J as g,K as y,P as b,Z as x,$ as j,k as C,h as k,t as O,a0 as P,f as w,H as N,X as z,_ as I}from"./index-BZxHr1FI.js";import{_ as T}from"./tig-image.CzXKqALH.js";import{_ as F}from"./format-price.BrXrBVy6.js";import{e as S,T as $}from"./tig-layout.DTz8E-sj.js";import{s as H}from"./searchInput.DFMcO208.js";import{e as V}from"./empty.XcpMjUhE.js";import{_ as G}from"./share.vue_vue_type_script_setup_true_lang.BQPri9bm.js";import{a as K}from"./salesman.BFgersdl.js";import"./currency.Dn5A4d7X.js";import"./tig-qrcode.yuxkYAxV.js";import"./tig-fixed-placeholder.BDsbIjoZ.js";import"./useCurrency.293Veihs.js";const M=I(a({__name:"list",setup(a){m(a=>({"7cc2ba7a":p(M)+"px","5d72a7a8":p(A)+"px","04fcd1b0":p(U)+"px","1d9f0820":p(q)}));const{t:I}=e();s(),l();const{height:M,contentHeight:U,contentWidth:q,statusBarHeight:A}=S(60),B=t({productName:"",sortField:"addTime",sortOrder:"desc",page:1,pageSize:15}),J=r(0),L=r("addTime"),W=r([{label:"最新",value:"addTime"},{label:"销量",value:"virtualSales"},{label:"价格",value:"productPrice",sortOrder:"desc"}]),X=()=>{B.page=1,B.sortOrder="desc",E.value=[]},Y=()=>{B.productName="",X(),Q()},Z=a=>{X(),Q()},D=r(!1),E=r([]),Q=async()=>{D.value=!0;try{const a=await K(B);E.value=[...E.value,...a.records],J.value=a.total}catch(a){console.error(a)}finally{D.value=!1}},R=r({}),aa=r(!1);return c(()=>{Q()}),i(()=>{B.page<Math.ceil(J.value/B.pageSize)&&(B.page++,Q())}),(a,e)=>{const s=h,l=C,t=n(d("tig-image"),T),r=n(d("format-price"),F),c=w,i=n(d("tig-layout"),$);return f(),o(i,null,{default:u(()=>[v(s,{class:"sticky"},{default:u(()=>[v(s,{class:"salesman-menu"},{default:u(()=>[v(s,{class:"search-box"},{default:u(()=>[v(s,{class:"status-bar"}),v(s,{class:"search-input-box"},{default:u(()=>[v(s,{class:"input"},{default:u(()=>[v(H,{modelValue:B.productName,"onUpdate:modelValue":e[0]||(e[0]=a=>B.productName=a),style:{width:"100%"},onConfirm:Z,onClear:Y},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(s,{class:"salesman-content"},{default:u(()=>[(f(!0),g(y,null,b(W.value,(e,t)=>(f(),o(s,{key:t,class:x(["salesman-item",{active:L.value===e.value}]),onClick:a=>(a=>{if(X(),"productPrice"==a.value)a.sortOrder="desc"===a.sortOrder?"asc":"desc",B.sortOrder=a.sortOrder;else if(a.value===B.sortField)return;L.value=a.value,B.sortField=a.value,Q()})(e)},{default:u(()=>[v(l,null,{default:u(()=>[k(O(a.$t(e.label)),1)]),_:2},1024),j(v(s,{class:"price-ico-box flex flex-column"},{default:u(()=>[v(l,{class:x(["iconfont-h5 icon-shangjiantou price-icon",{order:"productPrice"===L.value&&"asc"===e.sortOrder}])},null,8,["class"]),v(l,{class:x(["iconfont-h5 icon-xiajiantou price-icon",{order:"productPrice"===L.value&&"desc"===e.sortOrder}])},null,8,["class"])]),_:2},1536),[[P,"productPrice"===e.value]])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),v(s,{class:"salesman-list"},{default:u(()=>[(f(!0),g(y,null,b(E.value,e=>(f(),o(s,{key:e.productId,class:"salesman-list-item"},{default:u(()=>[v(s,{class:"salesman-item-content",onClick:a=>{return s=`/pages/salesman/detail?id=${e.productId}`,void z({url:s});var s}},{default:u(()=>[v(s,{class:"salesman-item-img"},{default:u(()=>[v(t,{src:e.picThumb},null,8,["src"])]),_:2},1024),v(s,{class:"salesman-item-text"},{default:u(()=>[v(s,{class:"line2 name"},{default:u(()=>[k(O(e.productName),1)]),_:2},1024),v(s,{class:"price"},{default:u(()=>[v(r,{"currency-style":{"font-size":"21rpx"},"price-data":e.productPrice},null,8,["price-data"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),v(s,{class:"salesman-item-btn"},{default:u(()=>[v(s,{class:"salesman-item-btn-content",onClick:a=>{return s=e,aa.value=!0,void(R.value=s);var s}},{default:u(()=>[v(c,{class:"salesman-item-btn-icon",src:p(N)("salesman/shareIcon.png")},null,8,["src"]),v(s,{class:"salesman-item-btn-text"},{default:u(()=>[k(O(a.$t(Number(e.finalCommissionPrice)>0?"预计可赚":"立即分享"))+" ",1),Number(e.finalCommissionPrice)>0?(f(),o(r,{key:0,"price-data":e.finalCommissionPrice},null,8,["price-data"])):_("",!0)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),D.value||0!==J.value?_("",!0):(f(),o(V,{key:0,styles:{width:"320rpx",height:"320rpx"}})),v(G,{"show-share-card":aa.value,"onUpdate:showShareCard":e[1]||(e[1]=a=>aa.value=a),"current-data":R.value},null,8,["show-share-card","current-data"])]),_:1})}}}),[["__scopeId","data-v-29022633"]]);export{M as default};

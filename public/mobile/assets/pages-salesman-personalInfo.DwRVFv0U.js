import{d as a,L as e,Y as t,r as l,v as s,c as o,w as r,ac as n,ad as i,C as m,F as d,bX as f,bJ as u,bY as c,b,e as p,i as _,h as g,t as h,as as $,au as v,_ as y}from"./index-BZxHr1FI.js";import{_ as k}from"./tig-image.CzXKqALH.js";import{T as w,a as j}from"./tig-layout.DTz8E-sj.js";import{T as V}from"./tig-fixed-placeholder.BDsbIjoZ.js";import{g as x,u as R}from"./salesmanPersonal.Cu55Mdd1.js";const T=y(a({__name:"personalInfo",setup(a){const{t:y}=e(),T=t({nickname:"",cardname:"",wechatname:"",mobile:""}),z={mobile:{type:"string",required:!0,message:y("请输入手机号"),trigger:["blur","change"]}},C=l(),I=()=>{C.value.validate().then(()=>{O()}).catch(()=>{uni.$u.toast(y("保存失败"))})},O=async()=>{try{await R({...T}),uni.$u.toast(y("保存成功")),setTimeout(()=>{$({success:function(a){v("refreshData")}})},1e3)}catch(a){console.error("表单错误信息：",a),uni.$u.toast(a.message)}};return s(()=>{(async()=>{n({title:y("加载中")});try{const a=await x();Object.assign(T,a)}catch(a){console.error(a)}finally{i()}})()}),(a,e)=>{const t=_,l=m(d("tig-image"),k),s=m(d("up-form-item"),f),n=m(d("up-input"),u),i=m(d("up-form"),c),$=m(d("tig-button"),j),v=m(d("tig-fixed-placeholder"),V),y=m(d("tig-layout"),w);return b(),o(y,{"need-safe-top":!0,"safe-top-bg-color":"#f5f5f5"},{default:r(()=>[p(i,{ref_key:"formRef",ref:C,"label-position":"left",model:T,rules:z},{default:r(()=>[p(t,{class:"personal-title"},{default:r(()=>[g(h(a.$t("个人信息")),1)]),_:1}),p(t,{class:"personal-info"},{default:r(()=>[p(s,{ref:"itemRef",label:a.$t("头像"),"label-width":"100","border-bottom":!0},{default:r(()=>[p(t,{class:"salesman-avatar"},{default:r(()=>[p(l,{class:"salesman-avatar__img salesman-avatar--round salesman-avatar__img--big",src:T.avatar},null,8,["src"])]),_:1})]),_:1},8,["label"]),p(s,{ref:"itemRef",label:a.$t("昵称"),"label-width":"100",prop:"nickname","border-bottom":!0},{default:r(()=>[p(n,{modelValue:T.nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>T.nickname=a),border:"none",placeholder:a.$t("请输入昵称"),"font-size":"14"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),p(t,{class:"personal-title"},{default:r(()=>[g(h(a.$t("联系方式")),1)]),_:1}),p(t,{class:"personal-info"},{default:r(()=>[p(s,{ref:"itemRef",label:a.$t("手机号"),"label-width":"100",prop:"mobile","border-bottom":!0},{default:r(()=>[p(n,{modelValue:T.mobile,"onUpdate:modelValue":e[1]||(e[1]=a=>T.mobile=a),border:"none",placeholder:a.$t("请输入手机号"),"font-size":"14"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),p(v,{"background-color":"#fff"},{default:r(()=>[p(t,{class:"btn-box"},{default:r(()=>[p($,{class:"salesman-btn",onClick:I},{default:r(()=>[g(h(a.$t("保存")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-b1a856ce"]]);export{T as default};

import{d as a,K as e,W as t,r as l,s,c as o,w as r,aa as n,ab as i,B as m,E as f,bU as d,bF as u,bV as c,o as b,g as p,i as _,f as g,t as h,ar as $,at as y,_ as v}from"./index-DDAlCzEE.js";import{_ as k}from"./tig-image.CxOKkXKh.js";import{_ as w,a as V}from"./tig-layout.Dp_86RM-.js";import{_ as j}from"./tig-fixed-placeholder.BwC6eLvS.js";import{g as x,u as R}from"./salesmanPersonal.BFHZhbQS.js";const U=v(a({__name:"personalInfo",setup(a){const{t:v}=e(),U=t({nickname:"",cardname:"",wechatname:"",mobile:""}),z={mobile:{type:"string",required:!0,message:v("请输入手机号"),trigger:["blur","change"]}},B=l(),E=()=>{B.value.validate().then(()=>{I()}).catch(()=>{uni.$u.toast(v("保存失败"))})},I=async()=>{try{await R({...U}),uni.$u.toast(v("保存成功")),setTimeout(()=>{$({success:function(a){y("refreshData")}})},1e3)}catch(a){console.error("表单错误信息：",a),uni.$u.toast(a.message)}};return s(()=>{(async()=>{n({title:v("加载中")});try{const a=await x();Object.assign(U,a)}catch(a){console.error(a)}finally{i()}})()}),(a,e)=>{const t=_,l=m(f("tig-image"),k),s=m(f("up-form-item"),d),n=m(f("up-input"),u),i=m(f("up-form"),c),$=m(f("tig-button"),V),y=m(f("tig-fixed-placeholder"),j),v=m(f("tig-layout"),w);return b(),o(v,{"need-safe-top":!0,"safe-top-bg-color":"#f5f5f5"},{default:r(()=>[p(i,{ref_key:"formRef",ref:B,"label-position":"left",model:U,rules:z},{default:r(()=>[p(t,{class:"personal-title"},{default:r(()=>[g(h(a.$t("个人信息")),1)]),_:1}),p(t,{class:"personal-info"},{default:r(()=>[p(s,{ref:"itemRef",label:a.$t("头像"),"label-width":"100","border-bottom":!0},{default:r(()=>[p(t,{class:"salesman-avatar"},{default:r(()=>[p(l,{class:"salesman-avatar__img salesman-avatar--round salesman-avatar__img--big",src:U.avatar},null,8,["src"])]),_:1})]),_:1},8,["label"]),p(s,{ref:"itemRef",label:a.$t("昵称"),"label-width":"100",prop:"nickname","border-bottom":!0},{default:r(()=>[p(n,{modelValue:U.nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>U.nickname=a),border:"none",placeholder:a.$t("请输入昵称"),"font-size":"14"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),p(t,{class:"personal-title"},{default:r(()=>[g(h(a.$t("联系方式")),1)]),_:1}),p(t,{class:"personal-info"},{default:r(()=>[p(s,{ref:"itemRef",label:a.$t("手机号"),"label-width":"100",prop:"mobile","border-bottom":!0},{default:r(()=>[p(n,{modelValue:U.mobile,"onUpdate:modelValue":e[1]||(e[1]=a=>U.mobile=a),border:"none",placeholder:a.$t("请输入手机号"),"font-size":"14"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),p(y,{"background-color":"#fff"},{default:r(()=>[p(t,{class:"btn-box"},{default:r(()=>[p($,{class:"salesman-btn",onClick:E},{default:r(()=>[g(h(a.$t("保存")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-b1a856ce"]]);export{U as default};

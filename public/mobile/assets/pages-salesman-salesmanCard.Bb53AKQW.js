import{d as a,r as s,W as e,l as t,P as l,q as n,c as o,w as c,i,B as r,E as d,o as u,g as m,f,t as p,a as g,I as _,J as v,O as h,h as C,X as x,n as b,S as y,_ as k}from"./index-DDAlCzEE.js";import{_ as j}from"./tig-image.CxOKkXKh.js";import{_ as I}from"./format-price.9n-LYbxy.js";import{_ as w}from"./tig-fixed-placeholder.BwC6eLvS.js";import{_ as $}from"./tig-layout.Dp_86RM-.js";import{a as S,c as z}from"./salesman.Dh91F_fA.js";import{e as B}from"./empty.CzmkhYfv.js";const E=k(a({__name:"salesmanCard",setup(a){const k=s({}),E=s([]),N=e({page:1,pageSize:15}),P=s(0),q=s(null),D=[{name:"名片",icon:"icon-mingpian",url:""},{name:"商城",icon:"icon-shangcheng-",url:"/pages/index/index"},{name:"我的",icon:"icon-wode",url:"/pages/user/index"}],J=s(!1),M=async()=>{J.value=!0;try{const a=await S(N);E.value=[...E.value,...a.records],P.value=a.total}catch(a){console.error(a)}finally{J.value=!1}};return t(a=>{a&&a.salesmanId&&(q.value=Number(a.salesmanId),l("bindSalesmanId",q.value),(async()=>{try{const a=await z(q.value);k.value=a}catch(a){console.error(a)}})()),M()}),n(()=>{N.page<Math.ceil(P.value/N.pageSize)&&(N.page++,M())}),(a,s)=>{const e=r(d("tig-image"),j),t=i,l=r(d("format-price"),I),n=C,S=r(d("tig-fixed-placeholder"),w),z=r(d("tig-layout"),$);return u(),o(t,null,{default:c(()=>[m(z,{"need-safe-top":!0,"safe-top-bg-color":"#f5f5f5"},{default:c(()=>[m(t,{class:"salesmanCard-top"},{default:c(()=>[m(t,{class:"salesmanCard-top-content"},{default:c(()=>[m(t,{class:"salesmanCard-top-left"},{default:c(()=>[m(t,{class:"salesmanCard-top-left-img"},{default:c(()=>[m(e,{src:k.value.avatar},null,8,["src"])]),_:1})]),_:1}),m(t,{class:"salesmanCard-top-right"},{default:c(()=>[m(t,{class:"salesmanCard-top-right-mobile"},{default:c(()=>[f(p(k.value.mobile),1)]),_:1}),m(t,{class:"salesmanCard-top-right-name"},{default:c(()=>[f(p(k.value.nickname),1)]),_:1})]),_:1})]),_:1})]),_:1}),m(t,{class:"salesmanCard-list"},{default:c(()=>[m(t,{class:"salesmanCard-list-title"},{default:c(()=>[f(p(a.$t("推荐商品")),1)]),_:1}),m(t,{class:"salesmanCard-list-content"},{default:c(()=>[(u(!0),_(v,null,h(E.value,a=>(u(),o(t,{key:a.productId,class:"salesmanCard-list-content-item",onClick:s=>(a=>{let s=q.value?`/pages/product/index?id=${a}&salesmanId=${q.value}`:`/pages/product/index?id=${a}`;b({url:s})})(a.productId)},{default:c(()=>[m(t,{class:"salesmanCard-list-content-item-img"},{default:c(()=>[m(e,{src:a.picUrl},null,8,["src"])]),_:2},1024),m(t,{class:"content-item-text"},{default:c(()=>[m(t,{class:"item-text-name line2"},{default:c(()=>[f(p(a.productName),1)]),_:2},1024),m(t,{class:"item-text-price"},{default:c(()=>[m(l,{"price-data":a.productPrice},null,8,["price-data"]),m(n,{class:"iconfont-h5 icon-gouwuche3"})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),J.value||0!==P.value?g("",!0):(u(),o(B,{key:0,styles:{width:"320rpx",height:"320rpx"}}))]),_:1}),m(S,{"background-color":"#fff"},{default:c(()=>[m(t,{class:"bottom-btns"},{default:c(()=>[(u(),_(v,null,h(D,(s,e)=>m(t,{key:e,class:x(["bottom-btns-item",{active:0===e}]),onClick:a=>{var e;(e=s.url)&&y({url:e})}},{default:c(()=>[m(t,{class:x(["bottom-btns-item-icon iconfont-h5",s.icon])},null,8,["class"]),m(t,{class:"bottom-btns-item-text"},{default:c(()=>[f(p(a.$t(s.name)),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-db7e698c"]]);export{E as default};

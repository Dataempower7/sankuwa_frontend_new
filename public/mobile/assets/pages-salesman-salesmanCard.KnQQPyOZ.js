import{d as a,r as s,Y as e,n as t,Q as l,s as n,c as o,w as c,i as r,C as i,F as d,b as u,e as m,h as p,t as f,a as g,J as _,K as v,P as C,k as h,Z as b,X as x,j as y,_ as k}from"./index-BZxHr1FI.js";import{_ as j}from"./tig-image.CzXKqALH.js";import{_ as I}from"./format-price.BrXrBVy6.js";import{T as w}from"./tig-fixed-placeholder.BDsbIjoZ.js";import{T as $}from"./tig-layout.DTz8E-sj.js";import{a as N,c as S}from"./salesman.BFgersdl.js";import{e as z}from"./empty.XcpMjUhE.js";import"./currency.Dn5A4d7X.js";const K=k(a({__name:"salesmanCard",setup(a){const k=s({}),K=s([]),M=e({page:1,pageSize:15}),P=s(0),T=s(null),F=[{name:"名片",icon:"icon-mingpian",url:""},{name:"商城",icon:"icon-shangcheng-",url:"/pages/index/index"},{name:"我的",icon:"icon-wode",url:"/pages/user/index"}],G=s(!1),J=async()=>{G.value=!0;try{const a=await N(M);K.value=[...K.value,...a.records],P.value=a.total}catch(a){console.error(a)}finally{G.value=!1}};return t(a=>{a&&a.salesmanId&&(T.value=Number(a.salesmanId),l("bindSalesmanId",T.value),(async()=>{try{const a=await S(T.value);k.value=a}catch(a){console.error(a)}})()),J()}),n(()=>{M.page<Math.ceil(P.value/M.pageSize)&&(M.page++,J())}),(a,s)=>{const e=i(d("tig-image"),j),t=r,l=i(d("format-price"),I),n=h,N=i(d("tig-fixed-placeholder"),w),S=i(d("tig-layout"),$);return u(),o(t,null,{default:c(()=>[m(S,{"need-safe-top":!0,"safe-top-bg-color":"#f5f5f5"},{default:c(()=>[m(t,{class:"salesmanCard-top"},{default:c(()=>[m(t,{class:"salesmanCard-top-content"},{default:c(()=>[m(t,{class:"salesmanCard-top-left"},{default:c(()=>[m(t,{class:"salesmanCard-top-left-img"},{default:c(()=>[m(e,{src:k.value.avatar},null,8,["src"])]),_:1})]),_:1}),m(t,{class:"salesmanCard-top-right"},{default:c(()=>[m(t,{class:"salesmanCard-top-right-mobile"},{default:c(()=>[p(f(k.value.mobile),1)]),_:1}),m(t,{class:"salesmanCard-top-right-name"},{default:c(()=>[p(f(k.value.nickname),1)]),_:1})]),_:1})]),_:1})]),_:1}),m(t,{class:"salesmanCard-list"},{default:c(()=>[m(t,{class:"salesmanCard-list-title"},{default:c(()=>[p(f(a.$t("推荐商品")),1)]),_:1}),m(t,{class:"salesmanCard-list-content"},{default:c(()=>[(u(!0),_(v,null,C(K.value,a=>(u(),o(t,{key:a.productId,class:"salesmanCard-list-content-item",onClick:s=>(a=>{let s=T.value?`/pages/product/index?id=${a}&salesmanId=${T.value}`:`/pages/product/index?id=${a}`;x({url:s})})(a.productId)},{default:c(()=>[m(t,{class:"salesmanCard-list-content-item-img"},{default:c(()=>[m(e,{src:a.picUrl},null,8,["src"])]),_:2},1024),m(t,{class:"content-item-text"},{default:c(()=>[m(t,{class:"item-text-name line2"},{default:c(()=>[p(f(a.productName),1)]),_:2},1024),m(t,{class:"item-text-price"},{default:c(()=>[m(l,{"price-data":a.productPrice},null,8,["price-data"]),m(n,{class:"iconfont-h5 icon-gouwuche3"})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),G.value||0!==P.value?g("",!0):(u(),o(z,{key:0,styles:{width:"320rpx",height:"320rpx"}}))]),_:1}),m(N,{"background-color":"#fff"},{default:c(()=>[m(t,{class:"bottom-btns"},{default:c(()=>[(u(),_(v,null,C(F,(s,e)=>m(t,{key:e,class:b(["bottom-btns-item",{active:0===e}]),onClick:a=>{var e;(e=s.url)&&y({url:e})}},{default:c(()=>[m(t,{class:b(["bottom-btns-item-icon iconfont-h5",s.icon])},null,8,["class"]),m(t,{class:"bottom-btns-item-text"},{default:c(()=>[p(f(a.$t(s.name)),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-db7e698c"]]);export{K as default};

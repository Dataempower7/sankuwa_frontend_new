import{d as a,Y as s,r as e,n as t,c as l,w as r,ac as o,ad as i,C as u,F as c,b as _,e as d,i as n,h as p,$ as f,Z as g,a0 as m,_ as v}from"./index-BZxHr1FI.js";import{_ as y}from"./tig-image.CzXKqALH.js";import{T as h,a as w}from"./tig-layout.DTz8E-sj.js";import{_ as x}from"./tig-upload.vue_vue_type_script_setup_true_lang.CWT6vvZi.js";import{T as b}from"./tig-fixed-placeholder.BDsbIjoZ.js";import{g as j,u as k}from"./salesmanPersonal.Cu55Mdd1.js";const q=v(a({__name:"upQrcode",setup(a){const v=s({qrcode:""}),q=e(!1),T=()=>{q.value=!0,C()},C=async()=>{try{await k({...v}),setTimeout(()=>{q.value=!1},1e3)}catch(a){console.error("表单错误信息：",a),uni.$u.toast(a.message)}};return t(()=>{(async()=>{o({title:"加载中"});try{const a=await j();Object.assign(v,a)}catch(a){console.error(a)}finally{i()}})()}),(a,s)=>{const e=n,t=u(c("tig-image"),y),o=u(c("tig-button"),w),i=u(c("tig-upload"),x),j=u(c("tig-fixed-placeholder"),b),k=u(c("tig-layout"),h);return _(),l(k,null,{default:r(()=>[d(e,{class:"qrcode-wrap"},{default:r(()=>[d(e,{class:"desc"},{default:r(()=>[p("请尽快上传微信二维码，方便客户加你微信联系哦")]),_:1}),d(e,{class:"tips"},{default:r(()=>[p("（温馨提示：建议上传正方形、默认黑白样式二维码，方便客户查看）")]),_:1}),v.avatar?(_(),l(e,{key:0,class:"preview"},{default:r(()=>[f(d(e,{class:g(["preview__overlay",{preview__overlay_loading:!0===q.value}])},{default:r(()=>[p("二维码加载中...")]),_:1},8,["class"]),[[m,!0===q.value]]),d(e,{class:"preview__overlay"},{default:r(()=>[d(t,{src:v.avatar,class:"van-image__img"},null,8,["src"])]),_:1}),d(e,{class:"van-image",style:{width:"560rpx",height:"688rpx"}})]),_:1})):(_(),l(e,{key:1,class:"preview"},{default:r(()=>[f(d(e,{class:"preview__overlay"},{default:r(()=>[p("二维码加载中...")]),_:1},512),[[m,!0===q.value]]),d(e,{class:"van-image",style:{width:"560rpx",height:"688rpx"}})]),_:1})),d(j,{"background-color":"#fff"},{default:r(()=>[d(i,{"request-url":"user/user/uploadImg",onChange:T},{default:r(()=>[d(e,{class:"btn-box"},{default:r(()=>[d(o,{class:"salesman-btn"},{default:r(()=>[p("上传二维码")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-2a02d99a"]]);export{q as default};

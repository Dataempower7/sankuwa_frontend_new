import{d as a,L as e,r as l,n as s,M as u,c as t,w as o,C as c,F as r,b as i,e as n,i as v,a as d,k as h,N as p,h as f,t as _,O as y,J as g,K as k,P as m,Q as $,R as x,S as b,T as w,j as C,U as I,_ as S}from"./index-BZxHr1FI.js";import{T}from"./tig-layout.DTz8E-sj.js";const j=S(a({__name:"index",setup(a){const{t:S}=e(),j=l("搜索商品"),H=l("点击搜索商品"),V=l(""),W=l([]),G=l(""),K=l(!1),P=l(""),U=l("searchHistory");s(a=>{a&&(a.shopId&&"undefined"!=a.shopId&&(G.value=a.shopId,j.value="店铺搜索"),P.value=a.redirectPath,U.value=a.searchHistoryKey||"searchHistory",j.value=a.navbarTitle||"搜索商品",H.value=a.placeholder||"点击搜索商品",K.value=a.isSwitchTab),u(U.value)&&(W.value=u(U.value))});const B=()=>{if(V.value)W.value.unshift(V.value),W.value=[...new Set(W.value)],W.value.length>10&&W.value.splice(10,W.value.length-10),$(U.value,W.value),J(V.value);else{if("/pages/buyerShow/index"===P.value||P.value.includes("/pages/groupon/list")||"/pages/groupon/mylist"===P.value)return void J(V.value);x({title:S("请输入搜索内容"),icon:"none"})}},F=()=>{W.value=[],b(U.value)},J=a=>{if(K.value){let e=`${P.value}${P.value.includes("?")?"&":"?"}keyWords=${a}`;return void w({url:e})}if(P.value){let e=`${P.value}${P.value.includes("?")?"&":"?"}keyWords=${a}`;return void C({url:e})}let e=`/pages/search/result?keyWords=${a}`;G.value&&(e+=`&shopId=${G.value}`),C({url:e})},L=()=>{P.value?C({url:P.value}):I({url:"/pages/index/index"})};return(a,e)=>{const l=h,s=p,u=v,$=c(r("tig-layout"),T);return i(),t($,{title:j.value,"custom-back":!0,onBack:L},{default:o(()=>[n(u,{class:"searchGood"},{default:o(()=>[n(u,{class:"search-warp acea-row"},{default:o(()=>[n(u,{class:"search-input acea-row"},{default:o(()=>[n(l,{class:"iconfont icon-neirongsousuo"}),n(s,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),focus:!0,type:"text",placeholder:a.$t(H.value),"placeholder-class":"placeholder",onConfirm:B},null,8,["modelValue","placeholder"])]),_:1}),n(u,{class:"bnt",onClick:B},{default:o(()=>[f(_(a.$t("搜索")),1)]),_:1})]),_:1}),W.value.length?(i(),t(u,{key:0,class:"search_init_box"},{default:o(()=>[n(u,{class:"search_history_box"},{default:o(()=>[n(u,{class:"title"},{default:o(()=>[f(_(a.$t("搜索历史"))+" ",1),n(u,{class:"clear_history",onClick:y(F,["stop"])},{default:o(()=>[n(l,{class:"iconfont-h5 icon-shanchu"})]),_:1})]),_:1}),n(u,{class:"list acea-row"},{default:o(()=>[(i(!0),g(k,null,m(W.value,(a,e)=>(i(),t(u,{key:e,class:"item line1",onClick:e=>J(a)},{default:o(()=>[f(_(a),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})):d("",!0)]),_:1})]),_:1},8,["title"])}}}),[["__scopeId","data-v-56228fc7"]]);export{j as default};

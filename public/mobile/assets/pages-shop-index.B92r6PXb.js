import{d as e,L as o,m as l,ae as d,C as u,F as s,c as n,b as a,i as t,Z as i,w as m,a as r,e as c,I as p,k as h,N as x,aL as y,t as f,h as v,R as _,ag as g,X as I,_ as k,J as w,P as S,K as b,r as $,n as j}from"./index-BZxHr1FI.js";import{T as C}from"./tig-layout.DTz8E-sj.js";import{s as D,a as L,b as A}from"./shop.CnQQ4qvJ.js";import{n as N,t as P,i as R,a as z,b as T,w as M,d as O,e as U,g as q,p as B,h as F,j as G,k as H,S as K,s as J,l as X,m as Z,o as E,q as Q,r as V,u as W,v as Y,x as ee,y as oe,z as le}from"./index.D3BfwkNA.js";import{_ as de}from"./tig-image.CzXKqALH.js";import"./format-price.BrXrBVy6.js";import"./currency.Dn5A4d7X.js";import"./home.CvZhmv3n.js";import"./tig-fixed-placeholder.BDsbIjoZ.js";const ue=k(e({__name:"index",props:{module:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:k}){const{t:w}=o(),S=e,b=k,$=l(()=>{let e=[];for(let o=1;o<=10;o++)e.push(`https://lyecs2.oss-cn-zhangjiakou.aliyuncs.com/static/mini/bg/${o}.jpg`);return e}),j=l(()=>{let e;return e=0==S.module.backgroundDefault&&S.module.customPic.picUrl?d(S.module.customPic.picUrl):$.value[S.module.backgroundDefault-1],e}),C=l(()=>S.shopInfo.collectShop?w("已收藏"):w("收藏")),L=()=>{S.shopInfo.collectShop?N():A()},A=async()=>{try{await D({shopId:S.shopInfo.shopId});_({title:w("收藏成功")}),b("refreshShopDetail",S.shopInfo.shopId)}catch(e){console.error(e)}},N=async()=>{g({title:w("提示"),content:w("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await D({shopId:S.shopInfo.shopId});_({title:w("操作成功")}),b("refreshShopDetail",S.shopInfo.shopId)}catch(o){console.error(o)}}})},P=()=>{I({url:`/pages/search/index?shopId=${S.shopInfo.shopId}`})},R=()=>{I({url:`/pages/search/result?&shopId=${S.shopInfo.shopId}`})},z=()=>{I({url:`/pages/shop/category?shopId=${S.shopInfo.shopId}`})};return(e,o)=>{const l=t,d=h,_=x,g=u(s("tig-image"),de);return a(),n(l,{class:i("module-ad-con module-store_info ad-store_style__"+e.module.style)},{default:m(()=>[e.module?(a(),n(l,{key:0,class:"module-ad-content"},{default:m(()=>[c(l,{class:"cap-store-banner"},{default:m(()=>[c(l,{class:"cap-store-banner__cover",style:p("background-image: url("+j.value+");")},{default:m(()=>[c(l,{class:"cap-store-banner__cover-mask"})]),_:1},8,["style"]),c(l,{class:"cap-store-nav-warp"},{default:m(()=>[c(l,{class:"cap-store-nav-con"},{default:m(()=>[c(l,{class:"store-search-con"},{default:m(()=>[c(l,{id:"search",class:"flex align-center",onClick:P},{default:m(()=>[c(d,{class:"iconfont-h5 icon-sousuo"}),c(_,{type:"text",class:"search-input",placeholder:e.$t("搜商品")},null,8,["placeholder"])]),_:1})]),_:1}),c(l,{class:"store-nav-con"},{default:m(()=>[c(l,{class:"store-nav-item active"},{default:m(()=>[y("a",{class:"store-nav-item-a"},f(e.$t("精选")),1)]),_:1}),c(l,{class:"store-nav-item"},{default:m(()=>[y("a",{class:"store-nav-item-a",onClick:R},f(e.$t("商品")),1)]),_:1}),c(l,{class:"store-nav-item"},{default:m(()=>[y("a",{class:"store-nav-item-a",onClick:z},f(e.$t("分类")),1)]),_:1})]),_:1})]),_:1})]),_:1}),c(l,{class:"cap-store-banner__inner"},{default:m(()=>[c(l,{class:"cap-store-banner__content"},{default:m(()=>[c(l,{class:"cap-store-banner__logo"},{default:m(()=>[c(g,{src:e.shopInfo.shopLogo,mode:"widthFix"},null,8,["src"])]),_:1}),c(l,{class:"cap-store-banner__right-content"},{default:m(()=>[c(l,{class:"cap-store-banner__right-content-title--middle"},{default:m(()=>[v(f(e.shopInfo.shopTitle),1)]),_:1}),c(l,{class:"cap-store-banner__sum-content"},{default:m(()=>[c(l,{class:"cap-store-banner__sum-content-total"},{default:m(()=>[v(f(e.$t("全部商品"))+" "+f(e.shopInfo.productCount),1)]),_:1}),c(l,{class:"cap-store-banner__sum-content-total"},{default:m(()=>[v(f(e.$t("新品"))+" "+f(e.shopInfo.newProductCount),1)]),_:1})]),_:1})]),_:1}),c(l,{class:"store-collect-button-con",onClick:L},{default:m(()=>[c(l,{class:"store-collect-button"},{default:m(()=>[v(f(C.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0)]),_:1},8,["class"])}}}),[["__scopeId","data-v-cf2f3efb"]]),se=k(e({__name:"shopModules",props:{modules:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:o}){const l=e,d=o;return(e,o)=>{const u=t;return a(),n(u,null,{default:m(()=>[(a(!0),w(b,null,S(e.modules,(e,u)=>(a(),w(b,{key:u},["notice"==e.type&&(null==e?void 0:e.isShow)?(a(),n(N,{key:0,module:e.module},null,8,["module"])):r("",!0),"titleAd"==e.type&&(null==e?void 0:e.isShow)?(a(),n(P,{key:1,module:e.module},null,8,["module"])):r("",!0),"imageAd"==e.type&&(null==e?void 0:e.isShow)?(a(),n(R,{key:2,module:e.module},null,8,["module"])):r("",!0),"imageNav"==e.type&&(null==e?void 0:e.isShow)?(a(),n(z,{key:3,module:e.module},null,8,["module"])):r("",!0),"coupon"==e.type?(a(),n(T,{key:4,module:e.module,"shop-id":l.shopInfo.shopId},null,8,["module","shop-id"])):r("",!0),"whiteBlank"==e.type&&(null==e?void 0:e.isShow)?(a(),n(M,{key:5,module:e.module},null,8,["module"])):r("",!0),"whiteLine"==e.type&&(null==e?void 0:e.isShow)?(a(),n(O,{key:6,module:e.module},null,8,["module"])):r("",!0),"imageSquareAd"==e.type&&(null==e?void 0:e.isShow)?(a(),n(U,{key:7,module:e.module},null,8,["module"])):r("",!0),"imageHotarea"==e.type&&(null==e?void 0:e.isShow)?(a(),n(q,{key:8,module:e.module},null,8,["module"])):r("",!0),"shopInfo"==e.type&&(null==e?void 0:e.isShow)?(a(),w(b,{key:9},[e.isShow?(a(),n(ue,{key:0,module:e.module,"shop-info":l.shopInfo,onRefreshShopDetail:o[0]||(o[0]=e=>d("refreshShopDetail"))},null,8,["module","shop-info"])):r("",!0)],64)):r("",!0),"product"==e.type&&(null==e?void 0:e.isShow)?(a(),n(B,{key:10,"shop-id":l.shopInfo.shopId,module:e.module,"module-index":e.moduleIndex},null,8,["shop-id","module","module-index"])):r("",!0),"categoryNav"==e.type&&(null==e?void 0:e.isShow)?(a(),n(F,{key:11,module:e.module,"module-index":e.moduleIndex},null,8,["module","module-index"])):r("",!0),"categoryNavA2"==e.type&&(null==e?void 0:e.isShow)?(a(),n(G,{key:12,module:e.module,"module-index":e.moduleIndex},null,8,["module","module-index"])):r("",!0),"banner"==e.type&&(null==e?void 0:e.isShow)?(a(),n(H,{key:13,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"slidingImage"==e.type&&(null==e?void 0:e.isShow)?(a(),n(K,{key:14,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"slideLargeImage"==e.type&&(null==e?void 0:e.isShow)?(a(),n(J,{key:15,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"comboSuggestions"==e.type&&(null==e?void 0:e.isShow)?(a(),n(X,{key:16,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"noticeA2"==e.type&&(null==e?void 0:e.isShow)?(a(),n(Z,{key:17,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"specialOffer"==e.type&&(null==e?void 0:e.isShow)?(a(),n(E,{key:18,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"mixedProductDisplay"==e.type&&(null==e?void 0:e.isShow)?(a(),n(Q,{key:19,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"categoryRec"==e.type&&(null==e?void 0:e.isShow)?(a(),n(V,{key:20,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"countdown"==e.type&&(null==e?void 0:e.isShow)?(a(),n(W,{key:21,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"groupSliding"==e.type&&(null==e?void 0:e.isShow)?(a(),n(Y,{key:22,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"productGrouping"==e.type&&(null==e?void 0:e.isShow)?(a(),n(ee,{key:23,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"imageTextComponent"==e.type&&(null==e?void 0:e.isShow)?(a(),n(oe,{key:24,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0),"categoryNavA1"==e.type&&(null==e?void 0:e.isShow)?(a(),n(le,{key:25,module:e.module,"module-index":e.moduleIndex,index:u},null,8,["module","module-index","index"])):r("",!0)],64))),128))]),_:1})}}}),[["__scopeId","data-v-4e2aa613"]]),ne=e({__name:"index",setup(e){const o=$(0);j(e=>{e&&e.shopId&&(o.value=e.shopId,g(),x())});const d=$("店铺详情"),i=$([]),h=$({}),x=async()=>{try{const e=await L(o.value);i.value=e.moduleList,h.value=e.pageModule}catch(e){console.error(e)}},y=l(()=>{var e,o,l;return{"background-color":`${h.value.backgroundColor}`,"background-image":`url("${null==(e=h.value.backgroundImage)?void 0:e.picUrl}")`,"background-size":`${f(null==(o=h.value)?void 0:o.backgroundSize)}`,"background-repeat":`${v(null==(l=h.value)?void 0:l.backgroundRepeat)}`}}),f=e=>({1:"100% auto",2:"auto 100%",3:"100% 100%"}[e]),v=e=>({1:"no-repeat",2:"repeat",3:"repeat-x",4:"repeat-y"}[e]),_=$({}),g=async()=>{try{const e=await A(o.value);_.value=e,d.value=e.shopTitle}catch(e){console.error(e)}};return(e,l)=>{const x=t,f=u(s("tig-layout"),C);return a(),n(f,{title:d.value,"shop-id":o.value,background:h.value.titleBackgroundColor,color:h.value.titleColor},{default:m(()=>[c(x,{class:"decorate-page-window",style:p({...y.value})},{default:m(()=>[Object.keys(_.value).length>0?(a(),n(se,{key:0,modules:i.value,"shop-info":_.value,onRefreshShopDetail:g},null,8,["modules","shop-info"])):r("",!0)]),_:1},8,["style"])]),_:1},8,["title","shop-id","background","color"])}}});export{ne as default};

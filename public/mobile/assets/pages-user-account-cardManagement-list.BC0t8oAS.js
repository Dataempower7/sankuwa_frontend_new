import{d as a,K as t,r as e,W as s,l,am as c,m as u,an as n,c as i,w as o,aa as d,ab as f,B as r,E as _,o as m,g as p,i as y,a as g,I as v,J as x,O as k,X as b,f as h,t as T,h as $,F as w,c7 as C,n as j,ae as I,Q as N,_ as D}from"./index-DDAlCzEE.js";import{_ as M}from"./uni-icons.piUs7f0e.js";import{_ as Q,a as z}from"./uni-swipe-action.tMichUr_.js";import{_ as B}from"./tig-layout.Dp_86RM-.js";import{c as E,e as F}from"./account.CDxjljze.js";const H=D(a({__name:"list",setup(a){const{t:D}=t(),H=[{title:"银行卡",accountType:1},{title:"支付宝",accountType:2},{title:"微信",accountType:3}],J=e(1),K=e(!1),O=s({page:1,accountType:1}),W=e([]),X=async()=>{O.page>1?K.value=!0:d({title:D("加载中")});try{const a=await E({...O});W.value=a.records}catch(a){console.error(a.message)}finally{f(),K.value=!1}},q=()=>{j({url:"/pages/user/account/cardManagement/edit"})},A=async(a,t)=>{try{const e=await F({...a});W.value.splice(t,1),e.message&&N({title:D("操作成功"),icon:"success"})}catch(e){N({title:e.message,icon:"none",duration:1e3})}};return l(()=>{X(),c("refreshData",a=>{J.value=null==a?void 0:a.type,O.accountType=null==a?void 0:a.type,X()})}),u(()=>{n("refreshData")}),(a,t)=>{const e=y,s=$,l=r(_("uni-icons"),M),c=r(_("uni-swipe-action-item"),Q),u=r(_("uni-swipe-action"),z),n=r(_("tig-layout"),B);return m(),i(n,{title:"卡管理"},{default:o(()=>[p(e,{class:"card-main"},{default:o(()=>[p(e,{class:"head-tabs-box"},{default:o(()=>[p(e,{class:"tabs flex align-center justify-between"},{default:o(()=>[p(e,{class:"flex align-end"},{default:o(()=>[(m(),v(x,null,k(H,(t,s)=>p(e,{key:s,class:b(["tab",{active:J.value===t.accountType}]),onClick:a=>(async a=>{a!==J.value&&(J.value=a,O.page=1,O.accountType=a,X())})(t.accountType)},{default:o(()=>[h(T(a.$t(t.title)),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),p(e,{class:"clear-unread flex align-end",onClick:q},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("添加账号")),1)]),_:1}),p(l,{type:"auth",size:"20",color:"#999"})]),_:1})]),_:1})]),_:1}),W.value.length>0?(m(),i(e,{key:0,class:"card-list"},{default:o(()=>[p(u,null,{default:o(()=>[(m(!0),v(x,null,k(W.value,(t,l)=>(m(),i(e,{key:l,class:"move-item"},{default:o(()=>[p(c,{threshold:0,"auto-close":""},{right:o(()=>[p(e,{class:"card-move-box"},{default:o(()=>[p(e,{class:"btn-edit",onClick:a=>{return e=t.accountId,console.log(e),void j({url:`/pages/user/account/cardManagement/edit?id=${e}`});var e}},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("编辑")),1)]),_:1})]),_:2},1032,["onClick"]),p(e,{class:"btn-del",onClick:a=>((a,t)=>{I({title:D("提示"),content:D("确定删除这个账户吗？"),success:async e=>{e.confirm&&A(a,t)}})})(t,l)},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("删除")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[p(e,{class:"mitem"},{default:o(()=>[p(e,{class:"card"},{default:o(()=>[p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("真实姓名")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(t.accountName),1)]),_:2},1024)]),_:2},1024),p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("身份证号码")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(w(C)(t.identity)),1)]),_:2},1024)]),_:2},1024),p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("账户号码")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(w(C)(t.accountNo)),1)]),_:2},1024)]),_:2},1024),1===O.accountType?(m(),i(e,{key:0,class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("银行卡详情")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(t.bankName),1)]),_:2},1024)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-134f49bf"]]);export{H as default};

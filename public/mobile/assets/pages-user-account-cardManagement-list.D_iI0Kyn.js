import{d as a,L as t,r as e,Y as s,n as l,an as c,p as u,ao as n,c as i,w as o,ac as d,ad as r,C as f,F as _,b as m,e as p,i as y,a as g,J as v,K as x,P as k,Z as b,h,t as T,k as $,G as C,c8 as w,X as j,ag as N,R as D,_ as G}from"./index-BZxHr1FI.js";import{_ as I}from"./uni-icons.DMMn2oBg.js";import{_ as M,a as R}from"./uni-swipe-action.B_W9HPBU.js";import{T as z}from"./tig-layout.DTz8E-sj.js";import{c as F,e as H}from"./account.DIoGmjqt.js";const J=G(a({__name:"list",setup(a){const{t:G}=t(),J=[{title:"银行卡",accountType:1},{title:"支付宝",accountType:2},{title:"微信",accountType:3}],K=e(1),L=e(!1),P=s({page:1,accountType:1}),X=e([]),Y=async()=>{P.page>1?L.value=!0:d({title:G("加载中")});try{const a=await F({...P});X.value=a.records}catch(a){console.error(a.message)}finally{r(),L.value=!1}},Z=()=>{j({url:"/pages/user/account/cardManagement/edit"})},q=async(a,t)=>{try{const e=await H({...a});X.value.splice(t,1),e.message&&D({title:G("操作成功"),icon:"success"})}catch(e){D({title:e.message,icon:"none",duration:1e3})}};return l(()=>{Y(),c("refreshData",a=>{K.value=null==a?void 0:a.type,P.accountType=null==a?void 0:a.type,Y()})}),u(()=>{n("refreshData")}),(a,t)=>{const e=y,s=$,l=f(_("uni-icons"),I),c=f(_("uni-swipe-action-item"),M),u=f(_("uni-swipe-action"),R),n=f(_("tig-layout"),z);return m(),i(n,{title:"卡管理"},{default:o(()=>[p(e,{class:"card-main"},{default:o(()=>[p(e,{class:"head-tabs-box"},{default:o(()=>[p(e,{class:"tabs flex align-center justify-between"},{default:o(()=>[p(e,{class:"flex align-end"},{default:o(()=>[(m(),v(x,null,k(J,(t,s)=>p(e,{key:s,class:b(["tab",{active:K.value===t.accountType}]),onClick:a=>(async a=>{a!==K.value&&(K.value=a,P.page=1,P.accountType=a,Y())})(t.accountType)},{default:o(()=>[h(T(a.$t(t.title)),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),p(e,{class:"clear-unread flex align-end",onClick:Z},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("添加账号")),1)]),_:1}),p(l,{type:"auth",size:"20",color:"#999"})]),_:1})]),_:1})]),_:1}),X.value.length>0?(m(),i(e,{key:0,class:"card-list"},{default:o(()=>[p(u,null,{default:o(()=>[(m(!0),v(x,null,k(X.value,(t,l)=>(m(),i(e,{key:l,class:"move-item"},{default:o(()=>[p(c,{threshold:0,"auto-close":""},{right:o(()=>[p(e,{class:"card-move-box"},{default:o(()=>[p(e,{class:"btn-edit",onClick:a=>{return e=t.accountId,console.log(e),void j({url:`/pages/user/account/cardManagement/edit?id=${e}`});var e}},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("编辑")),1)]),_:1})]),_:2},1032,["onClick"]),p(e,{class:"btn-del",onClick:a=>((a,t)=>{N({title:G("提示"),content:G("确定删除这个账户吗？"),success:async e=>{e.confirm&&q(a,t)}})})(t,l)},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("删除")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[p(e,{class:"mitem"},{default:o(()=>[p(e,{class:"card"},{default:o(()=>[p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("真实姓名")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(t.accountName),1)]),_:2},1024)]),_:2},1024),p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("身份证号码")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(C(w)(t.identity)),1)]),_:2},1024)]),_:2},1024),p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("账户号码")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(C(w)(t.accountNo)),1)]),_:2},1024)]),_:2},1024),1===P.accountType?(m(),i(e,{key:0,class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("银行卡详情")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(t.bankName),1)]),_:2},1024)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-134f49bf"]]);export{J as default};

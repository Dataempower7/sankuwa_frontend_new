import{a2 as a,d as e,K as t,W as l,r as s,l as o,q as c,c as u,w as r,aa as i,ab as d,B as n,E as p,o as m,a as f,g,i as _,I as v,J as y,O as h,f as x,t as b,h as k,b as w,F as j,G as I,a1 as z,ae as C,Q as V,_ as B}from"./index-DDAlCzEE.js";import{_ as M}from"./tig-image.CxOKkXKh.js";import{_ as P}from"./format-price.9n-LYbxy.js";import{_ as Q,a as S}from"./uni-swipe-action.tMichUr_.js";import{_ as $}from"./loading-box.wxL4cJqH.js";import{_ as q}from"./tig-layout.Dp_86RM-.js";const D=B(e({__name:"index",setup(e){const{t:B}=t(),D=l({page:1,size:10,keyword:""}),E=s(0),F=s(!1),G=s(!1),J=s([]),K=async()=>{D.page>1?F.value=!0:i({title:B("加载中")});try{const t=await(e={...D},a({url:"user/collectProduct/list",method:"get",params:e}));E.value=t.total,J.value=[...J.value,...t.records]}catch(t){console.error(t)}finally{d(),F.value=!1,G.value=!0}var e},N=async e=>{try{await(t={id:e},a({url:"user/collectProduct/cancel",method:"post",data:t})),V({title:B("取消收藏成功"),icon:"none"}),D.page=1,J.value=[],K()}catch(l){V({title:l.message,icon:"none",duration:1e3})}var t};return o(()=>{K()}),c(()=>{D.page<Math.ceil(E.value/D.size)&&(D.page++,K())}),(a,e)=>{const t=n(p("tig-image"),M),l=_,s=n(p("format-price"),P),o=k,c=n(p("uni-swipe-action-item"),Q),i=n(p("uni-swipe-action"),S),d=w,V=n(p("loading-box"),$),E=n(p("tig-layout"),q);return m(),u(E,{title:"商品收藏"},{default:r(()=>[J.value.length>0?(m(),u(l,{key:0,class:"collect-product"},{default:r(()=>[g(i,null,{default:r(()=>[(m(!0),v(y,null,h(J.value,e=>(m(),u(l,{key:e.productId,class:"move-item"},{default:r(()=>[g(c,{threshold:0,"auto-close":""},{right:r(()=>[g(l,{class:"collect-move-box"},{default:r(()=>[g(l,{class:"btn-del",onClick:a=>{return t=e.productId,void C({title:B("提示"),content:B("确定取消收藏吗？"),success:async a=>{a.confirm&&N(t)}});var t}},{default:r(()=>[g(o,null,{default:r(()=>[x(b(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:r(()=>[g(l,{class:"collect-product-item",onClick:a=>{return t=e.productId,void z({url:"/pages/product/index?id="+t});var t}},{default:r(()=>[g(l,{class:"collect-product-item-left"},{default:r(()=>[g(l,{class:"img-box"},{default:r(()=>[g(t,{src:e.picThumb},null,8,["src"])]),_:2},1024)]),_:2},1024),g(l,{class:"collect-product-item-right"},{default:r(()=>[g(l,{class:"title"},{default:r(()=>[x(b(e.productName),1)]),_:2},1024),g(l,{class:"item-bottom"},{default:r(()=>[g(l,{class:"price"},{default:r(()=>[g(s,{"decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":e.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0===J.value.length&&!0===G.value?(m(),u(l,{key:1,class:"empty-box"},{default:r(()=>[g(l,{class:"pictrue"},{default:r(()=>[g(d,{src:j(I)("common/data_empty.png")},null,8,["src"])]),_:1}),g(l,{class:"txt"},{default:r(()=>[x(b(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})):f("",!0),g(V,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=a=>F.value=a),page:D.page,length:J.value.length},null,8,["modelValue","page","length"])]),_:1})}}}),[["__scopeId","data-v-49fe7f26"]]);export{D as default};

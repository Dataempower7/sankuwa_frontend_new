import{a4 as a,d as e,L as t,Y as l,r as s,n as c,s as o,c as u,w as r,ac as i,ad as d,C as n,F as p,b as m,a as f,e as g,i as _,J as v,K as y,P as h,h as x,t as b,k,f as j,G as w,H as C,a3 as z,ag as I,R as P,_ as V}from"./index-BZxHr1FI.js";import{_ as G}from"./tig-image.CzXKqALH.js";import{_ as K}from"./format-price.BrXrBVy6.js";import{_ as M,a as N}from"./uni-swipe-action.B_W9HPBU.js";import{_ as S}from"./loading-box.D3Y7A2lC.js";import{T}from"./tig-layout.DTz8E-sj.js";import"./currency.Dn5A4d7X.js";const Y=V(e({__name:"index",setup(e){const{t:V}=t(),Y=l({page:1,size:10,keyword:""}),$=s(0),F=s(!1),H=s(!1),J=s([]),L=async()=>{Y.page>1?F.value=!0:i({title:V("加载中")});try{const t=await(e={...Y},a({url:"user/collectProduct/list",method:"get",params:e}));$.value=t.total,J.value=[...J.value,...t.records]}catch(t){console.error(t)}finally{d(),F.value=!1,H.value=!0}var e},R=async e=>{try{await(t={id:e},a({url:"user/collectProduct/cancel",method:"post",data:t})),P({title:V("取消收藏成功"),icon:"none"}),Y.page=1,J.value=[],L()}catch(l){P({title:l.message,icon:"none",duration:1e3})}var t};return c(()=>{L()}),o(()=>{Y.page<Math.ceil($.value/Y.size)&&(Y.page++,L())}),(a,e)=>{const t=n(p("tig-image"),G),l=_,s=n(p("format-price"),K),c=k,o=n(p("uni-swipe-action-item"),M),i=n(p("uni-swipe-action"),N),d=j,P=n(p("loading-box"),S),$=n(p("tig-layout"),T);return m(),u($,{title:"商品收藏"},{default:r(()=>[J.value.length>0?(m(),u(l,{key:0,class:"collect-product"},{default:r(()=>[g(i,null,{default:r(()=>[(m(!0),v(y,null,h(J.value,e=>(m(),u(l,{key:e.productId,class:"move-item"},{default:r(()=>[g(o,{threshold:0,"auto-close":""},{right:r(()=>[g(l,{class:"collect-move-box"},{default:r(()=>[g(l,{class:"btn-del",onClick:a=>{return t=e.productId,void I({title:V("提示"),content:V("确定取消收藏吗？"),success:async a=>{a.confirm&&R(t)}});var t}},{default:r(()=>[g(c,null,{default:r(()=>[x(b(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:r(()=>[g(l,{class:"collect-product-item",onClick:a=>{return t=e.productId,void z({url:"/pages/product/index?id="+t});var t}},{default:r(()=>[g(l,{class:"collect-product-item-left"},{default:r(()=>[g(l,{class:"img-box"},{default:r(()=>[g(t,{src:e.picThumb},null,8,["src"])]),_:2},1024)]),_:2},1024),g(l,{class:"collect-product-item-right"},{default:r(()=>[g(l,{class:"title"},{default:r(()=>[x(b(e.productName),1)]),_:2},1024),g(l,{class:"item-bottom"},{default:r(()=>[g(l,{class:"price"},{default:r(()=>[g(s,{"decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":e.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0===J.value.length&&!0===H.value?(m(),u(l,{key:1,class:"empty-box"},{default:r(()=>[g(l,{class:"pictrue"},{default:r(()=>[g(d,{src:w(C)("common/data_empty.png")},null,8,["src"])]),_:1}),g(l,{class:"txt"},{default:r(()=>[x(b(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})):f("",!0),g(P,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=a=>F.value=a),page:Y.page,length:J.value.length},null,8,["modelValue","page","length"])]),_:1})}}}),[["__scopeId","data-v-49fe7f26"]]);export{Y as default};

import{a2 as a,d as s,K as e,W as l,r as t,l as o,q as u,c,w as i,B as n,E as p,o as d,g as r,i as h,a as f,I as m,J as _,O as g,f as v,t as y,h as x,b as k,F as b,G as w,n as I,Q as j,_ as C}from"./index-DDAlCzEE.js";import{_ as V}from"./tig-image.CxOKkXKh.js";import{_ as $,a as z}from"./uni-swipe-action.tMichUr_.js";import{_ as B}from"./loading-box.wxL4cJqH.js";import{_ as M}from"./tig-layout.Dp_86RM-.js";import{s as O}from"./shop.C5j42sN7.js";const Q=C(s({__name:"index",setup(s){const{t:C}=e(),Q=l({page:1,size:10,keyword:""}),q=t([]),E=t(0),F=t(!1),G=t(!1),J=async()=>{Q.page>1?G.value=!0:F.value=!0;try{const e=await(s=Q,a({url:"user/user/collectionShop",method:"get",params:s}));q.value=e.records,E.value=e.total}catch(e){console.error(e)}finally{G.value=!1,F.value=!1}var s};o(()=>{J()});return u(()=>{Q.page<Math.ceil(E.value/Q.size)&&(Q.page++,J())}),(a,s)=>{const e=n(p("tig-image"),V),l=h,t=x,o=n(p("uni-swipe-action-item"),$),u=n(p("uni-swipe-action"),z),E=k,K=n(p("loading-box"),B),L=n(p("tig-layout"),M);return d(),c(L,{title:"店铺收藏"},{default:i(()=>[r(l,{class:"collection-shop"},{default:i(()=>[q.value.length>0?(d(),c(u,{key:0},{default:i(()=>[r(l,{class:"collection-content"},{default:i(()=>[(d(!0),m(_,null,g(q.value,s=>(d(),c(l,{key:s.shopId,class:"move-item"},{default:i(()=>[r(o,{threshold:0,"auto-close":""},{right:i(()=>[r(l,{class:"collect-move-box"},{default:i(()=>[r(l,{class:"btn-del",onClick:a=>(async a=>{try{await O({shopId:a}),j({title:C("取消成功"),icon:"none"}),Q.page=1,q.value=[],J()}catch(s){console.error(s)}})(s.shopId)},{default:i(()=>[r(t,null,{default:i(()=>[v(y(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[r(l,{class:"shop-item",onClick:a=>{return e=s.shopId,void I({url:`/pages/shop/index?shopId=${e}`});var e}},{default:i(()=>[r(l,{class:"shop-item-left"},{default:i(()=>[r(e,{src:s.shop.shopLogo},null,8,["src"])]),_:2},1024),r(l,{class:"shop-item-right"},{default:i(()=>[r(l,{class:"shop-name line1"},{default:i(()=>[v(y(s.shop.shopTitle),1)]),_:2},1024),r(l,{class:"shop-desc line1"},{default:i(()=>[v(y(s.shop.description?s.shop.description:""),1)]),_:2},1024),r(l,{class:"shop-info"},{default:i(()=>[r(t,{class:"shop-info-text"},{default:i(()=>[v("上架商品："+y(s.productCount),1)]),_:2},1024),r(t,{class:"shop-info-text"},{default:i(()=>[v("店铺收藏："+y(s.collectCount),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0!==q.value.length||F.value||G.value?f("",!0):(d(),c(l,{key:1,class:"empty-box"},{default:i(()=>[r(l,{class:"pictrue"},{default:i(()=>[r(E,{src:b(w)("common/data_empty.png")},null,8,["src"])]),_:1}),r(l,{class:"txt"},{default:i(()=>[v(y(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})),r(K,{modelValue:G.value,"onUpdate:modelValue":s[0]||(s[0]=a=>G.value=a),page:Q.page,length:q.value.length},null,8,["modelValue","page","length"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-368f8ab0"]]);export{Q as default};

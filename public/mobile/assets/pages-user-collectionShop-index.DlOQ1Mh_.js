import{a4 as a,d as s,L as e,Y as l,r as t,n as o,s as u,c,w as i,C as n,F as p,b as d,e as r,i as h,a as f,J as m,K as _,P as g,h as v,t as y,k as x,f as k,G as b,H as w,X as C,R as j,_ as I}from"./index-BZxHr1FI.js";import{_ as V}from"./tig-image.CzXKqALH.js";import{_ as $,a as z}from"./uni-swipe-action.B_W9HPBU.js";import{_ as G}from"./loading-box.D3Y7A2lC.js";import{T as K}from"./tig-layout.DTz8E-sj.js";import{s as L}from"./shop.CnQQ4qvJ.js";const T=I(s({__name:"index",setup(s){const{t:I}=e(),T=l({page:1,size:10,keyword:""}),Y=t([]),F=t(0),H=t(!1),J=t(!1),M=async()=>{T.page>1?J.value=!0:H.value=!0;try{const e=await(s=T,a({url:"user/user/collectionShop",method:"get",params:s}));Y.value=e.records,F.value=e.total}catch(e){console.error(e)}finally{J.value=!1,H.value=!1}var s};o(()=>{M()});return u(()=>{T.page<Math.ceil(F.value/T.size)&&(T.page++,M())}),(a,s)=>{const e=n(p("tig-image"),V),l=h,t=x,o=n(p("uni-swipe-action-item"),$),u=n(p("uni-swipe-action"),z),F=k,P=n(p("loading-box"),G),R=n(p("tig-layout"),K);return d(),c(R,{title:"店铺收藏"},{default:i(()=>[r(l,{class:"collection-shop"},{default:i(()=>[Y.value.length>0?(d(),c(u,{key:0},{default:i(()=>[r(l,{class:"collection-content"},{default:i(()=>[(d(!0),m(_,null,g(Y.value,s=>(d(),c(l,{key:s.shopId,class:"move-item"},{default:i(()=>[r(o,{threshold:0,"auto-close":""},{right:i(()=>[r(l,{class:"collect-move-box"},{default:i(()=>[r(l,{class:"btn-del",onClick:a=>(async a=>{try{await L({shopId:a}),j({title:I("取消成功"),icon:"none"}),T.page=1,Y.value=[],M()}catch(s){console.error(s)}})(s.shopId)},{default:i(()=>[r(t,null,{default:i(()=>[v(y(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[r(l,{class:"shop-item",onClick:a=>{return e=s.shopId,void C({url:`/pages/shop/index?shopId=${e}`});var e}},{default:i(()=>[r(l,{class:"shop-item-left"},{default:i(()=>[r(e,{src:s.shop.shopLogo},null,8,["src"])]),_:2},1024),r(l,{class:"shop-item-right"},{default:i(()=>[r(l,{class:"shop-name line1"},{default:i(()=>[v(y(s.shop.shopTitle),1)]),_:2},1024),r(l,{class:"shop-desc line1"},{default:i(()=>[v(y(s.shop.description?s.shop.description:""),1)]),_:2},1024),r(l,{class:"shop-info"},{default:i(()=>[r(t,{class:"shop-info-text"},{default:i(()=>[v("上架商品："+y(s.productCount),1)]),_:2},1024),r(t,{class:"shop-info-text"},{default:i(()=>[v("店铺收藏："+y(s.collectCount),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0!==Y.value.length||H.value||J.value?f("",!0):(d(),c(l,{key:1,class:"empty-box"},{default:i(()=>[r(l,{class:"pictrue"},{default:i(()=>[r(F,{src:b(w)("common/data_empty.png")},null,8,["src"])]),_:1}),r(l,{class:"txt"},{default:i(()=>[v(y(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})),r(P,{modelValue:J.value,"onUpdate:modelValue":s[0]||(s[0]=a=>J.value=a),page:T.page,length:Y.value.length},null,8,["modelValue","page","length"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-368f8ab0"]]);export{T as default};

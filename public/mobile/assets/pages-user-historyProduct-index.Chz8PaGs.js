import{a4 as a,d as e,L as t,r as l,c as s,w as c,ac as o,ad as u,C as r,F as d,bm as i,c9 as n,b as f,e as p,a as m,i as v,J as _,K as h,P as y,$ as g,h as b,t as k,O as x,a0 as C,f as $,G as j,H as I,k as w,R as z,a3 as P,_ as S}from"./index-BZxHr1FI.js";import{_ as T}from"./tig-image.CzXKqALH.js";import{_ as V}from"./format-price.BrXrBVy6.js";import{T as F,a as G,d as H}from"./tig-layout.DTz8E-sj.js";import{T as K}from"./tig-fixed-placeholder.BDsbIjoZ.js";import"./currency.Dn5A4d7X.js";const N=S(e({__name:"index",setup(e){const{t:S}=t(),N=l(!0),O=l([]),U=l([]),J=l(!1),L=l(!1),M=a=>{a.length==O.value.length?L.value=!0:L.value=!1},R=()=>{L.value?U.value=O.value.map(a=>a.productId):U.value=[]},q=async()=>{try{await(e=U.value,a({url:"user/user/delHistoryProduct",method:"post",data:{ids:e}})),z({title:S("删除成功"),icon:"none"}),A()}catch(t){console.error(t)}var e},A=async()=>{o({title:S("加载中")});try{const e=await a({url:"user/user/historyProduct",method:"get"});if(O.value=e,L.value)return void(U.value=O.value.map(a=>a.productId))}catch(e){console.error(e)}finally{u(),N.value=!1}};A();return(a,e)=>{const t=r(d("tig-image"),T),l=v,o=r(d("format-price"),V),u=r(d("up-checkbox"),i),z=r(d("up-checkbox-group"),n),S=$,A=w,B=r(d("tig-button"),G),D=r(d("tig-checkbox"),H),E=r(d("tig-fixed-placeholder"),K),Q=r(d("tig-layout"),F);return f(),s(Q,{title:"浏览记录"},{default:c(()=>[p(z,{modelValue:U.value,"onUpdate:modelValue":e[1]||(e[1]=a=>U.value=a),"active-color":"var(--general)",placement:"column",onChange:M},{default:c(()=>[O.value.length>0?(f(),s(l,{key:0,class:"history-product"},{default:c(()=>[(f(!0),_(h,null,y(O.value,a=>(f(),s(l,{key:a.productId,class:"history-product-item",onClick:e=>{return t=a.productId,void P({url:"/pages/product/index?id="+t});var t}},{default:c(()=>[p(l,{class:"history-product-item-top"},{default:c(()=>[p(l,{class:"img-box"},{default:c(()=>[p(t,{src:a.picThumb,mode:"widthFix"},null,8,["src"])]),_:2},1024)]),_:2},1024),p(l,{class:"history-product-item-bottom"},{default:c(()=>[p(l,{class:"detail line2"},{default:c(()=>[b(k(a.productName),1)]),_:2},1024),p(l,{class:"price"},{default:c(()=>[p(o,{"font-style":{fontSize:"32rpx"},"currency-style":{fontSize:"22rpx"},"decimals-style":{fontSize:"25rpx"},"price-data":a.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024),g(p(l,{class:"item-btn",onClick:e[0]||(e[0]=x(()=>{},["stop"]))},{default:c(()=>[p(l,{class:"btn-box"},{default:c(()=>[p(u,{"custom-style":{border:"none"},size:"20",shape:"circle",name:a.productId},null,8,["name"])]),_:2},1024)]),_:2},1536),[[C,J.value]])]),_:2},1032,["onClick"]))),128))]),_:1})):m("",!0)]),_:1},8,["modelValue"]),N.value||0!=O.value.length?m("",!0):(f(),s(l,{key:0,class:"empty-box"},{default:c(()=>[p(l,{class:"pictrue"},{default:c(()=>[p(S,{src:j(I)("common/data_empty.png")},null,8,["src"])]),_:1}),p(l,{class:"txt"},{default:c(()=>[b(k(a.$t("暂无浏览记录！")),1)]),_:1})]),_:1})),p(E,{"background-color":"#fff"},{default:c(()=>[p(l,{class:"footer-box"},{default:c(()=>[J.value?(f(),s(l,{key:1,class:"footer-edit"},{default:c(()=>[p(l,{class:"all-check"},{default:c(()=>[p(D,{checked:L.value,"onUpdate:checked":e[3]||(e[3]=a=>L.value=a),"checked-text":a.$t("全选"),onChange:R},null,8,["checked","checked-text"])]),_:1}),p(l,{class:"edit-btn"},{default:c(()=>[p(B,{class:"btn",plain:"",onClick:e[4]||(e[4]=a=>J.value=!1)},{default:c(()=>[b(k(a.$t("取消")),1)]),_:1}),p(B,{class:"btn",disabled:!U.value.length,onClick:q},{default:c(()=>[b(k(a.$t("删除")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):(f(),s(l,{key:0,class:"footer-text"},{default:c(()=>[p(l,{class:"footer-num"},{default:c(()=>[b(k(a.$t("共")),1),p(A,{class:"num"},{default:c(()=>[b(k(O.value.length),1)]),_:1}),b(k(a.$t("件商品")),1)]),_:1}),p(l,{class:"footer-text-btn"},{default:c(()=>[p(B,{class:"btn",onClick:e[2]||(e[2]=a=>J.value=!0)},{default:c(()=>[b(k(a.$t("管理")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-3c13f6a6"]]);export{N as default};

import{a2 as a,d as e,K as t,r as l,c as s,w as o,aa as c,ab as u,B as r,E as d,bo as i,c8 as n,o as f,g as p,a as m,i as _,I as v,J as h,O as g,Y as y,f as b,t as x,N as k,Z as C,b as I,F as $,G as j,h as w,Q as z,a1 as S,_ as V}from"./index-DDAlCzEE.js";import{_ as B}from"./tig-image.CxOKkXKh.js";import{_ as E}from"./format-price.9n-LYbxy.js";import{_ as F,a as N,e as P}from"./tig-layout.Dp_86RM-.js";import{_ as U}from"./tig-fixed-placeholder.BwC6eLvS.js";const D=V(e({__name:"index",setup(e){const{t:V}=t(),D=l(!0),G=l([]),H=l([]),J=l(!1),K=l(!1),O=a=>{a.length==G.value.length?K.value=!0:K.value=!1},Q=()=>{K.value?H.value=G.value.map(a=>a.productId):H.value=[]},T=async()=>{try{await(e=H.value,a({url:"user/user/delHistoryProduct",method:"post",data:{ids:e}})),z({title:V("删除成功"),icon:"none"}),Y()}catch(t){console.error(t)}var e},Y=async()=>{c({title:V("加载中")});try{const e=await a({url:"user/user/historyProduct",method:"get"});if(G.value=e,K.value)return void(H.value=G.value.map(a=>a.productId))}catch(e){console.error(e)}finally{u(),D.value=!1}};Y();return(a,e)=>{const t=r(d("tig-image"),B),l=_,c=r(d("format-price"),E),u=r(d("up-checkbox"),i),z=r(d("up-checkbox-group"),n),V=I,Y=w,Z=r(d("tig-button"),N),q=r(d("tig-checkbox"),P),A=r(d("tig-fixed-placeholder"),U),L=r(d("tig-layout"),F);return f(),s(L,{title:"浏览记录"},{default:o(()=>[p(z,{modelValue:H.value,"onUpdate:modelValue":e[1]||(e[1]=a=>H.value=a),"active-color":"var(--general)",placement:"column",onChange:O},{default:o(()=>[G.value.length>0?(f(),s(l,{key:0,class:"history-product"},{default:o(()=>[(f(!0),v(h,null,g(G.value,a=>(f(),s(l,{key:a.productId,class:"history-product-item",onClick:e=>{return t=a.productId,void S({url:"/pages/product/index?id="+t});var t}},{default:o(()=>[p(l,{class:"history-product-item-top"},{default:o(()=>[p(l,{class:"img-box"},{default:o(()=>[p(t,{src:a.picThumb,mode:"widthFix"},null,8,["src"])]),_:2},1024)]),_:2},1024),p(l,{class:"history-product-item-bottom"},{default:o(()=>[p(l,{class:"detail line2"},{default:o(()=>[b(x(a.productName),1)]),_:2},1024),p(l,{class:"price"},{default:o(()=>[p(c,{"font-style":{fontSize:"32rpx"},"currency-style":{fontSize:"22rpx"},"decimals-style":{fontSize:"25rpx"},"price-data":a.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024),y(p(l,{class:"item-btn",onClick:e[0]||(e[0]=k(()=>{},["stop"]))},{default:o(()=>[p(l,{class:"btn-box"},{default:o(()=>[p(u,{"custom-style":{border:"none"},size:"20",shape:"circle",name:a.productId},null,8,["name"])]),_:2},1024)]),_:2},1536),[[C,J.value]])]),_:2},1032,["onClick"]))),128))]),_:1})):m("",!0)]),_:1},8,["modelValue"]),D.value||0!=G.value.length?m("",!0):(f(),s(l,{key:0,class:"empty-box"},{default:o(()=>[p(l,{class:"pictrue"},{default:o(()=>[p(V,{src:$(j)("common/data_empty.png")},null,8,["src"])]),_:1}),p(l,{class:"txt"},{default:o(()=>[b(x(a.$t("暂无浏览记录！")),1)]),_:1})]),_:1})),p(A,{"background-color":"#fff"},{default:o(()=>[p(l,{class:"footer-box"},{default:o(()=>[J.value?(f(),s(l,{key:1,class:"footer-edit"},{default:o(()=>[p(l,{class:"all-check"},{default:o(()=>[p(q,{checked:K.value,"onUpdate:checked":e[3]||(e[3]=a=>K.value=a),"checked-text":a.$t("全选"),onChange:Q},null,8,["checked","checked-text"])]),_:1}),p(l,{class:"edit-btn"},{default:o(()=>[p(Z,{class:"btn",plain:"",onClick:e[4]||(e[4]=a=>J.value=!1)},{default:o(()=>[b(x(a.$t("取消")),1)]),_:1}),p(Z,{class:"btn",disabled:!H.value.length,onClick:T},{default:o(()=>[b(x(a.$t("删除")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):(f(),s(l,{key:0,class:"footer-text"},{default:o(()=>[p(l,{class:"footer-num"},{default:o(()=>[b(x(a.$t("共")),1),p(Y,{class:"num"},{default:o(()=>[b(x(G.value.length),1)]),_:1}),b(x(a.$t("件商品")),1)]),_:1}),p(l,{class:"footer-text-btn"},{default:o(()=>[p(Z,{class:"btn",onClick:e[2]||(e[2]=a=>J.value=!0)},{default:o(()=>[b(x(a.$t("管理")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-3c13f6a6"]]);export{D as default};

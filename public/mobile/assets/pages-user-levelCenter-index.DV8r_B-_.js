import{d as l,a7 as e,k as a,K as s,ay as t,W as n,r as u,U as i,G as r,c as d,o,i as c,w as _,g as v,aJ as f,I as p,O as g,J as k,a as m,aK as h,X as y,f as w,t as b,F as $,h as I,H as C,b as G,n as j,_ as L,ad as P,a4 as x,ct as O,aU as N,j as T,B as S,E,aH as A}from"./index-DDAlCzEE.js";import{_ as M}from"./tig-copyright.CXAAKmRe.js";import{_ as U}from"./tig-layout.Dp_86RM-.js";import{g as B}from"./levelCenter.7BfBiY0D.js";import{r as H}from"./index.DGit0NKu.js";import"./masonry.DxHX1gQG.js";import"./format-price.9n-LYbxy.js";import"./specification.C_n32lme.js";import"./tig-image.CxOKkXKh.js";import"./uni-icons.piUs7f0e.js";import"./uni-number-box.D352QONN.js";import"./product.CwGVjSIm.js";import"./activityCard.A8E8ZyQf.js";import"./useList.Bq9WraBG.js";const J=L(l({__name:"topCard",props:{list:{type:Array,default:()=>[]}},setup(l){e(l=>({"06a5eff6":H.value,"40f738f5":J.value,"0cb6f536":K.value}));const{t:L}=s(),{userInfo:P}=t(),x=l;let O=[];const N=n([]),T=u(0),S=n({discount:"0.0",freeShipping:0,rankPoint:"0"}),E=n([]),A=u(0);i(()=>x.list,l=>{var e,a,s;O=l.map(l=>l.rights),A.value=null==(e=l[0])?void 0:e.rankId,Object.assign(N,null==(a=l[0])?void 0:a.rights),T.value=l.findIndex(l=>(null==l?void 0:l.rankLevel)===(null==P?void 0:P.rankLevel)),-1!==T.value&&(Object.assign(S,l[T.value]),"0.0"!=S.discount&&E.push({iconImg:"discount",isChecked:1,rightName:S.discount+L("折")}),1===S.freeShipping&&E.push({iconImg:"freeShoping",isChecked:1,rightName:L("包邮")}),"0"!=S.rankPoint&&E.push({iconImg:"point",isChecked:1,rightName:S.rankPoint+L("倍积分")}),console.log("currentCard",S),null==(s=S.rights)||s.forEach(l=>{1==l.isChecked&&E.push(l)}),console.log("currentCard",S),console.log("currentRightUnion",E))},{deep:!0,immediate:!0});const M=a(()=>{var l;return 0==P.rankExpireTime?L("永久"):null==(l=P.rankExpireTime)?void 0:l.slice(0,10)}),U=l=>{N.length=0,E.length=0;let e=l.detail.current;Object.assign(N,O[e]),Object.assign(S,x.list[e]),A.value=x.list[e].rankId,"0.0"!=S.discount&&E.push({iconImg:"discount",isChecked:1,rightName:S.discount+L("折")}),1==S.freeShipping&&E.push({iconImg:"freeShoping",isChecked:1,rightName:L("包邮")}),"0"!=S.rankPoint&&E.push({iconImg:"point",isChecked:1,rightName:S.rankPoint+L("倍积分")}),S.rights.forEach(l=>{1==l.isChecked&&E.push(l)})},B=()=>{j({url:"/pages/user/levelCenter/benefit?rankId="+A.value})},H=a(()=>`url(${r("user/discount.png")})`),J=a(()=>`url(${r("user/free_shoping.png")})`),K=a(()=>`url(${r("user/point.png")})`);return(e,a)=>{const s=c,t=I,n=h,u=f,i=G;return o(),d(s,{class:"top_card_container"},{default:_(()=>[v(s,{class:"margin"},{default:_(()=>[v(u,{"next-margin":"16rpx",class:"card_swiper",current:T.value,onAnimationfinish:U},{default:_(()=>[(o(!0),p(k,null,g(l.list,(l,a)=>(o(),p(k,{key:null==l?void 0:l.rankId},[1===(null==l?void 0:l.rankCardType)?(o(),d(n,{key:0,class:"card_swiper_item"},{default:_(()=>[v(s,{class:y(["card_item",null==l?void 0:l.rankIco])},{default:_(()=>[v(s,{class:"level_name_wrap"},{default:_(()=>[v(s,{class:"level_name"},{default:_(()=>[w(b(null==l?void 0:l.rankName),1)]),_:2},1024),v(s,{class:"level_expiry"},{default:_(()=>[w(b(e.$t("当前等级有效期至")+" "+M.value),1)]),_:1})]),_:2},1024),(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:0,class:"card_badge"},{default:_(()=>[w(b(e.$t("当前等级")),1)]),_:1})):m("",!0),v(s,{class:"card_bottom"},{default:_(()=>[1===$(P).rankType?(o(),p(k,{key:0},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:0,class:"level_value_wapper"},{default:_(()=>[v(t,{class:"level_value"},{default:_(()=>{var l;return[w(b(null==(l=$(P))?void 0:l.growthPoints),1)]}),_:1}),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("成长值")),1)]),_:1})]),_:1})):(o(),d(s,{key:1,class:"upgrades_wapper"},{default:_(()=>[v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("再获得")),1)]),_:1}),v(t,{class:"level_value"},{default:_(()=>[w(b((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)]),_:2},1024),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("成长值升级为该等级")),1)]),_:1})]),_:2},1024))],64)):m("",!0),2===$(P).rankType?(o(),p(k,{key:1},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:0,class:"level_value_wapper"},{default:_(()=>[v(t,{class:"level_value"},{default:_(()=>{var l;return[w(b(null==(l=$(P))?void 0:l.growthPoints),1)]}),_:1}),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("成长值")),1)]),_:1})]),_:1})):(o(),d(s,{key:1,class:"upgrades_wapper"},{default:_(()=>[v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("再消费")),1)]),_:1}),v(t,{class:"level_value"},{default:_(()=>[w(b((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)]),_:2},1024),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("元升级为该等级")),1)]),_:1})]),_:2},1024))],64)):m("",!0)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)):m("",!0),2===(null==l?void 0:l.rankCardType)?(o(),d(n,{key:1,class:"card_swiper_item"},{default:_(()=>[v(s,{class:"card_item",style:C(`background-image: url(${null==l?void 0:l.rankBg});`)},{default:_(()=>[v(s,{class:"level_name_wrap"},{default:_(()=>[v(s,{class:"level_name"},{default:_(()=>[w(b(null==l?void 0:l.rankName),1)]),_:2},1024),v(s,{class:"level_expiry"},{default:_(()=>[w(b(e.$t("当前等级有效期至")+" "+M.value),1)]),_:1})]),_:2},1024),(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:0,class:"card_badge"},{default:_(()=>[w(b(e.$t("当前等级")),1)]),_:1})):m("",!0),(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:1,class:"card_code_icon"})):m("",!0),v(s,{class:"card_bottom"},{default:_(()=>[1===$(P).rankType?(o(),p(k,{key:0},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:0,class:"level_value_wapper"},{default:_(()=>[v(t,{class:"level_value"},{default:_(()=>{var l;return[w(b(null==(l=$(P))?void 0:l.growthPoints),1)]}),_:1}),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("成长值")),1)]),_:1})]),_:1})):(o(),d(s,{key:1,class:"upgrades_wapper"},{default:_(()=>[v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("再获得")),1)]),_:1}),v(t,{class:"level_value"},{default:_(()=>[w(b((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)]),_:2},1024),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("成长值升级为该等级")),1)]),_:1})]),_:2},1024))],64)):m("",!0),2===$(P).rankType?(o(),p(k,{key:1},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),d(s,{key:0,class:"level_value_wapper"},{default:_(()=>[v(t,{class:"level_value"},{default:_(()=>{var l;return[w(b(null==(l=$(P))?void 0:l.growthPoints),1)]}),_:1}),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("成长值")),1)]),_:1})]),_:1})):(o(),d(s,{key:1,class:"upgrades_wapper"},{default:_(()=>[v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("再消费")),1)]),_:1}),v(t,{class:"level_value"},{default:_(()=>[w(b((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)]),_:2},1024),v(t,{class:"desc"},{default:_(()=>[w(b(e.$t("元升级为该等级")),1)]),_:1})]),_:2},1024))],64)):m("",!0)]),_:2},1024)]),_:2},1032,["style"])]),_:2},1024)):m("",!0)],64))),128))]),_:1},8,["current"])]),_:1}),v(s,{class:"level_rights_list"},{default:_(()=>[(o(!0),p(k,null,g(E.slice(0,4),(l,e)=>(o(),p(k,{key:e},[l.iconImg?(o(),d(s,{key:0,class:"right_item",onClick:B},{default:_(()=>[v(s,{class:y(["icon_img",l.iconImg])},null,8,["class"]),v(s,{class:"name"},{default:_(()=>[w(b(l.rightName),1)]),_:2},1024)]),_:2},1024)):1===l.isChecked?(o(),d(s,{key:1,class:"right_item",onClick:B},{default:_(()=>[v(s,{class:"icon_wapper"},{default:_(()=>[v(i,{class:"icon",src:null==l?void 0:l.icon},null,8,["src"])]),_:2},1024),v(s,{class:"name"},{default:_(()=>[w(b(null==l?void 0:l.name),1)]),_:2},1024)]),_:2},1024)):m("",!0)],64))),128)),E.length>4?(o(),d(s,{key:0,class:"right_item",onClick:B},{default:_(()=>[v(s,{class:"icon_img has_five_right"},{default:_(()=>[v(s,{class:"num"},{default:_(()=>[w(b(E.length),1)]),_:1}),v(s,{class:"txt"},{default:_(()=>[w(b(e.$t("项")),1)]),_:1})]),_:1}),v(s,{class:"name"},{default:_(()=>[w(b(e.$t("全部权益")),1)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-fc3507a5"]]),K=L(l({__name:"taskCard",setup(l){e(l=>({64570974:t.value}));const s=n({});(async()=>{try{let l=await O();Object.assign(s,null==l?void 0:l.growUpSetting),console.log(s)}catch(l){}})();const t=a(()=>`url(${r("user/task_bg.png")})`);return(l,e)=>{const a=c,t=x;return o(),d(a,{class:"task_container"},{default:_(()=>[v(a,{class:"task_head"},{default:_(()=>[v(a,{class:"title"},{default:_(()=>[w(b(l.$t("成长任务")),1)]),_:1})]),_:1}),v(a,{class:"task_list"},{default:_(()=>[1===(null==s?void 0:s.evpi)?(o(),d(a,{key:0,class:"task_item"},{default:_(()=>[v(a,{class:"img",style:C(`background-image: url(${$(r)("user/evpi.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_(()=>[v(a,{class:"name"},{default:_(()=>[w("完善信息")]),_:1}),v(a,{class:"growth_value"},{default:_(()=>[w(b($(P)()?l.$t("+{0}成长值",[null==s?void 0:s.evpiGrowth]):`+${null==s?void 0:s.evpiGrowth}成长值`),1)]),_:1})]),_:1}),v(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:_(()=>[w("去完成")]),_:1})]),_:1})):m("",!0),1===(null==s?void 0:s.bindPhone)?(o(),d(a,{key:1,class:"task_item"},{default:_(()=>[v(a,{class:"img",style:C(`background-image: url(${$(r)("user/bind_phone.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_(()=>[v(a,{class:"name"},{default:_(()=>[w("绑定手机号")]),_:1}),v(a,{class:"growth_value"},{default:_(()=>[w(b($(P)()?l.$t("+{0}成长值",[null==s?void 0:s.bindPhoneGrowth]):`+${null==s?void 0:s.bindPhoneGrowth}成长值`),1)]),_:1})]),_:1}),v(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:_(()=>[w("去完成")]),_:1})]),_:1})):m("",!0),1===(null==s?void 0:s.buyGoods)?(o(),d(a,{key:2,class:"task_item"},{default:_(()=>[v(a,{class:"img",style:C(`background-image: url(${$(r)("user/buy_goods.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_(()=>[v(a,{class:"name"},{default:_(()=>[w("购买商品")]),_:1}),v(a,{class:"growth_value"},{default:_(()=>[w(b($(P)()?l.$t("每消费{0}元，获得{1}点成长值",[null==s?void 0:s.buyGoodsMoney,null==s?void 0:s.buyGoodsGrowth]):`每消费${null==s?void 0:s.buyGoodsMoney}元，获得${null==s?void 0:s.buyGoodsGrowth}点成长值`),1)]),_:1})]),_:1}),v(t,{url:"/","open-type":"switchTab",class:"do_task_btn"},{default:_(()=>[w("去完成")]),_:1})]),_:1})):m("",!0),1===(null==s?void 0:s.buyOrder)?(o(),d(a,{key:3,class:"task_item"},{default:_(()=>[v(a,{class:"img",style:C(`background-image: url(${$(r)("user/buy_order.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_(()=>[v(a,{class:"name"},{default:_(()=>[w("完成下单")]),_:1}),v(a,{class:"growth_value"},{default:_(()=>[w(b($(P)()?l.$t("每完成{0}笔订单，获得{1}点成长值",[null==s?void 0:s.buyOrderNumber,null==s?void 0:s.buyOrderGrowth]):`每完成${null==s?void 0:s.buyOrderNumber}笔订单，获得${null==s?void 0:s.buyOrderGrowth}点成长值`),1)]),_:1})]),_:1}),v(t,{url:"/pages/cart/index","open-type":"switchTab",class:"do_task_btn"},{default:_(()=>[w("去完成")]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-f2e83f02"]]),D=L(l({__name:"levelDesc",props:{list:{type:Array,default:()=>[]},rankConfig:{type:Object,default:()=>{}}},setup(l){const{t:e}=s(),a=l,t=u([]);N(()=>{var l,s;l=a.list,s=a.rankConfig,null==l||l.forEach(l=>{var a,n,u,i;1===(null==(a=null==s?void 0:s.data)?void 0:a.type)?t.value.push({...l,condition:e("不降级")}):2===(null==(n=null==s?void 0:s.data)?void 0:n.type)&&t.value.push({...l,condition:(null==(u=s.data)?void 0:u.rankAfterMonth)+e("个月后，按近")+(null==(i=s.data)?void 0:i.useMonth)+e("个月成长值重新计算")})})});return(a,s)=>{const n=c;return o(),d(n,{class:"level_desc_container"},{default:_(()=>[v(n,{class:"level_card"},{default:_(()=>[v(n,{class:"card_title"},{default:_(()=>[w(b(a.$t("等级说明")),1)]),_:1}),v(n,{class:"card_info_wapper"},{default:_(()=>[v(n,{class:"list list_head"},{default:_(()=>[v(n,{class:"level_icon_label"},{default:_(()=>[w(b(a.$t("标识")),1)]),_:1}),v(n,{class:"level_name_label"},{default:_(()=>[w(b(a.$t("会员名称")),1)]),_:1}),v(n,{class:"level_condition_label"},{default:_(()=>[w(b(a.$t("升级条件")),1)]),_:1})]),_:1}),v(n,{class:"list"},{default:_(()=>[(o(!0),p(k,null,g(l.list,(l,s)=>(o(),d(n,{key:null==l?void 0:l.rankId,class:"list_item"},{default:_(()=>[v(n,{class:"level_icon"},{default:_(()=>[v(n,{class:y(["icon",`card${null==l?void 0:l.rankLevel}`]),style:C({"background-image":`url(${$(r)(`user/level_${null==l?void 0:l.rankLevel}.png`)})`})},null,8,["class","style"])]),_:2},1024),v(n,{class:"level_name"},{default:_(()=>[w(b(a.$t(null==l?void 0:l.rankName)),1)]),_:2},1024),v(n,{class:"level_condition"},{default:_(()=>{return[w(b((a=null==l?void 0:l.minGrowthPoints,0===a?e("无门槛"):a+e("成长值"))),1)];var a}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),v(n,{class:"level_card"},{default:_(()=>[v(n,{class:"card_title"},{default:_(()=>[w(b(a.$t("保级说明")),1)]),_:1}),v(n,{class:"card_info_wapper"},{default:_(()=>[v(n,{class:"list list_head"},{default:_(()=>[v(n,{class:"level_name_label"},{default:_(()=>[w(b(a.$t("会员名称")),1)]),_:1}),v(n,{class:"level_condition_label"},{default:_(()=>[w(b(a.$t("保级条件")),1)]),_:1})]),_:1}),v(n,{class:"list"},{default:_(()=>[(o(!0),p(k,null,g(t.value,(l,e)=>(o(),d(n,{key:e,class:"list_item"},{default:_(()=>[v(n,{class:"level_name"},{default:_(()=>[w(b(a.$t(null==l?void 0:l.rankName)),1)]),_:2},1024),v(n,{class:"level_condition"},{default:_(()=>[w(b(a.$t(null==l?void 0:l.condition)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5559736e"]]),F=L(l({__name:"index",setup(l){const{userInfo:e}=t(),a=n([]),s=n([]),i=n({rankLevel:"1"}),r=u({});T();return(async()=>{var l;try{let t=await B();console.log(t);let n=null==(l=null==t?void 0:t.item)?void 0:l.filter(l=>parseInt(null==l?void 0:l.rankLevel)>=parseInt(e.rankLevel));r.value=t.rankConfig,Object.assign(a,n),Object.assign(s,null==t?void 0:t.item)}catch(t){}})(),(l,t)=>{const n=c,u=S(E("tig-copyright"),M),f=S(E("tig-layout"),U);return o(),d(f,{title:"会员中心"},{default:_(()=>[v(n,{class:"level_container"},{default:_(()=>[v(J,{list:a,"user-level":i},null,8,["list","user-level"]),A("div",{class:y(["bottom_wapper",{task_mode:2===$(e).rankType}])},[2===$(e).rankType?(o(),d(K,{key:0})):m("",!0),v(D,{"rank-config":r.value,list:s},null,8,["rank-config","list"])],2)]),_:1}),v(H),v(u)]),_:1})}}}),[["__scopeId","data-v-86eb30d1"]]);export{F as default};

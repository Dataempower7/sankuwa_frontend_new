import{d as l,a9 as e,m as a,L as s,l as t,az as n,Y as i,r as u,V as r,H as d,c as o,b as c,i as _,w as v,e as f,aN as p,J as g,P as m,K as k,a as h,aO as y,Z as b,h as w,t as $,G as P,k as j,I as C,f as G,X as I,_ as L,af as N,a6 as x,cv as O,aX as T,C as S,F as M,aL as E}from"./index-BZxHr1FI.js";import{_ as A}from"./tig-copyright.CZlnto9f.js";import{T as U}from"./tig-layout.DTz8E-sj.js";import{g as z}from"./levelCenter.CzJPGzKw.js";import{r as B}from"./index.CtwwUC20.js";import"./masonry.B_l69Lra.js";import"./specification.C71VpZ8P.js";import"./tig-image.CzXKqALH.js";import"./format-price.BrXrBVy6.js";import"./currency.Dn5A4d7X.js";import"./uni-icons.DMMn2oBg.js";import"./uni-number-box.DKxM8QIH.js";import"./product.BH5dMQls.js";import"./tig-lazy-image.BPOhG_XX.js";import"./activityCard.DE1HAQr9.js";import"./dayjs.min.BETqfnlQ.js";import"./useList.cF42RyDa.js";const J=L(l({__name:"topCard",props:{list:{type:Array,default:()=>[]}},setup(l){e(l=>({"34302fab":K.value,"67ba3dc0":R.value,"181069d0":V.value}));const{t:L}=s(),N=t(),{userInfo:x}=n(),O=l;let T=[];const S=i([]),M=u(0),E=i({discount:"0.0",freeShipping:0,rankPoint:"0"}),A=i([]),U=u(0);r(()=>O.list,l=>{var e,a,s;T=l.map(l=>l.rights),U.value=null==(e=l[0])?void 0:e.rankId,Object.assign(S,null==(a=l[0])?void 0:a.rights),M.value=l.findIndex(l=>(null==l?void 0:l.rankLevel)===(null==x?void 0:x.rankLevel)),-1!==M.value&&(Object.assign(E,l[M.value]),"0.0"!=E.discount&&A.push({iconImg:"discount",isChecked:1,rightName:E.discount+L("折")}),1===E.freeShipping&&A.push({iconImg:"freeShoping",isChecked:1,rightName:L("包邮")}),"0"!=E.rankPoint&&A.push({iconImg:"point",isChecked:1,rightName:E.rankPoint+L(`倍${N.integralName}`)}),console.log("currentCard",E),null==(s=E.rights)||s.forEach(l=>{1==l.isChecked&&A.push(l)}),console.log("currentCard",E),console.log("currentRightUnion",A))},{deep:!0,immediate:!0});const z=a(()=>{var l;return 0==x.rankExpireTime?L("永久"):null==(l=x.rankExpireTime)?void 0:l.slice(0,10)}),B=l=>{S.length=0,A.length=0;let e=l.detail.current;Object.assign(S,T[e]),Object.assign(E,O.list[e]),U.value=O.list[e].rankId,"0.0"!=E.discount&&A.push({iconImg:"discount",isChecked:1,rightName:E.discount+L("折")}),1==E.freeShipping&&A.push({iconImg:"freeShoping",isChecked:1,rightName:L("包邮")}),"0"!=E.rankPoint&&A.push({iconImg:"point",isChecked:1,rightName:E.rankPoint+L(`倍${N.integralName}`)}),E.rights.forEach(l=>{1==l.isChecked&&A.push(l)})},J=()=>{I({url:"/pages/user/levelCenter/benefit?rankId="+U.value})},K=a(()=>`url(${d("user/discount.png")})`),R=a(()=>`url(${d("user/free_shoping.png")})`),V=a(()=>`url(${d("user/point.png")})`);return(e,a)=>{const s=_,t=j,n=y,i=p,u=G;return c(),o(s,{class:"top_card_container"},{default:v(()=>[f(s,{class:"margin"},{default:v(()=>[f(i,{"next-margin":"16rpx",class:"card_swiper",current:M.value,onAnimationfinish:B},{default:v(()=>[(c(!0),g(k,null,m(l.list,(l,a)=>(c(),g(k,{key:null==l?void 0:l.rankId},[1===(null==l?void 0:l.rankCardType)?(c(),o(n,{key:0,class:"card_swiper_item"},{default:v(()=>[f(s,{class:b(["card_item",null==l?void 0:l.rankIco])},{default:v(()=>[f(s,{class:"level_name_wrap"},{default:v(()=>[f(s,{class:"level_name"},{default:v(()=>[w($(null==l?void 0:l.rankName),1)]),_:2},1024),f(s,{class:"level_expiry"},{default:v(()=>[w($(e.$t("当前等级有效期至")+" "+z.value),1)]),_:1})]),_:2},1024),(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:0,class:"card_badge"},{default:v(()=>[w($(e.$t("当前等级")),1)]),_:1})):h("",!0),f(s,{class:"card_bottom"},{default:v(()=>[1===P(x).rankType?(c(),g(k,{key:0},[(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[w($(null==(l=P(x))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[w($(e.$t("再获得")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[w($((null==l?void 0:l.minGrowthPoints)-P(x).growthPoints<0?0:(null==l?void 0:l.minGrowthPoints)-P(x).growthPoints),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("成长值升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0),2===P(x).rankType?(c(),g(k,{key:1},[(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[w($(null==(l=P(x))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[w($(e.$t("再消费")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[w($((null==l?void 0:l.minGrowthPoints)-P(x).growthPoints<0?0:(null==l?void 0:l.minGrowthPoints)-P(x).growthPoints),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("元升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)):h("",!0),2===(null==l?void 0:l.rankCardType)?(c(),o(n,{key:1,class:"card_swiper_item"},{default:v(()=>[f(s,{class:"card_item",style:C(`background-image: url(${null==l?void 0:l.rankBg});`)},{default:v(()=>[f(s,{class:"level_name_wrap"},{default:v(()=>[f(s,{class:"level_name"},{default:v(()=>[w($(null==l?void 0:l.rankName),1)]),_:2},1024),f(s,{class:"level_expiry"},{default:v(()=>[w($(e.$t("当前等级有效期至")+" "+z.value),1)]),_:1})]),_:2},1024),(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:0,class:"card_badge"},{default:v(()=>[w($(e.$t("当前等级")),1)]),_:1})):h("",!0),(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:1,class:"card_code_icon"})):h("",!0),f(s,{class:"card_bottom"},{default:v(()=>[1===P(x).rankType?(c(),g(k,{key:0},[(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[w($(null==(l=P(x))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[w($(e.$t("再获得")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[w($((null==l?void 0:l.minGrowthPoints)-P(x).growthPoints<0?0:(null==l?void 0:l.minGrowthPoints)-P(x).growthPoints),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("成长值升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0),2===P(x).rankType?(c(),g(k,{key:1},[(null==l?void 0:l.rankLevel)===P(x).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[w($(null==(l=P(x))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[w($(e.$t("再消费")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[w($((null==l?void 0:l.minGrowthPoints)-P(x).growthPoints<0?0:(null==l?void 0:l.minGrowthPoints)-P(x).growthPoints),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[w($(e.$t("元升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0)]),_:2},1024)]),_:2},1032,["style"])]),_:2},1024)):h("",!0)],64))),128))]),_:1},8,["current"])]),_:1}),f(s,{class:"level_rights_list"},{default:v(()=>[(c(!0),g(k,null,m(A.slice(0,4),(l,e)=>(c(),g(k,{key:e},[l.iconImg?(c(),o(s,{key:0,class:"right_item",onClick:J},{default:v(()=>[f(s,{class:b(["icon_img",l.iconImg])},null,8,["class"]),f(s,{class:"name"},{default:v(()=>[w($(l.rightName),1)]),_:2},1024)]),_:2},1024)):1===l.isChecked?(c(),o(s,{key:1,class:"right_item",onClick:J},{default:v(()=>[f(s,{class:"icon_wapper"},{default:v(()=>[f(u,{class:"icon",src:null==l?void 0:l.icon},null,8,["src"])]),_:2},1024),f(s,{class:"name"},{default:v(()=>[w($(null==l?void 0:l.name),1)]),_:2},1024)]),_:2},1024)):h("",!0)],64))),128)),A.length>4?(c(),o(s,{key:0,class:"right_item",onClick:J},{default:v(()=>[f(s,{class:"icon_img has_five_right"},{default:v(()=>[f(s,{class:"num"},{default:v(()=>[w($(A.length),1)]),_:1}),f(s,{class:"txt"},{default:v(()=>[w($(e.$t("项")),1)]),_:1})]),_:1}),f(s,{class:"name"},{default:v(()=>[w($(e.$t("全部权益")),1)]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-83061a42"]]),K=L(l({__name:"taskCard",setup(l){e(l=>({64570974:t.value}));const s=i({});(async()=>{try{let l=await O();Object.assign(s,null==l?void 0:l.growUpSetting),console.log(s)}catch(l){}})();const t=a(()=>`url(${d("user/task_bg.png")})`);return(l,e)=>{const a=_,t=x;return c(),o(a,{class:"task_container"},{default:v(()=>[f(a,{class:"task_head"},{default:v(()=>[f(a,{class:"title"},{default:v(()=>[w($(l.$t("成长任务")),1)]),_:1})]),_:1}),f(a,{class:"task_list"},{default:v(()=>[1===(null==s?void 0:s.evpi)?(c(),o(a,{key:0,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:C(`background-image: url(${P(d)("user/evpi.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[w("完善信息")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[w($(P(N)()?l.$t("+{0}成长值",[null==s?void 0:s.evpiGrowth]):`+${null==s?void 0:s.evpiGrowth}成长值`),1)]),_:1})]),_:1}),f(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:v(()=>[w("去完成")]),_:1})]),_:1})):h("",!0),1===(null==s?void 0:s.bindPhone)?(c(),o(a,{key:1,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:C(`background-image: url(${P(d)("user/bind_phone.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[w("绑定手机号")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[w($(P(N)()?l.$t("+{0}成长值",[null==s?void 0:s.bindPhoneGrowth]):`+${null==s?void 0:s.bindPhoneGrowth}成长值`),1)]),_:1})]),_:1}),f(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:v(()=>[w("去完成")]),_:1})]),_:1})):h("",!0),1===(null==s?void 0:s.buyGoods)?(c(),o(a,{key:2,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:C(`background-image: url(${P(d)("user/buy_goods.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[w("购买商品")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[w($(P(N)()?l.$t("每消费{0}元，获得{1}点成长值",[null==s?void 0:s.buyGoodsMoney,null==s?void 0:s.buyGoodsGrowth]):`每消费${null==s?void 0:s.buyGoodsMoney}元，获得${null==s?void 0:s.buyGoodsGrowth}点成长值`),1)]),_:1})]),_:1}),f(t,{url:"/","open-type":"switchTab",class:"do_task_btn"},{default:v(()=>[w("去完成")]),_:1})]),_:1})):h("",!0),1===(null==s?void 0:s.buyOrder)?(c(),o(a,{key:3,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:C(`background-image: url(${P(d)("user/buy_order.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[w("完成下单")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[w($(P(N)()?l.$t("每完成{0}笔订单，获得{1}点成长值",[null==s?void 0:s.buyOrderNumber,null==s?void 0:s.buyOrderGrowth]):`每完成${null==s?void 0:s.buyOrderNumber}笔订单，获得${null==s?void 0:s.buyOrderGrowth}点成长值`),1)]),_:1})]),_:1}),f(t,{url:"/pages/cart/index","open-type":"switchTab",class:"do_task_btn"},{default:v(()=>[w("去完成")]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-f2e83f02"]]),R=L(l({__name:"levelDesc",props:{list:{type:Array,default:()=>[]},rankConfig:{type:Object,default:()=>{}}},setup(l){const{t:e}=s(),a=l,t=u([]);T(()=>{var l,s;l=a.list,s=a.rankConfig,null==l||l.forEach(l=>{var a,n,i,u;1===(null==(a=null==s?void 0:s.data)?void 0:a.type)?t.value.push({...l,condition:e("不降级")}):2===(null==(n=null==s?void 0:s.data)?void 0:n.type)&&t.value.push({...l,condition:(null==(i=s.data)?void 0:i.rankAfterMonth)+e("个月后，按近")+(null==(u=s.data)?void 0:u.useMonth)+e("个月成长值重新计算")})})});return(a,s)=>{const n=_;return c(),o(n,{class:"level_desc_container"},{default:v(()=>[f(n,{class:"level_card"},{default:v(()=>[f(n,{class:"card_title"},{default:v(()=>[w($(a.$t("等级说明")),1)]),_:1}),f(n,{class:"card_info_wapper"},{default:v(()=>[f(n,{class:"list list_head"},{default:v(()=>[f(n,{class:"level_icon_label"},{default:v(()=>[w($(a.$t("标识")),1)]),_:1}),f(n,{class:"level_name_label"},{default:v(()=>[w($(a.$t("会员名称")),1)]),_:1}),f(n,{class:"level_condition_label"},{default:v(()=>[w($(a.$t("升级条件")),1)]),_:1})]),_:1}),f(n,{class:"list"},{default:v(()=>[(c(!0),g(k,null,m(l.list,(l,s)=>(c(),o(n,{key:null==l?void 0:l.rankId,class:"list_item"},{default:v(()=>[f(n,{class:"level_icon"},{default:v(()=>[f(n,{class:b(["icon",`card${null==l?void 0:l.rankLevel}`]),style:C({"background-image":`url(${P(d)(`user/level_${null==l?void 0:l.rankLevel}.png`)})`})},null,8,["class","style"])]),_:2},1024),f(n,{class:"level_name"},{default:v(()=>[w($(a.$t(null==l?void 0:l.rankName)),1)]),_:2},1024),f(n,{class:"level_condition"},{default:v(()=>{return[w($((a=null==l?void 0:l.minGrowthPoints,0===a?e("无门槛"):a+e("成长值"))),1)];var a}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),f(n,{class:"level_card"},{default:v(()=>[f(n,{class:"card_title"},{default:v(()=>[w($(a.$t("保级说明")),1)]),_:1}),f(n,{class:"card_info_wapper"},{default:v(()=>[f(n,{class:"list list_head"},{default:v(()=>[f(n,{class:"level_name_label"},{default:v(()=>[w($(a.$t("会员名称")),1)]),_:1}),f(n,{class:"level_condition_label"},{default:v(()=>[w($(a.$t("保级条件")),1)]),_:1})]),_:1}),f(n,{class:"list"},{default:v(()=>[(c(!0),g(k,null,m(t.value,(l,e)=>(c(),o(n,{key:e,class:"list_item"},{default:v(()=>[f(n,{class:"level_name"},{default:v(()=>[w($(a.$t(null==l?void 0:l.rankName)),1)]),_:2},1024),f(n,{class:"level_condition"},{default:v(()=>[w($(a.$t(null==l?void 0:l.condition)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5559736e"]]),V=L(l({__name:"index",setup(l){const{userInfo:e}=n(),a=i([]),s=i([]),r=i({rankLevel:"1"}),d=u({});t();return(async()=>{var l;try{let t=await z();console.log(t);let n=null==(l=null==t?void 0:t.item)?void 0:l.filter(l=>parseInt(null==l?void 0:l.rankLevel)>=parseInt(e.rankLevel));d.value=t.rankConfig,Object.assign(a,n),Object.assign(s,null==t?void 0:t.item)}catch(t){}})(),(l,t)=>{const n=_,i=S(M("tig-copyright"),A),u=S(M("tig-layout"),U);return c(),o(u,{title:"会员中心"},{default:v(()=>[f(n,{class:"level_container"},{default:v(()=>[f(J,{list:a,"user-level":r},null,8,["list","user-level"]),E("div",{class:b(["bottom_wapper",{task_mode:2===P(e).rankType}])},[2===P(e).rankType?(c(),o(K,{key:0})):h("",!0),f(R,{"rank-config":d.value,list:s},null,8,["rank-config","list"])],2)]),_:1}),f(B),f(i)]),_:1})}}}),[["__scopeId","data-v-86eb30d1"]]);export{V as default};

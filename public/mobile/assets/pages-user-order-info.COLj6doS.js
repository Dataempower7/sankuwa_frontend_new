import{d as e,l as a,r as l,az as t,L as s,n as u,ac as r,ad as o,m as c,c as i,w as d,C as n,F as p,c3 as f,c4 as m,b as v,e as _,i as y,J as h,a as k,K as b,k as g,h as x,t as $,Z as I,P as A,O as C,al as w,G as S,ag as j,R as N,X as T,bb as D,_ as P}from"./index-BZxHr1FI.js";import{_ as R}from"./uni-steps.lpUKa4MB.js";import{_ as F}from"./uni-icons.DMMn2oBg.js";import{T as O,a as z}from"./tig-layout.DTz8E-sj.js";import{_ as G}from"./tig-image.CzXKqALH.js";import{_ as q}from"./format-price.BrXrBVy6.js";import{T as K}from"./tig-fixed-placeholder.BDsbIjoZ.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.CguEJbLg.js";import{g as B,f as E,c as J,e as L}from"./order.DbsjjJvD.js";import"./currency.Dn5A4d7X.js";const M=P(e({__name:"info",setup(e){const P=a(),M=l(null),V=()=>{M.value&&M.value.handleClick()},X=t(),{t:Z}=s(),H=l({0:Z("您的订单已提交成功，请尽快完成付款哦！"),1:Z("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:Z("您的订单已经发货，请注意查收，祝您购物愉快！"),3:Z('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:Z('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:Z("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),Q=l({}),U=l(!1),Y=l();u(e=>{if(e&&e.id){Y.value=e.id;try{r({title:Z("加载中")}),Promise.all([ee(),te()])}catch(a){console.error(a)}}});const ee=async()=>{try{const e=await B({id:Y.value});Q.value=e}catch(e){console.error(e)}},ae=l([]),le=l(""),te=async()=>{try{const e=await E({id:Y.value});e&&(Array.isArray(e)?ae.value=e:ae.value=e.traces??[])}catch(e){console.error(e)}finally{o()}},se=e=>{T(e?{url:`/pages/user/afterSale/edit?itemId=${e}&orderId=${Q.value.orderId}`}:{url:`/pages/user/afterSale/edit?orderId=${Q.value.orderId}`})},ue=e=>{T({url:`/pages/product/index?id=${e}`})},re=e=>{D(e,()=>{N({title:Z("复制成功"),icon:"none"})})},oe=c(()=>Q.value.shop&&Object.keys(Q.value.shop).length>0?!!(Q.value.shop.kefuInlet&&Q.value.shop.kefuInlet.length>0&&Q.value.shop.kefuInlet.includes(2)):X.serviceConfig.show);return(e,a)=>{const l=n(p("uni-steps"),R),t=y,s=g,u=n(p("up-steps-item"),f),r=n(p("up-steps"),m),o=n(p("uni-icons"),F),c=n(p("tig-button"),z),D=n(p("tig-image"),G),B=n(p("format-price"),q),E=w,X=n(p("tig-fixed-placeholder"),K),Y=n(p("tig-layout"),O);return v(),i(Y,{title:"我的订单"},{default:d(()=>[_(t,{class:"order-info"},{default:d(()=>[Object.keys(Q.value).length?(v(),h(b,{key:0},[_(t,{class:"order-info-steps"},{default:d(()=>[_(l,{"active-color":"var(--general)",options:Q.value.stepStatus.steps,active:Q.value.stepStatus.current},null,8,["options","active"])]),_:1}),_(t,{class:"order-info-content"},{default:d(()=>[_(t,{class:"order-card card-space"},{default:d(()=>[_(t,{class:"order-card-item flex justify-between"},{default:d(()=>[_(t,{class:"item-left"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单编号"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(Q.value.orderSn),1)]),_:1})]),_:1}),_(t,{class:"item-right order-status-inline"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单状态"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(Q.value.orderStatusName),1)]),_:1})]),_:1})]),_:1}),_(t,{class:"order-card-item order-status-block"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单状态"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(Q.value.orderStatusName),1)]),_:1})]),_:1}),_(t,{class:"order-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("下单时间"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(Q.value.addTime),1)]),_:1})]),_:1}),Q.value.autoDeliveryDays?(v(),i(t,{key:0,class:"order-card-item"},{default:d(()=>[x("订单将在"+$(Q.value.autoDeliveryDays)+"天后自动收货",1)]),_:1})):(v(),i(t,{key:1,class:"order-card-item"},{default:d(()=>[x($(H.value[Q.value.orderStatus]),1)]),_:1}))]),_:1}),!Q.value.orderId||2!==Q.value.orderStatus&&5!==Q.value.orderStatus?k("",!0):(v(),i(t,{key:0,class:"expressage-card card-space"},{default:d(()=>[0===ae.value.length?(v(),i(t,{key:0,class:"shippingInfo-title"},{default:d(()=>[x($(e.$t("物流信息")),1)]),_:1})):k("",!0),_(t,{class:"expressage-box"},{default:d(()=>[_(t,{class:"expressage-info"},{default:d(()=>[_(t,{class:""},{default:d(()=>[x($(Q.value.logisticsName),1)]),_:1}),_(t,{class:""},{default:d(()=>[x($(Q.value.trackingNo),1)]),_:1})]),_:1}),_(t,{class:"copy-btn",onClick:a[0]||(a[0]=e=>re(Q.value.trackingNo))},{default:d(()=>[x($(e.$t("复制")),1)]),_:1})]),_:1}),ae.value.length>0?(v(),i(t,{key:1,class:"shippingInfo-box"},{default:d(()=>[_(t,{class:I(["shippingInfo-box-content",{dim:!U.value,"more-height":U.value}])},{default:d(()=>[_(r,{current:0,dot:"","active-color":"var(--general)",direction:"column"},{default:d(()=>[(v(!0),h(b,null,A(ae.value,(e,a)=>(v(),i(u,{key:a,title:e.acceptStation,desc:e.acceptTime},null,8,["title","desc"]))),128))]),_:1})]),_:1},8,["class"]),_(t,{class:"shippingInfo-btn",onClick:a[1]||(a[1]=e=>U.value=!U.value)},{default:d(()=>[x($(U.value?e.$t("收起"):e.$t("展开")),1),_(o,{class:I(["btn-icon",{rotate:U.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])]),_:1})]),_:1})):(v(),i(t,{key:2,class:"emptyText"},{default:d(()=>[x($(le.value),1)]),_:1}))]),_:1})),_(t,{class:"pay-card card-space"},{default:d(()=>[_(t,{class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("收货信息"))+"：",1)]),_:1}),_(s,{class:"address-text"},{default:d(()=>[x($(Q.value.userAddress+" "+Q.value.consignee+" "+Q.value.mobile),1)]),_:1})]),_:1}),Q.value.shippingTypeName?(v(),i(t,{key:0,class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("配送方式"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(Q.value.shippingTypeName),1)]),_:1})]),_:1})):k("",!0),_(t,{class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("支付方式"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(1===Q.value.payTypeId?e.$t("在线支付"):2===Q.value.payTypeId?e.$t("货到付款"):e.$t("线下支付")),1)]),_:1})]),_:1}),oe.value?(v(),i(t,{key:1,class:"pay-card-item im-btn"},{default:d(()=>[_(W,{ref_key:"serviceRef",ref:M,phone:Q.value.shop&&Q.value.shop.kefuPhone?Q.value.shop.kefuPhone:"","order-id":Q.value.orderId,"shop-id":Q.value.shopId},{default:d(()=>[_(c,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:V},{default:d(()=>[x($(e.$t("联系客服")),1)]),_:1})]),_:1},8,["phone","order-id","shop-id"])]),_:1})):k("",!0)]),_:1}),_(t,{class:"product-card card-space"},{default:d(()=>[(v(!0),h(b,null,A(Q.value.items,l=>(v(),i(t,{key:l.productId,class:"item-box"},{default:d(()=>[Q.value.shop?(v(),i(t,{key:0,class:"shop-info",onClick:a[2]||(a[2]=C(e=>{var a,l;return l=null==(a=Q.value.shop)?void 0:a.shopId,void T({url:`/pages/shop/index?shopId=${l}`})},["stop"]))},{default:d(()=>[_(s,{class:"text"},{default:d(()=>{var e;return[x($(null==(e=Q.value.shop)?void 0:e.shopTitle),1)]}),_:1}),_(s,{class:"iconfont icon-xiangyou"})]),_:1})):k("",!0),_(t,{class:"product-card-item"},{default:d(()=>[_(t,{class:"product-card-item-left",onClick:e=>ue(l.productId)},{default:d(()=>[_(t,{class:"left-img"},{default:d(()=>[_(D,{src:l.picThumb},null,8,["src"]),1===l.isGift?(v(),i(t,{key:0,class:"gift-text"},{default:d(()=>[x($(e.$t("赠品")),1)]),_:1})):k("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),_(t,{class:"product-card-item-right",onClick:e=>ue(l.productId)},{default:d(()=>[_(t,{class:"right-title line2"},{default:d(()=>[_(s,null,{default:d(()=>[x($(l.productName),1)]),_:2},1024)]),_:2},1024),_(t,{class:I(["sku-card",{nodata:!l.skuData||0===l.skuData.length}])},{default:d(()=>[l.skuData&&l.skuData.length>0?(v(!0),h(b,{key:0},A(l.skuData,(e,a)=>(v(),i(t,{key:a,class:"sku-item line1"},{default:d(()=>[x($(e.value),1)]),_:2},1024))),128)):k("",!0)]),_:2},1032,["class"]),l.extraSkuData&&l.extraSkuData.length?(v(),i(t,{key:0,class:"extraskudata-box"},{default:d(()=>[_(t,{class:"extraskudata"},{default:d(()=>[(v(!0),h(b,null,A(l.extraSkuData,e=>(v(),i(t,{key:e,class:"extraskudata-item"},{default:d(()=>[_(t,{class:"title"},{default:d(()=>[x($(e.attrName),1)]),_:2},1024),_(t,{class:"line-box"},{default:d(()=>[_(t,{class:"line"})]),_:1}),_(t,{class:"content"},{default:d(()=>[_(s,{class:"line1 content-text"},{default:d(()=>[x($(e.attrValue),1)]),_:2},1024),_(B,{"show-text":!1,class:"price","price-data":e.attrPrice},null,8,["price-data"]),_(t,{class:"num"},{default:d(()=>[x("x"+$(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):k("",!0),_(t,{class:"right-price"},{default:d(()=>[_(B,{"show-text":!1,class:"right-price-pricenum","decimals-style":{fontSize:"23rpx",fontWeight:"bold"},"currency-style":{fontSize:"21rpx",fontWeight:"bold"},"price-data":l.price},null,8,["price-data"]),_(t,{class:"right-price-quantity"},{default:d(()=>[x("x "+$(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),2===Q.value.payStatus&&0===l.isGift?(v(),i(t,{key:0,class:"item-btn"},{default:d(()=>[l.aftersalesItem?(v(),i(c,{key:0,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>{return a=l.aftersalesItem.aftersaleId,void T({url:`/pages/user/afterSale/info?id=${a}`});var a}},{default:d(()=>[x($(e.$t("售后详情")),1)]),_:2},1032,["onClick"])):Q.value.availableActions.toAftersales?(v(),i(c,{key:1,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>se(l.itemId)},{default:d(()=>[x($(e.$t("申请售后")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)):k("",!0)]),_:2},1024),8===Q.value.orderType&&l.eCard.length>0?(v(),i(t,{key:1,class:"virtualsample-box"},{default:d(()=>[(v(!0),h(b,null,A(l.eCard,a=>(v(),i(t,{key:a},{default:d(()=>[_(t,{class:"virtualsample-item"},{default:d(()=>[_(t,{class:"virtualsample-item-con"},{default:d(()=>[_(t,{class:"label"},{default:d(()=>[x($(e.$t("卡号"))+"：",1)]),_:1}),_(t,{class:"value"},{default:d(()=>[x($(a.cardNumber),1)]),_:2},1024)]),_:2},1024),_(t,{class:"virtualsample-item-con"},{default:d(()=>[_(t,{class:"label"},{default:d(()=>[x($(e.$t("卡密"))+"：",1)]),_:1}),_(t,{class:"value"},{default:d(()=>[x($(a.cardPwd),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),_(t,{class:"virtualsample-btn"},{default:d(()=>[_(t,null,{default:d(()=>[_(c,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>re(`卡号：${a.cardNumber}  卡密：${a.cardPwd}`)},{default:d(()=>[x($(e.$t("复制")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):k("",!0)]),_:2},1024))),128))]),_:1}),6===Q.value.orderType&&Q.value.items[0].virtualSample?(v(),i(t,{key:1,class:"virtualsample card-space"},{default:d(()=>[_(t,{class:"virtualsample-label"},{default:d(()=>[x($(e.$t("虚拟内容"))+"：",1)]),_:1}),_(t,{class:"virtualsample-value"},{default:d(()=>[_(E,{class:"desc-text-item",nodes:Q.value.items[0].virtualSample},null,8,["nodes"])]),_:1})]),_:1})):k("",!0),_(t,{class:"money-card card-space"},{default:d(()=>[_(t,{class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("商品总价"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.productAmount},null,8,["price-data"])]),_:1}),Q.value.serviceFee&&Q.value.serviceFee>0?(v(),i(t,{key:0,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("附加费用"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.serviceFee},null,8,["price-data"])]),_:1})):k("",!0),Q.value.shippingFee&&Q.value.shippingFee>0?(v(),i(t,{key:1,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("运费"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.shippingFee},null,8,["price-data"])]),_:1})):k("",!0),Q.value.balance&&Q.value.balance>0?(v(),i(t,{key:2,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("使用余额"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.balance},null,8,["price-data"])]),_:1})):k("",!0),Q.value.pointsAmount&&Q.value.pointsAmount>0?(v(),i(t,{key:3,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t(`${S(P).integralName}减免`))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.pointsAmount},null,8,["price-data"])]),_:1})):k("",!0),Q.value.couponAmount&&Q.value.couponAmount>0?(v(),i(t,{key:4,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("优惠券"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.couponAmount},null,8,["price-data"])]),_:1})):k("",!0),Q.value.discountAmount&&Q.value.discountAmount>0?(v(),i(t,{key:5,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("其他优惠"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.discountAmount},null,8,["price-data"])]),_:1})):k("",!0),Q.value.unpaidAmount&&Q.value.unpaidAmount>0?(v(),i(t,{key:6,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("待支付金额"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.unpaidAmount},null,8,["price-data"])]),_:1})):k("",!0),2==Q.value.payStatus?(v(),i(t,{key:7,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("实付款"))+"：",1)]),_:1}),_(t,{class:"order-item-price"},{default:d(()=>[_(B,{"show-text":!1,"is-bottom":!1,"price-data":Q.value.totalAmount},null,8,["price-data"])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1}),Q.value.availableActions.cancelOrder||Q.value.availableActions.toPay||Q.value.availableActions.confirmReceipt||Q.value.availableActions.toAftersales?(v(),i(X,{key:0,height:"100rpx","background-color":"#fff"},{default:d(()=>[_(t,{class:"order-info-btn"},{default:d(()=>[_(t,{class:"order-info-btn-box"},{default:d(()=>[Q.value.availableActions.cancelOrder?(v(),i(c,{key:0,class:"btn",color:"#333",plain:!0,onClick:a[3]||(a[3]=e=>{return a=Q.value.orderId,void j({title:Z("提示"),content:Z("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await J({id:a}),ee()}catch(l){N({title:l.message,icon:"none"})}}});var a})},{default:d(()=>[x($(e.$t("取消订单")),1)]),_:1})):k("",!0),Q.value.availableActions.toPay?(v(),i(c,{key:1,class:"btn",color:"#333",plain:!0,onClick:a[4]||(a[4]=e=>{return a=Q.value.orderId,void T({url:`/pages/order/pay?orderId=${a}`});var a})},{default:d(()=>[x($(e.$t("去付款")),1)]),_:1})):k("",!0),Q.value.availableActions.confirmReceipt?(v(),i(c,{key:2,color:"#333",class:"btn",plain:!0,onClick:a[5]||(a[5]=e=>{return a=Q.value.orderId,void j({title:Z("提示"),content:Z("确认收货吗？"),success:async e=>{if(e.confirm)try{await L({id:a}),ee()}catch(l){N({title:l.message,icon:"none"})}}});var a})},{default:d(()=>[x($(e.$t("确认已收货")),1)]),_:1})):k("",!0),Q.value.availableActions.toAftersales?(v(),i(c,{key:3,color:"#333",class:"btn",plain:!0,onClick:a[6]||(a[6]=e=>se(null))},{default:d(()=>[x($(e.$t("整单售后")),1)]),_:1})):k("",!0),Q.value.grouponPromotionRecordId?(v(),i(c,{key:4,class:"btn",plain:!0,onClick:a[7]||(a[7]=e=>{return a=Q.value.grouponPromotionRecordId,void T({url:`/pages/product/groupBuying?grouponPromotionRecordId=${a}`});var a})},{default:d(()=>[x($(e.$t("拼团详情")),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)],64)):k("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-743a06c1"]]);export{M as default};

import{d as e,r as a,ay as l,K as t,l as s,aa as u,ab as r,k as c,c as i,w as o,B as d,E as n,c2 as p,c3 as f,o as m,g as v,i as _,I as y,a as h,J as k,h as b,f as g,t as x,X as $,O as I,N as A,ak as C,ae as w,Q as S,n as D,ba as j,_ as N}from"./index-DDAlCzEE.js";import{_ as T}from"./uni-steps.Yaqn4QKO.js";import{_ as P}from"./uni-icons.piUs7f0e.js";import{_ as F,a as O}from"./tig-layout.Dp_86RM-.js";import{_ as q}from"./tig-image.CxOKkXKh.js";import{_ as z}from"./format-price.9n-LYbxy.js";import{_ as R}from"./tig-fixed-placeholder.BwC6eLvS.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang.BFtqSijC.js";import{g as E,f as G,c as W,e as H}from"./order.BGb_iNwp.js";const J=N(e({__name:"info",setup(e){const N=a(null),J=()=>{N.value&&N.value.handleClick()},K=l(),{t:Q}=t(),V=a({0:Q("您的订单已提交成功，请尽快完成付款哦！"),1:Q("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:Q("您的订单已经发货，请注意查收，祝您购物愉快！"),3:Q('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:Q('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:Q("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),X=a({}),L=a(!1),M=a();s(e=>{if(e&&e.id){M.value=e.id;try{u({title:Q("加载中")}),Promise.all([U(),ee()])}catch(a){console.error(a)}}});const U=async()=>{try{const e=await E({id:M.value});X.value=e}catch(e){console.error(e)}},Y=a([]),Z=a(""),ee=async()=>{try{const e=await G({id:M.value});e&&(Array.isArray(e)?Y.value=e:Y.value=e.traces??[])}catch(e){console.error(e)}finally{r()}},ae=e=>{D(e?{url:`/pages/user/afterSale/edit?itemId=${e}&orderId=${X.value.orderId}`}:{url:`/pages/user/afterSale/edit?orderId=${X.value.orderId}`})},le=e=>{D({url:`/pages/product/index?id=${e}`})},te=e=>{j(e,()=>{S({title:Q("复制成功"),icon:"none"})})},se=c(()=>X.value.shop&&Object.keys(X.value.shop).length>0?!!(X.value.shop.kefuInlet&&X.value.shop.kefuInlet.length>0&&X.value.shop.kefuInlet.includes(2)):K.serviceConfig.show);return(e,a)=>{const l=d(n("uni-steps"),T),t=_,s=b,u=d(n("up-steps-item"),p),r=d(n("up-steps"),f),c=d(n("uni-icons"),P),j=d(n("tig-button"),O),E=d(n("tig-image"),q),G=d(n("format-price"),z),K=C,M=d(n("tig-fixed-placeholder"),R),ee=d(n("tig-layout"),F);return m(),i(ee,{title:"我的订单"},{default:o(()=>[v(t,{class:"order-info"},{default:o(()=>[Object.keys(X.value).length?(m(),y(k,{key:0},[v(t,{class:"order-info-steps"},{default:o(()=>[v(l,{"active-color":"var(--general)",options:X.value.stepStatus.steps,active:X.value.stepStatus.current},null,8,["options","active"])]),_:1}),v(t,{class:"order-info-content"},{default:o(()=>[v(t,{class:"order-card card-space"},{default:o(()=>[v(t,{class:"order-card-item flex justify-between"},{default:o(()=>[v(t,{class:"item-left"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("订单编号"))+"：",1)]),_:1}),v(s,null,{default:o(()=>[g(x(X.value.orderSn),1)]),_:1})]),_:1}),v(t,{class:"item-right"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("订单状态"))+"：",1)]),_:1}),v(s,null,{default:o(()=>[g(x(X.value.orderStatusName),1)]),_:1})]),_:1})]),_:1}),v(t,{class:"order-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("下单时间"))+"：",1)]),_:1}),v(s,null,{default:o(()=>[g(x(X.value.addTime),1)]),_:1})]),_:1}),X.value.autoDeliveryDays?(m(),i(t,{key:0,class:"order-card-item"},{default:o(()=>[g("订单将在"+x(X.value.autoDeliveryDays)+"天后自动收货",1)]),_:1})):(m(),i(t,{key:1,class:"order-card-item"},{default:o(()=>[g(x(V.value[X.value.orderStatus]),1)]),_:1}))]),_:1}),!X.value.orderId||2!==X.value.orderStatus&&5!==X.value.orderStatus?h("",!0):(m(),i(t,{key:0,class:"expressage-card card-space"},{default:o(()=>[0===Y.value.length?(m(),i(t,{key:0,class:"shippingInfo-title"},{default:o(()=>[g(x(e.$t("物流信息")),1)]),_:1})):h("",!0),v(t,{class:"expressage-box"},{default:o(()=>[v(t,{class:"expressage-info"},{default:o(()=>[v(t,{class:""},{default:o(()=>[g(x(X.value.logisticsName),1)]),_:1}),v(t,{class:""},{default:o(()=>[g(x(X.value.trackingNo),1)]),_:1})]),_:1}),v(t,{class:"copy-btn",onClick:a[0]||(a[0]=e=>te(X.value.trackingNo))},{default:o(()=>[g(x(e.$t("复制")),1)]),_:1})]),_:1}),Y.value.length>0?(m(),i(t,{key:1,class:"shippingInfo-box"},{default:o(()=>[v(t,{class:$(["shippingInfo-box-content",{dim:!L.value,"more-height":L.value}])},{default:o(()=>[v(r,{current:0,dot:"","active-color":"var(--general)",direction:"column"},{default:o(()=>[(m(!0),y(k,null,I(Y.value,(e,a)=>(m(),i(u,{key:a,title:e.acceptStation,desc:e.acceptTime},null,8,["title","desc"]))),128))]),_:1})]),_:1},8,["class"]),v(t,{class:"shippingInfo-btn",onClick:a[1]||(a[1]=e=>L.value=!L.value)},{default:o(()=>[g(x(L.value?e.$t("收起"):e.$t("展开")),1),v(c,{class:$(["btn-icon",{rotate:L.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])]),_:1})]),_:1})):(m(),i(t,{key:2,class:"emptyText"},{default:o(()=>[g(x(Z.value),1)]),_:1}))]),_:1})),v(t,{class:"pay-card card-space"},{default:o(()=>[v(t,{class:"pay-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("收货信息"))+"：",1)]),_:1}),v(s,{class:"address-text"},{default:o(()=>[g(x(X.value.userAddress+" "+X.value.consignee+" "+X.value.mobile),1)]),_:1})]),_:1}),X.value.shippingTypeName?(m(),i(t,{key:0,class:"pay-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("配送方式"))+"：",1)]),_:1}),v(s,null,{default:o(()=>[g(x(X.value.shippingTypeName),1)]),_:1})]),_:1})):h("",!0),v(t,{class:"pay-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("支付方式"))+"：",1)]),_:1}),v(s,null,{default:o(()=>[g(x(1===X.value.payTypeId?e.$t("在线支付"):2===X.value.payTypeId?e.$t("货到付款"):e.$t("线下支付")),1)]),_:1})]),_:1}),se.value?(m(),i(t,{key:1,class:"pay-card-item im-btn"},{default:o(()=>[v(B,{ref_key:"serviceRef",ref:N,phone:X.value.shop&&X.value.shop.kefuPhone?X.value.shop.kefuPhone:"","order-id":X.value.orderId,"shop-id":X.value.shopId},{default:o(()=>[v(j,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:J},{default:o(()=>[g(x(e.$t("联系客服")),1)]),_:1})]),_:1},8,["phone","order-id","shop-id"])]),_:1})):h("",!0)]),_:1}),v(t,{class:"product-card card-space"},{default:o(()=>[(m(!0),y(k,null,I(X.value.items,l=>(m(),i(t,{key:l.productId,class:"item-box"},{default:o(()=>[X.value.shop?(m(),i(t,{key:0,class:"shop-info",onClick:a[2]||(a[2]=A(e=>{var a,l;return l=null==(a=X.value.shop)?void 0:a.shopId,void D({url:`/pages/shop/index?shopId=${l}`})},["stop"]))},{default:o(()=>[v(s,{class:"text"},{default:o(()=>{var e;return[g(x(null==(e=X.value.shop)?void 0:e.shopTitle),1)]}),_:1}),v(s,{class:"iconfont icon-xiangyou"})]),_:1})):h("",!0),v(t,{class:"product-card-item"},{default:o(()=>[v(t,{class:"product-card-item-left",onClick:e=>le(l.productId)},{default:o(()=>[v(t,{class:"left-img"},{default:o(()=>[v(E,{src:l.picThumb},null,8,["src"]),1===l.isGift?(m(),i(t,{key:0,class:"gift-text"},{default:o(()=>[g(x(e.$t("赠品")),1)]),_:1})):h("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),v(t,{class:"product-card-item-right",onClick:e=>le(l.productId)},{default:o(()=>[v(t,{class:"right-title line2"},{default:o(()=>[v(s,null,{default:o(()=>[g(x(l.productName),1)]),_:2},1024)]),_:2},1024),v(t,{class:$(["sku-card",{nodata:!l.skuData||0===l.skuData.length}])},{default:o(()=>[l.skuData&&l.skuData.length>0?(m(!0),y(k,{key:0},I(l.skuData,(e,a)=>(m(),i(t,{key:a,class:"sku-item line1"},{default:o(()=>[g(x(e.value),1)]),_:2},1024))),128)):h("",!0)]),_:2},1032,["class"]),l.extraSkuData&&l.extraSkuData.length?(m(),i(t,{key:0,class:"extraskudata-box"},{default:o(()=>[v(t,{class:"extraskudata"},{default:o(()=>[(m(!0),y(k,null,I(l.extraSkuData,e=>(m(),i(t,{key:e,class:"extraskudata-item"},{default:o(()=>[v(t,{class:"title"},{default:o(()=>[g(x(e.attrName),1)]),_:2},1024),v(t,{class:"line-box"},{default:o(()=>[v(t,{class:"line"})]),_:1}),v(t,{class:"content"},{default:o(()=>[v(s,{class:"line1 content-text"},{default:o(()=>[g(x(e.attrValue),1)]),_:2},1024),v(G,{"show-text":!1,class:"price","price-data":e.attrPrice},null,8,["price-data"]),v(t,{class:"num"},{default:o(()=>[g("x"+x(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):h("",!0),v(t,{class:"right-price"},{default:o(()=>[v(G,{"show-text":!1,class:"right-price-pricenum","decimals-style":{fontSize:"23rpx",fontWeight:"bold"},"currency-style":{fontSize:"21rpx",fontWeight:"bold"},"price-data":l.price},null,8,["price-data"]),v(t,{class:"right-price-quantity"},{default:o(()=>[g("x "+x(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),2===X.value.payStatus&&0===l.isGift?(m(),i(t,{key:0,class:"item-btn"},{default:o(()=>[l.aftersalesItem?(m(),i(j,{key:0,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>{return a=l.aftersalesItem.aftersaleId,void D({url:`/pages/user/afterSale/info?id=${a}`});var a}},{default:o(()=>[g(x(e.$t("售后详情")),1)]),_:2},1032,["onClick"])):X.value.availableActions.toAftersales?(m(),i(j,{key:1,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>ae(l.itemId)},{default:o(()=>[g(x(e.$t("申请售后")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)):h("",!0)]),_:2},1024),8===X.value.orderType&&l.eCard.length>0?(m(),i(t,{key:1,class:"virtualsample-box"},{default:o(()=>[(m(!0),y(k,null,I(l.eCard,a=>(m(),i(t,{key:a},{default:o(()=>[v(t,{class:"virtualsample-item"},{default:o(()=>[v(t,{class:"virtualsample-item-con"},{default:o(()=>[v(t,{class:"label"},{default:o(()=>[g(x(e.$t("卡号"))+"：",1)]),_:1}),v(t,{class:"value"},{default:o(()=>[g(x(a.cardNumber),1)]),_:2},1024)]),_:2},1024),v(t,{class:"virtualsample-item-con"},{default:o(()=>[v(t,{class:"label"},{default:o(()=>[g(x(e.$t("卡密"))+"：",1)]),_:1}),v(t,{class:"value"},{default:o(()=>[g(x(a.cardPwd),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),v(t,{class:"virtualsample-btn"},{default:o(()=>[v(t,null,{default:o(()=>[v(j,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>te(`卡号：${a.cardNumber}  卡密：${a.cardPwd}`)},{default:o(()=>[g(x(e.$t("复制")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):h("",!0)]),_:2},1024))),128))]),_:1}),6===X.value.orderType&&X.value.items[0].virtualSample?(m(),i(t,{key:1,class:"virtualsample card-space"},{default:o(()=>[v(t,{class:"virtualsample-label"},{default:o(()=>[g(x(e.$t("虚拟内容"))+"：",1)]),_:1}),v(t,{class:"virtualsample-value"},{default:o(()=>[v(K,{class:"desc-text-item",nodes:X.value.items[0].virtualSample},null,8,["nodes"])]),_:1})]),_:1})):h("",!0),v(t,{class:"money-card card-space"},{default:o(()=>[v(t,{class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("商品总价"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.productAmount},null,8,["price-data"])]),_:1}),X.value.serviceFee&&X.value.serviceFee>0?(m(),i(t,{key:0,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("附加费用"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.serviceFee},null,8,["price-data"])]),_:1})):h("",!0),X.value.shippingFee&&X.value.shippingFee>0?(m(),i(t,{key:1,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("运费"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.shippingFee},null,8,["price-data"])]),_:1})):h("",!0),X.value.balance&&X.value.balance>0?(m(),i(t,{key:2,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("使用余额"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.balance},null,8,["price-data"])]),_:1})):h("",!0),X.value.pointsAmount&&X.value.pointsAmount>0?(m(),i(t,{key:3,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("使用积分"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.pointsAmount},null,8,["price-data"])]),_:1})):h("",!0),X.value.couponAmount&&X.value.couponAmount>0?(m(),i(t,{key:4,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("优惠券"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.couponAmount},null,8,["price-data"])]),_:1})):h("",!0),X.value.discountAmount&&X.value.discountAmount>0?(m(),i(t,{key:5,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("其他优惠"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.discountAmount},null,8,["price-data"])]),_:1})):h("",!0),X.value.unpaidAmount&&X.value.unpaidAmount>0?(m(),i(t,{key:6,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("待支付金额"))+"：",1)]),_:1}),v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.unpaidAmount},null,8,["price-data"])]),_:1})):h("",!0),2==X.value.payStatus?(m(),i(t,{key:7,class:"money-card-item"},{default:o(()=>[v(s,{class:"order-item-label"},{default:o(()=>[g(x(e.$t("实付款"))+"：",1)]),_:1}),v(t,{class:"order-item-price"},{default:o(()=>[v(G,{"show-text":!1,"is-bottom":!1,"price-data":X.value.totalAmount},null,8,["price-data"])]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1}),X.value.availableActions.cancelOrder||X.value.availableActions.toPay||X.value.availableActions.confirmReceipt||X.value.availableActions.toAftersales?(m(),i(M,{key:0,height:"100rpx","background-color":"#fff"},{default:o(()=>[v(t,{class:"order-info-btn"},{default:o(()=>[v(t,{class:"order-info-btn-box"},{default:o(()=>[X.value.availableActions.cancelOrder?(m(),i(j,{key:0,class:"btn",color:"#333",plain:!0,onClick:a[3]||(a[3]=e=>{return a=X.value.orderId,void w({title:Q("提示"),content:Q("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await W({id:a}),U()}catch(l){S({title:l.message,icon:"none"})}}});var a})},{default:o(()=>[g(x(e.$t("取消订单")),1)]),_:1})):h("",!0),X.value.availableActions.toPay?(m(),i(j,{key:1,class:"btn",color:"#333",plain:!0,onClick:a[4]||(a[4]=e=>{return a=X.value.orderId,void D({url:`/pages/order/pay?orderId=${a}`});var a})},{default:o(()=>[g(x(e.$t("去付款")),1)]),_:1})):h("",!0),X.value.availableActions.confirmReceipt?(m(),i(j,{key:2,color:"#333",class:"btn",plain:!0,onClick:a[5]||(a[5]=e=>{return a=X.value.orderId,void w({title:Q("提示"),content:Q("确认收货吗？"),success:async e=>{if(e.confirm)try{await H({id:a}),U()}catch(l){S({title:l.message,icon:"none"})}}});var a})},{default:o(()=>[g(x(e.$t("确认已收货")),1)]),_:1})):h("",!0),X.value.availableActions.toAftersales?(m(),i(j,{key:3,color:"#333",class:"btn",plain:!0,onClick:a[6]||(a[6]=e=>ae(null))},{default:o(()=>[g(x(e.$t("整单售后")),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1})):h("",!0)],64)):h("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-cdf7cbc4"]]);export{J as default};

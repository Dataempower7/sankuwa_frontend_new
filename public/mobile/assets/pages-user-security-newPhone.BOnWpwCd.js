import{d as e,L as a,r as t,m as l,c as s,w as i,C as o,F as u,b as n,e as r,i as c,G as d,h as p,t as m,R as v,a3 as f,_ as b}from"./index-BZxHr1FI.js";import{_ as h}from"./uni-easyinput.DHFPvsdC.js";import{T as y,a as _}from"./tig-layout.DTz8E-sj.js";import{V as g}from"./index.DfptdAaC.js";import{a as k,b as x}from"./security.tfcDL43Q.js";import"./uni-icons.DMMn2oBg.js";const j=b(e({__name:"newPhone",setup(e){const{t:b}=a(),j=e=>{w.value=e},C=e=>{G.value=e},w=t(""),G=t(""),I=t(""),T=t(!0),U=l(()=>!G.value||!w.value),$=e=>{v({title:e,duration:1500,icon:"none"})},q=async()=>{try{let e={mobile:G.value,code:w.value};await x({...e}),v({title:b("修改成功"),icon:"none"}),setTimeout(()=>{f({url:"/pages/user/profile/index"})},1e3)}catch(e){e.message&&v({title:e.message,icon:"none"})}};return(e,a)=>{const t=o(u("uni-easyinput"),h),l=c,v=o(u("tig-button"),_),f=o(u("tig-layout"),y);return n(),s(f,{title:"账户安全"},{default:i(()=>[r(l,{class:"profile-edit-main"},{default:i(()=>[r(l,{class:"profile-edit-content"},{default:i(()=>[r(l,{class:"item input"},{default:i(()=>[r(t,{"input-border":!1,value:G.value,class:"uni-input item-input",placeholder:e.$t("请输入新手机号"),"primary-color":"rgb(192, 196, 204)",onInput:C},null,8,["value","placeholder"])]),_:1}),r(l,{class:"flex align-center"},{default:i(()=>[r(l,{class:"item line"},{default:i(()=>[r(t,{"input-border":!1,value:w.value,class:"uni-input item-input",focus:"",placeholder:e.$t("新手机短信验证码"),"primary-color":"rgb(192, 196, 204)",onInput:j},null,8,["value","placeholder"])]),_:1}),r(g,{"is-checked":T.value,"onUpdate:isChecked":a[0]||(a[0]=e=>T.value=e),mobile:G.value,"onUpdate:mobile":a[1]||(a[1]=e=>G.value=e),"verify-token-data":I.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>I.value=e),style:{height:"65rpx"},"request-api":d(k),onMobileErrorCallback:$},null,8,["is-checked","mobile","verify-token-data","request-api"])]),_:1}),r(l,{class:"item",style:{height:"60rpx"}},{default:i(()=>[r(v,{disabled:U.value,class:"next",onClick:q},{default:i(()=>[p(m(e.$t("提交")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-29c28162"]]);export{j as default};

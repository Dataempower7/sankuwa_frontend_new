import{d as e,r as a,n as l,m as t,c as s,w as i,C as u,F as o,b as n,e as d,i as r,J as c,h as f,t as p,K as v,G as m,R as _,j as b,_ as y}from"./index-BZxHr1FI.js";import{_ as h}from"./uni-easyinput.DHFPvsdC.js";import{T as k,a as g}from"./tig-layout.DTz8E-sj.js";import{V as $}from"./index.DfptdAaC.js";import{s as x,a as j,m as C,b as U}from"./security.tfcDL43Q.js";import"./uni-icons.DMMn2oBg.js";const q=y(e({__name:"phone",setup(e){const y=e=>{w.value=e},q=e=>{G.value=e},w=a(""),G=a(""),I=a(""),T=a(!0),D=a(!1);l(e=>{e.mobile?(D.value=!0,G.value=e.mobile):D.value=!1});const E=t(()=>!w.value||!I.value),M=e=>{_({title:e,duration:1500,icon:"none"})},R=async()=>{try{let e={mobile:G.value,code:w.value};D.value?(await C({...e}),b({url:"/pages/user/security/newPhone"})):(await U({...e}),_({title:"绑定成功",icon:"none"}),b({url:"/pages/user/index"}))}catch(e){_({title:e.message,icon:"none"})}};return(e,a)=>{const l=r,t=u(o("uni-easyinput"),h),_=u(o("tig-button"),g),b=u(o("tig-layout"),k);return n(),s(b,{title:"账户安全"},{default:i(()=>[d(l,{class:"profile-edit-main"},{default:i(()=>[d(l,{class:"profile-edit-content"},{default:i(()=>[D.value?(n(),s(l,{key:0,class:"item"},{default:i(()=>[d(l,{class:"title"},{default:i(()=>[d(l,null,{default:i(()=>[f(p(e.$t("请输入")),1)]),_:1}),d(l,{class:"info"},{default:i(()=>[f(p(G.value.replace(/(\d{2})\d*(\d{4})$/,"$1*****$2")),1)]),_:1}),d(l,null,{default:i(()=>[f(p(e.$t("收到的短信验证码")),1)]),_:1})]),_:1})]),_:1})):(n(),c(v,{key:1},[d(l,{class:"item"},{default:i(()=>[d(l,{class:"title"},{default:i(()=>[d(l,null,{default:i(()=>[f(p(e.$t("您还未绑定手机号，请输入手机号绑定")),1)]),_:1})]),_:1})]),_:1}),d(l,{class:"item special-item line"},{default:i(()=>[d(t,{"input-border":!1,value:G.value,focus:!D.value,class:"uni-input item-input",placeholder:e.$t("请输入手机号"),"primary-color":"rgb(192, 196, 204)",onInput:q},null,8,["value","focus","placeholder"])]),_:1})],64)),d(l,{class:"flex align-center"},{default:i(()=>[d(l,{class:"item line"},{default:i(()=>[d(t,{"input-border":!1,value:w.value,focus:D.value,class:"",placeholder:e.$t("手机短信验证码"),"primary-color":"rgb(192, 196, 204)",onInput:y},null,8,["value","focus","placeholder"])]),_:1}),D.value?(n(),s($,{key:0,"is-checked":T.value,"onUpdate:isChecked":a[0]||(a[0]=e=>T.value=e),mobile:G.value,"onUpdate:mobile":a[1]||(a[1]=e=>G.value=e),"verify-token-data":I.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>I.value=e),style:{height:"65rpx"},"request-api":m(x),onMobileErrorCallback:M},null,8,["is-checked","mobile","verify-token-data","request-api"])):(n(),s($,{key:1,"is-checked":T.value,"onUpdate:isChecked":a[3]||(a[3]=e=>T.value=e),mobile:G.value,"onUpdate:mobile":a[4]||(a[4]=e=>G.value=e),"verify-token-data":I.value,"onUpdate:verifyTokenData":a[5]||(a[5]=e=>I.value=e),style:{height:"65rpx"},"request-api":m(j),onMobileErrorCallback:M},null,8,["is-checked","mobile","verify-token-data","request-api"]))]),_:1}),d(l,{class:"item",style:{height:"60rpx"}},{default:i(()=>[d(_,{disabled:E.value,class:"next",onClick:R},{default:i(()=>[f(p(e.$t("下一步")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),d(l,{class:"profile-edit-content"},{default:i(()=>[d(l,{class:"btn-item"},{default:i(()=>[d(l,{class:"title"},{default:i(()=>[d(l,{class:"big-title"},{default:i(()=>[f(p(e.$t("为什么要进行身份验证"))+"？",1)]),_:1})]),_:1}),d(l,{class:"info"},{default:i(()=>[f("1. "+p(e.$t("为保障您的账户信息安全，在变更账户中的重要信息时需要进行身份验证，感谢您的理解和支持"))+"。",1)]),_:1}),d(l,{class:"info"},{default:i(()=>[f("2. "+p(e.$t("验证身份遇到问题？您可以通知我们的客服，我们将尽快联系您"))+"。",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-7bb0d7ed"]]);export{q as default};

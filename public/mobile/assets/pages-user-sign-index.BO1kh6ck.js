import{d as a,l as s,L as e,r as i,m as t,n as l,c as o,w as n,ac as c,ad as d,C as r,F as u,a9 as m,H as v,b as p,aL as g,J as y,a as f,t as k,G as x,h as $,K as _,P as b,Z as h,e as w,a6 as N,i as j,ae as B,R as G,X as q,_ as C}from"./index-BZxHr1FI.js";import{_ as P}from"./format-price.BrXrBVy6.js";import{T as L}from"./tig-layout.DTz8E-sj.js";import{g as T,s as I}from"./sign.DX3lFpmx.js";import"./currency.Dn5A4d7X.js";const S=C(a({__name:"index",setup(a){m(a=>({fff3cb86:K.value,"20fba6dd":M.value}));const C=s(),{t:S}=e(),F=i({signPoints:0,record:0,isSign:0,days:[],recommendGoods:[]}),H=async()=>{c({title:S("加载中")});try{const a=await T("user/sign/index");Object.assign(F.value,a)}catch(a){console.error(a)}finally{d()}},J=async()=>{c({title:S("加载中")});try{await I(),G({title:S("打卡成功"),duration:1e3,icon:"none"}),setTimeout(function(){H()},1e3)}catch(a){G({title:a.message,duration:1500,icon:"none"})}finally{d()}},K=t(()=>`url(${v("qiandao/bg.png")})`),M=t(()=>`url(${v("qiandao/hot_bg.png")})`);return l(()=>{H()}),(a,s)=>{const e=N,i=r(u("format-price"),P),t=j,l=r(u("tig-layout"),L);return p(),o(l,{title:"签到"},{default:n(()=>[g("div",{class:"qiandaoBox"},[g("div",{class:"title"},k(a.$t(`每日打卡领${x(C).integralName}`)),1),g("div",{class:"wrap"},[g("div",{class:"samll-title"},[$(k(a.$t("今天打卡得")),1),g("span",null,k(F.value.signPoints),1),$(k(a.$t(x(C).integralName)),1)]),g("div",{class:"selectedBox"},[g("div",{class:"line"}),(p(!0),y(_,null,b(F.value.days,(a,s)=>(p(),y("div",{key:s,class:h(["item",{selected:F.value.record>=a.dayNum}])},[g("div",{class:"item-content"},[F.value.record<a.dayNum?(p(),y("div",{key:0,class:"num"},k(a.points),1)):(p(),y("div",{key:1,class:"num"})),g("div",{class:"date"},k(a.name),1)])],2))),128))]),g("div",{class:"qiandaoBtnBox"},[g("div",{class:"qdBtn"},[F.value.isSign?(p(),y("div",{key:0,class:"dk-now"},[g("span",null,k(a.$t("今日已打卡")),1)])):(p(),y("div",{key:1,class:"dk-now",onClick:J},[g("span",null,k(a.$t("立即打卡")),1)]))])])])]),F.value.recommendGoods?(p(),y("div",{key:0,class:"recgoodsBox"},[g("div",{class:"title"},[g("div",{class:"bg"},k(a.$t("今日特卖 发现好货")),1),w(e,{url:"/pages/search/result?intro=hot"},{default:n(()=>[g("div",{class:"moregoods"},[$(k(a.$t("查看更多"))+" ",1),g("span",{class:"iconfont icon-xiangyou"})])]),_:1})]),g("div",{class:"wrapGoods"},[(p(!0),y(_,null,b(F.value.recommendGoods,(a,s)=>(p(),o(t,{key:s,class:"item",onClick:s=>{q({url:"/pages/product/index?id="+a.productId})}},{default:n(()=>[g("img",{class:"rec-img",alt:a.productName,src:x(B)(a.picThumb)},null,8,["alt","src"]),g("div",{class:"info"},[g("div",{class:"name"},k(a.productName),1),w(i,{"is-bottom":!1,class:"price","price-data":a.productPrice},null,8,["price-data"])])]),_:2},1032,["onClick"]))),128))])])):f("",!0)]),_:1})}}}),[["__scopeId","data-v-f629cd29"]]);export{S as default};

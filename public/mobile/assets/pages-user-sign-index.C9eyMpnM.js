import{d as a,K as s,r as e,k as i,l as t,c as l,w as o,aa as c,ab as n,B as d,E as r,a7 as u,G as m,o as v,aH as p,I as g,a as y,t as f,f as k,J as x,O as _,X as $,g as b,a4 as w,i as B,F as h,ac as j,Q as q,n as G,_ as N}from"./index-DDAlCzEE.js";import{_ as C}from"./format-price.9n-LYbxy.js";import{_ as I}from"./tig-layout.Dp_86RM-.js";import{g as P,s as O}from"./sign.C5irqPBJ.js";const S=N(a({__name:"index",setup(a){u(a=>({"7247b068":E.value,"055cd3ec":F.value}));const{t:N}=s(),S=e({signPoints:0,record:0,isSign:0,days:[],recommendGoods:[]}),T=async()=>{c({title:N("加载中")});try{const a=await P("user/sign/index");Object.assign(S.value,a)}catch(a){console.error(a)}finally{n()}},D=async()=>{c({title:N("加载中")});try{await O(),q({title:N("打卡成功"),duration:1e3,icon:"none"}),setTimeout(function(){T()},1e3)}catch(a){q({title:a.message,duration:1500,icon:"none"})}finally{n()}},E=i(()=>`url(${m("qiandao/bg.png")})`),F=i(()=>`url(${m("qiandao/hot_bg.png")})`);return t(()=>{T()}),(a,s)=>{const e=w,i=d(r("format-price"),C),t=B,c=d(r("tig-layout"),I);return v(),l(c,{title:"签到"},{default:o(()=>[p("div",{class:"qiandaoBox"},[p("div",{class:"title"},f(a.$t("每日打卡领积分")),1),p("div",{class:"wrap"},[p("div",{class:"samll-title"},[k(f(a.$t("今天打卡得")),1),p("span",null,f(S.value.signPoints),1),k(f(a.$t("积分")),1)]),p("div",{class:"selectedBox"},[p("div",{class:"line"}),(v(!0),g(x,null,_(S.value.days,(a,s)=>(v(),g("div",{key:s,class:$(["item",{selected:S.value.record>=a.dayNum}])},[p("div",{class:"item-content"},[S.value.record<a.dayNum?(v(),g("div",{key:0,class:"num"},f(a.points),1)):(v(),g("div",{key:1,class:"num"})),p("div",{class:"date"},f(a.name),1)])],2))),128))]),p("div",{class:"qiandaoBtnBox"},[p("div",{class:"qdBtn"},[S.value.isSign?(v(),g("div",{key:0,class:"dk-now"},[p("span",null,f(a.$t("今日已打卡")),1)])):(v(),g("div",{key:1,class:"dk-now",onClick:D},[p("span",null,f(a.$t("立即打卡")),1)]))])])])]),S.value.recommendGoods?(v(),g("div",{key:0,class:"recgoodsBox"},[p("div",{class:"title"},[p("div",{class:"bg"},f(a.$t("今日特卖 发现好货")),1),b(e,{url:"/pages/search/result?intro=hot"},{default:o(()=>[p("div",{class:"moregoods"},[k(f(a.$t("查看更多"))+" ",1),p("span",{class:"iconfont icon-xiangyou"})])]),_:1})]),p("div",{class:"wrapGoods"},[(v(!0),g(x,null,_(S.value.recommendGoods,(a,s)=>(v(),l(t,{key:s,class:"item",onClick:s=>{G({url:"/pages/product/index?id="+a.productId})}},{default:o(()=>[p("img",{class:"rec-img",alt:a.productName,src:h(j)(a.picThumb)},null,8,["alt","src"]),p("div",{class:"info"},[p("div",{class:"name"},f(a.productName),1),b(i,{"is-bottom":!1,class:"price","price-data":a.productPrice},null,8,["price-data"])])]),_:2},1032,["onClick"]))),128))])])):y("",!0)]),_:1})}}}),[["__scopeId","data-v-8c031201"]]);export{S as default};

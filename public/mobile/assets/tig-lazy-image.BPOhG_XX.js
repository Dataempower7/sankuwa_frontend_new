import{d as e,bv as a,r as s,V as l,aM as o,a_ as t,aQ as r,aT as m,c as u,b as i,i as c,w as n,e as d,Z as v,G as b,a as g,f as p,H as y,ae as f,_ as h}from"./index-BZxHr1FI.js";const _=h(e({__name:"tig-lazy-image",props:{src:{type:String,default:"",required:!1},mode:{type:String,default:""},threshold:{type:Number,default:100},shimmer:{type:Boolean,default:!1}},emits:["error","load"],setup(e,{emit:h}){const _=e,k=a(),x=s(!1),T=s(!0),w=s(!1),z=h,B=s("");l(()=>_.src,e=>{e?(x.value=!1,T.value=!0,B.value=f(e)):(x.value=!0,T.value=!1,w.value=!0)},{immediate:!0});const R=e=>{T.value=!1,w.value=!0,x.value=!1,z("load",e)},S=e=>{x.value=!0,T.value=!1,w.value=!0,z("error",e)},V=r(),j=s(!1);let q;const E=()=>{q&&(q.disconnect(),q=null)};return o(()=>{q=t(V),q.relativeToViewport({top:0,bottom:_.threshold}).observe(`.base-image-box${k}`,e=>{j.value=e.intersectionRatio>0,e.intersectionRatio>0&&E()})}),m(()=>{E()}),(a,s)=>{const l=p,o=c;return i(),u(o,{class:"tig-lazy-image"},{default:n(()=>[d(o,{class:v("base-image-box base-image-box"+b(k))},{default:n(()=>[!x.value&&j.value?(i(),u(l,{key:0,class:v(["base-image",{"loading-end":!T.value}]),src:B.value,mode:e.mode,onError:S,onLoad:R},null,8,["class","src","mode"])):g("",!0),!T.value&&x.value?(i(),u(l,{key:1,class:"base-image empty",src:b(y)("common/empty-img-bg3.png"),mode:e.mode},null,8,["src","mode"])):g("",!0),w.value||x.value?g("",!0):(i(),u(o,{key:2,class:v(["base-skeleton",e.shimmer?"shimmer":"shan"])},{default:n(()=>[d(o,{class:v(e.shimmer?"shimmerBlock block":"block")},null,8,["class"])]),_:1},8,["class"]))]),_:1},8,["class"])]),_:1})}}}),[["__scopeId","data-v-d2bef550"]]);export{_ as T};

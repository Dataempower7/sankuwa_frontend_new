import{d as e,K as a,r as t,c as s,o as u,w as l,aF as i,i as n,bW as o,Q as r,aa as c,bP as d,bQ as p,L as m,ab as h,bR as f}from"./index-DDAlCzEE.js";const g=e({__name:"tig-upload",props:{count:{type:Number,default:1},modelValue:{type:String,default:""},requestUrl:{type:String,default:"user/user/uploadImg"}},emits:["update:modelValue","change"],setup(e,{emit:g}){const{t:b}=a(),y=e,S=t([]),_=g,P=()=>{o({count:y.count,success:async e=>{c({title:b("上传中...")}),e.tempFilePaths.map(e=>{d({url:f+"/api/"+y.requestUrl,filePath:e,name:"file",header:{Authorization:m("token"),Secret:p()},success:e=>{y.count>1?(S.value.push(JSON.parse(e.data).data),_("update:modelValue",S.value),h()):(r({title:b("图片上传成功")}),_("change"),h())},fail:e=>{h(),r({title:b("图片上传失败"),icon:"none"})}})})},fail:e=>{r({title:b("图片选择失败"),icon:"none"})}})};return(e,a)=>{const t=n;return u(),s(t,{style:{height:"inherit",width:"inherit"},onClick:P},{default:l(()=>[i(e.$slots,"default")]),_:3})}}});export{g as _};

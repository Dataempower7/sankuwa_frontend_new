import{d as e,L as a,r as t,c as s,b as u,w as i,aB as l,i as n,bZ as o,R as r,ac as c,bS as d,bT as p,M as m,ad as h,bU as f}from"./index-BZxHr1FI.js";const g=e({__name:"tig-upload",props:{count:{type:Number,default:1},modelValue:{type:String,default:""},requestUrl:{type:String,default:"user/user/uploadImg"}},emits:["update:modelValue","change"],setup(e,{emit:g}){const{t:y}=a(),b=e,S=t([]),_=g,w=async()=>{await(async()=>!0)()&&o({count:b.count,success:async e=>{c({title:y("上传中...")}),e.tempFilePaths.map(e=>{d({url:f+"/api/"+b.requestUrl,filePath:e,name:"file",header:{Authorization:m("token"),Secret:p()},success:e=>{b.count>1?(S.value.push(JSON.parse(e.data).data),_("update:modelValue",S.value),h()):(r({title:y("图片上传成功")}),_("change"),h())},fail:e=>{h(),r({title:y("图片上传失败"),icon:"none"})}})})},fail:e=>{r({title:y("图片选择失败"),icon:"none"})}})};return(e,a)=>{const t=n;return u(),s(t,{style:{height:"inherit",width:"inherit"},onClick:w},{default:i(()=>[l(e.$slots,"default")]),_:3})}}});export{g as _};

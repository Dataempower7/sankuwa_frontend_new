import{d as e,m as a,r as t,V as l,C as u,F as s,c as i,b as r,w as d,e as n,i as o,aB as c,b$ as m,J as f,P as v,c0 as p,K as _,h as g,t as h,_ as b,L as k,c1 as w,Z as x,R as y,c2 as V,a9 as T,G as C,bK as D,a as $}from"./index-BZxHr1FI.js";import{s as j}from"./searchInput.DFMcO208.js";import{a as S,_ as N,e as O}from"./tig-layout.DTz8E-sj.js";import{T as I}from"./tig-fixed-placeholder.BDsbIjoZ.js";const E=b(e({__name:"tig-picker-date",props:{modelValue:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},defaultIndex:{type:Array,default:()=>[0,0,0]}},emits:["update:modelValue","change","confirm"],setup(e,{emit:b}){const k=e,w=b,x=a({get:()=>k.modelValue,set(e){w("update:modelValue",e)}}),y=t([0,0,0]);l(()=>k.defaultIndex,e=>{e.length>0&&(y.value=JSON.parse(JSON.stringify(e)))},{immediate:!0});const V=e=>{w("change",{values:k.columns.map((a,t)=>a[e.detail.value[t]]),indexs:e.detail.value})};return(a,t)=>{const l=o,b=p,k=m,w=u(s("tig-button"),S),T=u(s("tig-fixed-placeholder"),I),C=u(s("tig-popup"),N);return r(),i(C,{show:x.value,"onUpdate:show":t[1]||(t[1]=e=>x.value=e),"z-index":999,"show-close":!1,"background-color":"#fff"},{default:d(()=>[n(l,{class:"picker-box"},{default:d(()=>[c(a.$slots,"default",{},void 0,!0),n(k,{"indicator-style":"height: 50px;",value:y.value,class:"picker-view",onChange:V},{default:d(()=>[(r(!0),f(_,null,v(e.columns,(e,a)=>(r(),i(b,{key:a},{default:d(()=>[(r(!0),f(_,null,v(e,(e,a)=>(r(),i(l,{key:a,class:"item"},{default:d(()=>[g(h(e),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1},8,["value"]),n(T,{"background-color":"#fff"},{default:d(()=>[n(l,{class:"btn-box"},{default:d(()=>[n(w,{class:"btn","custom-style":{"background-color":"#ff720d"},onClick:t[0]||(t[0]=e=>a.$emit("confirm"))},{default:d(()=>[g(h(a.$t("确定")),1)]),_:1})]),_:1})]),_:1})]),_:3})]),_:3},8,["show"])}}}),[["__scopeId","data-v-676e98db"]]),B=b(e({__name:"selectDate",props:{modelValue:{type:Boolean,default:!1},minYears:{type:[Number,String],default:2013}},emits:["change","update:modelValue","confirm"],setup(e,{emit:l}){const{t:c}=k(),m=e,f=a({get:()=>m.modelValue,set(e){v("update:modelValue",e)}}),v=l,p=t(),_=a(()=>{let e=[];for(let a=Number(m.minYears);a<=(new Date).getFullYear();a++)e.push(a);return e}),b=a(()=>{let e=[];for(let a=1;a<=12;a++)e.push(a);return e}),T=a(()=>{let e=[],a=j(_.value[O.value[0]],b.value[O.value[1]]);for(let t=1;t<=a;t++)e.push(t);return e}),C=a(()=>[_.value,b.value,T.value]),D=e=>{const{values:a,indexs:t}=e;O.value=t,B.value[F.value]=a.join("."),U.value[F.value]=a.join("-")},$=e=>{if(!B.value[0]||!B.value[1])return y({title:c("请选择开始时间和结束时间"),icon:"none"});if(-1===N(B.value[1],B.value[0]))return y({title:c("结束时间必须大于等于开始时间"),icon:"none"});v("confirm",U.value),v("update:modelValue",!1)},j=(e,a)=>2===a?S(e)?29:28:[4,6,9,11].includes(a)?30:31,S=e=>e%4==0&&e%100!=0||e%400==0,N=(e,a)=>{const t=new Date(e.split("-").join("/")),l=new Date(a.split("-").join("/"));return t.getTime()>l.getTime()?1:t.getTime()<l.getTime()?-1:0},O=t([0,0,0]),I=e=>{const a=V(e),[t,l,u]=a.split("-");O.value=[_.value.indexOf(Number(t)),b.value.indexOf(Number(l)),T.value.indexOf(Number(u))]},B=t([]),U=t([]),F=t(0),J=e=>{F.value=e,B.value[e]&&I(new Date(B.value[e].split(".").join("-")))};return w(()=>{I(new Date)}),(e,a)=>{const t=o,l=u(s("tig-picker-date"),E);return r(),i(l,{ref_key:"uPickerRef",ref:p,modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),"default-index":O.value,columns:C.value,onConfirm:$,onChange:D},{default:d(()=>[n(t,{class:"picker-box-header"},{default:d(()=>[n(t,{class:x(["header-item",{active:0===F.value}]),onClick:a[0]||(a[0]=e=>J(0))},{default:d(()=>[n(t,{class:"header-item-text"},{default:d(()=>[g(h(e.$t("开始时间")),1)]),_:1}),n(t,{class:"header-item-value"},{default:d(()=>[g(h(B.value[0]??e.$t("请选择")),1)]),_:1})]),_:1},8,["class"]),n(t,{class:x(["header-item",{active:1===F.value}]),onClick:a[1]||(a[1]=e=>J(1))},{default:d(()=>[n(t,{class:"header-item-text"},{default:d(()=>[g(h(e.$t("结束时间")),1)]),_:1}),n(t,{class:"header-item-value"},{default:d(()=>[g(h(B.value[1]??e.$t("请选择")),1)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["modelValue","default-index","columns"])}}}),[["__scopeId","data-v-54378be2"]]),U=b(e({__name:"timeFilter",props:{params:{type:Object,default:()=>({})},placeholder:{type:String,default:"输入用户手机号、订单号或商品名"}},emits:["update:params","change"],setup(e,{emit:l}){T(e=>({"1ddd9f3c":C(c)+"px",adf4b962:C(p)+"px","6ecee9d2":C(m)+"px",cd58e752:C(v)}));const{height:c,contentHeight:m,contentWidth:v,statusBarHeight:p}=O(60),b=e,k=l,w=a({get:()=>b.params,set(e){k("update:params",e)}}),y=t(0),S=e=>{switch(e){case 0:w.value.orderTimeStart="",w.value.orderTimeEnd="";break;case 1:w.value.orderTimeStart=V(new Date),w.value.orderTimeEnd=V(new Date);break;case 2:w.value.orderTimeStart=V(new Date((new Date).getTime()-864e5)),w.value.orderTimeEnd=V(new Date((new Date).getTime()-864e5));break;case 3:w.value.orderTimeStart=V(new Date((new Date).getTime()-5184e5)),w.value.orderTimeEnd=V(new Date)}k("change"),y.value=e,I.value=[]},N=t(!1),I=t([]),E=e=>{I.value=e,w.value.orderTimeStart=e[0],w.value.orderTimeEnd=e[1],y.value=-1,k("change")};return(a,t)=>{const l=o,c=u(s("up-icon"),D);return r(),i(l,null,{default:d(()=>[n(l,{class:"time-filter"},{default:d(()=>[n(l,{class:"search-box"},{default:d(()=>[n(l,{class:"status-bar"}),n(l,{class:"search-input-box"},{default:d(()=>[n(l,{class:"input"},{default:d(()=>[n(j,{modelValue:w.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>w.value.keyword=e),style:{width:"100%"},placeholder:e.placeholder,onConfirm:t[1]||(t[1]=e=>a.$emit("change")),onClear:t[2]||(t[2]=e=>a.$emit("change"))},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),n(l,{class:"time-filter__inner"},{default:d(()=>[n(l,{class:"time-filter-tags"},{default:d(()=>[n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":0===y.value}]),onClick:t[3]||(t[3]=e=>S(0))},{default:d(()=>[g(h(a.$t("全部")),1)]),_:1},8,["class"]),n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":1===y.value}]),onClick:t[4]||(t[4]=e=>S(1))},{default:d(()=>[g(h(a.$t("今日")),1)]),_:1},8,["class"]),n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":2===y.value}]),onClick:t[5]||(t[5]=e=>S(2))},{default:d(()=>[g(h(a.$t("昨日")),1)]),_:1},8,["class"]),n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":3===y.value}]),onClick:t[6]||(t[6]=e=>S(3))},{default:d(()=>[g(h(a.$t("近七日")),1)]),_:1},8,["class"])]),_:1}),n(l,{class:"time-filter-custom",onClick:t[7]||(t[7]=e=>N.value=!0)},{default:d(()=>[I.value.length?(r(),i(l,{key:0,class:"time-filter__txt"},{default:d(()=>[n(l,null,{default:d(()=>[g(h(I.value[0])+"~",1)]),_:1}),I.value[1]?(r(),i(l,{key:0},{default:d(()=>[g(h(I.value[1]),1)]),_:1})):$("",!0)]),_:1})):(r(),f(_,{key:1},[g(h(a.$t("自定义时间")),1)],64)),n(c,{name:"arrow-down",color:"#969799",size:"8"})]),_:1})]),_:1})]),_:1}),n(B,{modelValue:N.value,"onUpdate:modelValue":t[8]||(t[8]=e=>N.value=e),onConfirm:E},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-b4221f4a"]]);export{U as t};

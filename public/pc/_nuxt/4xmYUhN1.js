import{E as R}from"./C1B8-dXF.js";import{_ as z}from"./CBcH1uzJ.js";import{E as W}from"./B_vjKAZC.js";import{_ as P}from"./BipSnJcb.js";import{e as V,f as M,z as Q,ar as J,r as c,c as i,o as r,a as o,i as m,j as y,k as N,t as e,b as u,w as g,d as v,F as A,m as f,x as C,s as j,p as d,ah as _,cB as Z,_ as H}from"./BjkHNVA8.js";import"./DWKyHDnW.js";import{_ as K,a as X,b as q}from"./VWcVn7Qk.js";import{f as Y}from"./BW8dCpPB.js";import{c as $}from"./TIyJFtn7.js";/* empty css        *//* empty css        */import{C as oo}from"./DzWKETDE.js";import{q as so,p as to}from"./CQ93QHlZ.js";/* empty css        */import"./BsZFmHoh.js";import"./Ibc-iJtI.js";/* empty css        *//* empty css        */import{E as eo}from"./D0QC44yL.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./CXwPJP5h.js";import"./BKu6lkEW.js";import"./UVx7YjW9.js";const ao="data:image/png;base64,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",no="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAhCAYAAAC1ONkWAAAFIElEQVR4AcyYe2xTdRTH77rZOocu0ewv4iOKDp0azbBN1yHzgXFLTDA6GDCiSDSiwUlixGBERedrIdGpM1FUjCOCiyIxxCCodeu2TlPjg8UtGvUP44s/dEzFlj78fG9+965ldhLSFsj59pzfOeeec+65vxfzWHn+hUKhxQ0NDa+DMOgHHxcKxI6APaCLmOf8VwnTCquvrz8B512ZTGY7D7SDBWA+uLxQIHYIXA3uIeYYBd4Oz6Fphfl8vnV4tABRb1lZ2dMIzxQSJmY3MWOgggJfCAQCpyC7NK0wLHcBUefQ0NCKwcHBtfC7CwkTs4OY80j0A7AqKioeFneQUxgtXYWhBlg8tEG8BHhLOejaHeIOcgrDeJ8MtHovPA2KTnTqeZPES2OuMLLlFsaE1+qYYww5bTW6orD+/v7vacjbJvgjhk8VhvFZKekWU2AwIrlUIKcWl0UNoWAw6Fdeu2ONjY3nYWyWAuNm8VKC+axG/K2c1HGTuF0YxWi/0jjh9XrfkSDwzZfwBlv4zK/ANxcCigVeVmzlMEhTg901xm11dXVeT3Nzsw/lWhRq5aZwOPyH5Kamplnot5k3WAlfVQgQeyW4RbFbW1vLkW1KJBJPImjBnVpdXb3GMzExcS2KWcDyeDyviQs1NTUHKeRB5DeAToFt8EJAsbYSe31fX58KIaxlxWKxCYQvgKhFn9KebIziVVVVP8Jt4qEUq2Aj338ZaANLCwTFaif24yTKgGz6yAyqVZiRLWtyctJ9A1dZWsEt1MO33mdy++BnghlJhzyLYAGYPaOjMTLJW5jsQTP8P6ZpJZ8DHg7td5EOAtFT+pkJ+I8yP8LgW4qbO5MvBe3gxXfhM4R8Mzwv6QUw1gEtwp0eVuGfDDqBRbLrSJZ31yf4DvzOBaIT8X/P7/efpsHhINFGdIuAQ6/y/GXOIJtzs7jYvIDU+4eHh7vtOcbK7ELzOVBxGwjwPgW2gjnafOEd6L7C7iRyVs9ZnHXj2DrxC1BMLVjO+EMSPYC/6GvkvySAT7C9SLyr8KtFvhL0lJeXR7HZhO9ShIxd2OjoaILiAih2A9FCuvEm+CadTo/DdSe7UAbQw+q8BK79CGapY+vxixJ0DPSidA7j3fhegK0B3e9AdCvx9uI3xuADsBpUgkP4LaRb0k2dlSqOIJp8d+K0B7grBPkAUMJF+Miua9EWEgSBirbvVPiI4vzo9LgNX8WzRkZGvqQrmj+PYbO/DNyhcYrsovO10WhUtxpbb3fMlswPwdSRawg0m6TzeYv6eDx+BvoVYKdxsxl7URToInk2iovYoOfx3On4XQ9eQufSwMDAz+juB5fip5uMn4LOZzyXLt2rW4brjJBTGN97NViD3lIgkkZ4i8/Mrix1PmRIsC8SicR4bn8+J0eP33f4f0pB+pwW8+058j6B3a3HFTCejKEHdOOkOYRYfCLXjXRO02Mdq9O+PSurW1gymTxJCgFHTWiJRQe5vE4SPnGFKztCZWVlCtk+knBIIJeKDplEGRaAnV9jt2MaHE84NoUdQQeO/8JSqVQZLyJY7F2abwyLT+yV7rzKzuZ2jI1RO71dGM6/ZjsVUybXbyZ+Gddr96rtFoZRd/0kXPQQ+9pisIR9pu1wSC9wGC+DLz9a6Hm2iw4lFFiVul5LnDoruf4kcXL+69aOvB3ojq87fw6kF3jbrfDeo4Wep4obgOhRTppJCUJ2xyyOCJ30m3jgF4zay3QgFxP/kOcnoD/gONckhpb1LwAAAP//pqPwkgAAAAZJREFUAwCxLzfjiblQugAAAABJRU5ErkJggg==",io={class:"page"},ro={class:"content"},lo={class:"product-section card-box",shadow:"never"},co={class:"product-info"},uo={class:"product-image"},po=["src","alt"],mo={class:"product-details"},go={class:"product-details-top"},vo={class:"product-title"},ho={class:"group-tag"},yo={class:"joined-count"},Ao={class:"price-info"},fo={class:"group-price"},_o={class:"original-price"},Io={class:"group-status-section card-box",shadow:"never"},wo={class:"status-info"},Bo={class:"remaining-members"},To={class:"remaining-text"},bo={key:0},Co={style:{color:"var(--main-bg)"}},jo={key:0,class:"countdown"},xo={key:0,class:"group-content"},Oo={class:"group-content-item-image"},So={key:1,class:"group-content-item-image-img"},Lo=["src","alt"],ko={key:2,class:"group-content-item-image-mask"},Uo={class:"group-content-item-bottom"},Go={key:1,class:"empty-state"},Fo={class:"process-section card-box",shadow:"never"},Do={class:"section-title"},Eo={class:"group-steps"},Ro={class:"group-steps-content"},zo={class:"group-steps-item"},Wo={class:"step-dots"},Po={class:"group-steps-item"},Vo={class:"step-dots"},Mo={class:"group-steps-item"},Qo={key:0,class:"store-section card-box",shadow:"never"},Jo={class:"store-info"},No={class:"store-logo"},Zo={class:"img-box"},Ho=["src"],Ko={key:1},Xo={class:"store-name"},qo={class:"store-actions"},Yo={class:"bottom-nav"},$o={class:"nav-left"},os={class:"nav-item"},ss={class:"nav-right"},ts=V({__name:"groupByInvited",setup(es){M();const{t:x}=Q(),I=J(),{id:O}=I.currentRoute.value.query,a=c({joinStatus:0,grouponPromotionRecordId:0,grouponPromotionItemId:0,productName:"",joinType:0,minGroupNum:0,shopId:0,shopTitle:"",grouponImage:"",minGrouponPrice:0,productPrice:0,picThumb:"",joinNumCount:0,joinUsers:[],endTime:"",orderId:0,productSn:"",joinStatusDesc:""}),S=c({orderSn:"",orderId:0,items:[],availableActions:{},shop:{}}),l=c({}),L=c(!1),p=c([]);c(!1);const w=c();c(["待成团","拼团成功","拼团失败"]);const k=async s=>{try{const t=await to(s);Object.assign(l.value,t)}catch(t){d.error(t.message)}},U=async s=>{try{const t=await Y({id:s});Object.assign(S.value,t)}catch(t){d.error(t.message)}},G=async()=>{try{w.value=eo.service({lock:!1,text:x("请求加载中"),customClass:"tig-normal-loading"});const s=await $({grouponPromotionRecordId:I.currentRoute.value.query.id});a.value=s,p.value=s.joinUsers,a.value.joinNumCount<a.value.minGroupNum&&p.value.push({userId:0,username:"待加入",avatar:"https://oss.tigshop.com/img/gallery/202403/17111886010Pg60qIrJEzwe3tw06.gif",classIcon:"iconfont-pc icon-zengjia"}),p.value.sort((t,T)=>t.leader===!0?-1:1),U(s.orderId),k(s.shopId)}catch(s){d.error(s.message)}finally{L.value=!1,w.value?.close()}},B=()=>{if(l.value.shopId===0)return d.error("自营店铺无法进店");_(`shop?id=${l.value?.shopId}`)},F=async()=>{try{if(l.value.shopId===0)return d.error("自营店铺无法收藏");const s=await so(l.value.shopId);d.success("操作成功")}catch(s){d.error(s.message)}},D=()=>{Z()?_(j({path:"product",sn:a.value.productSn,type:"invited",grouponPromotionRecordId:O})):_("/member/login")};return G(),(s,t)=>{const T=R,b=z,h=W,E=P;return r(),i("div",io,[o("div",ro,[o("div",lo,[o("div",co,[o("div",uo,[o("img",{src:y(N)(a.value.picThumb),alt:a.value.productName},null,8,po)]),o("div",mo,[o("div",go,[o("h1",vo,e(a.value.productName),1),o("div",ho,[u(T,{plain:"",type:"primary",class:"tag"},{default:g(()=>[v(e(a.value.minGroupNum)+e(s.$t("人团")),1)]),_:1}),o("span",yo,e(s.$t("已有"))+e(a.value.joinNumCount)+e(s.$t("人参团")),1)])]),o("div",Ao,[o("span",fo,[v(e(s.$t("拼团价"))+": ",1),u(b,{class:"groupPriceCom",decimalsStyle:{fontSize:"14px"},fontStyle:{fontSize:"18px",fontWeight:"bold"},modelValue:a.value.minGrouponPrice,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.minGrouponPrice=n)},null,8,["modelValue"])]),o("span",_o,[u(b,{fontStyle:{fontSize:"16px",color:"#999"},modelValue:a.value.productPrice,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.productPrice=n),style:{"text-decoration":"line-through"}},null,8,["modelValue"])])])])])]),o("div",Io,[o("div",wo,[o("div",Bo,[o("span",To,[o("span",null,e(s.$t(a.value.joinStatusDesc||"")),1),a.value.joinStatus===1?(r(),i("span",bo,[v(" ,"+e(s.$t("还差"))+" ",1),o("span",Co,e(a.value.joinNumCount>a.value.minGroupNum?0:a.value.minGroupNum-a.value.joinNumCount),1),v(" "+e(s.$t("人成团")),1)])):m("",!0)])]),a.value.joinStatus===1?(r(),i("div",jo,[u(y(oo),{"countdown-type":"specifyTime","specify-time":new Date(a.value?.endTime)?.getTime(),class:"countdown-text"},null,8,["specify-time"])])):m("",!0)]),p.value.length>0||a.value.minGroupNum>0?(r(),i("div",xo,[(r(!0),i(A,null,f(p.value,n=>(r(),i("div",{class:"group-content-item",key:n.userId},[o("div",Oo,[n.classIcon?(r(),i("div",{key:0,class:C([n.classIcon,"iconBox"])},null,2)):(r(),i("div",So,[o("img",{src:n.avatar?n.avatar:"https://oss.tigshop.com/img/gallery/202403/17111886010Pg60qIrJEzwe3tw06.gif",alt:n.username},null,8,Lo)])),n.leader?(r(),i("div",ko,e(s.$t("团长")),1)):m("",!0)]),o("div",Uo,[o("span",null,e(n.username),1)])]))),128))])):(r(),i("div",Go,[o("p",null,e(s.$t("暂无拼团数据")),1)]))]),o("div",Fo,[o("h3",Do,e(s.$t("拼团流程")),1),o("div",Eo,[o("div",Ro,[o("div",zo,[t[2]||(t[2]=o("img",{src:K},null,-1)),o("span",null,e(s.$t("1.开团/参加")),1)]),o("span",Wo,[(r(),i(A,null,f(3,n=>o("span",{key:n,class:"dot"})),64))]),o("div",Po,[t[3]||(t[3]=o("img",{src:X},null,-1)),o("span",null,e(s.$t("2.邀友参团")),1)]),o("span",Vo,[(r(),i(A,null,f(3,n=>o("span",{key:n,class:"dot"})),64))]),o("div",Mo,[t[4]||(t[4]=o("img",{src:q},null,-1)),o("span",null,e(s.$t("3.人满成团")),1)])])])]),l.value.shopId!==0?(r(),i("div",Qo,[o("div",Jo,[o("div",No,[o("div",Zo,[l.value.shopLogo?(r(),i("img",{key:0,src:l.value.shopLogo,alt:""},null,8,Ho)):(r(),i("p",Ko,"T"))]),o("div",Xo,e(l.value.shopTitle?l.value.shopTitle:"--"),1)]),o("div",qo,[u(h,{class:"action-btn",type:"primary",plain:"",onClick:F,size:"large"},{default:g(()=>[o("span",{class:C(["iconfont-pc",{"icon-shoucang":!l.value.collectShop,"icon-yishoucang":l.value.collectShop}])},null,2),o("span",null,e(s.$t("收藏店铺")),1)]),_:1}),u(h,{type:"primary",plain:"",size:"large",onClick:B,class:"action-btn"},{default:g(()=>[t[5]||(t[5]=o("span",{class:"iconfont-pc icon-guanli"},null,-1)),o("span",null,e(s.$t("进店逛逛")),1)]),_:1,__:[5]})])])])):m("",!0)]),o("div",Yo,[o("div",$o,[u(E,{target:"_blank",to:("urlFormat"in s?s.urlFormat:y(j))("/member/joining/list")},{default:g(()=>[o("div",os,[t[6]||(t[6]=o("div",{class:"nav-item-img"},[o("img",{src:ao})],-1)),o("span",null,e(s.$t("我的拼团")),1)])]),_:1},8,["to"]),l.value.shopId!==0?(r(),i("div",{key:0,class:"nav-item",onClick:B},[t[7]||(t[7]=o("div",{class:"nav-item-img"},[o("img",{src:no})],-1)),o("span",null,e(s.$t("店铺")),1)])):m("",!0)]),o("div",ss,[u(h,{type:"primary",style:{width:"100%"},onClick:D},{default:g(()=>[v(e(s.$t("去参团")),1)]),_:1})])])])}}}),xs=H(ts,[["__scopeId","data-v-20c03aeb"]]);export{xs as default};

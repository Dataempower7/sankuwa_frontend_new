import{b as W,c as Z}from"./CM_M6Xgj.js";import{_ as B}from"./BipSnJcb.js";import{e as T,b0 as ee,g as A,y as P,n as C,o as t,w as k,a as s,b as $,t as w,_ as F,z as te,r as y,v as M,c as n,a6 as oe,i as S,j as c,d as x,b1 as se,b2 as ae,h as ne,b3 as re,G,H as O,B as R,x as D,ad as z,as as Y,b4 as X,F as b,m as L,b5 as J,f as E,s as q,b6 as le,aA as ce,al as Q,b7 as ie,l as ue,q as U,k as de,au as pe}from"./BjkHNVA8.js";import"./Csy7st1x.js";import"./B_vjKAZC.js";/* empty css        */import"./Ibc-iJtI.js";import{b as _e}from"./B85mN9rA.js";import{_ as me}from"./n1vI1_Nv.js";const he={class:"cart_info"},ve={class:"my-cart"},fe=T({__name:"ShoppingCart",props:{pageType:{type:Number,default:1}},setup(u){const l=ee(),r=A();return P(()=>{r.userInfo.userId>0&&l.changeCartList()}),(o,a)=>{const d=B,p=W;return t(),C(p,null,{default:k(({count:f})=>[s("div",he,[$(d,{to:"/cart/",class:"acea-row row-center-wrapper"},{default:k(()=>[a[0]||(a[0]=s("div",{class:"iconfont-pc icon-shiwu-gouwuche"},null,-1)),s("div",ve,w(o.$t("我的购物车")),1),s("em",null,w(f),1)]),_:2,__:[0]},1024)])]),_:1})}}}),ye=F(fe,[["__scopeId","data-v-b0bdd92c"]]),ge={key:1,class:"ele-menu"},we={class:"feedback-menu"},ke={class:"wrap-btn"},Se=T({__name:"Service",props:{shopId:{type:[Number,String],default:0},productId:{type:[Number,String],default:0},orderId:{type:[Number,String],default:0},isIndex:{type:Boolean,default:!1},phone:{type:String,default:""}},setup(u){const{t:l}=te(),r=A(),o=u,a=y({h5Domain:"",url:"",openType:0,show:"",serviceType:0});(async()=>{try{const e=await _e();a.value=e}catch(e){console.error(e)}})();const p=M(()=>a.value.h5Domain?a.value.h5Domain:window.location.origin+"/mobile"),f=async()=>{const e=a.value.serviceType;if(e===0)return;const i=a.value.openType,v=500,_=700;let m=a.value.url;const h=screen.height/2-_/2;if(e!==4)i==1?window.open(m,"_blank",`width=${v},height=${_},top=${h}`):window.open(m,"_blank");else{if(!r.isAuthenticated)return se();m=`${p.value}/pages/im/index?token=${r.token}&shopId=${o.shopId}&platform=${ae}`,Number(o.productId)>0&&(m+=`&productId=${o.productId}`),Number(o.orderId)>0&&(m+=`&orderId=${o.orderId}`),window.open(m,"_blank",`width=${v},height=${_},top=${h}`)}};return(e,i)=>u.isIndex?(t(),n("div",{key:0,onClick:f},[c(a).show?oe(e.$slots,"default",{key:0},void 0,!0):S("",!0)])):(t(),n("div",ge,[c(a).show?(t(),n("div",{key:0,class:"card",onClick:f},[s("div",we,[s("div",ke,[i[0]||(i[0]=s("i",{class:"iconfont-pc icon-kefu"},null,-1)),x(" "+w(e.$t("客服")),1)])])])):S("",!0)]))}}),be=F(Se,[["__scopeId","data-v-737bd2fc"]]),$e=T({__name:"StatisticLog",props:{productId:{type:[Number,String],default:""},shopId:{type:[Number,String],default:""},shopCategoryId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0}},setup(u,{expose:l}){const r=u,o=ne({}),a=async()=>{r.productId&&(o.productId=r.productId),r.shopId&&(o.shopId=r.shopId),r.shopCategoryId&&(o.shopCategoryId=r.shopCategoryId);try{const e=await re(o)}catch(e){console.error(e)}},d=M(()=>{const e=new Date,i=e.getFullYear(),v=e.getMonth()+1,_=e.getDate();return`${i}-${v}-${_}`}),p=(e,i)=>{const v=new Date(e),_=new Date(i),m=Math.abs(v.getTime()-_.getTime()),h=1440*60*1e3;return m>=h};return(()=>{const e=localStorage.getItem("lastDate");!e||p(d.value,e)?(o.isNew=1,localStorage.setItem("untranslatedCache","")):o.click=1,localStorage.setItem("lastDate",d.value)})(),r.immediateLog&&a(),l({__commonLog:a}),(e,i)=>(t(),n("div"))}}),Ie={class:"top-search"},Ce={class:"acea-row row-middle"},xe=["placeholder"],Le={class:"search-guess-ul"},Ne={class:"name"},Te=T({__name:"SimSearch",setup(u){const l=y([]);let r=!1,o=null;const a=()=>{if(r)return!1;clearTimeout(o),r=!0,o=setTimeout(async()=>{try{const I=await J(e.value);l.value=I,g.value=l.value.length>0}catch{}finally{r=!1}},300)},d=G(),p=y(d.query.keyword),f=y(!1),e=y(""),i=e.value;p.value&&d.path==="/search/"&&(e.value=p.value),O(()=>d.query,()=>{d.query.keyword||(e.value="")},{deep:!0});const v=()=>{f.value=!0,e.value===i&&(e.value="")},_=()=>{e.value===""&&(e.value=i),f.value=!1},m=()=>{location.href="/search/?keyword="+e.value},h=y(null),g=y(!1),V=I=>{h.value&&!h.value.contains(I.target)&&(g.value=!1)};return P(()=>{window.addEventListener("click",V)}),R(()=>{window.removeEventListener("click",V)}),(I,K)=>{const j=B;return t(),n("div",Ie,[s("div",{class:D(["search-form",{"search-form-focus":f.value||e.value!=""}])},[s("div",Ce,[z(s("input",{type:"text",autocomplete:"off","onUpdate:modelValue":K[0]||(K[0]=N=>e.value=N),placeholder:I.$t("搜索"),class:"search-input",name:"keywords",onFocus:v,onFocusout:_,onKeyup:a,onKeydown:X(m,["enter"])},null,40,xe),[[Y,e.value]]),s("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:m})])],2),g.value?(t(),n("div",{key:0,ref_key:"guessBox",ref:h,class:"search-guess-box"},[s("ul",Le,[(t(!0),n(b,null,L(l.value,(N,H)=>(t(),n("li",{key:H},[$(j,{to:"/search/?keyword="+N.keyword,class:"serlink"},{default:k(()=>[s("span",Ne,w(N.keyword),1)]),_:2},1032,["to"])]))),128))])],512)):S("",!0)])}}}),De=F(Te,[["__scopeId","data-v-b4fb70b2"]]),Fe={class:"top-search"},Be={class:"acea-row row-middle"},Ve=["placeholder"],Ke={class:"search-guess-ul"},Me={class:"name"},qe=T({__name:"DefSearch",setup(u){const l=y([]);let r=!1,o=null;const a=()=>{if(r)return!1;clearTimeout(o),r=!0,o=setTimeout(async()=>{try{const I=await J(e.value);l.value=I,g.value=l.value.length>0}catch{}finally{r=!1}},300)},d=G(),p=y(d.query.keyword),f=y(!1),e=y(""),i=e.value;p.value&&d.path==="/search/"&&(e.value=p.value),O(()=>d.query,()=>{d.query.keyword||(e.value="")},{deep:!0});const v=()=>{f.value=!0,e.value===i&&(e.value="")},_=()=>{e.value===""&&(e.value=i),f.value=!1},m=()=>{location.href="/search/?keyword="+e.value},h=y(null),g=y(!1),V=I=>{h.value&&!h.value.contains(I.target)&&(g.value=!1)};return P(()=>{window.addEventListener("click",V)}),R(()=>{window.removeEventListener("click",V)}),(I,K)=>{const j=B;return t(),n("div",Fe,[s("div",{class:D(["search-form",{"search-form-focus":f.value||e.value!=""}])},[s("div",Be,[z(s("input",{type:"text",autocomplete:"off","onUpdate:modelValue":K[0]||(K[0]=N=>e.value=N),placeholder:I.$t("搜索"),class:"search-input",name:"keywords",onFocus:v,onFocusout:_,onKeyup:a,onKeydown:X(m,["enter"])},null,40,Ve),[[Y,e.value]]),s("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:m})])],2),g.value?(t(),n("div",{key:0,ref_key:"guessBox",ref:h,class:"search-guess-box"},[s("ul",Ke,[(t(!0),n(b,null,L(l.value,(N,H)=>(t(),n("li",{key:H},[$(j,{to:"/search/?keyword="+N.keyword,class:"serlink"},{default:k(()=>[s("span",Me,w(N.keyword),1)]),_:2},1032,["to"])]))),128))])],512)):S("",!0)])}}}),Ee=F(qe,[["__scopeId","data-v-8db2aced"]]);function je(u){let l=!1;if(l)return;if(document.head.querySelector(`link[href="${u}"]`)){l=!0;return}const o=document.createElement("link");o.href=u,o.type="text/css",o.rel="stylesheet",o.onload=()=>{l=!0},document.head.appendChild(o)}const He={class:"cate_menu"},Pe=["onMouseenter"],Ue={key:1,class:"cate_menu_line"},Ae={class:"subCata"},Ge={class:"left"},Oe={class:"nav_cata_bd"},Re={class:"item"},ze={class:"title-list"},Ye={key:0},Xe={key:0,class:"name-list"},Je=T({__name:"AllCate",props:{isCateVisible:{type:Boolean,default:!1}},setup(u){const l=E();y(""),(async()=>{if(l.allCate===null)try{const p=await le();l.allCate=p.catFloor,p.icoDefinedCss!=""&&je(p.icoDefinedCss)}catch{}finally{}})();const o=y(null),a=p=>{o.value=p},d=()=>{o.value=null};return M(()=>"ca"),(p,f)=>{const e=B;return t(),n("div",{onMouseleave:d},[s("div",He,[(t(!0),n(b,null,L(c(l).allCate,(i,v)=>(t(),n("div",{class:D(["cate_menu_item",{active:o.value===v}]),onMouseenter:_=>a(v)},[s("span",{class:D("floor-ico "+i.floorIcoFont)},null,2),(t(!0),n(b,null,L(i.catList,(_,m)=>(t(),n(b,null,[_.name!="-"?(t(),C(e,{key:0,target:"_blank",class:"cate_menu_lk",to:c(q)({path:"list",id:_.id})},{default:k(()=>[x(w(_.name),1)]),_:2},1032,["to"])):S("",!0),_.name!="-"?(t(),n("span",Ue,"/")):S("",!0)],64))),256))],42,Pe))),256))]),s("div",Ae,[(t(!0),n(b,null,L(c(l).allCate,(i,v)=>(t(),n("div",{key:v,class:D(["subView",{active:o.value===v}])},[s("div",Ge,[s("div",Oe,[(t(!0),n(b,null,L(i.catList,(_,m)=>(t(),n(b,null,[(t(!0),n(b,null,L(_.children,h=>(t(),n("div",Re,[s("div",ze,[$(e,{to:c(q)({path:"list",id:h.categoryId})},{default:k(()=>[x(w(h.categoryName),1)]),_:2},1032,["to"]),h.children?.length?(t(),n("i",Ye," >")):S("",!0)]),h.children?.length?(t(),n("div",Xe,[(t(!0),n(b,null,L(h.children,g=>(t(),C(e,{to:c(q)({path:"list",id:g.categoryId})},{default:k(()=>[x(w(g.categoryName),1)]),_:2},1032,["to"]))),256))])):S("",!0)]))),256))],64))),256))])])],2))),128))])],32)}}}),Qe=F(Je,[["__scopeId","data-v-3b359fc9"]]),We={class:"nav-bd container flex align-end"},Ze={class:"acea-row row-center-wrapper"},et={class:"sub-nav"},tt=T({__name:"DefNav",props:{page:{type:String,default:""}},setup(u){const l=u,r=E();r.loadNav();const o=y(!1),a=y(!1),d=y(!1);let p=null;const f=async()=>{p=setTimeout(()=>{a.value=!0,o.value=!0},300)},e=()=>{p&&clearTimeout(p),a.value=!1,o.value=!1,d.value=!1};return(i,v)=>{const _=Qe,m=B,h=me;return t(),n("div",{class:D(["top-nav",{"top-nav-index":l.page==="index"}])},[s("div",We,[s("div",{class:"main-nav-link",onMouseenter:f,onMouseleave:e},[s("div",Ze,[s("div",null,w(i.$t("全部商品分类")),1),s("div",{class:D(["iconfont-pc icon-xiajiantou",c(a)?"icon-xiajiantou-hover":"not-icon-xiajiantou-hover"])},null,2)]),l.page!="index"&&c(o)?(t(),n("div",{key:0,class:D(["hidden-cate",{"hidden-hover":c(o)}])},[c(o)?(t(),C(_,{key:0,isCateVisible:c(o),"onUpdate:isCateVisible":v[0]||(v[0]=g=>ce(o)?o.value=g:null)},null,8,["isCateVisible"])):S("",!0)],2)):S("",!0)],32),s("ul",et,[s("li",null,[$(m,{to:"/",class:"alv1"},{default:k(()=>[x(w(i.$t("首页")),1)]),_:1})]),(t(!0),n(b,null,L(c(r).mainNav,(g,V)=>(t(),n("li",null,[$(h,{class:"alv1",item:g},{default:k(()=>[x(w(i.$t(g.title)),1)]),_:2},1032,["item"])]))),256)),c(Q)()&&c(ie)()?(t(),n(b,{key:0},[s("li",null,[$(m,{to:"/shop/list",class:"alv1"},{default:k(()=>[x(w(i.$t("店铺街")),1)]),_:1})]),s("li",null,[$(m,{to:"/join/intro",class:"alv1"},{default:k(()=>[x(w(i.$t("商家入驻")),1)]),_:1})])],64)):S("",!0)])])],2)}}}),ot=F(tt,[["__scopeId","data-v-088e4d99"]]),st={class:"header-nav"},at={class:"nav-item"},nt=T({__name:"SimNav",setup(u){const l=E();return l.loadNav(),(r,o)=>{const a=B;return t(),n("div",st,[$(a,{class:"nav-item",to:"/"},{default:k(()=>[x(w(r.$t("首页")),1)]),_:1}),(t(!0),n(b,null,L(c(l).mainNav,(d,p)=>(t(),n("div",at,[$(a,{to:d.link?c(q)(d.link):"",class:"alv1"},{default:k(()=>[x(w(r.$t(d.title)),1)]),_:2},1032,["to"])]))),256)),c(Q)()&&c(ue)()?(t(),C(a,{key:0,class:"nav-item",to:"/join/intro"},{default:k(()=>[x(w(r.$t("商家入驻")),1)]),_:1})):S("",!0)])}}}),rt=F(nt,[["__scopeId","data-v-3e9cfdf9"]]),lt={class:"top-area container"},ct={class:"wrapper"},it={class:"logo"},ut=["src"],dt=T({__name:"PageHeader",props:{page:{type:String,default:""},showService:{type:Boolean,default:!1},shopId:{type:[Number,String],default:0},productId:{type:[Number,String],default:0},orderId:{type:[Number,String],default:0},shopCategoryId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0},phone:{type:String,default:""},showDefNav:{type:Boolean,default:!0}},setup(u,{expose:l}){const r=E(),o=y();r.loadNav();const a=M(()=>r.decoratePageConfig?.headerStyle),d=M(()=>r.decoratePageConfig?.colorStyle);return l({handleLog:()=>{o.value?.__commonLog()}}),(f,e)=>{const i=Z,v=B,_=ye,m=be,h=$e,g=pe;return t(),n(b,null,[$(i,{colorType:c(d),pageType:c(a)},null,8,["colorType","pageType"]),s("div",{class:"header",style:U({borderBottom:c(a)!=1?"1px none #ddd":"1px solid #ddd"})},[s("div",lt,[s("div",ct,[s("div",it,[$(v,{"exact-active-class":"''",to:"/",class:"alv1"},{default:k(()=>[s("img",{style:U({width:c(a)!=1?"140px":"190px"}),src:("imageFormat"in f?f.imageFormat:c(de))(c(r).shopLogo),alt:""},null,12,ut)]),_:1})]),c(a)!=1?(t(),C(rt,{key:0,page:u.page},null,8,["page"])):S("",!0),c(a)==1?(t(),C(Ee,{key:1})):(t(),C(De,{key:2})),c(a)==1?(t(),C(_,{key:3})):S("",!0)]),u.showDefNav&&c(a)==1?(t(),C(ot,{key:0,page:u.page},null,8,["page"])):S("",!0)])],4),u.showService?(t(),C(m,{key:0,phone:u.phone,shopId:u.shopId,orderId:u.orderId,productId:u.productId},null,8,["phone","shopId","orderId","productId"])):S("",!0),$(g,null,{default:k(()=>[$(h,{ref_key:"statisticLogRef",ref:o,immediateLog:u.immediateLog,shopCategoryId:u.shopCategoryId,shopId:u.shopId,productId:u.productId},null,8,["immediateLog","shopCategoryId","shopId","productId"])]),_:1})],64)}}}),kt=F(dt,[["__scopeId","data-v-7b8010b7"]]);export{Qe as _,be as a,kt as b};

import{_ as R}from"./Drr4mNEN.js";import{b as z}from"./5VTus1_X.js";import{E}from"./B_vjKAZC.js";import{E as j}from"./BlH43PK2.js";import{_ as B}from"./B85mN9rA.js";import{e as P,r as u,h as I,y as L,c,o as l,b as i,a as s,t as a,w as g,d as v,n as N,i as T,F as h,m as V,x as H,aj as A,j as D,p as d,ah as S,s as U,_ as q}from"./BjkHNVA8.js";import{P as G}from"./BmiGu4wZ.js";import{g as J,d as K,e as O,f as Q}from"./CM_M6Xgj.js";import"./XdJ5ILcf.js";import"./BipSnJcb.js";import"./Csy7st1x.js";import"./BhwkTUtM.js";import"./d3UjsK-T.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./yB3A8U-z.js";import"./Ibc-iJtI.js";import"./UVx7YjW9.js";/* empty css        */import"./n1vI1_Nv.js";import"./CXwPJP5h.js";import"./BNVM5YSV.js";import"./C1B8-dXF.js";import"./FYm-MTMW.js";import"./cfDoaBtk.js";import"./Bnvi_g-K.js";import"./CBcH1uzJ.js";import"./ClRMjIOJ.js";import"./BzIkMksr.js";/* empty css        */const W={class:"message_center container flex"},X={class:"mc_side_bar"},Y={class:"title"},Z={class:"fl"},ss={class:"nav_list"},ts={class:"fl"},es={class:"msg_list"},os={class:"flex justify-end"},as={class:"list"},ns=["onClick"],is={class:"time"},rs={class:"message flex justify-between"},ls={class:"title flex align-center"},cs={class:"txt"},ds={class:"flex flex-column align-end",style:{"min-width":"50px"}},ms={class:"date"},ps=["onClick"],_s={key:2,class:"el-page flex justify-end"},us=P({__name:"List",setup(fs){const m=u([]),p=u(!0),_=u(0),n=I({page:1,unread:0}),r=async()=>{p.value=!0;try{const t=await J({...n});m.value=t.records,_.value=t.total}catch(t){d.error(t.message)}finally{p.value=!1}},y=async()=>{n.unread=1;try{await r()}catch(t){d.error(t.message)}},x=async t=>{try{await K(t),await r()}catch(e){d.error(e.message)}},k=async t=>{try{t.isRead!==1&&(await O(t.messageId),t.isRead=1),S(U(t.link),{open:{target:"_blank"}})}catch{}},C=async()=>{try{await Q(),n.unread=0,await r()}catch(t){d.error(t.message)}};return L(()=>{r()}),(t,e)=>{const w=R,b=z,f=E,F=j,M=B;return l(),c(h,null,[i(w,{title:"站内信"}),i(b),s("div",W,[s("div",X,[s("h3",Y,[e[2]||(e[2]=s("i",{class:"iconfont-pc icon-xiaoxi"},null,-1)),s("span",Z,a(t.$t("消息中心")),1)]),s("div",ss,[e[3]||(e[3]=s("i",{class:"icon"},null,-1)),s("span",ts,a(t.$t("账户信息")),1)])]),s("div",es,[s("div",os,[i(f,{onClick:y},{default:g(()=>[v(a(t.$t("只看未读")),1)]),_:1}),i(f,{onClick:C},{default:g(()=>[v(a(t.$t("全部标记为已读")),1)]),_:1})]),s("div",as,[_.value>0?(l(!0),c(h,{key:0},V(m.value,o=>(l(),c("div",{class:"item flex",onClick:$=>k(o)},[s("div",is,a(o.addTimeDate),1),s("div",{class:H(["msg_info flex",o.isRead?"unread":""])},[e[5]||(e[5]=s("div",{class:"icon msg"},null,-1)),s("div",rs,[s("div",null,[s("h3",ls,[e[4]||(e[4]=s("div",{class:"icon"},null,-1)),s("span",null,a(o.title),1)]),s("p",cs,a(o.content),1)]),s("div",ds,[s("p",ms,a(o.addTimeHms),1),s("i",{class:"iconfont-pc icon-changyonggoupiaorenshanchu del",onClick:A($=>x({id:o.messageId}),["stop"])},null,8,ps)])])],2)],8,ns))),256)):(l(),N(F,{key:1,description:t.$t("暂无消息")},null,8,["description"])),m.value.length>0&&!p.value?(l(),c("div",_s,[i(D(G),{page:n.page,"onUpdate:page":e[0]||(e[0]=o=>n.page=o),size:n.size,"onUpdate:size":e[1]||(e[1]=o=>n.size=o),total:_.value,onCallback:r},null,8,["page","size","total"])])):T("",!0)])])]),i(M)],64)}}}),Ks=q(us,[["__scopeId","data-v-1ac3fb76"]]);export{Ks as default};

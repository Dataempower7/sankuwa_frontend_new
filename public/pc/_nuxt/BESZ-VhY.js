import{_ as H}from"./Drr4mNEN.js";import{_ as P}from"./paAvucAg.js";import{E as W}from"./BhwkTUtM.js";import{_ as Z}from"./Dcyx2-kv.js";import{E as j,a as D}from"./Ckzsp_T1.js";import{_ as G}from"./BipSnJcb.js";import{E as J}from"./B_vjKAZC.js";import{_ as K}from"./B85mN9rA.js";import{e as Q,f as X,g as Y,z as ee,r as w,I as oe,v as te,c as re,o as _,b as i,a,t as m,w as n,n as C,av as se,j as d,d as $,l as le,F as ie,cA as V,ah as ne,_ as ae}from"./BjkHNVA8.js";/* empty css        *//* empty css        */import{_ as de}from"./DbAxkXJA.js";import{s as me,a as ue,u as pe}from"./CuBYCCxU.js";import{M}from"./DYce8M0P.js";import"./C1B8-dXF.js";import"./FYm-MTMW.js";import"./cfDoaBtk.js";import"./XdJ5ILcf.js";import"./d3UjsK-T.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./yB3A8U-z.js";import"./Bnvi_g-K.js";import"./CXwPJP5h.js";import"./n1vI1_Nv.js";import"./BNVM5YSV.js";import"./x_rD_Ya3.js";import"./UVx7YjW9.js";const fe={class:"full-height-div"},ve={class:"register-info"},_e={class:"title"},be={class:"label"},ge={class:"area-code-input"},we={class:"area-code-select"},Ce={class:"label"},ce={class:"label"},ye={class:"label"},Ee={class:"extra",style:{width:"330px"}},$e=Q({__name:"Register",setup(Ve){const u=X(),T=Y(),{t:s}=ee(),b=w(!1),c=w("86"),S=oe();s("手机号注册"),s("邮箱注册");const q=(r,e,t)=>{e?o.value.tigTips[r]={type:"valid",message:t}:o.value.tigTips[r]={type:"error",message:t}},p=r=>{o.value.tigTips[r]={type:"info",message:I[r]}},U=(r,e,t)=>{const E=u.isOpenMobileAreaCode?/^(\+?[1-9]\d{1,14})$/:/^(?:\+?86)?1[3-9]\d{9}$/;if(e)if(E.test(e))t();else return t(new Error(s("格式错误，请输入正确的手机号码")));else return t(new Error(s("手机号不能为空")))},N=(r,e,t)=>{if(e)if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e))t();else return t(new Error(s("格式错误，请输入正确的邮箱地址")));else return t(new Error(s("邮箱不能为空")))},x=(r,e,t)=>{if(e){if(e.length!=6)return t(new Error(s("请输入6位验证码")));t()}else return t(new Error(s("验证码不能为空")))},R=(r,e,t)=>{if(e){if(e.length>20||e.length<6)return t(new Error(s("密码应为6-20位字符")));if(/\s/.test(e))return t(new Error(s("密码中不允许有空格")));if(/^\d+$/.test(e))return t(new Error(s("密码不能全为数字")));if(/^(?=.*[\d\W]).+$/.test(e))if(/^(?=.*[a-zA-Z0-9]).+$/.test(e))if(/^(?!([a-zA-Z0-9])\1*$).+$/.test(e))t();else return t(new Error(s("密码不能全为相同字符或数字")));else return t(new Error(s("密码不能全为符号")));else return t(new Error(s("密码不能全为字母")))}else return t(new Error(s("密码不能为空")))},I={mobile:s("请填写正确的手机号码，以便接收订单通知，找回密码等"),email:s("请填写正确的邮箱地址，以便接收订单通知，找回密码等"),mobileCode:s("请输入验证码"),password:s("6-20个大小写英文字母、符号或数字的组合")},k={mobile:[{validator:U,trigger:"blur",required:!0}],email:[{validator:N,trigger:"blur",required:!0}],mobileCode:[{validator:x,trigger:"blur",required:!0}],emailCode:[{validator:x,trigger:"blur",required:!0}],password:[{validator:R,trigger:"blur",required:!0}]},y=w(!1),o=w({tigTips:{},registType:""}),F=te(()=>u.isOpenMobileAreaCode?c.value+o.value.mobile:o.value.mobile),B=async()=>{await S.value.validate();try{y.value=!0;const r=await pe({...o.value,mobile:F.value});V.success(s("注册成功")),T.setToken(r.token),T.userInfoLoaded=!1,ne("/member/")}catch(r){V.error(r.message)}finally{y.value=!1}},A=r=>{V.error(r)};return(r,e)=>{const t=H,E=P,f=W,g=Z,v=j,z=G,L=J,O=D,h=K;return _(),re(ie,null,[i(t,{title:"注册"}),i(E,{type:"register"}),a("div",fe,[a("div",ve,[a("div",_e,m(r.$t("会员注册")),1),i(O,{ref_key:"formRef",ref:S,"hide-required-asterisk":!0,model:o.value,rules:k,"show-message":!1,class:"form-body","label-width":"auto",onValidate:q},{default:n(()=>[o.value.registType?(_(),C(v,{key:1,prop:"email"},{default:n(()=>[a("div",Ce,m(r.$t("邮箱")),1),i(f,{modelValue:o.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.email=l),class:"input-border-style",onFocus:e[4]||(e[4]=l=>p("email"))},null,8,["modelValue"]),i(g,{info:o.value.tigTips.email},null,8,["info"])]),_:1})):(_(),C(v,{key:0,prop:"mobile"},{default:n(()=>[a("div",be,m(r.$t("手机号")),1),a("div",ge,[i(f,{modelValue:o.value.mobile,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.mobile=l),class:"input-border-style",onFocus:e[2]||(e[2]=l=>p("mobile"))},se({_:2},[d(u).isOpenMobileAreaCode?{name:"prefix",fn:n(()=>[a("div",we,[i(de,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l)},null,8,["modelValue"])])]),key:"0"}:void 0]),1032,["modelValue"])]),i(g,{info:o.value.tigTips.mobile},null,8,["info"])]),_:1})),i(v,{prop:o.value.registType?"emailCode":"mobileCode"},{default:n(()=>[a("div",ce,m(r.$t("验证码")),1),o.value.registType?(_(),C(f,{key:0,modelValue:o.value.emailCode,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.emailCode=l),class:"input-border-style",onFocus:e[7]||(e[7]=l=>p("emailCode"))},{suffix:n(()=>[i(d(M),{class:"mobile-code-text",email:o.value.email,mobileCodeSended:b.value,"onUpdate:mobileCodeSended":e[5]||(e[5]=l=>b.value=l),requestApi:d(me),onMobileErrorCallback:A},null,8,["email","mobileCodeSended","requestApi"])]),_:1},8,["modelValue"])):(_(),C(f,{key:1,modelValue:o.value.mobileCode,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.mobileCode=l),class:"input-border-style",onFocus:e[10]||(e[10]=l=>p("mobileCode"))},{suffix:n(()=>[i(d(M),{class:"mobile-code-text",mobile:d(F),mobileCodeSended:b.value,"onUpdate:mobileCodeSended":e[8]||(e[8]=l=>b.value=l),requestApi:d(ue),onMobileErrorCallback:A},null,8,["mobile","mobileCodeSended","requestApi"])]),_:1},8,["modelValue"])),i(g,{info:o.value.tigTips.mobileCode},null,8,["info"])]),_:1},8,["prop"]),i(v,{prop:"password"},{default:n(()=>[a("div",ye,m(r.$t("设置密码")),1),i(f,{modelValue:o.value.password,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.password=l),class:"input-border-style","show-password":"",type:"password",onFocus:e[12]||(e[12]=l=>p("password"))},null,8,["modelValue"]),i(g,{info:o.value.tigTips.password},null,8,["info"])]),_:1}),a("div",Ee,[$(m(r.$t("点击注册，表示您同意"))+" ",1),i(z,{class:"font-color",target:"_blank",to:"/article/issue/info?articleSn=zcxy"},{default:n(()=>[$(" 《"+m(d(le)()?r.$t("{0}注册协议！",[d(u).shopName]):`${d(u).shopName}注册协议！`)+"》 ",1)]),_:1})]),i(v,{label:"",prop:"firstWord"},{default:n(()=>[i(L,{loading:y.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:B},{default:n(()=>[$(m(r.$t("同意协议并注册")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])]),i(h,{bg:"white",type:0})],64)}}}),eo=ae($e,[["__scopeId","data-v-9aef8c33"]]);export{eo as default};

import{_ as Be}from"./Drr4mNEN.js";import{_ as je}from"./BipSnJcb.js";import{_ as re}from"./CBcH1uzJ.js";import{e as ve,r as _,h as _e,y as Re,c as d,o as i,F as w,a as e,i as c,a6 as Me,b as r,w as k,d as y,t as a,ad as ze,as as qe,j as m,p as L,_ as fe,z as We,f as Ge,g as He,G as Je,v as se,at as Ke,n as P,m as x,x as Qe,k as te,s as oe,E as Xe,au as ce,l as pe,av as Ye,ah as me}from"./BjkHNVA8.js";import{E as Ze}from"./BhwkTUtM.js";import{E as es}from"./HneMuvcA.js";import{E as ss}from"./cfDoaBtk.js";import{_ as ts}from"./DxOBwvni.js";import{_ as os}from"./CM_M6Xgj.js";import{E as as}from"./B_vjKAZC.js";import{_ as ls}from"./B85mN9rA.js";/* empty css        *//* empty css        */import"./DWKyHDnW.js";import is from"./BHDQHaYT.js";import ns from"./DpwB6Krd.js";/* empty css        */import{E as ds}from"./BsZFmHoh.js";import"./Ibc-iJtI.js";import{S as us}from"./DX-St3sq.js";import{g as rs,u as cs,a as ps,s as ms}from"./B10zCnzm.js";import{I as vs,u as _s,a as fs,o as ys,g as gs,b as hs,c as ks,d as $s}from"./T8cFYL0q.js";import{_ as Is}from"./BTD-NuY9.js";import{_ as bs}from"./BqdpVvop.js";import{E as Vs}from"./D0QC44yL.js";import"./XdJ5ILcf.js";import"./d3UjsK-T.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./yB3A8U-z.js";import"./CXwPJP5h.js";import"./n1vI1_Nv.js";import"./ClRMjIOJ.js";import"./FYm-MTMW.js";import"./C1B8-dXF.js";import"./Bnvi_g-K.js";import"./UVx7YjW9.js";import"./BzIkMksr.js";/* empty css        */import"./BNVM5YSV.js";import"./Ckzsp_T1.js";/* empty css        */import"./BBhWvQCB.js";import"./CxntHszg.js";import"./BZZtF58-.js";import"./Csy7st1x.js";const Cs={key:0,class:"modal_region_box"},Ts={key:0,class:"address_from"},ws={class:"from_item"},xs={class:"tit"},Us={class:"inp"},Ds={class:"from_item"},Ss={class:"tit"},As={class:"inp"},Ns={class:"from_item"},Ps={class:"tit"},Ls={class:"from_item"},Os={class:"tit"},Es={class:"inp"},Fs={class:"from_item"},Bs={class:"tit"},js={class:"inp"},Rs={class:"from_item"},Ms={class:"btn_box"},zs=ve({__name:"ModalRegion",props:{addressId:{type:Number,default:0}},emits:["change"],setup(H,{emit:J}){const f=J,T=H,O=_(!1),I=_(!1),l={consignee:"",regionIds:[]},$=_e({...l}),S=_(!0),E=()=>{I.value=!0,O.value=!0,T.addressId>0?j():S.value=!1};Re(()=>{});const K=()=>{Object.assign($,{...l})},j=async()=>{try{const v=await rs(T.addressId);Object.assign($,v)}catch(v){L.error(v.message)}finally{S.value=!1}},R=async()=>{try{const v=await cs($);f("change",v.addressId),I.value=!1}catch(v){L.error(v.message)}finally{}};return(v,p)=>{const Q=ds;return i(),d(w,null,[e("div",{onClick:E,style:{display:"inline-flex",cursor:"pointer"}},[Me(v.$slots,"default",{},void 0,!0)]),O.value?(i(),d("div",Cs,[r(Q,{modelValue:I.value,"onUpdate:modelValue":p[4]||(p[4]=b=>I.value=b),title:H.addressId==0?v.$t("添加收货地址"):v.$t("修改收货地址"),footer:null,top:"15vh",width:"830px","destroy-on-close":!0,onClosed:K},{default:k(()=>[S.value?c("",!0):(i(),d("div",Ts,[e("div",ws,[e("div",xs,[p[5]||(p[5]=e("span",{class:"red"},"*",-1)),y(" "+a(v.$t("收货人"))+"：",1)]),e("div",Us,[ze(e("input",{class:"tig-input","onUpdate:modelValue":p[0]||(p[0]=b=>$.consignee=b),type:"text",style:{width:"170px"}},null,512),[[qe,$.consignee]])])]),e("div",Ds,[e("div",Ss,[p[6]||(p[6]=e("span",{class:"red"},"*",-1)),y(" "+a(v.$t("所在地区"))+"：",1)]),e("div",As,[r(m(us),{modelValue:$.regionIds,"onUpdate:modelValue":p[1]||(p[1]=b=>$.regionIds=b)},null,8,["modelValue"])])]),e("div",Ns,[e("div",Ps,[p[7]||(p[7]=e("span",{class:"red"},"*",-1)),y(" "+a(v.$t("详细地址"))+"：",1)]),p[8]||(p[8]=e("div",{class:"inp"},[e("input",{class:"tig-input",type:"text",style:{width:"270px"}})],-1))]),e("div",Ls,[e("div",Os,[p[9]||(p[9]=e("span",{class:"red"},"*",-1)),y(" "+a(v.$t("联系电话"))+"：",1)]),e("div",Es,[p[10]||(p[10]=e("input",{class:"tig-input",type:"text",style:{width:"170px"}},null,-1)),e("span",null,a(v.$t("推荐手机，座机需加区号和“-”符号")),1)])]),e("div",Fs,[e("div",Bs,a(v.$t("电子邮箱"))+"：",1),e("div",js,[p[11]||(p[11]=e("input",{class:"tig-input",type:"text",style:{width:"270px"}},null,-1)),e("span",null,a(v.$t("用来接收订单提醒邮件")),1)])]),e("div",Rs,[p[12]||(p[12]=e("div",{class:"tit"},null,-1)),e("div",Ms,[e("div",{class:"btn",onClick:p[2]||(p[2]=b=>R())},a(v.$t("确认修改地址")),1),e("div",{class:"btn info",onClick:p[3]||(p[3]=b=>I.value=!1)},a(v.$t("取消")),1)])])]))]),_:1},8,["modelValue","title"])])):c("",!0)],64)}}}),qs=fe(zs,[["__scopeId","data-v-525f93ed"]]),Ws={class:"container"},Gs={class:"orderConfirmCon"},Hs={class:"form_item"},Js={class:"top_row flex justify-between"},Ks={class:"tit"},Qs={class:"delivery"},Xs={class:"tit"},Ys={key:0,class:"delivery_tags flex flex-wrap"},Zs={key:1,class:"delivery_tags flex flex-wrap"},et=["onClick"],st={key:2,class:"no_delivery"},tt={class:"errInfo red",style:{display:"inline",margin:"0"}},ot={class:"detail"},at={class:"shop_name"},lt={class:"list flex align-start"},it={class:"flex align-start"},nt={class:"pic"},dt=["src"],ut={class:"describe flex flex-column"},rt=["title"],ct={class:"mt10 sku-name-box"},pt={class:"sku-name-item"},mt={class:"sku-name"},vt={key:0,class:"extraskudata"},_t={class:"title"},ft={class:"content"},yt={class:"content-text"},gt={key:1,class:"activity-box"},ht={class:"ticket-content"},kt={class:"money"},$t={class:"quantity"},It={key:0,class:"gift-box"},bt={class:"gift-title"},Vt={class:"gift-content"},Ct={class:"gift-content-item"},Tt={class:"gift-item-left"},wt={class:"gift-item-right"},xt={class:"gift-item-name"},Ut={key:0,class:"sku-card"},Dt={class:"gift-item-num"},St={class:"add_remark"},At={class:"a_rmk_tit"},Nt={class:"a_rmk_con"},Pt={key:1,class:"form_item"},Lt={class:"top_row"},Ot={class:"tit"},Et={key:1,class:"from"},Ft={class:"check-box flex align-center"},Bt={class:"tit"},jt={style:{"margin-left":"10px"}},Rt={class:"font-color"},Mt={key:2,class:"from_list"},zt={class:"integral flex"},qt={class:"tit"},Wt={class:"inp_box"},Gt={class:"inp"},Ht={key:0,class:"points_amount"},Jt={class:"tips"},Kt={href:"/article/issue/info?articleId=7",target:"_blank"},Qt={class:"font-color"},Xt={key:3,class:"from"},Yt={class:"check-box flex align-center"},Zt={class:"tit"},eo={style:{"margin-left":"10px"}},so={class:"font-color"},to={key:2,class:"form_item"},oo={class:"top_row flex align-end"},ao={class:"tit"},lo={class:"tips"},io={class:"from"},no={class:"flex align-center invoice-box"},uo={class:"title flex align-center"},ro={key:0,class:"type"},co={key:0},po={key:1},mo={class:"type"},vo={class:"btn hand-pointer"},_o={class:"money_info"},fo={class:"total_list"},yo={class:"item"},go={class:"label"},ho={class:"value"},ko={key:0,class:"item"},$o={class:"value"},Io={class:"item"},bo={class:"tip-item"},Vo={class:"ui-tips"},Co={class:"ui-tips-main"},To={class:"tit"},wo={class:"goods_list"},xo={class:"goods_col"},Uo={class:"shop_name"},Do={class:"list"},So={class:"txt"},Ao={class:"item",style:{padding:"10px 0"}},No={class:"img_box",style:{width:"65px"}},Po=["src"],Lo={class:"value"},Oo={key:1,class:"item",style:{display:"flex","align-items":"center"}},Eo={style:{"margin-left":"4px"}},Fo={class:"value"},Bo={key:2,class:"item",style:{display:"flex","align-items":"center"}},jo={style:{"margin-left":"4px"}},Ro={class:"value"},Mo={key:3,class:"item"},zo={class:"discount"},qo={class:"discount-title"},Wo={class:"title-text"},Go={class:"discount-content"},Ho={key:0,class:"discount-item-box"},Jo={class:"item-label"},Ko={class:"item-value"},Qo={class:"discount-item-box hassub"},Xo={key:0,class:"flex justify-between",style:{"align-items":"center"}},Yo={class:"item-label"},Zo={class:"item-value discounts-value",style:{color:"var(--general)",display:"flex","align-items":"center"}},ea={key:1,class:"sub-item-box",style:{"align-items":"center"}},sa={class:"sub-item-label"},ta={class:"sub-item-value discounts-value",style:{display:"flex","align-items":"center"}},oa={key:2,class:"sub-item-box",style:{"align-items":"center"}},aa={class:"sub-item-label"},la={class:"sub-item-value discounts-value",style:{display:"flex","align-items":"center"}},ia={key:1,class:"discount-item-box"},na={class:"item-label"},da={class:"item-value"},ua={class:"value"},ra={key:0,class:"complete"},ca={class:"total_fee flex justify-end"},pa={class:"unpaidamount-label"},ma={key:0,class:"points-box"},va={class:"points-value"},_a={class:"points-text"},fa={class:"submit flex justify-end"},ya=ve({__name:"check",setup(H){const{t:J}=We(),f=Ge(),T=He(),O=Je(),I=se(()=>O.query.flowType?Number(O.query.flowType):1),l=_e({addressId:0,shippingType:{},payTypeId:0,usePoint:0,useBalance:0,useCouponIds:[],selectUserCouponIds:[],buyerNote:"",invoiceData:{}}),$=_([]),S=Ke("addressRef"),E=async()=>new Promise((s,t)=>{ps({page:1,size:99}).then(h=>{h.records.length==0&&(S.value?.show(),t("没有地址")),l.addressId=h.records[0].addressId,$.value=h.records,s(void 0)}).catch(h=>{console.log(h),t(h)})}),K=async s=>{try{await ms(s)}catch(t){console.log(t)}},j=_([]),R=async()=>{try{const s=await gs();l.payTypeId=s[0].typeId,j.value=s}catch(s){console.log(s)}},v=_({}),p=async()=>{try{const s=await hs({flowType:I.value});v.value=s;for(const t in s)s[t]&&s[t].length>0&&(l.shippingType[t]={typeId:s[t][0].shippingTypeId,shopId:s[t][0].shopId,typeName:s[t][0].shippingTypeName});console.log("getShippingTypeData",l.shippingType)}catch(s){console.log(s)}},Q=async(s,t)=>{const{shippingTypeId:h,shippingTypeName:N}=t;l.shippingType[s]&&l.shippingType[s].typeId==h||(l.shippingType[s].typeId=h,l.shippingType[s].shopId=s,l.shippingType[s].typeName=N,await A())},b=_(!0),M=_(!0),X=_(!1),ye=_(0),Y=_(!1),ae=se(()=>{const s=[f.useCoupon==1&&"优惠券",f.usePoints==1&&f.integralName,f.useSurplus==1&&"余额"].filter(Boolean);return s.length?`使用${s.join("/")}`:""}),U=_([]),n=_({}),z=_({disableCoupons:[],enableCoupons:[]}),D=_(0),ge=async()=>{M.value=!0;try{const s=await ks({flowType:I.value,...l});Object.assign(l,s.item),U.value=s.cartList,n.value=s.total,z.value=s.couponList,D.value=s.availablePoints,s.useCouponIds&&s.useCouponIds?.length>0&&(X.value=!0,l.useCouponIds=s.useCouponIds,l.selectUserCouponIds=s.selectUserCouponIds),b.value=!1}catch(s){L.error(s.message)}finally{M.value=!1}},le=_();(async()=>{try{le.value=Vs.service({lock:!1,text:J("请求加载中"),customClass:"tig-normal-loading"}),b.value=!0,await E(),await Promise.all([R(),p(),T.getUserInfo()]),await ge()}catch(s){console.log(s)}finally{b.value=!1,le.value?.close()}})();const he=async()=>{try{const s=await $s({...l.invoiceData});if(s)delete s.id,delete s.userId,delete s.orderId,delete s.status,delete s.applyReply,delete s.invoiceNo,delete s.addTime,s.titleType==1&&(s.companyUserName=s.companyName),s.titleType==2&&(s.companyEnterpriseName=s.companyName),l.invoiceData=s;else{let t=$.value.find(h=>l.addressId==h.addressId);if(t){let h={companyUserName:t.consignee,mobile:t.mobile,email:t.email,amount:n.value.unpaidAmount};Object.assign(l.invoiceData,h)}}}catch(s){L.error(s.message)}},A=async()=>{try{const s=await _s({flowType:I.value,...l});return Object.assign(l,s.item),U.value=s.cartList,n.value=s.total,D.value=s.availablePoints,s}catch(s){L.error(s.message)}finally{M.value=!1}},ie=_({autoplay:!1,navigation:!0,pagination:!1,effect:"slide",loop:!1,slidesPerView:4,slidesPerGroup:1}),ke=async s=>{try{M.value=!0,l.addressId=s.addressId,await K(s.addressId),Y.value=!1,await E(),await p(),await R(),await A(),he()}catch{}finally{}},$e=s=>{l.payTypeId!==s&&(l.payTypeId=s,A())},V=_(0),q=_(!1),Ie=s=>{console.log("getInvoiceData",s),l.invoiceData=s},be=()=>{q.value===!0?(q.value=!1,l.usePoint=0,V.value=0):q.value=!0,A()},Ve=()=>{V.value=Math.floor(Number(V.value)),V.value>D.value?V.value=D.value:(V.value<0||!V.value)&&(V.value=0),l.usePoint=V.value,A()},Ce=()=>{l.useBalance=l.useBalance==0?T.userInfo.balance:0,A()},Te=(s=!1)=>{we(s)},W=_(!1),we=async(s=!1)=>{try{W.value=!0,l.useDefaultCouponIds=s?1:0;const t=await fs(l);return l.useCouponIds=t.useCouponIds??[],l.selectUserCouponIds=t.selectUserCouponIds??[],z.value=t.couponList,n.value=t.total,U.value=t.cartList,D.value=t.availablePoints,t}catch{}finally{W.value=!1}},G=_(!1),xe=async()=>{try{G.value=!0;const s=await ys(l);if(s.returnType==2){me("/member/order/list",{replace:!0}),T.userInfoLoaded=!1,await T.getUserInfo();return}return me(`/order/pay?id=${s.orderId}`,{replace:!0}),s}catch(s){L.error(s.message)}finally{G.value=!1}},Z=_(!1),Ue=se(()=>{if(l.addressId===0||l.payTypeId===0||!l.shippingType)return!0;for(const s of U.value)if(s.noShipping===0&&!l.shippingType[s.shopId])return!0;return!1}),ne=s=>s.filter(t=>t.type===1||t.type===6),ee=_(!1);return(s,t)=>{const h=Be,N=je,C=re,De=Xe,de=Ze,ue=es,Se=ce,Ae=ss,Ne=ts,F=re,Pe=os,Le=ce,Oe=as,Ee=ls;return i(),d("div",null,[r(h,{title:"订单结算页"}),r(is,{step:2}),e("div",Ws,[e("div",Gs,[r(Is,{ref_key:"addressRef",ref:S,modelValue:Y.value,"onUpdate:modelValue":t[0]||(t[0]=o=>Y.value=o),"active-address-id":l.addressId,addressList:$.value,onAddrssRefresh:E,onOkCallback:ke},null,8,["modelValue","active-address-id","addressList"]),$.value&&$.value.length>0?(i(),P(bs,{key:0,"pay-type-id":l.payTypeId,"payment-type-list":j.value,onChangePayType:$e},null,8,["pay-type-id","payment-type-list"])):c("",!0),e("div",Hs,[e("div",Js,[e("div",Ks,a(s.$t("购物清单")),1),I.value!==3?(i(),P(N,{key:0,class:"font-color",to:"/cart/"},{default:k(()=>[y(a(s.$t("返回修改购物车")),1)]),_:1})):c("",!0)]),U.value&&U.value.length>0?(i(!0),d(w,{key:0},x(U.value,(o,Fe)=>(i(),d("div",{class:"product_detail flex",key:o.shopId},[e("div",Qs,[e("div",Xs,a(s.$t("配送方式")),1),o.noShipping===1?(i(),d("div",Ys,t[26]||(t[26]=[e("div",{class:"pay_tab flex align-center active"},[e("span",null,"无需配送"),e("i",{class:"icon-gou"})],-1)]))):v.value[o.shopId]&&v.value[o.shopId].length>0?(i(),d("div",Zs,[(i(!0),d(w,null,x(v.value[o.shopId],(u,g)=>(i(),d("div",{key:u,class:Qe(["pay_tab flex align-center",{active:u.shippingTypeId===l.shippingType[o.shopId].typeId}]),onClick:B=>Q(o.shopId,u)},[e("span",null,a(u.shippingTypeName),1),t[27]||(t[27]=e("i",{class:"icon-gou"},null,-1))],10,et))),128))])):(i(),d("div",st,[e("span",tt,a(s.$t("该收货地址不支持配送")),1)]))]),e("div",ot,[e("div",at,a(o.shopId==0?s.$t("自营"):`${s.$t("商家")}：${o.shopTitle}`),1),(i(!0),d(w,null,x(o.carts,u=>(i(),d("div",lt,[e("div",it,[e("div",nt,[r(N,{target:"_blank",to:m(oe)({path:"product",id:u.productId,sn:u.productSn})},{default:k(()=>[e("img",{src:m(te)(u.picThumb),alt:""},null,8,dt)]),_:2},1032,["to"])]),e("div",ut,[e("div",{class:"name ellipsis",title:u.productName},[r(N,{target:"_blank",to:m(oe)({path:"product",id:u.productId,sn:u.productSn})},{default:k(()=>[y(a(u.productName),1)]),_:2},1032,["to"])],8,rt),e("div",ct,[(i(!0),d(w,null,x(u.skuData,(g,B)=>(i(),d("div",pt,[e("span",mt,a(g.name)+"：",1),y(a(g.value),1)]))),256))]),u.extraSkuData&&u.extraSkuData.length?(i(),d("div",vt,[(i(!0),d(w,null,x(u.extraSkuData,g=>(i(),d("div",{key:g,class:"extraskudata-item"},[e("div",_t,a(g.attrName),1),t[28]||(t[28]=e("div",{class:"line-box"},[e("div",{class:"line"})],-1)),e("div",ft,[e("span",yt,a(g.attrValue),1),r(C,{modelValue:g.attrPrice,"onUpdate:modelValue":B=>g.attrPrice=B,showText:!1},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):c("",!0),u.activityInfo&&ne(u.activityInfo).length>0?(i(),d("div",gt,[(i(!0),d(w,null,x(ne(u.activityInfo),g=>(i(),d("div",{key:g.promotionId,class:"promotion"},[e("div",ht,a(g.type===1?s.$t("秒杀价"):s.$t("限时折扣")),1)]))),128))])):c("",!0)])]),e("div",kt,[r(C,{fontStyle:{fontWeight:"600"},modelValue:u.price,"onUpdate:modelValue":g=>u.price=g,showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),e("div",$t,"x"+a(u.quantity),1)]))),256)),o.gift&&o.gift.length>0?(i(),d("div",It,[e("div",bt,a(s.$t("赠品")),1),e("div",Vt,[(i(!0),d(w,null,x(o.gift,u=>(i(),P(N,{key:u.giftId,target:"_blank",to:m(oe)({path:"product",id:u.productId,sn:u.productSn})},{default:k(()=>[e("div",Ct,[e("div",Tt,[r(De,{class:"gift-img",lazy:"",src:m(te)(u.picThumb)},null,8,["src"])]),e("div",wt,[e("div",xt,a(u.productName),1),u.skuData&&u.skuData.length>0?(i(),d("div",Ut,[(i(!0),d(w,null,x(u.skuData,(g,B)=>(i(),d("div",{key:B,class:"sku-item"},a(g.value),1))),128))])):c("",!0),e("div",Dt,"x"+a(u.num),1)])])]),_:2},1032,["to"]))),128))])])):c("",!0)])]))),128)):c("",!0),e("div",St,[e("div",At,a(s.$t("订单备注"))+"：",1),e("div",Nt,[r(de,{modelValue:l.buyerNote,"onUpdate:modelValue":t[1]||(t[1]=o=>l.buyerNote=o),type:"textarea",placeholder:s.$t("提示：请勿填写有关支付、收货、发票方面的信息"),style:{width:"400px","font-size":"12px"},"show-word-limit":"",maxlength:50},null,8,["modelValue","placeholder"])])])]),ae.value?(i(),d("div",Pt,[e("div",Lt,[e("div",Ot,a(s.$t(ae.value)),1)]),r(Se,null,{default:k(()=>[m(f).useCoupon!=0?(i(),P(ns,{key:0,useCoupon:X.value,"onUpdate:useCoupon":t[2]||(t[2]=o=>X.value=o),couponList:z.value,"onUpdate:couponList":t[3]||(t[3]=o=>z.value=o),selectedIds:l.useCouponIds,"onUpdate:selectedIds":t[4]||(t[4]=o=>l.useCouponIds=o),selectedUserCouponIds:l.selectUserCouponIds,"onUpdate:selectedUserCouponIds":t[5]||(t[5]=o=>l.selectUserCouponIds=o),onChange:Te,couponLoading:W.value,"onUpdate:couponLoading":t[6]||(t[6]=o=>W.value=o)},null,8,["useCoupon","couponList","selectedIds","selectedUserCouponIds","couponLoading"])):c("",!0),m(f).usePoints!=0&&I.value===1?(i(),d("div",Et,[e("div",Ft,[r(ue,{checked:l.usePoint>0,onClick:be},{default:k(()=>[e("span",Bt,a(s.$t(`使用${m(f).integralName}`)),1)]),_:1},8,["checked"]),e("div",jt,[y(a(s.$t("当前账户共"))+" ",1),e("span",Rt,a(m(T).userInfo.points),1),y(" "+a(s.$t(m(f).integralName)),1)])])])):c("",!0),q.value?(i(),d("div",Mt,[t[29]||(t[29]=e("div",{class:"arrow"},null,-1)),e("div",zt,[e("div",qt,a(s.$t(`使用${m(f).integralName}`))+"：",1),e("div",Wt,[e("div",Gt,[r(de,{max:D.value,modelValue:V.value,"onUpdate:modelValue":t[7]||(t[7]=o=>V.value=o),onChange:Ve},null,8,["max","modelValue"]),n.value.pointsAmount>0?(i(),d("span",Ht,[y("  "+a(s.$t("共抵扣"))+" ",1),r(C,{class:"red",modelValue:n.value.pointsAmount,"onUpdate:modelValue":t[8]||(t[8]=o=>n.value.pointsAmount=o),showText:!1},null,8,["modelValue"])])):c("",!0)]),e("div",Jt,[y(a(s.$t("该订单最多可用"))+a(D.value)+" "+a(s.$t(m(f).integralName))+" ",1),e("a",Kt,[e("span",Qt,"【"+a(s.$t(`如何获得${m(f).integralName}`))+"？】",1)])])])])])):c("",!0),m(f).useSurplus!=0&&m(T).userInfo.balance>0?(i(),d("div",Xt,[e("div",Yt,[r(ue,{checked:l.useBalance>0,onClick:Ce},{default:k(()=>[e("span",Zt,a(s.$t("使用余额")),1)]),_:1},8,["checked"]),e("div",eo,[y(a(s.$t("当前账户余额"))+" ",1),e("span",so,a(m(T).userInfo.balance),1)])])])):c("",!0)]),_:1})])):c("",!0),m(f).canInvoice==1&&!m(pe)()?(i(),d("div",to,[e("div",oo,[e("div",ao,a(s.$t("发票信息")),1),e("div",lo,a(s.$t("开企业抬头发票须填写纳税人识别号，以免影响报销")),1)]),e("div",io,[e("div",no,[e("div",uo,[e("span",null,a(l.invoiceData.invoiceType?l.invoiceData.invoiceType==1?s.$t("电子普通发票"):s.$t("增值税专用发票"):s.$t("不开发票")),1),l.invoiceData.invoiceType==1?(i(),P(Ae,{key:0,content:s.$t("电子普通发票与纸质发票具有同等法律效力，可支持报销入账、商品售后凭证。"),placement:"bottom-start",effect:"light"},{default:k(()=>t[30]||(t[30]=[e("i",{class:"iconfont-pc icon-tishi"},null,-1)])),_:1,__:[30]},8,["content"])):c("",!0)]),l.invoiceData.invoiceType?(i(),d("div",ro,[l.invoiceData.invoiceType==1?(i(),d("span",co,a(l.invoiceData.titleType==1?s.$t("个人"):s.$t("企业")),1)):c("",!0),l.invoiceData.invoiceType==2?(i(),d("span",po,a(s.$t("增值税专用发票")),1)):c("",!0)])):c("",!0),e("div",mo,[e("span",null,a(l.invoiceData.companyName??""),1)]),r(vs,{params:{invoiceData:l.invoiceData,amount:n.value?.unpaidAmount,type:"check",address:$.value.find(o=>l.addressId==o.addressId)},onCallback:Ie,onChangeType:t[9]||(t[9]=()=>{})},{default:k(()=>[e("div",vo,a(s.$t("修改")),1)]),_:1},8,["params"])])])])):c("",!0),e("div",_o,[r(Le,null,{default:k(()=>[e("div",fo,[e("div",yo,[e("div",go,a(s.$t("商品总价"))+"： ",1),e("div",ho,[r(C,{modelValue:n.value.productAmount,"onUpdate:modelValue":t[10]||(t[10]=o=>n.value.productAmount=o),showText:!1},null,8,["modelValue"])])]),n.value.serviceFee&&n.value.serviceFee>0?(i(),d("div",ko,[y(a(s.$t("附加费用"))+"： ",1),e("div",$o,[r(C,{modelValue:n.value.serviceFee,"onUpdate:modelValue":t[11]||(t[11]=o=>n.value.serviceFee=o),showText:!1},null,8,["modelValue"])])])):c("",!0),e("div",Io,[e("div",bo,[t[32]||(t[32]=e("i",{class:"freight-icon"},null,-1)),e("div",Vo,[t[31]||(t[31]=e("span",{class:"ui-tips-arrow"},null,-1)),e("div",Co,[e("div",To,a(s.$t("运费明细")),1),e("div",wo,[(i(!0),d(w,null,x(U.value,(o,Fe)=>(i(),d("div",xo,[e("div",Uo,a(o.shopId==0?s.$t("自营"):o.shopTitle),1),e("div",Do,[e("div",So,[y(a(s.$t("运费"))+"：",1),r(C,{showText:!1,modelValue:n.value.storeShippingFee[o.shopId],"onUpdate:modelValue":u=>n.value.storeShippingFee[o.shopId]=u},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Ao,[r(Ne,{swiperOption:ie.value,"onUpdate:swiperOption":t[12]||(t[12]=u=>ie.value=u),itemList:o.carts,style:{width:"100%",padding:"0 30px"}},{default:k(({item:u})=>[e("div",No,[e("img",{src:m(te)(u.picThumb),alt:""},null,8,Po)])]),_:2},1032,["swiperOption","itemList"])])])]))),256))])])])]),y(" + "+a(s.$t("配送费用"))+"： ",1),e("div",Lo,[r(C,{showText:!1,modelValue:n.value.shippingFee,"onUpdate:modelValue":t[13]||(t[13]=o=>n.value.shippingFee=o)},null,8,["modelValue"])])]),n.value.balance>0?(i(),d("div",Oo,[t[33]||(t[33]=e("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),e("span",Eo,a(s.$t("使用余额"))+"：",1),e("div",Fo,[r(C,{modelValue:n.value.balance,"onUpdate:modelValue":t[14]||(t[14]=o=>n.value.balance=o),showText:!1},null,8,["modelValue"])])])):c("",!0),n.value.pointsAmount>0&&I.value!=3?(i(),d("div",Bo,[t[34]||(t[34]=e("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),e("span",jo,a(s.$t(`${m(f).integralName}减免`))+"：",1),e("div",Ro,[r(C,{modelValue:n.value.pointsAmount,"onUpdate:modelValue":t[15]||(t[15]=o=>n.value.pointsAmount=o),showText:!1},null,8,["modelValue"])])])):c("",!0),n.value.discounts>0?(i(),d("div",Mo,[r(Pe,{trigger:"hover",modelValue:ee.value,"onUpdate:modelValue":t[21]||(t[21]=o=>ee.value=o)},Ye({reference:k(()=>[t[35]||(t[35]=e("div",{class:"tip-item"},[e("i",{class:"freight-icon"})],-1))]),_:2},[ee.value?{name:"default",fn:k(()=>[e("div",zo,[e("div",qo,[e("div",Wo,a(s.$t("优惠明细")),1)]),e("div",Go,[n.value?.productAmount>0?(i(),d("div",Ho,[e("div",Jo,a(s.$t("商品总额")),1),e("div",Ko,[r(F,{modelValue:n.value.productAmount,"onUpdate:modelValue":t[16]||(t[16]=o=>n.value.productAmount=o),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):c("",!0),e("div",Qo,[n.value?.discounts>0?(i(),d("div",Xo,[e("div",Yo,a(s.$t("共优惠")),1),e("div",Zo,[t[36]||(t[36]=e("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),r(F,{modelValue:n.value.discounts,"onUpdate:modelValue":t[17]||(t[17]=o=>n.value.discounts=o)},null,8,["modelValue"])])])):c("",!0),n.value?.discountCouponAmount>0?(i(),d("div",ea,[e("div",sa,a(s.$t("优惠券")),1),e("div",ta,[t[37]||(t[37]=e("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),r(F,{modelValue:n.value.discountCouponAmount,"onUpdate:modelValue":t[18]||(t[18]=o=>n.value.discountCouponAmount=o)},null,8,["modelValue"])])])):c("",!0),n.value.discountDiscountAmount>0?(i(),d("div",oa,[e("div",aa,a(s.$t("其他优惠")),1),e("div",la,[t[38]||(t[38]=e("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),r(F,{modelValue:n.value.discountDiscountAmount,"onUpdate:modelValue":t[19]||(t[19]=o=>n.value.discountDiscountAmount=o)},null,8,["modelValue"])])])):c("",!0)]),n.value.discountAfter&&n.value.discountAfter>0?(i(),d("div",ia,[e("div",na,a(s.$t("合计")),1),e("div",da,[r(F,{modelValue:n.value.discountAfter,"onUpdate:modelValue":t[20]||(t[20]=o=>n.value.discountAfter=o),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):c("",!0)])])]),key:"0"}:void 0]),1032,["modelValue"]),y(" - "+a(s.$t("共优惠"))+"： ",1),e("div",ua,[r(C,{showText:!1,modelValue:n.value.discounts,"onUpdate:modelValue":t[22]||(t[22]=o=>n.value.discounts=o)},null,8,["modelValue"])])])):c("",!0)])]),_:1}),n.value.orderSendPoint&&n.value.orderSendPoint>0?(i(),d("div",ra," *"+a(m(pe)()?s.$t(`该订单完成后，您将预计获得{0}${m(f).integralName}`,[n.value.orderSendPoint]):`该订单完成后，您将预计获得${n.value.orderSendPoint}${m(f).integralName}`),1)):c("",!0),e("div",ca,[e("div",pa,a(s.$t("应付款金额"))+"：",1),I.value==3?(i(),d("div",ma,[e("div",va,[y(a(n.value?.exchangePoints)+" ",1),e("div",_a,a(s.$t(m(f).integralName)),1)]),t[39]||(t[39]=e("div",{class:"symbol"},"+",-1))])):c("",!0),r(C,{class:"price",modelValue:n.value.unpaidAmount,"onUpdate:modelValue":t[23]||(t[23]=o=>n.value.unpaidAmount=o),showText:!1},null,8,["modelValue"])]),e("div",fa,[r(Oe,{type:"primary",class:"btn",disabled:Ue.value,loading:G.value,onClick:t[24]||(t[24]=o=>!G.value&&xe())},{default:k(()=>[y(a(s.$t("提交订单")),1)]),_:1},8,["disabled","loading"])])])])]),Z.value?(i(),P(m(qs),{key:0,modelValue:Z.value,"onUpdate:modelValue":t[25]||(t[25]=o=>Z.value=o),addressId:ye.value},null,8,["modelValue","addressId"])):c("",!0),r(Ee)])}}}),pl=fe(ya,[["__scopeId","data-v-1290cc36"]]);export{pl as default};

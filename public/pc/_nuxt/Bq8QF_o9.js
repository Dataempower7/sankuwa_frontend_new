import{b as x}from"./5VTus1_X.js";import{_ as L}from"./Drr4mNEN.js";import{_ as R}from"./DUyqL_E3.js";import{E as J}from"./B_vjKAZC.js";import{_ as O}from"./CBcH1uzJ.js";import{E as H}from"./BhwkTUtM.js";import{E as M}from"./BsZFmHoh.js";import{_ as K}from"./B85mN9rA.js";import{v as Q}from"./DWKyHDnW.js";import{e as W,f as X,z as Y,ar as Z,r as v,y as ee,c as a,o as i,b as u,a as e,ad as te,t as s,d as p,i as r,w as f,j as I,F as _,m as g,x as oe,k as se,p as k,dw as le,_ as ne}from"./BjkHNVA8.js";/* empty css        */import"./Ibc-iJtI.js";import{_ as ae,a as ie,b as ue}from"./VWcVn7Qk.js";import{f as de}from"./BW8dCpPB.js";import{c as re}from"./TIyJFtn7.js";/* empty css        */import{C as me}from"./DzWKETDE.js";/* empty css        *//* empty css        *//* empty css        */import"./CM_M6Xgj.js";import"./BipSnJcb.js";import"./n1vI1_Nv.js";import"./ClRMjIOJ.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./CXwPJP5h.js";import"./d3UjsK-T.js";import"./FYm-MTMW.js";import"./cfDoaBtk.js";import"./C1B8-dXF.js";import"./Bnvi_g-K.js";import"./yB3A8U-z.js";import"./UVx7YjW9.js";import"./BzIkMksr.js";/* empty css        */import"./Csy7st1x.js";import"./XdJ5ILcf.js";import"./BNVM5YSV.js";const ce={class:"container flex"},pe={class:"menu"},ve={class:"info-row"},_e={class:"title-or-tabs"},ge={class:"order-info"},he={class:"page-info-body lr"},fe={class:"order-left"},ye={style:{"margin-left":"40px"}},be={key:0},Ve={class:"order-right"},ke={class:"page-info-body"},$e={class:"sub-title group-sub-title"},Ie={class:"sub-title-l"},Se={key:0},Ne={style:{color:"var(--main-bg)"}},je={key:0,class:"sub-title-r"},Ae={class:"group-content"},Ue={class:"group-content-item-image"},we={key:1,class:"group-content-item-image-img"},Ce=["src","alt"],Fe={key:2,class:"group-content-item-image-mask"},De={class:"group-content-item-bottom"},Pe={class:"page-info-body"},Te={class:"sub-title"},Ee={class:"group-steps"},ze={class:"group-steps-content"},Ge={class:"group-steps-item"},qe={style:{display:"inline-flex","align-items":"center",margin:"0 12px"}},Be={class:"group-steps-item"},xe={style:{display:"inline-flex","align-items":"center",margin:"0 12px"}},Le={class:"group-steps-item"},Re={class:"page-info-body"},Je={class:"sub-title"},Oe={class:"order-table-info"},He={class:"receipt-header"},Me={class:"receipt-body"},Ke={class:"receipt-item"},Qe=["alt","src"],We={key:0,class:"sku-style"},Xe={key:1,class:"extraskudata"},Ye={class:"title"},Ze={class:"content"},et={class:"content-text"},tt={class:"num"},ot={class:"receipt-item price"},st={class:"receipt-item price"},lt={class:"receipt-item price"},nt={class:"receipt-footer"},at=["colspan"],it={class:"receipt-footer-it one",colspan:"2"},ut={class:"item"},dt={class:"label"},rt={class:"text"},mt={key:0,class:"item"},ct={class:"label"},pt={class:"text"},vt={key:1,class:"item"},_t={class:"label"},gt={class:"text"},ht={key:2,class:"item"},ft={class:"label"},yt={class:"text"},bt={key:3,class:"item"},Vt={class:"label"},kt={class:"text"},$t={key:4,class:"item"},It={class:"label"},St={class:"text"},Nt={key:5,class:"item"},jt={class:"label"},At={class:"text"},Ut={key:6,class:"item"},wt={class:"label"},Ct={class:"text"},Ft={class:"item"},Dt={key:0},Pt={key:1},Tt={class:"invite-dialog-content"},Et={class:"dialog-footer"},zt=W({__name:"Info",setup(Gt){const A=X(),{t:S}=Y(),N=Z(),d=v({joinStatus:0,grouponPromotionRecordId:0,grouponPromotionItemId:0,productName:"",joinType:0,minGroupNum:0,shopId:0,shopTitle:"",grouponImage:"",minGrouponPrice:0,productPrice:0,picThumb:"",joinNumCount:0,joinUsers:[],endTime:"",orderId:0,productSn:"",joinStatusDesc:""}),n=v({orderSn:"",orderId:0,items:[],availableActions:{},shop:{}}),y=v(!0),b=v([]),h=v(!1),V=v(""),U=v(["您的订单已提交成功，请尽快完成付款哦！","感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！","您的订单已经发货，请注意查收，祝您购物愉快！",'您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。','您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！',"您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！"]);v(["待成团","拼团成功","拼团失败"]);const w=async o=>{try{const l=await de({id:o});Object.assign(n.value,l)}catch(l){k.error(l.message)}finally{y.value=!1}},C=async()=>{y.value=!0;try{const o=await re({grouponPromotionRecordId:N.currentRoute.value.query.id});d.value=o,b.value=o.joinUsers,d.value.joinNumCount<d.value.minGroupNum&&b.value.push({userId:0,username:"待加入",avatar:"https://oss.tigshop.com/img/gallery/202403/17111886010Pg60qIrJEzwe3tw06.gif",classIcon:"iconfont-pc icon-zengjia"}),b.value.sort((l,j)=>l.leader===!0?-1:1),w(o.orderId)}catch(o){k.error(o.message)}finally{y.value=!1}},F=()=>{h.value=!0,V.value=location.origin+"/joining/groupByInvited?id="+N.currentRoute.value.query.id},D=async()=>{le(V.value,()=>{k.success(S("复制成功"))},()=>{k.error(S("复制失败，请手动复制"))}),h.value=!1};return ee(()=>{C()}),(o,l)=>{const j=x,P=L,T=R,$=J,m=O,E=H,z=M,G=K,q=Q;return i(),a(_,null,[u(j),u(P,{title:"拼团详情"}),e("div",ce,[e("div",pe,[u(T)]),te((i(),a("div",ve,[e("div",_e,[e("span",null,s(o.$t("拼团详情")),1)]),e("div",ge,[e("div",he,[e("div",fe,[e("div",null,[e("span",null,[p(s(o.$t("订单号"))+"：",1),e("strong",null,s(n.value.orderSn?n.value.orderSn:"--"),1)]),e("span",ye,[p(s(o.$t("拼团状态"))+"： ",1),e("strong",null,[p(s(o.$t(d.value.joinStatusDesc||""))+" ",1),d.value.joinStatus===1?(i(),a("span",be,","+s(o.$t("还差"))+s(d.value.joinNumCount>d.value.minGroupNum?0:d.value.minGroupNum-d.value.joinNumCount)+s(o.$t("人成团")),1)):r("",!0)])])]),e("div",null,s(o.$t(U.value[n.value.orderStatus]||"")),1)]),e("div",Ve,[u($,{onClick:F,type:"primary",disabled:d.value.joinStatus!==1},{default:f(()=>[p(s(o.$t("邀请好友参团")),1)]),_:1},8,["disabled"])])]),e("div",ke,[e("div",$e,[e("div",Ie,[e("span",null,s(o.$t(d.value.joinStatusDesc||"")),1),d.value.joinStatus===1?(i(),a("span",Se,[p("  "+s(o.$t("还差"))+" ",1),e("span",Ne,s(d.value.joinNumCount>d.value.minGroupNum?0:d.value.minGroupNum-d.value.joinNumCount),1),p(" "+s(o.$t("人成团")),1)])):r("",!0)]),d.value.joinStatus===1?(i(),a("div",je,[u(I(me),{"countdown-type":"specifyTime","specify-time":new Date(d.value?.endTime)?.getTime()},null,8,["specify-time"])])):r("",!0)]),e("div",Ae,[(i(!0),a(_,null,g(b.value,t=>(i(),a("div",{class:"group-content-item",key:t.userId},[e("div",Ue,[t.classIcon?(i(),a("div",{key:0,class:oe([t.classIcon,"iconBox"])},null,2)):(i(),a("div",we,[e("img",{src:t.avatar?t.avatar:"https://oss.tigshop.com/img/gallery/202403/17111886010Pg60qIrJEzwe3tw06.gif",alt:t.username},null,8,Ce)])),t.leader?(i(),a("div",Fe,s(o.$t("团长")),1)):r("",!0)]),e("div",De,[e("span",null,s(t.username),1)])]))),128))])]),e("div",Pe,[e("div",Te,s(o.$t("拼团流程")),1),e("div",Ee,[e("div",ze,[e("div",Ge,[l[12]||(l[12]=e("img",{src:ae},null,-1)),e("span",null,s(o.$t("1.开团/参加")),1)]),e("span",qe,[(i(),a(_,null,g(3,t=>e("span",{key:t,style:{display:"inline-block",width:"8px",height:"8px","border-radius":"50%",background:"#ccc",margin:"0 3px"}})),64))]),e("div",Be,[l[13]||(l[13]=e("img",{src:ie},null,-1)),e("span",null,s(o.$t("2.邀友参团")),1)]),e("span",xe,[(i(),a(_,null,g(3,t=>e("span",{key:t,style:{display:"inline-block",width:"8px",height:"8px","border-radius":"50%",background:"#ccc",margin:"0 3px"}})),64))]),e("div",Le,[l[14]||(l[14]=e("img",{src:ue},null,-1)),e("span",null,s(o.$t("3.人满成团")),1)])])])]),e("div",Re,[e("div",Je,s(o.$t("订单商品")),1),e("table",Oe,[e("thead",null,[e("tr",He,[e("th",null,s(o.$t("商品名称")),1),e("th",null,s(o.$t("商品价格")),1),e("th",null,s(o.$t("购买数量")),1),e("th",null,s(o.$t("小计")),1)])]),e("tbody",null,[(i(!0),a(_,null,g(n.value.items,t=>(i(),a("tr",Me,[e("td",Ke,[e("div",null,[e("img",{alt:t.productName,src:("imageFormat"in o?o.imageFormat:I(se))(t.picThumb),class:"img-border"},null,8,Qe),p(" "+s(t.productName)+" ",1),t.skuData?(i(),a("div",We,[(i(!0),a(_,null,g(t.skuData,c=>(i(),a("div",null,s(c.name)+"："+s(c.value),1))),256))])):r("",!0),t.extraSkuData&&t.extraSkuData.length?(i(),a("div",Xe,[(i(!0),a(_,null,g(t.extraSkuData,c=>(i(),a("div",{key:c,class:"extraskudata-item"},[e("div",Ye,s(c.attrName),1),l[15]||(l[15]=e("div",{class:"line-box"},[e("div",{class:"line"})],-1)),e("div",Ze,[e("span",et,s(c.attrValue),1),u(m,{class:"price",modelValue:c.attrPrice,"onUpdate:modelValue":B=>c.attrPrice=B},null,8,["modelValue","onUpdate:modelValue"]),e("span",tt,"x"+s(t.quantity),1)])]))),128))])):r("",!0)])]),e("td",ot,[u(m,{modelValue:t.price,"onUpdate:modelValue":c=>t.price=c},null,8,["modelValue","onUpdate:modelValue"])]),e("td",st,s(t.quantity),1),e("td",lt,[u(m,{modelValue:t.subtotal,"onUpdate:modelValue":c=>t.subtotal=c},null,8,["modelValue","onUpdate:modelValue"])])]))),256))]),e("tfoot",null,[e("tr",nt,[e("th",{colspan:n.value.availableActions.toAftersales?3:2},null,8,at),e("th",it,[e("div",ut,[e("div",dt,s(o.$t("商品总价"))+"：",1),e("div",rt,[u(m,{modelValue:n.value.productAmount,"onUpdate:modelValue":l[0]||(l[0]=t=>n.value.productAmount=t)},null,8,["modelValue"])])]),n.value.serviceFee&&n.value.serviceFee>0?(i(),a("div",mt,[e("div",ct,s(o.$t("附加费用"))+"：",1),e("div",pt,[u(m,{modelValue:n.value.serviceFee,"onUpdate:modelValue":l[1]||(l[1]=t=>n.value.serviceFee=t)},null,8,["modelValue"])])])):r("",!0),n.value.shippingFee>0?(i(),a("div",vt,[e("div",_t,s(o.$t("运费"))+"：",1),e("div",gt,[u(m,{modelValue:n.value.shippingFee,"onUpdate:modelValue":l[2]||(l[2]=t=>n.value.shippingFee=t)},null,8,["modelValue"])])])):r("",!0),n.value.balance>0?(i(),a("div",ht,[e("div",ft,s(o.$t("使用余额"))+"：",1),e("div",yt,[u(m,{modelValue:n.value.balance,"onUpdate:modelValue":l[3]||(l[3]=t=>n.value.balance=t)},null,8,["modelValue"])])])):r("",!0),n.value.pointsAmount>0?(i(),a("div",bt,[e("div",Vt,s(o.$t(`${I(A).integralName}减免`))+"：",1),e("div",kt,[u(m,{modelValue:n.value.pointsAmount,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value.pointsAmount=t)},null,8,["modelValue"])])])):r("",!0),n.value.discountAmount>0?(i(),a("div",$t,[e("div",It,s(o.$t("其他优惠"))+"：",1),e("div",St,[l[16]||(l[16]=p(" - ",-1)),u(m,{modelValue:n.value.discountAmount,"onUpdate:modelValue":l[5]||(l[5]=t=>n.value.discountAmount=t)},null,8,["modelValue"])])])):r("",!0),n.value.couponAmount>0?(i(),a("div",Nt,[e("div",jt,s(o.$t("优惠券优惠"))+"：",1),e("div",At,[l[17]||(l[17]=p(" - ",-1)),u(m,{modelValue:n.value.couponAmount,"onUpdate:modelValue":l[6]||(l[6]=t=>n.value.couponAmount=t)},null,8,["modelValue"])])])):r("",!0),n.value.unpaidAmount&&n.value.unpaidAmount>0?(i(),a("div",Ut,[e("div",wt,s(o.$t("待支付金额"))+"：",1),e("div",Ct,[u(m,{modelValue:n.value.unpaidAmount,"onUpdate:modelValue":l[7]||(l[7]=t=>n.value.unpaidAmount=t)},null,8,["modelValue"])])])):r("",!0),e("div",Ft,[n.value.payStatus==2?(i(),a("span",Dt,s(o.$t("实付款"))+"：",1)):(i(),a("span",Pt,s(o.$t("应付款"))+"：",1)),u(m,{modelValue:n.value.totalAmount,"onUpdate:modelValue":l[8]||(l[8]=t=>n.value.totalAmount=t),fontStyle:{fontSize:"20px",color:"var(--price)"}},null,8,["modelValue"])])])])])])])])])),[[q,y.value]]),u(z,{modelValue:h.value,"onUpdate:modelValue":l[11]||(l[11]=t=>h.value=t),title:o.$t("通过链接邀请"),width:"600"},{footer:f(()=>[e("div",Et,[u($,{onClick:l[10]||(l[10]=t=>h.value=!1)},{default:f(()=>[p(s(o.$t("关闭")),1)]),_:1})])]),default:f(()=>[e("div",Tt,[u(E,{modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=t=>V.value=t),disabled:!0,size:"large",class:"invite-dialog-input"},null,8,["modelValue"]),u($,{type:"primary",onClick:D},{default:f(()=>[p(s(o.$t("复制链接")),1)]),_:1})])]),_:1},8,["modelValue","title"])]),u(G)],64)}}}),No=ne(zt,[["__scopeId","data-v-d4e17d95"]]);export{No as default};

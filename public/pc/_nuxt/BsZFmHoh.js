import{M as oe,bV as fe,by as K,P as le,e as U,ce as ve,Q as H,v as y,c as _,o as T,a as z,i as Z,a6 as A,x as b,j as e,t as ye,b as V,w as p,n as G,aN as me,cE as ge,Z as be,q as ae,cF as pe,bz as Ce,O as W,bw as he,a8 as Ee,bu as Ie,r as S,bU as Ae,bZ as Se,bl as we,bA as De,H as q,y as Te,cG as Be,cH as X,bs as Fe,V as Pe,aa as ke,R as $e,bE as Le,bh as x,ad as Oe,bv as Ne,av as Re,ae as Me,bF as ze,a9 as Ve,ag as Ue}from"./BjkHNVA8.js";import{u as je,a as _e,E as qe,b as Ke}from"./Ibc-iJtI.js";import{U as se}from"./BKu6lkEW.js";import{a as ee}from"./CH9-T1LE.js";import{u as Ze}from"./CXwPJP5h.js";const te=Symbol("dialogInjectionKey"),ne="dialog-fade",re=oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:fe},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ge={close:()=>!0},Je=(...o)=>i=>{o.forEach(a=>{K(a)?a(i):a.value=i})},Qe=U({name:"ElDialogContent"}),Ye=U({...Qe,props:re,emits:Ge,setup(o,{expose:i}){const a=o,{t:L}=ve(),{Close:d}=ge,{dialogRef:f,headerRef:C,bodyId:h,ns:t,style:c}=H(te),{focusTrapRef:m}=H(pe),g=y(()=>[t.b(),t.is("fullscreen",a.fullscreen),t.is("draggable",a.draggable),t.is("align-center",a.alignCenter),{[t.m("center")]:a.center}]),E=Je(m,f),u=y(()=>a.draggable),v=y(()=>a.overflow),{resetPosition:B,updatePosition:I}=je(f,C,u,v);return i({resetPosition:B,updatePosition:I}),(n,O)=>(T(),_("div",{ref:e(E),class:b(e(g)),style:ae(e(c)),tabindex:"-1"},[z("header",{ref_key:"headerRef",ref:C,class:b([e(t).e("header"),n.headerClass,{"show-close":n.showClose}])},[A(n.$slots,"header",{},()=>[z("span",{role:"heading","aria-level":n.ariaLevel,class:b(e(t).e("title"))},ye(n.title),11,["aria-level"])]),n.showClose?(T(),_("button",{key:0,"aria-label":e(L)("el.dialog.close"),class:b(e(t).e("headerbtn")),type:"button",onClick:w=>n.$emit("close")},[V(e(be),{class:b(e(t).e("close"))},{default:p(()=>[(T(),G(me(n.closeIcon||e(d))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Z("v-if",!0)],2),z("div",{id:e(h),class:b([e(t).e("body"),n.bodyClass])},[A(n.$slots,"default")],10,["id"]),n.$slots.footer?(T(),_("footer",{key:0,class:b([e(t).e("footer"),n.footerClass])},[A(n.$slots,"footer")],2)):Z("v-if",!0)],6))}});var He=le(Ye,[["__file","dialog-content.vue"]]);const We=oe({...re,appendToBody:Boolean,appendTo:{type:he.to.type,default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:W([String,Object]),default:ne}}),Xe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[se]:o=>Ce(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},xe=(o,i)=>{var a;const d=Ee().emit,{nextZIndex:f}=Ie();let C="";const h=ee(),t=ee(),c=S(!1),m=S(!1),g=S(!1),E=S((a=o.zIndex)!=null?a:f());let u,v;const B=Ae("namespace",Be),I=y(()=>{const r={},s=`--${B.value}-dialog`;return o.fullscreen||(o.top&&(r[`${s}-margin-top`]=o.top),o.width&&(r[`${s}-width`]=Se(o.width))),r}),n=y(()=>o.alignCenter?{display:"flex"}:{}),O=y(()=>{const r={name:o.transition,onAfterEnter:w,onBeforeLeave:P,onAfterLeave:F};if(we(o.transition)){const s={...o.transition},j=(M,ue)=>Q=>{De(M)?M.forEach(Y=>{K(Y)&&Y(Q)}):K(M)&&M(Q),ue()};return s.onAfterEnter=j(s.onAfterEnter,w),s.onBeforeLeave=j(s.onBeforeLeave,P),s.onAfterLeave=j(s.onAfterLeave,F),s.name||(s.name=ne),s}return r});function w(){d("opened")}function F(){d("closed"),d(se,!1),o.destroyOnClose&&(g.value=!1)}function P(){d("close")}function D(){v?.(),u?.(),o.openDelay&&o.openDelay>0?{stop:u}=X(()=>l(),o.openDelay):l()}function k(){u?.(),v?.(),o.closeDelay&&o.closeDelay>0?{stop:v}=X(()=>N(),o.closeDelay):N()}function $(){function r(s){s||(m.value=!0,c.value=!1)}o.beforeClose?o.beforeClose(r):k()}function J(){o.closeOnClickModal&&$()}function l(){Fe&&(c.value=!0)}function N(){c.value=!1}function R(){d("openAutoFocus")}function ie(){d("closeAutoFocus")}function de(r){var s;((s=r.detail)==null?void 0:s.focusReason)==="pointer"&&r.preventDefault()}o.lockScroll&&_e(c);function ce(){o.closeOnPressEscape&&$()}return q(()=>o.zIndex,()=>{var r;E.value=(r=o.zIndex)!=null?r:f()}),q(()=>o.modelValue,r=>{var s;r?(m.value=!1,D(),g.value=!0,E.value=(s=o.zIndex)!=null?s:f(),Pe(()=>{d("open"),i.value&&(i.value.parentElement.scrollTop=0,i.value.parentElement.scrollLeft=0,i.value.scrollTop=0)})):c.value&&k()}),q(()=>o.fullscreen,r=>{i.value&&(r?(C=i.value.style.transform,i.value.style.transform=""):i.value.style.transform=C)}),Te(()=>{o.modelValue&&(c.value=!0,g.value=!0,D())}),{afterEnter:w,afterLeave:F,beforeLeave:P,handleClose:$,onModalClick:J,close:k,doClose:N,onOpenAutoFocus:R,onCloseAutoFocus:ie,onCloseRequested:ce,onFocusoutPrevented:de,titleId:h,bodyId:t,closed:m,style:I,overlayDialogStyle:n,rendered:g,visible:c,zIndex:E,transitionConfig:O}},eo=U({name:"ElDialog",inheritAttrs:!1}),oo=U({...eo,props:We,emits:Xe,setup(o,{expose:i}){const a=o,L=ke();Ze({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},y(()=>!!L.title));const d=$e("dialog"),f=S(),C=S(),h=S(),{visible:t,titleId:c,bodyId:m,style:g,overlayDialogStyle:E,rendered:u,transitionConfig:v,zIndex:B,handleClose:I,onModalClick:n,onOpenAutoFocus:O,onCloseAutoFocus:w,onCloseRequested:F,onFocusoutPrevented:P}=xe(a,f);Ve(te,{dialogRef:f,headerRef:C,bodyId:m,ns:d,rendered:u,style:g});const D=Ke(n),k=y(()=>a.draggable&&!a.fullscreen),$=y(()=>a.modalPenetrable&&!a.modal&&!a.fullscreen);return i({visible:t,dialogContentRef:h,resetPosition:()=>{var l;(l=h.value)==null||l.resetPosition()},handleClose:I}),(l,N)=>(T(),G(e(ze),{to:l.appendTo,disabled:l.appendTo!=="body"?!1:!l.appendToBody},{default:p(()=>[V(Le,x(e(v),{persisted:""}),{default:p(()=>{var R;return[Oe(V(e(qe),{"custom-mask-event":"",mask:l.modal,"overlay-class":[(R=l.modalClass)!=null?R:"",`${e(d).namespace.value}-modal-dialog`,e(d).is("penetrable",e($))],"z-index":e(B)},{default:p(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:e(c),"aria-describedby":e(m),class:b(`${e(d).namespace.value}-overlay-dialog`),style:ae(e(E)),onClick:e(D).onClick,onMousedown:e(D).onMousedown,onMouseup:e(D).onMouseup},[V(e(Ne),{loop:"",trapped:e(t),"focus-start-el":"container",onFocusAfterTrapped:e(O),onFocusAfterReleased:e(w),onFocusoutPrevented:e(P),onReleaseRequested:e(F)},{default:p(()=>[e(u)?(T(),G(He,x({key:0,ref_key:"dialogContentRef",ref:h},l.$attrs,{center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:e(k),overflow:l.overflow,fullscreen:l.fullscreen,"header-class":l.headerClass,"body-class":l.bodyClass,"footer-class":l.footerClass,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:e(I)}),Re({header:p(()=>[l.$slots.title?A(l.$slots,"title",{key:1}):A(l.$slots,"header",{key:0,close:e(I),titleId:e(c),titleClass:e(d).e("title")})]),default:p(()=>[A(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:p(()=>[A(l.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Me,e(t)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var lo=le(oo,[["__file","dialog.vue"]]);const io=Ue(lo);export{io as E};

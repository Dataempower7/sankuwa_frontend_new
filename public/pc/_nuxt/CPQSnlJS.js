import{b as F}from"./5VTus1_X.js";import{_ as T}from"./Drr4mNEN.js";import{_ as b}from"./CBcH1uzJ.js";import{_ as L}from"./B85mN9rA.js";import{v as B}from"./DWKyHDnW.js";import{e as P,r as d,h as R,ar as x,z,y as H,c as r,o as s,b as m,a as n,ad as M,t as a,j as i,F as k,m as q,i as l,n as E,d as U,l as $,p as u,_ as j}from"./BjkHNVA8.js";import{g as O,a as W}from"./Cpa65l2S.js";import"./CM_M6Xgj.js";import"./BipSnJcb.js";import"./n1vI1_Nv.js";import"./B_vjKAZC.js";import"./CXwPJP5h.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./ClRMjIOJ.js";import"./BKu6lkEW.js";import"./d3UjsK-T.js";import"./FYm-MTMW.js";import"./cfDoaBtk.js";import"./C1B8-dXF.js";import"./Bnvi_g-K.js";import"./yB3A8U-z.js";import"./UVx7YjW9.js";import"./BzIkMksr.js";/* empty css        */import"./Csy7st1x.js";import"./BhwkTUtM.js";import"./Ibc-iJtI.js";/* empty css        */import"./XdJ5ILcf.js";import"./BNVM5YSV.js";const A={class:"container coupon-list"},G={class:"title"},J={class:"com-pc-title"},K={class:"coupon-card-list"},Q=["onClick"],X={class:"left-card"},Y={key:1,class:"coupon_discount"},Z={class:"name"},oo={key:0,class:"time"},eo={key:1,class:"time"},to={key:2,class:"time"},so={key:3,class:"name desc"},no={class:"right-card"},ao={class:"text"},ro={key:1,class:"no-result"},io={key:0},co=P({__name:"List",setup(lo){const _=d([]),c=d(!0),y=d(0),f=R({page:1,isShow:1,shopId:-1}),v=x(),h=async()=>{c.value=!0;try{v.currentRoute.value.query.shopId&&(f.shopId=Number(v.currentRoute.value.query.shopId));const e=await O({...f});y.value=e.total,_.value=e.records}catch(e){u.error(e.message)}finally{c.value=!1}},{t:S}=z();H(()=>{h()});const g=(e,t,p)=>t===0?e===1?"已领取":p>0?"再次领取":"马上领":e===0?"马上领":p>=t?"已领取":"再次领取",C=async e=>{if(g(e.isReceive,e.limitNum,e.receiveNum)===S("已领取")){u.warning("您已超出领取上限");return}try{const t=await W({couponId:e.couponId});u.success("领取成功"),await h()}catch(t){u.error(t.message)}finally{c.value=!1}};return(e,t)=>{const p=F,N=T,V=b,w=L,I=B;return s(),r(k,null,[m(p),m(N,{title:e.$t("集券中心")},null,8,["title"]),n("div",A,[n("div",G,[t[0]||(t[0]=n("div",{class:"title-image-left"},null,-1)),n("div",J,a(e.$t("集券中心")),1),t[1]||(t[1]=n("div",{class:"title-image-right"},null,-1))]),M((s(),r("div",K,[i(y)>0?(s(!0),r(k,{key:0},q(i(_),o=>(s(),r("div",{class:"card",onClick:D=>C(o)},[n("div",X,[n("div",null,[o.couponType==1?(s(),E(V,{key:0,modelValue:o.couponMoney,"onUpdate:modelValue":D=>o.couponMoney=D,showText:!1,currencyStyle:{fontSize:"24px",fontFamily:"Verdana, serif",lineHeight:"41px"},fontStyle:{fontSize:"40px",fontWeight:"bold"},class:"card-price"},null,8,["modelValue","onUpdate:modelValue"])):(s(),r("div",Y,[U(a(o.couponDiscount),1),n("span",null,a(e.$t("折")),1)]))]),n("div",Z,a(e.$t(o.couponName)?"【"+e.$t(o.couponName)+"】":""),1),o.sendType==1?(s(),r("div",oo,a(o.useStartDate)+" "+a(e.$t("至"))+" "+a(o.useEndDate),1)):l("",!0),o.sendType==0&&o.delayDay>0?(s(),r("div",eo,a(i($)()?e.$t("领券{0}天后生效，有效期{1}天",[o.delayDay,o.useDay]):`领券${o.delayDay}天后生效，有效期${o.useDay}天`),1)):l("",!0),o.sendType==0&&o.delayDay==0?(s(),r("div",to,a(i($)()?e.$t("领券当日起{0}天内可用",[o.useDay]):`领券当日起${o.useDay}天内可用`),1)):l("",!0),o.couponDesc?(s(),r("view",so,a(o.couponDesc),1)):l("",!0)]),n("div",no,[t[2]||(t[2]=n("span",{class:"division_line"},null,-1)),n("span",ao,a(g(o.isReceive,o.limitNum,o.receiveNum)),1)])],8,Q))),256)):(s(),r("div",ro,[i(c)?l("",!0):(s(),r("span",io,a(e.$t("暂无可领取的优惠券"))+"～",1))]))])),[[I,i(c)]])]),m(w)],64)}}}),Uo=j(co,[["__scopeId","data-v-e08cae1a"]]);export{Uo as default};

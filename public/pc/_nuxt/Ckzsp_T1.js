import{a as he,d as le,f as J}from"./BIqqf5dq.js";import{cM as Ae,bA as z,a3 as ne,bz as be,M as re,O as j,bK as ge,r as E,v as f,P as ye,e as R,h as X,R as oe,H as T,a9 as Se,bR as _e,c as Fe,o as ee,a6 as q,x as N,j as c,by as we,Q as k,y as Ie,T as We,Y as $e,S as qe,b as D,F as ze,V as Pe,aa as je,cN as Te,bZ as ue,cO as H,a as de,w as Z,n as ke,i as ce,aN as De,q as fe,d as Ge,t as ve,cP as Ke,cQ as Ue,ag as Qe,af as Ye}from"./BjkHNVA8.js";import{c as te}from"./Bnvi_g-K.js";import{d as He,t as Ze}from"./BKu6lkEW.js";import{a as Je}from"./CH9-T1LE.js";var Xe=4;function me(d){return Ae(d,Xe)}const et=re({size:{type:String,values:ge},disabled:Boolean}),tt=re({...et,model:Object,rules:{type:j(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:j([Object,Boolean]),default:!0}}),lt={validate:(d,p,e)=>(z(d)||ne(d))&&be(p)&&ne(e)};function rt(){const d=E([]),p=f(()=>{if(!d.value.length)return"0";const r=Math.max(...d.value);return r?`${r}px`:""});function e(r){const v=d.value.indexOf(r);return v===-1&&p.value,v}function s(r,v){if(r&&v){const i=e(v);d.value.splice(i,1,r)}else r&&d.value.push(r)}function l(r){const v=e(r);v>-1&&d.value.splice(v,1)}return{autoLabelWidth:p,registerLabelWidth:s,deregisterLabelWidth:l}}const $=(d,p)=>{const e=te(p).map(s=>z(s)?s.join("."):s);return e.length>0?d.filter(s=>s.propString&&e.includes(s.propString)):d},ot="ElForm",at=R({name:ot}),st=R({...at,props:tt,emits:lt,setup(d,{expose:p,emit:e}){const s=d,l=E(),r=X([]),v=he(),i=oe("form"),C=f(()=>{const{labelPosition:o,inline:u}=s;return[i.b(),i.m(v.value||"default"),{[i.m(`label-${o}`)]:o,[i.m("inline")]:u}]}),g=o=>$(r,[o])[0],n=o=>{r.push(o)},y=o=>{o.prop&&r.splice(r.indexOf(o),1)},S=(o=[])=>{s.model&&$(r,o).forEach(u=>u.resetField())},I=(o=[])=>{$(r,o).forEach(u=>u.clearValidate())},x=f(()=>!!s.model),W=o=>{if(r.length===0)return[];const u=$(r,o);return u.length?u:[]},_=async o=>M(void 0,o),B=async(o=[])=>{if(!x.value)return!1;const u=W(o);if(u.length===0)return!0;let b={};for(const F of u)try{await F.validate(""),F.validateState==="error"&&!F.error&&F.resetField()}catch(P){b={...b,...P}}return Object.keys(b).length===0?!0:Promise.reject(b)},M=async(o=[],u)=>{let b=!1;const F=!we(u);try{return b=await B(o),b===!0&&await u?.(b),b}catch(P){if(P instanceof Error)throw P;const L=P;if(s.scrollToError&&l.value){const A=l.value.querySelector(`.${i.b()}-item.is-error`);A?.scrollIntoView(s.scrollIntoViewOptions)}return!b&&await u?.(!1,L),F&&Promise.reject(L)}},G=o=>{var u;const b=g(o);b&&((u=b.$el)==null||u.scrollIntoView(s.scrollIntoViewOptions))};return T(()=>s.rules,()=>{s.validateOnRuleChange&&_().catch(o=>He())},{deep:!0,flush:"post"}),Se(le,X({..._e(s),emit:e,resetFields:S,clearValidate:I,validateField:M,getField:g,addField:n,removeField:y,...rt()})),p({validate:_,validateField:M,resetFields:S,clearValidate:I,scrollToField:G,getField:g,fields:r}),(o,u)=>(ee(),Fe("form",{ref_key:"formRef",ref:l,class:N(c(C))},[q(o.$slots,"default")],2))}});var it=ye(st,[["__file","form.vue"]]);const nt=["","error","validating","success"],ut=re({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:j([String,Array])},required:{type:Boolean,default:void 0},rules:{type:j([Object,Array])},error:String,validateStatus:{type:String,values:nt},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:ge}}),pe="ElLabelWrap";var dt=R({name:pe,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(d,{slots:p}){const e=k(le,void 0),s=k(J);s||Ze(pe,"usage: <el-form-item><label-wrap /></el-form-item>");const l=oe("form"),r=E(),v=E(0),i=()=>{var n;if((n=r.value)!=null&&n.firstElementChild){const y=window.getComputedStyle(r.value.firstElementChild).width;return Math.ceil(Number.parseFloat(y))}else return 0},C=(n="update")=>{Pe(()=>{p.default&&d.isAutoWidth&&(n==="update"?v.value=i():n==="remove"&&e?.deregisterLabelWidth(v.value))})},g=()=>C("update");return Ie(()=>{g()}),We(()=>{C("remove")}),$e(()=>g()),T(v,(n,y)=>{d.updateAll&&e?.registerLabelWidth(n,y)}),qe(f(()=>{var n,y;return(y=(n=r.value)==null?void 0:n.firstElementChild)!=null?y:null}),g),()=>{var n,y;if(!p)return null;const{isAutoWidth:S}=d;if(S){const I=e?.autoLabelWidth,x=s?.hasLabel,W={};if(x&&I&&I!=="auto"){const _=Math.max(0,Number.parseInt(I,10)-v.value),M=(s.labelPosition||e.labelPosition)==="left"?"marginRight":"marginLeft";_&&(W[M]=`${_}px`)}return D("div",{ref:r,class:[l.be("item","label-wrap")],style:W},[(n=p.default)==null?void 0:n.call(p)])}else return D(ze,{ref:r},[(y=p.default)==null?void 0:y.call(p)])}}});const ct=R({name:"ElFormItem"}),ft=R({...ct,props:ut,setup(d,{expose:p}){const e=d,s=je(),l=k(le,void 0),r=k(J,void 0),v=he(void 0,{formItem:!1}),i=oe("form-item"),C=Je().value,g=E([]),n=E(""),y=Te(n,100),S=E(""),I=E();let x,W=!1;const _=f(()=>e.labelPosition||l?.labelPosition),B=f(()=>{if(_.value==="top")return{};const t=ue(e.labelWidth||l?.labelWidth||"");return t?{width:t}:{}}),M=f(()=>{if(_.value==="top"||l?.inline)return{};if(!e.label&&!e.labelWidth&&A)return{};const t=ue(e.labelWidth||l?.labelWidth||"");return!e.label&&!s.label?{marginLeft:t}:{}}),G=f(()=>[i.b(),i.m(v.value),i.is("error",n.value==="error"),i.is("validating",n.value==="validating"),i.is("success",n.value==="success"),i.is("required",xe.value||e.required),i.is("no-asterisk",l?.hideRequiredAsterisk),l?.requireAsteriskPosition==="right"?"asterisk-right":"asterisk-left",{[i.m("feedback")]:l?.statusIcon,[i.m(`label-${_.value}`)]:_.value}]),o=f(()=>be(e.inlineMessage)?e.inlineMessage:l?.inlineMessage||!1),u=f(()=>[i.e("error"),{[i.em("error","inline")]:o.value}]),b=f(()=>e.prop?z(e.prop)?e.prop.join("."):e.prop:""),F=f(()=>!!(e.label||s.label)),P=f(()=>{var t;return(t=e.for)!=null?t:g.value.length===1?g.value[0]:void 0}),L=f(()=>!P.value&&F.value),A=!!r,K=f(()=>{const t=l?.model;if(!(!t||!e.prop))return H(t,e.prop).value}),U=f(()=>{const{required:t}=e,a=[];e.rules&&a.push(...te(e.rules));const h=l?.rules;if(h&&e.prop){const m=H(h,e.prop).value;m&&a.push(...te(m))}if(t!==void 0){const m=a.map((w,O)=>[w,O]).filter(([w])=>Object.keys(w).includes("required"));if(m.length>0)for(const[w,O]of m)w.required!==t&&(a[O]={...w,required:t});else a.push({required:t})}return a}),Ee=f(()=>U.value.length>0),Me=t=>U.value.filter(h=>!h.trigger||!t?!0:z(h.trigger)?h.trigger.includes(t):h.trigger===t).map(({trigger:h,...m})=>m),xe=f(()=>U.value.some(t=>t.required)),Le=f(()=>{var t;return y.value==="error"&&e.showMessage&&((t=l?.showMessage)!=null?t:!0)}),ae=f(()=>`${e.label||""}${l?.labelSuffix||""}`),V=t=>{n.value=t},Ve=t=>{var a,h;const{errors:m,fields:w}=t;(!m||!w)&&console.error(t),V("error"),S.value=m?(h=(a=m?.[0])==null?void 0:a.message)!=null?h:`${e.prop} is required`:"",l?.emit("validate",e.prop,!1,S.value)},Oe=()=>{V("success"),l?.emit("validate",e.prop,!0,"")},Be=async t=>{const a=b.value;return new Ue({[a]:t}).validate({[a]:K.value},{firstFields:!0}).then(()=>(Oe(),!0)).catch(m=>(Ve(m),Promise.reject(m)))},se=async(t,a)=>{if(W||!e.prop)return!1;const h=we(a);if(!Ee.value)return a?.(!1),!1;const m=Me(t);return m.length===0?(a?.(!0),!0):(V("validating"),Be(m).then(()=>(a?.(!0),!0)).catch(w=>{const{fields:O}=w;return a?.(!1,O),h?!1:Promise.reject(O)}))},Q=()=>{V(""),S.value="",W=!1},ie=async()=>{const t=l?.model;if(!t||!e.prop)return;const a=H(t,e.prop);W=!0,a.value=me(x),await Pe(),Q(),W=!1},Ne=t=>{g.value.includes(t)||g.value.push(t)},Re=t=>{g.value=g.value.filter(a=>a!==t)};T(()=>e.error,t=>{S.value=t||"",V(t?"error":"")},{immediate:!0}),T(()=>e.validateStatus,t=>V(t||""));const Y=X({..._e(e),$el:I,size:v,validateMessage:S,validateState:n,labelId:C,inputIds:g,isGroup:L,hasLabel:F,fieldValue:K,addInputId:Ne,removeInputId:Re,resetField:ie,clearValidate:Q,validate:se,propString:b});return Se(J,Y),Ie(()=>{e.prop&&(l?.addField(Y),x=me(K.value))}),We(()=>{l?.removeField(Y)}),p({size:v,validateMessage:S,validateState:n,validate:se,clearValidate:Q,resetField:ie}),(t,a)=>{var h;return ee(),Fe("div",{ref_key:"formItemRef",ref:I,class:N(c(G)),role:c(L)?"group":void 0,"aria-labelledby":c(L)?c(C):void 0},[D(c(dt),{"is-auto-width":c(B).width==="auto","update-all":((h=c(l))==null?void 0:h.labelWidth)==="auto"},{default:Z(()=>[c(F)?(ee(),ke(De(c(P)?"label":"div"),{key:0,id:c(C),for:c(P),class:N(c(i).e("label")),style:fe(c(B))},{default:Z(()=>[q(t.$slots,"label",{label:c(ae)},()=>[Ge(ve(c(ae)),1)])]),_:3},8,["id","for","class","style"])):ce("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),de("div",{class:N(c(i).e("content")),style:fe(c(M))},[q(t.$slots,"default"),D(Ke,{name:`${c(i).namespace.value}-zoom-in-top`},{default:Z(()=>[c(Le)?q(t.$slots,"error",{key:0,error:S.value},()=>[de("div",{class:N(c(u))},ve(S.value),3)]):ce("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var Ce=ye(ft,[["__file","form-item.vue"]]);const gt=Qe(it,{FormItem:Ce}),yt=Ye(Ce);export{yt as E,gt as a};

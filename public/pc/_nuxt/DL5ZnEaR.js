import{S as e,I as t,r as o,H as a,ca as n,bv as l,bn as u,T as i}from"./r4GZdGYg.js";import{c as s}from"./Bd103Yf7.js";function r(i,{beforeFocus:r,afterFocus:c,beforeBlur:v,afterBlur:d}={}){const m=e(),{emit:p}=m,f=t(),b=s(),g=o(!1),h=e=>{!!l(r)&&r(e)||g.value||(g.value=!0,p("focus",e),null==c||c())},C=e=>{var t;!!l(v)&&v(e)||e.relatedTarget&&(null==(t=f.value)?void 0:t.contains(e.relatedTarget))||(g.value=!1,p("blur",e),null==d||d())};return a([f,b],([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))}),n(f,"focus",h,!0),n(f,"blur",C,!0),n(f,"click",e=>{var t,o;(null==(t=f.value)?void 0:t.contains(document.activeElement))&&f.value!==document.activeElement||u(e.target)||b.value||null==(o=i.value)||o.focus()},!0),{isFocused:g,wrapperRef:f,handleFocus:h,handleBlur:C}}function c({afterComposition:e,emit:t}){const a=o(!1),n=e=>{var o;null==t||t("compositionupdate",e);const n=null==(o=e.target)?void 0:o.value,l=n[n.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},l=o=>{null==t||t("compositionend",o),a.value&&(a.value=!1,i(()=>e(o)))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?l(e):n(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),a.value=!0},handleCompositionUpdate:n,handleCompositionEnd:l}}export{c as a,r as u};

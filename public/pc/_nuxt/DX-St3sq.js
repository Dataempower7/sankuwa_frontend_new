import{aL as L,e as M,ax as $,ay as x,r as f,y as S,z,v as F,B as O,c as t,o as s,a as g,i as h,F as r,m as _,d as P,t as m,x as N,aj as q,_ as D}from"./BjkHNVA8.js";/* empty css        */const T=p=>L({url:"sys/region/getRegion",method:"get",params:{regionIds:p}}),U={class:"flex align-center"},A={key:0},G={key:1},H={key:0,class:"select_popup"},J={class:"top flex justify-between"},K={class:"tabs flex"},Q=["onClick"],W={key:0,class:"sec_childs"},X=["onClick"],Y=M({__name:"SelectRegion",props:{modelValue:{default:[]},modelModifiers:{}},emits:$(["change"],["update:modelValue"]),setup(p,{emit:R}){const i=x(p,"modelValue"),v=f(!1),l=f([]),a=f(0),V=R;S(()=>{k()});const{t:b}=z(),k=async()=>{try{let e=i.value.join();const n=await T(e);Object.assign(l.value,n),l.value.length>1?l.value[l.value.length-1].length>0?a.value=l.value.length-1:a.value=l.value.length-2:a.value=0}catch{}finally{}},w=e=>i.value.includes(e),j=()=>{v.value=!0,k()},B=async(e,n)=>{e>=0&&e<=i.value.length&&(i.value[e]=n,i.value.splice(e+1)),await k(),l.value.length==e+1||l.value[e+1].length==0?v.value=!1:a.value=e+1,V("change")},d=F(()=>{let e=[];return l.value.forEach((n,o)=>{if(n.length>0){let c=!1;n.forEach(u=>{w(u.regionId)&&(e[o]=u.regionName,c=!0)}),c==!1&&(e[o]=b("请选择地区"))}}),e}),E=()=>{i.value=[],l.value=[],a.value=0},C=()=>{v.value===!0&&i.value.length!=d.value.length&&E(),v.value=!1},y=f(null),I=e=>{y.value&&!y.value.contains(e.target)&&C()};return S(()=>{window.addEventListener("click",I)}),O(()=>{window.removeEventListener("click",I)}),(e,n)=>(s(),t("div",{class:"select_region_box",ref_key:"selectPop",ref:y},[g("div",U,[g("div",{class:"select_region hand-pointer flex align-center",onClick:j},[d.value.length>0?(s(),t("div",A,[(s(!0),t(r,null,_(d.value,(o,c)=>(s(),t(r,null,[P(m(o)+" ",1)],64))),256))])):h("",!0),d.value.length==0?(s(),t("div",G,m(e.$t("请选择地区")),1)):h("",!0),n[0]||(n[0]=g("i",{class:"iconfont-pc icon-xiajiantou"},null,-1))])]),v.value?(s(),t("div",H,[g("div",J,[g("div",K,[(s(!0),t(r,null,_(d.value,(o,c)=>(s(),t("div",{class:N(["tab",{cur:a.value===c}]),onClick:u=>a.value=c},m(o||e.$t("请选择")),11,Q))),256))]),l.value.length==a.value+1?(s(),t("div",{key:0,class:"selectclose",onClick:q(C,["stop"])},"×")):h("",!0)]),(s(!0),t(r,null,_(l.value,(o,c)=>(s(),t(r,null,[a.value===c?(s(),t("div",W,[(s(!0),t(r,null,_(o,u=>(s(),t("span",{class:N(["sec_item",{active:w(u.regionId)}]),onClick:Z=>B(c,u.regionId)},m(u.regionName),11,X))),256))])):h("",!0)],64))),256))])):h("",!0)],512))}}),se=D(Y,[["__scopeId","data-v-e9d1d549"]]);export{se as S};

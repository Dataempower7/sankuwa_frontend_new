import{E as s}from"./YKVlRHu9.js";import{_ as e}from"./y-2lx1u-.js";import{E as a,a as r}from"./Ceu3XlbY.js";import{E as o}from"./5EY5iYNX.js";import{e as t,cx as l,z as d,I as p,h as i,r as u,ae as n,n as w,o as m,w as v,b as f,a as g,t as c,d as y,j as E,dy as b,cy as $,_ as h}from"./r4GZdGYg.js";import"./Bd103Yf7.js";import"./g8XVjk5f.js";import"./CIKxL71l.js";import"./DL5ZnEaR.js";import"./DONyGZrs.js";import"./BNGL4P8m.js";const _={class:"label"},j={class:"label"},V=h(t({__name:"StepTow",props:{step:{},stepModifiers:{},modelValue:{type:String},modelModifiers:{}},emits:["update:step","update:modelValue"],setup(t){const h=l(t,"step"),V=l(t,"modelValue"),{t:T}=d(),z=p(),Z=(s,e,a)=>{W.value.tigTips[s]=e?{type:"valid",message:a}:{type:"error",message:a}},A=s=>{W.value.tigTips[s]={type:"info",message:k[s]}},k=i({password:T("6-20个大小写英文字母、符号或数字的组合"),password2:T("请输入和上次相同的密码")}),q=i({password:[{validator:(s,e,a)=>e?e.length>20||e.length<6?a(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?a(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?a(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?void a():a(new Error(T("密码不能全为相同字符或数字"))):a(new Error(T("密码不能全为符号"))):a(new Error(T("密码不能全为字母"))):a(new Error(T("密码不能为空"))),trigger:"blur",required:!0}],password2:[{validator:(s,e,a)=>e?e.length>20||e.length<6?a(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?a(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?a(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?e!=W.value.password?a(new Error(T("两次输入密码不一致"))):void a():a(new Error(T("密码不能全为相同字符或数字"))):a(new Error(T("密码不能全为符号"))):a(new Error(T("密码不能全为字母"))):a(new Error(T("密码不能为空"))),trigger:"blur",required:!0}]}),x=u(!1),W=u({tigTips:{},password:"",password2:""}),F=n(),I=async()=>{await z.value.validate();try{x.value=!0;await b({mobileKey:V.value,password:W.value.password});$.success(T("重置密码成功")),F.push("/member/login")}catch(s){$.error(s.message),h.value=1,V.value="",W.value.password="",W.value.password2=""}finally{x.value=!1}};return(t,l)=>{const d=s,p=e,i=a,u=o,n=r;return m(),w(n,{ref_key:"formRef",ref:z,"hide-required-asterisk":!0,model:W.value,rules:E(q),"show-message":!1,class:"form-body","label-width":"auto",onValidate:Z},{default:v(()=>[f(i,{prop:"password"},{default:v(()=>[g("div",_,c(t.$t("新密码")),1),f(d,{modelValue:W.value.password,"onUpdate:modelValue":l[0]||(l[0]=s=>W.value.password=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[1]||(l[1]=s=>A("password"))},null,8,["modelValue"]),f(p,{info:W.value.tigTips.password},null,8,["info"])]),_:1}),f(i,{prop:"password2"},{default:v(()=>[g("div",j,c(t.$t("确认新密码")),1),f(d,{modelValue:W.value.password2,"onUpdate:modelValue":l[2]||(l[2]=s=>W.value.password2=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[3]||(l[3]=s=>A("password2"))},null,8,["modelValue"]),f(p,{info:W.value.tigTips.password2},null,8,["info"])]),_:1}),f(i,{label:"",prop:"firstWord"},{default:v(()=>[f(u,{loading:x.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:I},{default:v(()=>[y(c(t.$t("确 认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-52a2c7d0"]]);export{V as default};

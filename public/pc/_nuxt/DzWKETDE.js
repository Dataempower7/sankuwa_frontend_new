import{bs as P,M as I,O as N,P as q,e as C,R as G,v as M,by as Y,a4 as k,c as T,o as w,i as H,a as l,x as _,j as S,a6 as b,d as J,t as c,q as K,ag as z,r as E,y as Q,H as L,T as W,n as X,av as Z,m as ee,w as te,ad as se,ae,b as ne,F as oe,_ as ie}from"./BjkHNVA8.js";import{C as U}from"./BKu6lkEW.js";const j=n=>P?window.requestAnimationFrame(n):setTimeout(n,16),re=n=>P?window.cancelAnimationFrame(n):clearTimeout(n),le=I({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:N([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:N([String,Object,Array])}}),ue=C({name:"ElStatistic"}),ce=C({...ue,props:le,setup(n,{expose:h}){const p=n,t=G("statistic"),r=M(()=>{const{value:s,formatter:d,precision:f,decimalSeparator:u,groupSeparator:a}=p;if(Y(d))return d(s);if(!k(s)||Number.isNaN(s))return s;let[o,m=""]=String(s).split(".");return m=m.padEnd(f,"0").slice(0,f>0?f:0),o=o.replace(/\B(?=(\d{3})+(?!\d))/g,a),[o,m].join(m?u:"")});return h({displayValue:r}),(s,d)=>(w(),T("div",{class:_(S(t).b())},[s.$slots.title||s.title?(w(),T("div",{key:0,class:_(S(t).e("head"))},[b(s.$slots,"title",{},()=>[J(c(s.title),1)])],2)):H("v-if",!0),l("div",{class:_(S(t).e("content"))},[s.$slots.prefix||s.prefix?(w(),T("div",{key:0,class:_(S(t).e("prefix"))},[b(s.$slots,"prefix",{},()=>[l("span",null,c(s.prefix),1)])],2)):H("v-if",!0),l("span",{class:_(S(t).e("number")),style:K(s.valueStyle)},c(S(r)),7),s.$slots.suffix||s.suffix?(w(),T("div",{key:1,class:_(S(t).e("suffix"))},[b(s.$slots,"suffix",{},()=>[l("span",null,c(s.suffix),1)])],2)):H("v-if",!0)],2)],2))}});var de=q(ce,[["__file","statistic.vue"]]);const fe=z(de),me=I({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:N([Number,Object]),default:0},valueStyle:{type:N([String,Object,Array])}}),pe={finish:()=>!0,[U]:n=>k(n)},ye=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],O=n=>k(n)?new Date(n).getTime():n.valueOf(),R=(n,h)=>{let p=n;const t=/\[([^\]]*)]/g;return ye.reduce((s,[d,f])=>{const u=new RegExp(`${d}+(?![^\\[\\]]*\\])`,"g");if(u.test(s)){const a=Math.floor(p/f);return p-=a*f,s.replace(u,o=>String(a).padStart(o.length,"0"))}return s},h).replace(t,"$1")},we=C({name:"ElCountdown"}),ve=C({...we,props:me,emits:pe,setup(n,{expose:h,emit:p}){const t=n;let r;const s=E(0),d=M(()=>R(s.value,t.format)),f=o=>R(o,t.format),u=()=>{r&&(re(r),r=void 0)},a=()=>{const o=O(t.value),m=()=>{let e=o-Date.now();p(U,e),e<=0?(e=0,u(),p("finish")):r=j(m),s.value=e};r=j(m)};return Q(()=>{s.value=O(t.value)-Date.now(),L(()=>[t.value,t.format],()=>{u(),a()},{immediate:!0})}),W(()=>{u()}),h({displayValue:d}),(o,m)=>(w(),X(S(fe),{value:s.value,title:o.title,prefix:o.prefix,suffix:o.suffix,"value-style":o.valueStyle,formatter:f},Z({_:2},[ee(o.$slots,(e,i)=>({name:i,fn:te(()=>[b(o.$slots,i)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var ge=q(ve,[["__file","countdown.vue"]]);const Se=z(ge),Te={class:"countdown-box"},he={key:0,class:"countdown-box"},De={class:"countdown-text"},_e={class:"countdown-item"},be={class:"countdown-separator-text"},$e={class:"countdown-item"},He={class:"countdown-item"},Ce={class:"countdown-item"},Ne={key:1},Me=C({__name:"CountDownNew",props:{countdownType:{default:"dailyCycle"},valueStyle:{default:()=>({})},dailyTime:{default:()=>[]},specifyTime:{default:0},format:{default:"HH:mm:ss"},showDefault:{type:Boolean,default:!1}},emits:["change","finish"],setup(n,{expose:h,emit:p}){const t=n;console.log(t.specifyTime,1111);const r=p,s=E(null),d=M(()=>{if(t.countdownType==="specifyTime")return t.specifyTime;if(t.countdownType==="dailyCycle"){const e=f(),i=Date.now();return Array.isArray(t.dailyTime)&&i<e.dailyStartTime?e.dailyStartTime:e.dailyEndTime}return 0}),f=()=>{const e=new Date,i=new Date(e);i.setDate(e.getDate()+1);let v=0,y=0;if(typeof t.dailyTime=="number"){const g=new Date(t.dailyTime).getHours(),D=new Date(t.dailyTime).getMinutes(),$=new Date(t.dailyTime).getSeconds();y=new Date(e.setHours(g,D,$,0)).getTime(),y<=Date.now()&&(y=new Date(i.setHours(g,D,$,0)).getTime())}else if(Array.isArray(t.dailyTime)&&t.dailyTime.length>=2){const g=new Date(t.dailyTime[0]),D=new Date(t.dailyTime[1]),$=g.getHours(),A=g.getMinutes(),F=g.getSeconds(),V=D.getHours(),x=D.getMinutes(),B=D.getSeconds();v=new Date(e.setHours($,A,F,0)).getTime(),y=new Date(e.setHours(V,x,B,0)).getTime(),v<=Date.now()&&(v=new Date(i.setHours($,A,F,0)).getTime()),y<=Date.now()&&(y=new Date(i.setHours(V,x,B,0)).getTime())}return{dailyStartTime:v,dailyEndTime:y}},u=E(0),a=M(()=>{const e=Math.floor(u.value/1e3),i=Math.floor(e/(1440*60)),v=Math.floor(e%(1440*60)/3600),y=Math.floor(e%3600/60),g=e%60;return{days:i.toString().padStart(2,"0"),hours:v.toString().padStart(2,"0"),minutes:y.toString().padStart(2,"0"),seconds:g.toString().padStart(2,"0")}}),o=e=>{u.value=e,r("change",e)},m=()=>{r("finish")};return L(()=>[t.countdownType,t.dailyTime,t.specifyTime],()=>{},{deep:!0}),h({countdownRef:s}),(e,i)=>{const v=Se;return w(),T("div",Te,[se(ne(v,{ref_key:"countdownRef",ref:s,onChange:o,onFinish:m,"value-style":e.valueStyle,format:e.format,value:d.value},null,8,["value-style","format","value"]),[[ae,e.showDefault&&!e.$slots.default]]),e.showDefault?e.$slots.default&&e.showDefault?b(e.$slots,"default",{key:1,days:a.value.days,hours:a.value.hours,minutes:a.value.minutes,seconds:a.value.seconds},void 0,!0):H("",!0):b(e.$slots,"default",{key:0,days:a.value.days,hours:a.value.hours,minutes:a.value.minutes,seconds:a.value.seconds},()=>[d.value?(w(),T("div",he,[l("span",De,c(e.$t("距离结束"))+": ",1),a.value.days&&Number(a.value.days)>0?(w(),T(oe,{key:0},[l("span",_e,c(a.value.days),1),l("span",be,c(e.$t("天")),1)],64)):H("",!0),l("span",$e,c(a.value.hours),1),i[0]||(i[0]=l("span",{class:"countdown-separator"},":",-1)),l("span",He,c(a.value.minutes),1),i[1]||(i[1]=l("span",{class:"countdown-separator"},":",-1)),l("span",Ce,c(a.value.seconds),1)])):(w(),T("div",Ne,c(e.$t("倒计时结束")),1))],!0)])}}}),Ae=ie(Me,[["__scopeId","data-v-adb39be7"]]);export{Ae as C};

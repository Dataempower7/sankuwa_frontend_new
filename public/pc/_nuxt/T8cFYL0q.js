import{_ as Z}from"./BipSnJcb.js";import{a as x,E as ee}from"./Ckzsp_T1.js";import{_ as ae}from"./CBcH1uzJ.js";import{a as le,E as oe}from"./ClRMjIOJ.js";import{E as te}from"./BhwkTUtM.js";import{E as se}from"./B_vjKAZC.js";import{E as ne}from"./BsZFmHoh.js";import{aL as k,e as ue,f as re,r as A,I as E,z as pe,c as $,o as d,F as S,b as o,a as n,w as a,n as f,i as y,d as v,t as l,q as M,j as me,a6 as de,p as N,_ as ie}from"./BjkHNVA8.js";/* empty css        *//* empty css        *//* empty css        */import"./Ibc-iJtI.js";import{g as ce}from"./BBhWvQCB.js";const ia=m=>k({url:"order/check/index",method:"post",data:m}),ca=m=>k({url:"order/check/update",method:"post",data:m}),va=m=>k({url:"order/check/updateCoupon",method:"post",data:m}),ya=m=>k({url:"order/check/submit",method:"post",data:m}),ve=m=>k({url:"order/check/getInvoice",method:"get",params:m}),fa=()=>k({url:"order/check/getAvailablePaymentType",method:"get"}),ba=m=>k({url:"order/check/getStoreShippingType",method:"get",params:m}),ye=m=>k({url:"user/orderInvoice/detail",method:"get",params:m}),fe=(m,P)=>k({url:"user/orderInvoice/"+P,method:"post",data:m}),be={class:"audit-status"},$e={class:"message"},ge={class:"message"},he={class:"extra"},ke={class:"message"},Ve={class:"message"},Te={class:"message"},Ae={class:"message"},Ce={class:"message"},Oe={class:"message"},Se={class:"message"},Ie={class:"message"},we={class:"message"},Ne={class:"extra"},je={class:"message"},_e={class:"message"},Be={class:"message"},Pe={class:"message"},Ue={class:"message"},Ee={class:"message"},Re={class:"message"},Fe={class:"extra"},qe={class:"message"},De={class:"message"},ze={key:0,class:"audit-status"},Le={class:"message blue"},Ge={key:0,class:"extra"},Me={key:1,class:"extra"},He={key:2,class:"extra"},Je={class:"audit-status"},Ke={class:"var(--price)"},Qe={class:"audit-status"},We={class:"var(--price)"},Xe={class:"dialog-footer"},Ye=ue({__name:"Info",props:{params:{type:Object,default:{}}},emits:["loadFilter","callback","changeType"],setup(m,{emit:P}){const c=m,H=re(),R=e=>{switch(e){case 0:return{color:"#f58b49"};case 1:return{color:"green"};case 2:return{color:"red"};default:return{}}},I=A(!0),V=E(),F=E(),q=E(),C=A(!1),t=A({orderId:c.params.orderId,orderSn:c.params.orderSn,amount:c.params.amount,totalAmount:c.params.totalAmount}),r=A({}),g=A({}),i=A({}),b=A({}),J=async()=>{C.value=!0,V.value&&await V.value.resetFields(),c.params.type==="check"&&await K(),c.params.type!="apply"&&c.params.type!="check"&&await Q(),c.params.type=="check"&&(Object.assign(t.value,c.params.invoiceData),Object.assign(r.value,c.params.invoiceData),Object.assign(g.value,c.params.invoiceData),Object.assign(i.value,c.params.invoiceData)),await D()},K=async()=>{try{const e=await ve({...t.value});let s={companyCode:"",companyName:"",companyAddress:"",companyPhone:"",companyBank:"",companyAccount:"",invoiceContent:"",mobile:"",email:""};if(e)Object.assign(t.value,e),Object.assign(r.value,e),Object.assign(g.value,e),Object.assign(i.value,e);else if(t.value.titleType===1){let T={companyName:c.params.address.consignee,mobile:c.params.address.mobile,email:c.params.address.email};Object.assign(t.value,T),Object.assign(r.value,T),Object.assign(g.value,T),Object.assign(i.value,T)}else Object.assign(t.value,s),Object.assign(r.value,s),Object.assign(g.value,s),Object.assign(i.value,s);t.value.amount=c.params.amount}catch(e){N.error(e.message)}},Q=async()=>{try{I.value=!0;const e=await ye({id:c.params.orderId});Object.assign(t.value,e),Object.assign(r.value,e),Object.assign(g.value,e),Object.assign(i.value,e)}catch(e){N.error(e.message)}finally{I.value=!1}},O=A(!1),D=async()=>{try{const e=await ce();e?(O.value=!0,Object.assign(b.value,e)):O.value=!1}catch(e){N.error(e.message)}finally{I.value=!1}},j=P,z=e=>{c.params.type=="check"&&(j("changeType",{type:e,value:e=="invoiceType"?t.value.invoiceType:t.value.titleType}),e=="invoiceType"&&t.value.invoiceType==2&&D())},W=()=>{j("callback",{}),C.value=!1},{t:X}=pe(),L=async()=>{V.value&&await V.value.validate();try{I.value=!0;let e={id:c.params.orderId,invoiceType:t.value.invoiceType,titleType:t.value.titleType,mobile:t.value.mobile,email:t.value.email,amount:t.value.amount};if(e.invoiceContent=t.value.invoiceContent,t.value.invoiceType===1&&t.value.titleType===1?(V.value&&await F.value.validate(),e.companyCode="",e.companyName=g.value.companyName,e.companyAddress="",e.companyPhone="",e.companyBank="",e.companyAccount=""):t.value.invoiceType===1&&t.value.titleType===2?(V.value&&await q.value.validate(),e.companyCode=i.value.companyCode,e.companyName=i.value.companyName,e.companyAddress=i.value.companyAddress,e.companyPhone=i.value.companyPhone,e.companyBank=i.value.companyBank,e.companyAccount=i.value.companyAccount):t.value.invoiceType===2&&(e.companyCode=b.value.companyCode,e.companyName=b.value.companyName,e.companyAddress=b.value.companyAddress,e.companyPhone=b.value.companyPhone,e.companyBank=b.value.companyBank,e.companyAccount=b.value.companyAccount),c.params.type!="check"){const s=await fe(e,c.params.type==="apply"?"create":"update");await V.value.resetFields(),N.success(X("操作成功")),C.value=!1,j("loadFilter")}else delete e.id,C.value=!1,j("callback",e)}catch(e){N.error(e.message)}finally{I.value=!1}};return(e,s)=>{const T=Z,u=ee,_=ae,w=x,B=oe,G=le,h=te,U=se,Y=ne;return d(),$(S,null,[o(Y,{modelValue:C.value,"onUpdate:modelValue":s[17]||(s[17]=p=>C.value=p),title:e.$t("发票申请"),width:"800"},{footer:a(()=>[n("div",Xe,[m.params.type==="reapply"||m.params.type==="apply"||m.params.type==="check"?(d(),f(U,{key:0,plain:"",onClick:W},{default:a(()=>[v(l(e.$t("暂不开票")),1)]),_:1})):y("",!0),m.params.type==="apply"||m.params.type==="check"?(d(),f(U,{key:1,disabled:t.value.invoiceType===2&&!O.value,type:"primary",onClick:L},{default:a(()=>[v(l(e.$t("提交开票申请")),1)]),_:1},8,["disabled"])):y("",!0),m.params.type==="reapply"?(d(),f(U,{key:2,type:"primary",onClick:L},{default:a(()=>[v(l(e.$t("重新提交开票申请")),1)]),_:1})):y("",!0)])]),default:a(()=>[m.params.type==="info"?(d(),f(w,{key:0,"label-width":"auto",model:r.value,class:"form-body","label-suffix":"："},{default:a(()=>[n("div",be,[v(l(e.$t("审核状态"))+"： ",1),n("span",{style:M(R(r.value.status))},l(r.value.statusName),5),s[18]||(s[18]=n("br",null,null,-1)),n("span",null,l(r.value.applyReply),1)]),m.params.type!="check"?(d(),f(u,{key:0,label:e.$t("订单号"),prop:"orderSn"},{default:a(()=>[n("span",$e,[o(T,{to:"/member/order/info?id="+r.value.orderId,class:"font-color",target:"_blank"},{default:a(()=>[v(l(r.value.orderSn),1)]),_:1},8,["to"])])]),_:1},8,["label"])):y("",!0),m.params.type!="check"?(d(),f(u,{key:1,label:e.$t("订单金额"),prop:"totalAmount"},{default:a(()=>[o(_,{modelValue:r.value.totalAmount,"onUpdate:modelValue":s[0]||(s[0]=p=>r.value.totalAmount=p),showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),m.params.type!="check"?(d(),f(u,{key:2,label:e.$t("发票金额"),prop:"amount"},{default:a(()=>[o(_,{modelValue:r.value.amount,"onUpdate:modelValue":s[1]||(s[1]=p=>r.value.amount=p),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),o(u,{label:e.$t("发票类型"),prop:"invoiceType"},{default:a(()=>[n("span",ge,l(r.value.invoiceType===1?e.$t("普通发票"):e.$t("增值税专用发票")),1),n("div",he,l(e.$t("所有发票由商品供货商开具")),1)]),_:1},8,["label"]),o(u,{label:e.$t("发票抬头"),prop:"titleType"},{default:a(()=>[n("span",ke,l(r.value.titleType===1?e.$t("个人"):e.$t("企业")),1)]),_:1},8,["label"]),r.value.invoiceType===1?(d(),$(S,{key:3},[r.value.titleType===1?(d(),f(u,{key:0,label:e.$t("个人名称"),prop:"companyName"},{default:a(()=>[n("span",Ve,l(r.value.companyName),1)]),_:1},8,["label"])):(d(),$(S,{key:1},[o(u,{label:e.$t("企业名称"),prop:"companyName"},{default:a(()=>[n("span",Te,l(r.value.companyName),1)]),_:1},8,["label"]),o(u,{label:e.$t("纳税人识号"),prop:"companyCode"},{default:a(()=>[n("span",Ae,l(r.value.companyCode),1)]),_:1},8,["label"]),o(u,{label:e.$t("单位地址"),prop:"companyAddress"},{default:a(()=>[n("span",Ce,l(r.value.companyAddress),1)]),_:1},8,["label"]),o(u,{label:e.$t("单位电话"),prop:"companyPhone"},{default:a(()=>[n("span",Oe,l(r.value.companyPhone),1)]),_:1},8,["label"]),o(u,{label:e.$t("开户银行"),prop:"companyBank"},{default:a(()=>[n("span",Se,l(r.value.companyBank),1)]),_:1},8,["label"]),o(u,{label:e.$t("银行账户"),prop:"companyAccount"},{default:a(()=>[n("span",Ie,l(r.value.companyAccount),1)]),_:1},8,["label"])],64))],64)):y("",!0),o(u,{label:e.$t("发票内容"),prop:"invoiceContent"},{default:a(()=>[n("span",we,l(e.$t("商品明细")),1),n("div",Ne,l(e.$t("发票内容将显示详细商品名称与价格信息")),1)]),_:1},8,["label"]),t.value.invoiceType===2?(d(),$(S,{key:4},[o(u,{label:e.$t("单位名称")},{default:a(()=>[n("span",je,l(r.value.companyName),1)]),_:1},8,["label"]),o(u,{label:e.$t("纳税人识别码")},{default:a(()=>[n("span",_e,l(r.value.companyCode),1)]),_:1},8,["label"]),o(u,{label:e.$t("注册地址")},{default:a(()=>[n("span",Be,l(r.value.companyAddress),1)]),_:1},8,["label"]),o(u,{label:e.$t("注册电话")},{default:a(()=>[n("span",Pe,l(r.value.companyPhone),1)]),_:1},8,["label"]),o(u,{label:e.$t("开户银行")},{default:a(()=>[n("span",Ue,l(r.value.companyBank),1)]),_:1},8,["label"]),o(u,{label:e.$t("银行账户")},{default:a(()=>[n("span",Ee,l(r.value.companyAccount),1)]),_:1},8,["label"]),o(u,{label:e.$t("发票内容"),prop:"invoiceContent"},{default:a(()=>[n("span",Re,l(e.$t("商品明细")),1),n("div",Fe,l(e.$t("发票内容将显示详细商品名称与价格信息")),1)]),_:1},8,["label"])],64)):y("",!0),o(u,{label:e.$t("收票人手机"),prop:"mobile"},{default:a(()=>[n("span",qe,l(r.value.mobile),1)]),_:1},8,["label"]),o(u,{label:e.$t("收票人邮箱"),prop:"email"},{default:a(()=>[n("span",De,l(r.value.email),1)]),_:1},8,["label"])]),_:1},8,["model"])):(d(),f(w,{key:1,ref_key:"formRef",ref:V,"label-width":110,model:t.value,class:"form-body","label-suffix":"："},{default:a(()=>[m.params.type==="reapply"?(d(),$("div",ze,[v(l(e.$t("审核状态"))+"： ",1),n("span",{style:M(R(t.value.status))},l(t.value.statusName),5),s[19]||(s[19]=n("br",null,null,-1)),n("span",null,l(t.value.applyReply),1)])):y("",!0),m.params.type!="check"?(d(),f(u,{key:1,label:e.$t("订单号"),prop:"orderSn"},{default:a(()=>[n("span",Le,[o(T,{to:"/member/order/info?id="+t.value.orderId,target:"_blank"},{default:a(()=>[v(l(t.value.orderSn),1)]),_:1},8,["to"])])]),_:1},8,["label"])):y("",!0),m.params.type!="check"?(d(),f(u,{key:2,label:e.$t("订单金额"),prop:"totalAmount"},{default:a(()=>[o(_,{modelValue:t.value.totalAmount,"onUpdate:modelValue":s[2]||(s[2]=p=>t.value.totalAmount=p),showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),m.params.type!="check"?(d(),f(u,{key:3,label:e.$t("发票金额"),prop:"amount"},{default:a(()=>[o(_,{modelValue:t.value.amount,"onUpdate:modelValue":s[3]||(s[3]=p=>t.value.amount=p),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),o(u,{label:e.$t("发票类型"),prop:"invoiceType"},{default:a(()=>[o(G,{modelValue:t.value.invoiceType,"onUpdate:modelValue":s[4]||(s[4]=p=>t.value.invoiceType=p),onChange:s[5]||(s[5]=p=>z("invoiceType"))},{default:a(()=>[o(B,{value:1},{default:a(()=>[v(l(e.$t("普通发票")),1)]),_:1}),me(H).invoiceAdded==1?(d(),f(B,{key:0,value:2},{default:a(()=>[v(l(e.$t("增值税专用发票")),1)]),_:1})):y("",!0)]),_:1},8,["modelValue"]),t.value.invoiceType===1?(d(),$("div",Ge,l(e.$t("所有发票由商品供货商开具")),1)):y("",!0),t.value.invoiceType===2&&O.value?(d(),$("div",Me,l(e.$t("所有发票由商品供货商开具")),1)):y("",!0),t.value.invoiceType===2&&!O.value?(d(),$("div",He,[v(l(e.$t("您还未通过增票资质申请，暂时无法开具增值税专用发票"))+"， ",1),o(T,{class:"font-color",to:"/member/userInvoice/info"},{default:a(()=>[v(l(e.$t("点击这里")),1)]),_:1}),v(" "+l(e.$t("去申请增票资质"))+"。 ",1)])):y("",!0)]),_:1},8,["label"]),t.value.invoiceType===1?(d(),$(S,{key:4},[n("div",Je,[n("p",null,l(e.$t("根据现行税收政策，部分公司提供数电票，数电（普通发票）法律效力与现有电子普通发票相同"))+"；",1),n("p",null,l(e.$t("电子普通发票和纸质普通发票具备同等法律效力，可支持报销入账"))+"；",1),n("p",null,l(e.$t("如商品由第三方卖家销售，发票类型及内容将由该卖家决定"))+"；",1),n("p",null,l(e.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),n("p",Ke,l(e.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),o(u,{label:e.$t("发票抬头"),prop:"titleType"},{default:a(()=>[o(G,{modelValue:t.value.titleType,"onUpdate:modelValue":s[6]||(s[6]=p=>t.value.titleType=p),onChange:s[7]||(s[7]=p=>z("titleType"))},{default:a(()=>[o(B,{value:1},{default:a(()=>[v(l(e.$t("个人")),1)]),_:1}),o(B,{value:2},{default:a(()=>[v(l(e.$t("企业")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.value.titleType===1?(d(),f(w,{key:0,ref_key:"formOneRef",ref:F,"label-width":110,model:g.value,class:"form-body","label-suffix":"："},{default:a(()=>[o(u,{rules:[{required:!0,message:e.$t("个人名称不能为空")}],label:e.$t("个人名称"),prop:"companyName"},{default:a(()=>[o(h,{modelValue:g.value.companyName,"onUpdate:modelValue":s[8]||(s[8]=p=>g.value.companyName=p),clearable:"",placeholder:e.$t("请输入个人名称")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])]),_:1},8,["model"])):(d(),f(w,{key:1,ref_key:"formFirmRef",ref:q,"label-width":110,model:i.value,class:"form-body","label-suffix":"："},{default:a(()=>[o(u,{rules:[{required:!0,message:e.$t("企业名称不能为空")}],label:e.$t("企业名称"),prop:"companyName"},{default:a(()=>[o(h,{modelValue:i.value.companyName,"onUpdate:modelValue":s[9]||(s[9]=p=>i.value.companyName=p),clearable:"",placeholder:e.$t("请输入企业名称")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),o(u,{rules:[{required:!0,message:e.$t("纳税人识号不能为空")}],label:e.$t("纳税人识号"),prop:"companyCode"},{default:a(()=>[o(h,{modelValue:i.value.companyCode,"onUpdate:modelValue":s[10]||(s[10]=p=>i.value.companyCode=p),clearable:"",placeholder:e.$t("请输入纳税人识号")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),o(u,{label:e.$t("单位地址"),rules:[{required:!0,message:e.$t("单位地址不能为空")}],prop:"companyAddress"},{default:a(()=>[o(h,{modelValue:i.value.companyAddress,"onUpdate:modelValue":s[11]||(s[11]=p=>i.value.companyAddress=p),clearable:"",placeholder:e.$t("请输入单位地址")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(u,{label:e.$t("单位电话"),rules:[{required:!0,message:e.$t("单位电话不能为空")}],prop:"companyPhone"},{default:a(()=>[o(h,{modelValue:i.value.companyPhone,"onUpdate:modelValue":s[12]||(s[12]=p=>i.value.companyPhone=p),clearable:"",placeholder:e.$t("请输入单位电话")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(u,{label:e.$t("开户银行"),rules:[{required:!0,message:e.$t("开户银行不能为空")}],prop:"companyBank"},{default:a(()=>[o(h,{modelValue:i.value.companyBank,"onUpdate:modelValue":s[13]||(s[13]=p=>i.value.companyBank=p),clearable:"",placeholder:e.$t("请输入开户银行")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(u,{label:e.$t("银行账户"),rules:[{required:!0,message:e.$t("银行账户不能为空")}],prop:"companyAccount"},{default:a(()=>[o(h,{modelValue:i.value.companyAccount,"onUpdate:modelValue":s[14]||(s[14]=p=>i.value.companyAccount=p),clearable:"",placeholder:e.$t("请输入银行账户")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"]))],64)):t.value.invoiceType===2&&O.value?(d(),f(w,{key:5,ref:"formInvoiceRef","label-width":110,model:b.value,class:"form-body","label-suffix":"："},{default:a(()=>[n("div",Qe,[n("p",null,l(e.$t("我公司依法开具发票，请您按照税法规定使用发票"))+"。",1),n("p",null,l(e.$t("根据现行税收政策，部分公司提供数电票, 数电（专用发票）法律效力与现有增值税专用发票相同"))+";",1),n("p",null,l(e.$t("如商品由第三方卖家销售，发票类型和内容将由该卖家决定，发票由卖家开具并提供"))+"。",1),n("p",null,l(e.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),n("p",We,l(e.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),o(u,{label:e.$t("单位名称")},{default:a(()=>[v(l(b.value.companyName),1)]),_:1},8,["label"]),o(u,{label:e.$t("纳税人识别码")},{default:a(()=>[v(l(b.value.companyCode),1)]),_:1},8,["label"]),o(u,{label:e.$t("注册地址")},{default:a(()=>[v(l(b.value.companyAddress),1)]),_:1},8,["label"]),o(u,{label:e.$t("注册电话")},{default:a(()=>[v(l(b.value.companyPhone),1)]),_:1},8,["label"]),o(u,{label:e.$t("开户银行")},{default:a(()=>[v(l(b.value.companyBank),1)]),_:1},8,["label"]),o(u,{label:e.$t("银行账户")},{default:a(()=>[v(l(b.value.companyAccount),1)]),_:1},8,["label"])]),_:1},8,["model"])):y("",!0),t.value.invoiceType!=0?(d(),$(S,{key:6},[o(u,{rules:[{required:!0,message:e.$t("手机不能为空")}],label:e.$t("收票人手机"),prop:"mobile"},{default:a(()=>[o(h,{modelValue:t.value.mobile,"onUpdate:modelValue":s[15]||(s[15]=p=>t.value.mobile=p),clearable:"",placeholder:e.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),o(u,{rules:[{required:t.value.invoiceType!==1,message:e.$t("邮箱不能为空")}],label:e.$t("收票人邮箱"),prop:"email"},{default:a(()=>[o(h,{modelValue:t.value.email,"onUpdate:modelValue":s[16]||(s[16]=p=>t.value.email=p),clearable:"",placeholder:e.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])],64)):y("",!0)]),_:1},8,["model"]))]),_:1},8,["modelValue","title"]),n("span",{onClick:J},[de(e.$slots,"default",{},void 0,!0)])],64)}}}),Ze=ie(Ye,[["__scopeId","data-v-b0252788"]]),$a=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));export{Ze as I,va as a,ba as b,ia as c,ve as d,$a as e,fa as g,ya as o,ca as u};

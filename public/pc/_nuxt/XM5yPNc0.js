import{b as K}from"./5VTus1_X.js";import{_ as Q}from"./Drr4mNEN.js";import{_ as W}from"./DUyqL_E3.js";import{_ as X}from"./CrI35J-I.js";import{E as Y}from"./B_vjKAZC.js";import{E as Z}from"./BhwkTUtM.js";import{E as x,a as ee}from"./Ckzsp_T1.js";import{e as le,z as te,r as y,ar as ae,y as oe,p as b,I as se,h as ne,c as u,o as n,b as r,a as e,i as d,ad as re,t as o,n as w,w as c,d as E,F as m,m as _,q as N,E as ue,j as p,k as h,s as ie,an as de,ah as ce,_ as me}from"./BjkHNVA8.js";import{_ as pe}from"./BipSnJcb.js";import{_ as ve}from"./CBcH1uzJ.js";import{_ as fe}from"./B85mN9rA.js";import{E as _e}from"./BsZFmHoh.js";import{v as he}from"./DWKyHDnW.js";/* empty css        *//* empty css        */import"./Ibc-iJtI.js";import{a as ge,u as ye,c as be}from"./DvTSCsTn.js";import{U as Ve}from"./BrM2Mo0y.js";import"./CM_M6Xgj.js";import"./n1vI1_Nv.js";import"./ClRMjIOJ.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./CXwPJP5h.js";import"./d3UjsK-T.js";import"./FYm-MTMW.js";import"./cfDoaBtk.js";import"./C1B8-dXF.js";import"./Bnvi_g-K.js";import"./yB3A8U-z.js";import"./UVx7YjW9.js";import"./BzIkMksr.js";/* empty css        */import"./Csy7st1x.js";import"./XdJ5ILcf.js";import"./BNVM5YSV.js";import"./DoNaAjK4.js";const $e={class:"container flex"},ke={class:"menu"},we={class:"info-row"},Fe={class:"title-or-tabs"},Ie={class:"tag-and-input"},Ne={class:"tig-tabs"},Ue={key:0,class:"title-or-tabs"},Te={key:1,class:"log-return-content"},Se={class:"button-col"},Ee={class:"tig-steps"},Le={style:{"font-weight":"600"}},Be={key:0,class:"file-card"},Ce={class:"info-card"},Re={class:"table-header"},Ae={class:"header-cell"},Pe={class:"header-cell",style:{width:"60px"}},qe={class:"header-cell",style:{width:"60px"}},ze={class:"header-cell",style:{width:"60px"}},De={class:"header-cell",style:{width:"60px"}},Me={class:"text-ellipsis"},Oe={class:"name"},je={class:"value"},Ge={key:0},He={class:"info-card"},Je={key:0},Ke={class:"application-picture"},Qe={key:0},We={key:1},Xe={key:2},Ye={class:"info-card"},Ze={class:"table-header"},xe={class:"header-cell",style:{width:"120px"}},el={class:"header-cell",style:{width:"160px"}},ll={class:"header-cell"},tl={class:"bt-image"},al={key:2,class:"log-return-content"},ol={class:"image"},sl=le({__name:"LogInfo",setup(nl){const{t:g}=te(),L=y(""),U=y(!1),F=y([]),B=ae(),a=y({stepStatus:{},picsList:[],returnPic:[],pics:[]}),V=y(!0);oe(()=>{T()});const T=async()=>{try{V.value=!0;const l=await ge({id:B.currentRoute.value.query.id});Object.assign(a.value,l),F.value=l.aftersalesItems?l.aftersalesItems:[],F.value?.forEach(s=>{s.subtotal=s.quantity*s.price})}catch(l){b.error(l.message)}finally{V.value=!1}},I=se(),C=async()=>{await I.value.validate();try{const l=await ye({id:a.value.aftersaleId,...a.value});b.success(g("提交成功")),await I.value.resetFields(),await T()}catch(l){b.error(l.message)}finally{}},R=async l=>{de.confirm({title:g("确认删要撤销申请吗"),cancelText:g("取消"),okText:g("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{const s=await be({aftersaleId:l});b.success(g("撤销成功")),ce("/member/return/log")}catch(s){b.error(s.message)}finally{}}})},A=ne([{value:"退/换货申请",url:"/member/return/list",size:0},{value:"申请记录",url:"/member/return/logInfo",size:0}]);return(l,s)=>{const P=K,q=Q,z=W,D=X,S=Y,$=Z,v=x,M=ee,k=ue,O=pe,f=ve,j=fe,G=_e,H=he;return n(),u(m,null,[r(P),r(q,{title:"申请详情"}),e("div",$e,[e("div",ke,[r(z)]),e("div",we,[e("div",Fe,[e("div",Ie,[e("div",Ne,[r(D,{menuList:A},null,8,["menuList"])])])]),a.value.returnGoodsTip?(n(),u("div",Ue,[e("div",null,o(a.value.returnGoodsTip),1)])):d("",!0),V.value?re((n(),u("div",al,null,512)),[[H,V.value]]):(n(),u("div",Te,[e("div",Se,[a.value.canCancel?(n(),w(S,{key:0,onClick:s[0]||(s[0]=t=>R(Number(a.value.aftersaleId)))},{default:c(()=>[E(o(l.$t("撤销")),1)]),_:1})):d("",!0)]),e("div",Ee,[(n(!0),u(m,null,_(a.value.stepStatus.steps,(t,i)=>(n(),u(m,null,[e("div",{style:N({color:t.active?"var(--general)":"#c4c4c4",border:t.active?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[e("div",Le,o(i+1),1),e("div",{style:N({color:t.active?"var(--general)":"#333"}),class:"card-text"},[e("div",null,o(t.title),1),e("div",null,o(t.description),1)],4)],4),i!=Number((a.value?.stepStatus?.steps?.length?a.value?.stepStatus?.steps?.length:0)-1)?(n(),u("div",{key:0,style:N({backgroundColor:a.value.stepStatus.steps[i+1].active?"var(--general)":"#eee"}),class:"steps-line"},null,4)):d("",!0)],64))),256))]),a.value.status!=6?(n(),u("div",Be,[a.value.status!=7?(n(),w(M,{key:0,ref_key:"formRef",ref:I,"label-width":100,model:a.value,class:"form-body","label-suffix":"："},{default:c(()=>[r(v,{label:l.$t("问题补充"),prop:"logInfo"},{default:c(()=>[r($,{modelValue:a.value.logInfo,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.logInfo=t),row:4,clearable:"",placeholder:l.$t("请输入问题补充"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a.value.status===4?(n(),u(m,{key:0},[r(v,{label:l.$t("回寄地址"),prop:"returnAddress"},{default:c(()=>[r($,{modelValue:a.value.returnAddress,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.returnAddress=t),readonly:"",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),r(v,{rules:[{required:!0,message:l.$t("快递公司不能为空!")}],label:l.$t("快递公司"),prop:"logisticsName"},{default:c(()=>[r($,{modelValue:a.value.logisticsName,"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.logisticsName=t),clearable:"",placeholder:l.$t("请输入快递公司")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),r(v,{rules:[{required:!0,message:l.$t("快递单号不能为空!")}],label:l.$t("快递单号"),prop:"trackingNo"},{default:c(()=>[r($,{modelValue:a.value.trackingNo,"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.trackingNo=t),clearable:"",placeholder:l.$t("请输入快递单号"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])],64)):d("",!0),r(v,{label:l.$t("上传文件"),prop:"returnPic"},{default:c(()=>[r(Ve,{uploadList:a.value.returnPic,"onUpdate:uploadList":s[5]||(s[5]=t=>a.value.returnPic=t),fileTypes:["jpeg","png"],limit:5},null,8,["uploadList"])]),_:1},8,["label"]),r(v,{label:""},{default:c(()=>[r(S,{type:"primary",onClick:C},{default:c(()=>[E(o(l.$t("提交")),1)]),_:1})]),_:1})]),_:1},8,["model"])):d("",!0)])):d("",!0),e("div",Ce,[e("table",null,[e("thead",Re,[e("tr",null,[e("th",Ae,o(l.$t("商品名称")),1),e("th",Pe,o(l.$t("商品价格")),1),e("th",qe,o(l.$t("购买数量")),1),e("th",ze,o(l.$t("小计")),1),e("th",De,o(l.$t("退/换数量")),1)])]),e("tbody",null,[(n(!0),u(m,null,_(F.value,t=>(n(),u("tr",null,[e("td",null,[r(O,{title:t.productName,to:p(ie)({path:"product",id:t.itemId,sn:t.productSn}),class:"nuxt",target:"_blank"},{default:c(()=>[r(k,{src:("imageFormat"in l?l.imageFormat:p(h))(t.picThumb),class:"pro_pic",loading:"lazy",style:{transition:"opacity 0.2s linear","flex-shrink":"0"}},null,8,["src"]),e("div",null,[e("div",Me,[e("ul",null,[e("li",null,o(l.$t("货号"))+"："+o(t.productSn),1),e("li",null,o(t.productName),1),e("li",null,[(n(!0),u(m,null,_(t.skuData,(i,J)=>(n(),u(m,null,[e("span",Oe,o(i.name)+"：",1),e("span",je,o(i.value),1),J<t.skuData?.length-1?(n(),u("span",Ge,"；")):d("",!0)],64))),256))])])])])]),_:2},1032,["title","to"])]),e("td",null,[r(f,{modelValue:t.price,"onUpdate:modelValue":i=>t.price=i,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,o(t.quantity),1),e("td",null,[r(f,{modelValue:t.subtotal,"onUpdate:modelValue":i=>t.subtotal=i,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,o(t.number),1)]))),256))])])]),e("div",He,[e("table",null,[e("tbody",null,[e("tr",null,[e("td",null,o(l.$t("买家问题描述"))+":",1),e("td",null,o(a.value.description),1)]),e("tr",null,[e("td",null,o(l.$t("服务类型"))+":",1),e("td",null,o(a.value.aftersalesTypeName),1)]),e("tr",null,[e("td",null,o(l.$t("退款金额"))+":",1),e("td",null,[r(f,{modelValue:a.value.refundAmount,"onUpdate:modelValue":s[6]||(s[6]=t=>a.value.refundAmount=t),showText:!1},null,8,["modelValue"])])]),e("tr",null,[e("td",null,o(l.$t("售后类型"))+":",1),e("td",null,o(a.value.aftersaleReason),1)]),a.value.status===4?(n(),u("tr",Je,[e("td",null,o(l.$t("退货地址"))+":",1),e("td",null,o(a.value.returnAddress),1)])):d("",!0),e("tr",null,[e("td",null,o(l.$t("申请图片"))+":",1),e("td",null,[e("div",Ke,[(n(!0),u(m,null,_(a.value.pics,t=>(n(),w(k,{src:("imageFormat"in l?l.imageFormat:p(h))(t.picThumb),fit:"cover",style:{width:"80px",height:"80px"},"preview-src-list":[("imageFormat"in l?l.imageFormat:p(h))(t.picUrl)],"initial-index":0},null,8,["src","preview-src-list"]))),256))])])]),a.value.refund?(n(),u(m,{key:1},[a.value.refund.isOnline>0?(n(),u("tr",Qe,[e("td",null,o(l.$t("线上退款金额"))+":",1),e("td",null,[r(f,{modelValue:a.value.refund.onlineBalance,"onUpdate:modelValue":s[7]||(s[7]=t=>a.value.refund.onlineBalance=t),showText:!1},null,8,["modelValue"])])])):d("",!0),a.value.refund.isOffline>0?(n(),u("tr",We,[e("td",null,o(l.$t("线下退款金额"))+":",1),e("td",null,[r(f,{modelValue:a.value.refund.offlineBalance,"onUpdate:modelValue":s[8]||(s[8]=t=>a.value.refund.offlineBalance=t),showText:!1},null,8,["modelValue"])])])):d("",!0),a.value.refund.isReceive>0?(n(),u("tr",Xe,[e("td",null,o(l.$t("余额退款金额"))+":",1),e("td",null,[r(f,{modelValue:a.value.refund.refundBalance,"onUpdate:modelValue":s[9]||(s[9]=t=>a.value.refund.refundBalance=t),showText:!1},null,8,["modelValue"])])])):d("",!0)],64)):d("",!0)])])]),e("div",Ye,[e("table",null,[e("thead",Ze,[e("tr",null,[e("th",xe,o(l.$t("发言人")),1),e("th",el,o(l.$t("时间")),1),e("th",ll,o(l.$t("信息")),1)])]),e("tbody",null,[(n(!0),u(m,null,_(a.value.aftersalesLog,t=>(n(),u("tr",null,[e("td",null,o(t.userName?t.userName:t.adminName),1),e("td",null,o(t.addTime),1),e("td",null,[e("div",tl,[e("div",null,o(t.logInfo),1),(n(!0),u(m,null,_(t.returnPic,i=>(n(),w(k,{src:("imageFormat"in l?l.imageFormat:p(h))(i.picUrl),fit:"cover",class:"bt-img",loading:"lazy",style:{transition:"opacity 0.2s linear"},"preview-src-list":[("imageFormat"in l?l.imageFormat:p(h))(i.picUrl)],"initial-index":0},null,8,["src","preview-src-list"]))),256))])])]))),256))])])])]))])]),r(j),r(G,{modelValue:U.value,"onUpdate:modelValue":s[10]||(s[10]=t=>U.value=t)},{default:c(()=>[e("div",ol,[r(k,{src:("imageFormat"in l?l.imageFormat:p(h))(L.value),alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}}),Hl=me(sl,[["__scopeId","data-v-32dbad76"]]);export{Hl as default};

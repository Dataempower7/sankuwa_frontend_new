import{E as x}from"./BhwkTUtM.js";import{_ as B}from"./Dcyx2-kv.js";import{E as M,a as Z}from"./Ckzsp_T1.js";import{E as q}from"./B_vjKAZC.js";import{e as C,ay as g,z as N,I as P,h as E,r as y,ai as W,n as b,o as D,w as i,b as n,a as v,t as p,d as K,j as U,dD as j,cA as $,_ as L}from"./BjkHNVA8.js";/* empty css        *//* empty css        */import"./d3UjsK-T.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./yB3A8U-z.js";import"./Bnvi_g-K.js";import"./CXwPJP5h.js";const G={class:"label"},H={class:"label"},J=C({__name:"StepTow",props:{step:{},stepModifiers:{},modelValue:{type:String},modelModifiers:{}},emits:["update:step","update:modelValue"],setup(u){const V=g(u,"step"),m=g(u,"modelValue"),{t:r}=N(),f=P(),c=(o,e,s)=>{e?t.value.tigTips[o]={type:"valid",message:s}:t.value.tigTips[o]={type:"error",message:s}},w=o=>{t.value.tigTips[o]={type:"info",message:A[o]}},T=(o,e,s)=>{if(e){if(e.length>20||e.length<6)return s(new Error(r("密码应为6-20位字符")));if(/\s/.test(e))return s(new Error(r("密码中不允许有空格")));if(/^\d+$/.test(e))return s(new Error(r("密码不能全为数字")));if(/^(?=.*[\d\W]).+$/.test(e))if(/^(?=.*[a-zA-Z0-9]).+$/.test(e))if(/^(?!([a-zA-Z0-9])\1*$).+$/.test(e))s();else return s(new Error(r("密码不能全为相同字符或数字")));else return s(new Error(r("密码不能全为符号")));else return s(new Error(r("密码不能全为字母")))}else return s(new Error(r("密码不能为空")))},h=(o,e,s)=>{if(e){if(e.length>20||e.length<6)return s(new Error(r("密码应为6-20位字符")));if(/\s/.test(e))return s(new Error(r("密码中不允许有空格")));if(/^\d+$/.test(e))return s(new Error(r("密码不能全为数字")));if(/^(?=.*[\d\W]).+$/.test(e))if(/^(?=.*[a-zA-Z0-9]).+$/.test(e))if(/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)){if(e!=t.value.password)return s(new Error(r("两次输入密码不一致")));s()}else return s(new Error(r("密码不能全为相同字符或数字")));else return s(new Error(r("密码不能全为符号")));else return s(new Error(r("密码不能全为字母")))}else return s(new Error(r("密码不能为空")))},A=E({password:r("6-20个大小写英文字母、符号或数字的组合"),password2:r("请输入和上次相同的密码")}),F=E({password:[{validator:T,trigger:"blur",required:!0}],password2:[{validator:h,trigger:"blur",required:!0}]}),d=y(!1),t=y({tigTips:{},password:"",password2:""}),S=W(),z=async()=>{await f.value.validate();try{d.value=!0;const o=await j({mobileKey:m.value,password:t.value.password});$.success(r("重置密码成功")),S.push("/member/login")}catch(o){$.error(o.message),V.value=1,m.value="",t.value.password="",t.value.password2=""}finally{d.value=!1}};return(o,e)=>{const s=x,_=B,l=M,I=q,R=Z;return D(),b(R,{ref_key:"formRef",ref:f,"hide-required-asterisk":!0,model:t.value,rules:U(F),"show-message":!1,class:"form-body","label-width":"auto",onValidate:c},{default:i(()=>[n(l,{prop:"password"},{default:i(()=>[v("div",G,p(o.$t("新密码")),1),n(s,{modelValue:t.value.password,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.password=a),class:"input-border-style","show-password":"",type:"password",onFocus:e[1]||(e[1]=a=>w("password"))},null,8,["modelValue"]),n(_,{info:t.value.tigTips.password},null,8,["info"])]),_:1}),n(l,{prop:"password2"},{default:i(()=>[v("div",H,p(o.$t("确认新密码")),1),n(s,{modelValue:t.value.password2,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.password2=a),class:"input-border-style","show-password":"",type:"password",onFocus:e[3]||(e[3]=a=>w("password2"))},null,8,["modelValue"]),n(_,{info:t.value.tigTips.password2},null,8,["info"])]),_:1}),n(l,{label:"",prop:"firstWord"},{default:i(()=>[n(I,{loading:d.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:z},{default:i(()=>[K(p(o.$t("确 认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),le=L(J,[["__scopeId","data-v-52a2c7d0"]]);export{le as default};

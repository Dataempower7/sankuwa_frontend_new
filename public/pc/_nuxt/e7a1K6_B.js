import{b as e}from"./BAtlsuzY.js";import{_ as l}from"./IO9hpqeh.js";import{_ as a}from"./CfxJu6rg.js";import{E as t}from"./5EY5iYNX.js";import{_ as s}from"./BPBPggU1.js";import{_ as o}from"./BR_yKGQj.js";import{_ as u}from"./DkwXwj3h.js";import{e as i,z as r,an as d,r as n,v,c,o as m,b as p,a as y,i as f,t as b,w as k,d as g,j as h,s as $,n as V,F as j,m as A,q as I,k as x,p as _,aj as S,_ as U}from"./r4GZdGYg.js";import{f as N,c as T,a as F}from"./BnqiwR50.js";import{L as w}from"./Dw1lPJLP.js";import"./CdHUvLv6.js";import"./CDFFSI_k.js";import"./po9zIj7I.js";import"./CIKxL71l.js";import"./Bd103Yf7.js";import"./g8XVjk5f.js";import"./BNGL4P8m.js";import"./CBKhgGlL.js";import"./DXQ6s2L8.js";import"./DONyGZrs.js";import"./DL5ZnEaR.js";import"./VWWcEZs1.js";import"./B0FaLosy.js";/* empty css        */import"./Oz6DVX0g.js";import"./YKVlRHu9.js";import"./bHTXMzV5.js";import"./70QeHNk8.js";import"./DgAv7tgp.js";const C={class:"container flex"},D={class:"menu"},P={class:"info-row"},M={class:"title-or-tabs right-info"},L={key:0},O={class:"order-info"},q={class:"page-info-body lr"},z={class:"order-left"},R={key:0,style:{"margin-left":"40px"}},E={class:"font-color"},H={style:{"margin-left":"40px"}},G={key:0},Q={key:1},X={class:"order-right"},Y={key:1},Z={class:"page-info-body"},B={class:"sub-title"},J={class:"tig-steps"},K={style:{"font-weight":"600"}},W={class:"page-info-body"},ee={class:"sub-title"},le={class:"order-ul",style:{"margin-top":"20px"}},ae={key:0},te={key:1,class:"virtualsample"},se=["innerHTML"],oe={key:0,class:"page-info-body"},ue={class:"sub-title"},ie={class:"sub-sub-title"},re={key:0,class:"order-ul virtualsample-box"},de={class:"item"},ne={class:"item"},ve={class:"page-info-body"},ce={class:"sub-title"},me={class:"order-table-info"},pe={class:"receipt-header"},ye={key:0},fe={class:"receipt-body"},be={class:"receipt-item"},ke=["alt","src"],ge={key:0,class:"sku-style"},he={key:1,class:"extraskudata"},$e={class:"title"},Ve={class:"content"},je={class:"content-text"},Ae={class:"num"},Ie={class:"receipt-item price"},xe={class:"receipt-item price"},_e={class:"receipt-item price"},Se={key:0,class:"receipt-item operation"},Ue={class:"receipt-footer"},Ne=["colspan"],Te={class:"receipt-footer-it one",colspan:"2"},Fe={class:"item"},we={class:"label"},Ce={class:"text"},De={key:0,class:"item"},Pe={class:"label"},Me={class:"text"},Le={key:1,class:"item"},Oe={class:"label"},qe={class:"text"},ze={key:2,class:"item"},Re={class:"label"},Ee={class:"text"},He={key:3,class:"item"},Ge={class:"label"},Qe={class:"text"},Xe={key:4,class:"item"},Ye={class:"label"},Ze={class:"text"},Be={key:5,class:"item"},Je={class:"label"},Ke={class:"text"},We={key:6,class:"item"},el={class:"label"},ll={class:"text"},al={class:"item"},tl={key:0},sl={key:1},ol=U(i({__name:"Info",setup(i){const{t:U}=r(),ol=d(),ul=n({orderStatus:0,availableActions:{}}),il=n(!0),rl=v(()=>{var e;let l=!1;return null==(e=ul.value.items)||e.forEach(e=>{e.eCard&&e.eCard.length>0&&(l=!0)}),l}),dl=async()=>{try{const e=await N({id:ol.currentRoute.value.query.id});Object.assign(ul.value,e)}catch(e){_.error(e.message)}finally{il.value=!1}};dl();const nl=n(["您的订单已提交成功，请尽快完成付款哦！","感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！","您的订单已经发货，请注意查收，祝您购物愉快！",'您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。','您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！',"您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！"]),vl=async()=>{S.confirm({title:U("确认要取消该订单吗"),cancelText:U("取消"),okText:U("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await T({id:ul.value.orderId});_.success(U("取消订单成功")),await dl()}catch(e){_.error(e.message)}}})},cl=async()=>{S.confirm({title:U("确认要收货吗"),cancelText:U("取消"),okText:U("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await F({id:ul.value.orderId});await dl()}catch(e){_.error(e.message)}}})};return(i,r)=>{var d;const n=e,v=l,_=a,S=t,U=s,N=o,T=u;return m(),c(j,null,[p(n,{showService:!0,phone:ul.value.shop?ul.value.shop.kefuPhone:"",orderId:ul.value.orderId,shopId:ul.value.shopId},null,8,["phone","orderId","shopId"]),p(v,{title:"订单详情"}),y("div",C,[y("div",D,[p(_)]),y("div",P,[y("div",M,[y("span",null,b(i.$t("订单详情")),1),ul.value.availableActions.splitOrder?f("",!0):(m(),c("div",L,[p(U,{to:"/member/feedback/askList?orderId="+ul.value.orderId+"&orderSn="+ul.value.orderSn},{default:k(()=>[p(S,null,{default:k(()=>[g(b(i.$t("订单留言/咨询")),1)]),_:1})]),_:1},8,["to"])]))]),y("div",O,[y("div",q,[y("div",z,[y("div",null,[y("span",null,[g(b(i.$t("订单号"))+"：",1),y("strong",null,b(ul.value.orderSn),1)]),ul.value.shop&&ul.value.shop.shopTitle?(m(),c("span",R,[g(b(i.$t("下单店铺"))+"：",1),p(U,{to:("urlFormat"in i?i.urlFormat:h($))({path:"shop",id:ul.value.shopId}),target:"_blank"},{default:k(()=>[y("span",E,b(ul.value.shop.shopTitle),1)]),_:1},8,["to"])])):f("",!0),y("span",H,[g(b(i.$t("订单状态"))+"： ",1),y("strong",null,b(i.$t(ul.value.orderStatusName||"")),1)])]),ul.value.autoDeliveryDays?(m(),c("div",G,b(i.$t("订单将在"))+b(ul.value.autoDeliveryDays)+b(i.$t("天后自动收货")),1)):(m(),c("div",Q,b(i.$t(nl.value[ul.value.orderStatus]||"")),1))]),y("div",X,[ul.value.availableActions.cancelOrder?(m(),V(S,{key:0,onClick:vl},{default:k(()=>[g(b(i.$t("取消订单")),1)]),_:1})):f("",!0),ul.value.availableActions.toPay?(m(),c("div",Y,[p(U,{to:"/order/pay/?id="+ul.value.orderId,target:"_balnk"},{default:k(()=>[p(S,{type:"primary"},{default:k(()=>[g(b(i.$t("付款")),1)]),_:1})]),_:1},8,["to"])])):f("",!0),ul.value.availableActions.confirmReceipt?(m(),V(S,{key:2,type:"primary",onClick:cl},{default:k(()=>[g(b(i.$t("确认收货")),1)]),_:1})):f("",!0),ul.value.availableActions.toAftersales?(m(),V(U,{key:3,target:"_blank",to:"/member/return/Info?orderId="+ul.value.orderId},{default:k(()=>[p(S,null,{default:k(()=>[g(b(i.$t("整单售后")),1)]),_:1})]),_:1},8,["to"])):f("",!0)])]),y("div",Z,[y("div",B,b(i.$t("订单状态")),1),y("div",J,[(m(!0),c(j,null,A(null==(d=ul.value.stepStatus)?void 0:d.steps,(e,l)=>{var a,t,s,o,u,r;return m(),c(j,null,[y("div",{style:I({color:l<=(null==(a=ul.value.stepStatus)?void 0:a.current)?"var(--general)":"#c4c4c4",border:l<=(null==(t=ul.value.stepStatus)?void 0:t.current)?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[y("div",K,b(l+1),1),y("div",{style:I({color:l<=(null==(s=ul.value.stepStatus)?void 0:s.current)?"var(--general)":"#333"}),class:"card-text"},[y("div",null,b(i.$t(e.title||"")),1),y("div",null,b(i.$t(e.description||"")),1)],4)],4),l!=(null==(u=null==(o=ul.value.stepStatus)?void 0:o.steps)?void 0:u.length)-1?(m(),c("div",{key:0,style:I({backgroundColor:l<(null==(r=ul.value.stepStatus)?void 0:r.current)?"var(--general)":"#eee"}),class:"steps-line"},null,4)):f("",!0)],64)}),256))]),!ul.value.orderId||2!==ul.value.orderStatus&&5!==ul.value.orderStatus?f("",!0):(m(),V(w,{key:0,trackingNo:ul.value.trackingNo,logisticsName:ul.value.logisticsName,shippingMethod:ul.value.shippingMethod,id:ul.value.orderId,"onUpdate:id":r[0]||(r[0]=e=>ul.value.orderId=e)},null,8,["trackingNo","logisticsName","shippingMethod","id"]))]),y("div",W,[y("div",ee,b(i.$t("订单信息")),1),y("ul",le,[y("li",null,[g(b(i.$t("收货信息"))+"：",1),y("span",null,b(ul.value.userAddress)+" "+b(ul.value.consignee)+" "+b(ul.value.mobile),1)]),ul.value.shippingTypeName?(m(),c("li",ae,[g(b(i.$t("配送方式"))+"：",1),y("span",null,b(ul.value.shippingTypeName),1)])):f("",!0),y("li",null,[g(b(i.$t("支付方式"))+"：",1),y("span",null,b(1===ul.value.payTypeId?i.$t("在线支付"):2===ul.value.payTypeId?i.$t("货到付款"):i.$t("线下支付")),1)]),6===ul.value.orderType&&ul.value.items[0].virtualSample?(m(),c("li",te,[g(b(i.$t("虚拟内容"))+"：",1),y("span",{class:"virtualsample-value",innerHTML:ul.value.items[0].virtualSample},null,8,se)])):f("",!0)])]),h(rl)?(m(),c("div",oe,[y("div",ue,b(i.$t("卡券信息")),1),(m(!0),c(j,null,A(ul.value.items,e=>(m(),c(j,null,[y("div",ie,b(e.productName),1),e.eCard.length>0?(m(),c("ul",re,[(m(!0),c(j,null,A(e.eCard,e=>(m(),c("li",{class:"virtualsample-item",key:e},[y("div",de,[g(b(i.$t("卡号"))+"：",1),y("span",null,b(e.cardNumber),1)]),y("div",ne,[g(b(i.$t("卡密"))+"：",1),y("span",null,b(e.cardPwd),1)])]))),128))])):f("",!0)],64))),256))])):f("",!0),y("div",ve,[y("div",ce,b(i.$t("订单商品")),1),y("table",me,[y("thead",null,[y("tr",pe,[y("th",null,b(i.$t("商品名称")),1),y("th",null,b(i.$t("商品价格")),1),y("th",null,b(i.$t("购买数量")),1),y("th",null,b(i.$t("小计")),1),ul.value.availableActions.toAftersales?(m(),c("th",ye,b(i.$t("操作")),1)):f("",!0)])]),y("tbody",null,[(m(!0),c(j,null,A(ul.value.items,e=>{var l;return m(),c("tr",fe,[y("td",be,[y("div",null,[y("img",{alt:e.productName,src:("imageFormat"in i?i.imageFormat:h(x))(e.picThumb),class:"img-border"},null,8,ke),g(" "+b(e.productName)+" ",1),e.skuData?(m(),c("div",ge,[(m(!0),c(j,null,A(e.skuData,e=>(m(),c("div",null,b(e.name)+"："+b(e.value),1))),256))])):f("",!0),e.extraSkuData&&e.extraSkuData.length?(m(),c("div",he,[(m(!0),c(j,null,A(e.extraSkuData,l=>(m(),c("div",{key:l,class:"extraskudata-item"},[y("div",$e,b(l.attrName),1),r[10]||(r[10]=y("div",{class:"line-box"},[y("div",{class:"line"})],-1)),y("div",Ve,[y("span",je,b(l.attrValue),1),p(N,{class:"price",modelValue:l.attrPrice,"onUpdate:modelValue":e=>l.attrPrice=e},null,8,["modelValue","onUpdate:modelValue"]),y("span",Ae,"x"+b(e.quantity),1)])]))),128))])):f("",!0)])]),y("td",Ie,[p(N,{modelValue:e.price,"onUpdate:modelValue":l=>e.price=l},null,8,["modelValue","onUpdate:modelValue"])]),y("td",xe,b(e.quantity),1),y("td",_e,[p(N,{modelValue:e.subtotal,"onUpdate:modelValue":l=>e.subtotal=l},null,8,["modelValue","onUpdate:modelValue"])]),2===ul.value.payStatus?(m(),c("td",Se,[0===e.isGift?(m(),c(j,{key:0},[e.aftersalesItem?(m(),V(U,{key:0,target:"_blank",to:"/member/return/logInfo?id="+(null==(l=null==e?void 0:e.aftersalesItem)?void 0:l.aftersaleId)},{default:k(()=>[p(S,{size:"small"},{default:k(()=>[g(b(i.$t("售后详情")),1)]),_:1})]),_:2},1032,["to"])):ul.value.availableActions.toAftersales?(m(),V(U,{key:1,target:"_blank",to:"/member/return/Info?orderId="+ul.value.orderId+"&itemId="+e.itemId},{default:k(()=>[p(S,{size:"small"},{default:k(()=>[g(b(i.$t("申请售后")),1)]),_:1})]),_:2},1032,["to"])):f("",!0)],64)):f("",!0)])):f("",!0)])}),256))]),y("tfoot",null,[y("tr",Ue,[y("th",{colspan:ul.value.availableActions.toAftersales?3:2},null,8,Ne),y("th",Te,[y("div",Fe,[y("div",we,b(i.$t("商品总价"))+"：",1),y("div",Ce,[p(N,{modelValue:ul.value.productAmount,"onUpdate:modelValue":r[1]||(r[1]=e=>ul.value.productAmount=e)},null,8,["modelValue"])])]),ul.value.serviceFee&&ul.value.serviceFee>0?(m(),c("div",De,[y("div",Pe,b(i.$t("附加费用"))+"：",1),y("div",Me,[p(N,{modelValue:ul.value.serviceFee,"onUpdate:modelValue":r[2]||(r[2]=e=>ul.value.serviceFee=e)},null,8,["modelValue"])])])):f("",!0),ul.value.shippingFee>0?(m(),c("div",Le,[y("div",Oe,b(i.$t("运费"))+"：",1),y("div",qe,[p(N,{modelValue:ul.value.shippingFee,"onUpdate:modelValue":r[3]||(r[3]=e=>ul.value.shippingFee=e)},null,8,["modelValue"])])])):f("",!0),ul.value.balance>0?(m(),c("div",ze,[y("div",Re,b(i.$t("使用余额"))+"：",1),y("div",Ee,[p(N,{modelValue:ul.value.balance,"onUpdate:modelValue":r[4]||(r[4]=e=>ul.value.balance=e)},null,8,["modelValue"])])])):f("",!0),ul.value.pointsAmount>0?(m(),c("div",He,[y("div",Ge,b(i.$t("使用积分"))+"：",1),y("div",Qe,[p(N,{modelValue:ul.value.pointsAmount,"onUpdate:modelValue":r[5]||(r[5]=e=>ul.value.pointsAmount=e)},null,8,["modelValue"])])])):f("",!0),ul.value.discountAmount>0?(m(),c("div",Xe,[y("div",Ye,b(i.$t("其他优惠"))+"：",1),y("div",Ze,[r[11]||(r[11]=g(" - ")),p(N,{modelValue:ul.value.discountAmount,"onUpdate:modelValue":r[6]||(r[6]=e=>ul.value.discountAmount=e)},null,8,["modelValue"])])])):f("",!0),ul.value.couponAmount>0?(m(),c("div",Be,[y("div",Je,b(i.$t("优惠券优惠"))+"：",1),y("div",Ke,[r[12]||(r[12]=g(" - ")),p(N,{modelValue:ul.value.couponAmount,"onUpdate:modelValue":r[7]||(r[7]=e=>ul.value.couponAmount=e)},null,8,["modelValue"])])])):f("",!0),ul.value.unpaidAmount&&ul.value.unpaidAmount>0?(m(),c("div",We,[y("div",el,b(i.$t("待支付金额"))+"：",1),y("div",ll,[p(N,{modelValue:ul.value.unpaidAmount,"onUpdate:modelValue":r[8]||(r[8]=e=>ul.value.unpaidAmount=e)},null,8,["modelValue"])])])):f("",!0),y("div",al,[2==ul.value.payStatus?(m(),c("span",tl,b(i.$t("实付款"))+"：",1)):(m(),c("span",sl,b(i.$t("应付款"))+"：",1)),p(N,{modelValue:ul.value.totalAmount,"onUpdate:modelValue":r[9]||(r[9]=e=>ul.value.totalAmount=e),fontStyle:{fontSize:"20px",color:"var(--price)"}},null,8,["modelValue"])])])])])])])])])]),p(T)],64)}}}),[["__scopeId","data-v-07cc3731"]]);export{ol as default};

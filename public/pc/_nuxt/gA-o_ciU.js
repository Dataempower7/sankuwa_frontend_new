import{aH as e,e as l,cw as a,cx as s,r as n,y as t,z as u,v as i,B as c,c as v,o,a as r,i as d,F as g,m as h,d as p,t as m,x as f,af as k,_ as y}from"./r4GZdGYg.js";/* empty css        */const _={class:"flex align-center"},x={key:0},w={key:1},j={key:0,class:"select_popup"},C={class:"top flex justify-between"},b={class:"tabs flex"},I=["onClick"],E={key:0,class:"sec_childs"},V=["onClick"],L=y(l({__name:"SelectRegion",props:{modelValue:{default:[]},modelModifiers:{}},emits:a(["change"],["update:modelValue"]),setup(l,{emit:a}){const y=s(l,"modelValue"),L=n(!1),N=n([]),R=n(0),S=a;t(()=>{z()});const{t:$}=u(),z=async()=>{try{let a=y.value.join();const s=await(l=a,e({url:"sys/region/getRegion",method:"get",params:{regionIds:l}}));Object.assign(N.value,s),N.value.length>1?N.value[N.value.length-1].length>0?R.value=N.value.length-1:R.value=N.value.length-2:R.value=0}catch(a){}var l},B=e=>y.value.includes(e),F=()=>{L.value=!0,z()},H=i(()=>{let e=[];return N.value.forEach((l,a)=>{if(l.length>0){let s=!1;l.forEach(l=>{B(l.regionId)&&(e[a]=l.regionName,s=!0)}),0==s&&(e[a]=$("请选择地区"))}}),e}),M=()=>{!0===L.value&&y.value.length!=H.value.length&&(y.value=[],N.value=[],R.value=0),L.value=!1},O=n(null),P=e=>{O.value&&!O.value.contains(e.target)&&M()};return t(()=>{window.addEventListener("click",P)}),c(()=>{window.removeEventListener("click",P)}),(e,l)=>(o(),v("div",{class:"select_region_box",ref_key:"selectPop",ref:O},[r("div",_,[r("div",{class:"select_region hand-pointer flex align-center",onClick:F},[H.value.length>0?(o(),v("div",x,[(o(!0),v(g,null,h(H.value,(e,l)=>(o(),v(g,null,[p(m(e)+" ",1)],64))),256))])):d("",!0),0==H.value.length?(o(),v("div",w,m(e.$t("请选择地区")),1)):d("",!0),l[0]||(l[0]=r("i",{class:"iconfont-pc icon-xiajiantou"},null,-1))])]),L.value?(o(),v("div",j,[r("div",C,[r("div",b,[(o(!0),v(g,null,h(H.value,(l,a)=>(o(),v("div",{class:f(["tab",{cur:R.value===a}]),onClick:e=>R.value=a},m(l||e.$t("请选择")),11,I))),256))]),N.value.length==R.value+1?(o(),v("div",{key:0,class:"selectclose",onClick:k(M,["stop"])},"×")):d("",!0)]),(o(!0),v(g,null,h(N.value,(e,l)=>(o(),v(g,null,[R.value===l?(o(),v("div",E,[(o(!0),v(g,null,h(e,e=>(o(),v("span",{class:f(["sec_item",{active:B(e.regionId)}]),onClick:a=>(async(e,l)=>{e>=0&&e<=y.value.length&&(y.value[e]=l,y.value.splice(e+1)),await z(),N.value.length==e+1||0==N.value[e+1].length?L.value=!1:R.value=e+1,S("change")})(l,e.regionId)},m(e.regionName),11,V))),256))])):d("",!0)],64))),256))])):d("",!0)],512))}}),[["__scopeId","data-v-e9d1d549"]]);export{L as S};

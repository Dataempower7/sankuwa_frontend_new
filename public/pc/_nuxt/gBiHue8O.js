import{_ as j}from"./Drr4mNEN.js";import{b as G}from"./5VTus1_X.js";import{_ as J}from"./B85mN9rA.js";import{aw as R,r as _,e as B,ax as $,f as A,ar as D,ay as P,y as H,B as K,c,o as r,F as w,a as t,i as C,m as O,b as l,j as d,s as Q,w as x,E as W,k as X,t as e,d as Y,n as Z,p as tt,az as ot,_ as q,v as et,h as st,aA as at}from"./BjkHNVA8.js";import{_ as nt}from"./CBcH1uzJ.js";import{_ as it}from"./BipSnJcb.js";import{E as rt}from"./B_vjKAZC.js";import{P as lt}from"./BmiGu4wZ.js";import{g as ct}from"./TIyJFtn7.js";import"./XdJ5ILcf.js";import"./CM_M6Xgj.js";import"./n1vI1_Nv.js";import"./ClRMjIOJ.js";import"./BKu6lkEW.js";import"./BIqqf5dq.js";import"./CH9-T1LE.js";import"./CXwPJP5h.js";import"./d3UjsK-T.js";import"./FYm-MTMW.js";import"./cfDoaBtk.js";import"./C1B8-dXF.js";import"./Bnvi_g-K.js";import"./yB3A8U-z.js";import"./UVx7YjW9.js";import"./BzIkMksr.js";/* empty css        */import"./Csy7st1x.js";import"./BhwkTUtM.js";import"./Ibc-iJtI.js";/* empty css        */import"./BNVM5YSV.js";const dt=R("joining",()=>({total:_(0)})),ut={class:"goods-list-c"},pt={class:"wrap"},mt={class:"g-item-warp"},_t={class:"pic"},gt={class:"countdown"},vt={class:"title"},ft={key:0,class:"countdown-time"},ht={class:"time"},yt={class:"text"},Pt={key:1,class:"countdown-time"},wt={class:"time"},kt={class:"titleBox"},$t={class:"tag"},Ct={class:"title"},xt={class:"priceBox"},Bt={class:"priceBoxNum"},qt={class:"old"},It={class:"text"},St={key:0,class:"search-empty"},bt={class:"bd"},Ft={class:"pagination"},Lt=B({__name:"JoiningGoodsList",props:$({attrs:{type:Array,default:()=>[]}},{filter:{},filterModifiers:{},queryParams:{},queryParamsModifiers:{},loadingProduct:{},loadingProductModifiers:{}}),emits:$(["change","pageChange"],["update:filter","update:queryParams","update:loadingProduct"]),setup(u,{emit:g}){A();const s=dt(),n=D(),i=_(!1),v=_(25),f=g,p=P(u,"filter"),m=P(u,"queryParams"),I=P(u,"loadingProduct"),h=_([]);let y=null;const S=async()=>{i.value=!0;try{const o=await ct({...m.value,size:v.value});h.value=o.records,s.total=o.total,y=window.setInterval(()=>{N()},1e3)}catch(o){tt.error(o.message)}finally{i.value=!1}},b=_(null),F=()=>{f("change",p.value.page),f("pageChange")},L=()=>{n.replace({path:n.currentRoute.value.path,query:{}})},N=()=>{h.value.forEach(o=>{o.endTime&&(o.countdownText=ot(new Date(o.endTime).getTime()))})};return H(()=>{S()}),K(()=>{y&&clearInterval(y)}),(o,k)=>{const T=W,V=nt,z=it,U=rt;return r(),c(w,null,[t("div",{class:"goods-list__box",ref_key:"productBox",ref:b},[t("div",ut,[t("div",pt,[(r(!0),c(w,null,O(h.value,(a,E)=>(r(),c("div",{class:"item",key:E},[l(z,{to:d(Q)({path:"product",sn:a.productSn,type:"invited"}),target:"_blank"},{default:x(()=>[t("div",mt,[t("div",_t,[l(T,{class:"ease",lazy:"",src:d(X)(a.picUrl),style:{transition:"opacity 0.2s linear"}},null,8,["src"]),t("div",gt,[t("div",vt,e(o.$t("拼团")),1),a.countdownText?(r(),c("div",ft,[t("div",ht,e(o.$t("距离结束仅剩")),1),t("div",yt,e(a.countdownText),1)])):(r(),c("div",Pt,[t("div",wt,e(o.$t("已结束")),1)]))])]),t("div",kt,[t("div",$t,e(a.joinNumCount||2)+e(o.$t("人团")),1),t("div",Ct,e(a.productName),1)]),t("div",xt,[t("div",Bt,[l(V,{class:"minGrouponPrice",decimalsStyle:{fontSize:"14px",alignSelf:"self-end"},modelValue:a.minGrouponPrice,"onUpdate:modelValue":M=>a.minGrouponPrice=M},null,8,["modelValue","onUpdate:modelValue"]),t("div",qt,"¥"+e(a.productPrice),1)]),t("div",It,e(o.$t("拼")),1)])])]),_:2},1032,["to"])]))),128)),h.value.length===0&&!I.value?(r(),c("div",St,[t("div",bt,[t("h4",null,e(o.$t("好狠的筛选条件啊，把相关的商品都埋没了！")),1),t("p",null,e(o.$t("建议您")),1),t("p",null,e(o.$t("1、适当减少筛选条件")),1),t("p",null,e(o.$t("2、调整价格区间")),1),t("p",null,e(o.$t("3、尝试其他关键字")),1),l(U,{class:"graybtn mt10",onClick:L},{default:x(()=>[Y(e(o.$t("返回上一步")),1)]),_:1})])])):C("",!0)])])],512),t("div",Ft,[d(s).total>0?(r(),Z(d(lt),{key:0,page:p.value.page,"onUpdate:page":k[0]||(k[0]=a=>p.value.page=a),size:v.value,total:d(s).total,onCallback:F},null,8,["page","size","total"])):C("",!0)])],64)}}}),Nt=q(Lt,[["__scopeId","data-v-9c49513a"]]),Tt={class:"seckill-con"},Vt={class:"container joining-content"},zt=B({__name:"List",setup(u){const g=et(()=>{let n={};return s.page>1&&(n.page=s.page),s.shopId>0&&(n.shopId=s.shopId),s.keyword!=""&&(n.keyword=s.keyword),n}),s=st({page:1,keyword:"",shopId:-1});return(n,i)=>{const v=j,f=G,p=J;return r(),c(w,null,[l(v,{title:n.$t("拼团")},null,8,["title"]),l(f),t("div",Tt,[i[2]||(i[2]=t("div",{class:"slogan"},null,-1)),t("div",Vt,[l(Nt,{queryParams:g.value,"onUpdate:queryParams":i[0]||(i[0]=m=>g.value=m),filter:d(s),"onUpdate:filter":i[1]||(i[1]=m=>at(s)?s.value=m:null)},null,8,["queryParams","filter"])])]),l(p)],64)}}}),go=q(zt,[["__scopeId","data-v-894ce0d7"]]);export{go as default};
